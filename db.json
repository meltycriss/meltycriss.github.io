{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"source/CNAME","path":"CNAME","modified":1,"renderable":0},{"_id":"themes/next/source/css/main.styl","path":"css/main.styl","modified":1,"renderable":1},{"_id":"themes/next/source/images/algolia_logo.svg","path":"images/algolia_logo.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/avatar.gif","path":"images/avatar.gif","modified":1,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","path":"images/cc-by-nc-nd.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","path":"images/cc-by-nc-sa.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc.svg","path":"images/cc-by-nc.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/cc-by-nd.svg","path":"images/cc-by-nd.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/cc-by-sa.svg","path":"images/cc-by-sa.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/cc-by.svg","path":"images/cc-by.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/cc-zero.svg","path":"images/cc-zero.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/loading.gif","path":"images/loading.gif","modified":1,"renderable":1},{"_id":"themes/next/source/images/placeholder.gif","path":"images/placeholder.gif","modified":1,"renderable":1},{"_id":"themes/next/source/images/quote-l.svg","path":"images/quote-l.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/quote-r.svg","path":"images/quote-r.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/searchicon.png","path":"images/searchicon.png","modified":1,"renderable":1},{"_id":"themes/next/source/js/src/affix.js","path":"js/src/affix.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/src/algolia-search.js","path":"js/src/algolia-search.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/src/bootstrap.js","path":"js/src/bootstrap.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/src/hook-duoshuo.js","path":"js/src/hook-duoshuo.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/src/motion.js","path":"js/src/motion.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/src/post-details.js","path":"js/src/post-details.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/src/scrollspy.js","path":"js/src/scrollspy.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/src/utils.js","path":"js/src/utils.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/algolia-instant-search/instantsearch.min.css","path":"lib/algolia-instant-search/instantsearch.min.css","modified":1,"renderable":1},{"_id":"themes/next/source/lib/canvas-nest/canvas-nest.min.js","path":"lib/canvas-nest/canvas-nest.min.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fastclick/LICENSE","path":"lib/fastclick/LICENSE","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fastclick/README.md","path":"lib/fastclick/README.md","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fastclick/bower.json","path":"lib/fastclick/bower.json","modified":1,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/HELP-US-OUT.txt","path":"lib/font-awesome/HELP-US-OUT.txt","modified":1,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/bower.json","path":"lib/font-awesome/bower.json","modified":1,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/CONTRIBUTING.md","path":"lib/jquery_lazyload/CONTRIBUTING.md","modified":1,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/README.md","path":"lib/jquery_lazyload/README.md","modified":1,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/bower.json","path":"lib/jquery_lazyload/bower.json","modified":1,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/jquery.lazyload.js","path":"lib/jquery_lazyload/jquery.lazyload.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/jquery.scrollstop.js","path":"lib/jquery_lazyload/jquery.scrollstop.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/velocity/bower.json","path":"lib/velocity/bower.json","modified":1,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.min.js","path":"lib/velocity/velocity.min.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.ui.js","path":"lib/velocity/velocity.ui.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.ui.min.js","path":"lib/velocity/velocity.ui.min.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/jquery/index.js","path":"lib/jquery/index.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/src/schemes/pisces.js","path":"js/src/schemes/pisces.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/blank.gif","path":"lib/fancybox/source/blank.gif","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_loading.gif","path":"lib/fancybox/source/fancybox_loading.gif","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_loading@2x.gif","path":"lib/fancybox/source/fancybox_loading@2x.gif","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_overlay.png","path":"lib/fancybox/source/fancybox_overlay.png","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_sprite.png","path":"lib/fancybox/source/fancybox_sprite.png","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_sprite@2x.png","path":"lib/fancybox/source/fancybox_sprite@2x.png","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.css","path":"lib/fancybox/source/jquery.fancybox.css","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.js","path":"lib/fancybox/source/jquery.fancybox.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fastclick/lib/fastclick.js","path":"lib/fastclick/lib/fastclick.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fastclick/lib/fastclick.min.js","path":"lib/fastclick/lib/fastclick.min.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css","path":"lib/font-awesome/css/font-awesome.css","modified":1,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css.map","path":"lib/font-awesome/css/font-awesome.css.map","modified":1,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.min.css","path":"lib/font-awesome/css/font-awesome.min.css","modified":1,"renderable":1},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.min.js","path":"lib/ua-parser-js/dist/ua-parser.min.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.pack.js","path":"lib/ua-parser-js/dist/ua-parser.pack.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.pack.js","path":"lib/fancybox/source/jquery.fancybox.pack.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.eot","path":"lib/font-awesome/fonts/fontawesome-webfont.eot","modified":1,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff","path":"lib/font-awesome/fonts/fontawesome-webfont.woff","modified":1,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff2","path":"lib/font-awesome/fonts/fontawesome-webfont.woff2","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/fancybox_buttons.png","path":"lib/fancybox/source/helpers/fancybox_buttons.png","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.css","path":"lib/fancybox/source/helpers/jquery.fancybox-buttons.css","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.js","path":"lib/fancybox/source/helpers/jquery.fancybox-buttons.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-media.js","path":"lib/fancybox/source/helpers/jquery.fancybox-media.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.css","path":"lib/fancybox/source/helpers/jquery.fancybox-thumbs.css","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.js","path":"lib/fancybox/source/helpers/jquery.fancybox-thumbs.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/FontAwesome.otf","path":"lib/font-awesome/fonts/FontAwesome.otf","modified":1,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.js","path":"lib/velocity/velocity.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.ttf","path":"lib/font-awesome/fonts/fontawesome-webfont.ttf","modified":1,"renderable":1},{"_id":"themes/next/source/lib/algolia-instant-search/instantsearch.min.js","path":"lib/algolia-instant-search/instantsearch.min.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.svg","path":"lib/font-awesome/fonts/fontawesome-webfont.svg","modified":1,"renderable":1}],"Cache":[{"_id":"source/CNAME","hash":"4ee9f53b2f454d366c75978ad3c8dd83ca7614b2","modified":1723565027848},{"_id":"themes/next/.bowerrc","hash":"3228a58ed0ece9f85e1e3136352094080b8dece1","modified":1723565027896},{"_id":"themes/next/.editorconfig","hash":"792fd2bd8174ece1a75d5fd24ab16594886f3a7f","modified":1723565027896},{"_id":"themes/next/.gitignore","hash":"5f09fca02e030b7676c1d312cd88ce8fbccf381c","modified":1723565027896},{"_id":"themes/next/.hound.yml","hash":"b76daa84c9ca3ad292c78412603370a367cc2bc3","modified":1723565027896},{"_id":"themes/next/.javascript_ignore","hash":"f9ea3c5395f8feb225a24e2c32baa79afda30c16","modified":1723565027896},{"_id":"themes/next/.jshintrc","hash":"9928f81bd822f6a8d67fdbc909b517178533bca9","modified":1723565027896},{"_id":"themes/next/README.en.md","hash":"3b0c7998cf17f9cf9e1a5bfcd65679a43a00c817","modified":1723565027896},{"_id":"themes/next/README.md","hash":"500b5606eb6a09c979d16128f8b00f4bf9bc95ac","modified":1723565027896},{"_id":"themes/next/_config.yml","hash":"da0c38f7d5ee14ed7dcc0a7299f79250fc532a55","modified":1723734428764},{"_id":"themes/next/bower.json","hash":"5abc236d9cc2512f5457ed57c1fba76669eb7399","modified":1723565027896},{"_id":"themes/next/gulpfile.coffee","hash":"61ef0606a8134894d7ac796bc8d0fa4ba6a94483","modified":1723565027896},{"_id":"themes/next/package.json","hash":"877cb98025e59015532c4c9a04a33e2af4ad56f9","modified":1723565027904},{"_id":"source/_posts/caffe-configuration.md","hash":"8daca41d462aafd288a0a3c13c690ae7dce17d63","modified":1723565027848},{"_id":"source/_posts/caffe_1_layer.md","hash":"265f14e638460bdbbace98b7c2d5b3bc57be0bde","modified":1723565027848},{"_id":"source/_posts/caffe_2_rnn.md","hash":"4ef886a5b1b770a3b78b679669e5a90abaf01829","modified":1723565027848},{"_id":"source/_posts/caffe_3_s2vt_data_process.md","hash":"fd4b46c89bff90952839d5e5aa15adff5a9b7dd1","modified":1723565027848},{"_id":"source/_posts/caffe_4_lstm.md","hash":"8c8b083764de39e570d507480fb535bc9827040b","modified":1723565027848},{"_id":"source/_posts/caffe_5_s2vt_captioner.md","hash":"b5427b7ae7a6a456a986b4e2a8e8de888f5a65e2","modified":1723565027848},{"_id":"source/_posts/imagenet.md","hash":"8bb948100ee41b5c6ed6437f3de227d9fa9a808e","modified":1723565027848},{"_id":"source/_posts/mindmap-goutongdeyishu.md","hash":"cc494412d7fb21e8c9f8b250a9a891f7f9c1154d","modified":1723565027848},{"_id":"source/_posts/mindmap-jingjin.md","hash":"64667d55001c323e09277d9924c25f5acdfaef78","modified":1723565027848},{"_id":"source/_posts/mindmap-zhexuejiamendouganlexieshenme.md","hash":"ab7e1e29e78f782cbb3a14a9c78ea3075a01b45a","modified":1723565027848},{"_id":"source/_posts/note-a-tour-of-cpp-1.md","hash":"4a8316be9b313f8e7ea180eb7c9e45d134034f41","modified":1723565027848},{"_id":"source/_posts/note-essence-of-linear-algrbra.md","hash":"88b47159c4953973ec2d84af470e3d5ec77d7da5","modified":1723565027848},{"_id":"source/_posts/note-learning-how-to-learn.md","hash":"a7d3f9421f1ab83892310fc48752bf0da77b07dc","modified":1723565027852},{"_id":"source/_posts/note-linear-algebra.md","hash":"2fae61a9039de51214223bf6d12c4f8b023a8d00","modified":1723565027852},{"_id":"source/_posts/note-reinforcement-learning.md","hash":"e47e621703b7572c0373fae19d9390bbf381b6c9","modified":1723565027856},{"_id":"source/_posts/paper-acktr.md","hash":"007a14db1bd305f965c0d7f7fee900ba5639947a","modified":1723565027864},{"_id":"source/_posts/paper-orca.md","hash":"45a7f4491102fd14cf5546f079288a146dff719e","modified":1723565027864},{"_id":"source/_posts/paper-prioritized-experience-replay.md","hash":"b9db96892cb64b4085fbcb01b9b72956a6462ac9","modified":1723565027864},{"_id":"source/_posts/paper-rvo.md","hash":"1ec8523135848e2677cb767e96e7ed92cdaecc38","modified":1723565027868},{"_id":"source/_posts/paper_rcnn.md","hash":"6dc2e9f10392312fcdc46d994f0eb51cc0173035","modified":1723565027872},{"_id":"source/_posts/source-carlaue5-architecture.md","hash":"99a66726009e89f775c0fde11ed8c86dcfce1f64","modified":1723642678881},{"_id":"source/_posts/source-ppo.md","hash":"8644688cfcb748ab53d3cb2779bcfd9c8f317c1b","modified":1723565027872},{"_id":"source/_posts/summary-derivative.md","hash":"14d1d751d94a00ff3629ac1599596c53d707209c","modified":1723565027872},{"_id":"source/_posts/summary-gps.md","hash":"a72bf7255121079f224a5dfda9c47373996995ca","modified":1723565027876},{"_id":"source/_posts/summary-rl-drl.md","hash":"8305b58e791c82e16ec60e53e2348b046986f0c1","modified":1723565027884},{"_id":"source/_posts/tech-gym.md","hash":"69a28c70ca0a33892f57e2f11cd46a945282987f","modified":1723565027884},{"_id":"source/_posts/tech-ubuntu-bluetooth.md","hash":"4ad63afa5e8bf8c8f3a38ea9b168720507bd4cd2","modified":1723565027884},{"_id":"source/_posts/tech-ubuntu-to-go.md","hash":"b02de5dd54175a750057bb25aa20036d550a3c82","modified":1723565027884},{"_id":"source/_posts/tech-vimrc.md","hash":"9fdfe2b078a9ec35c97de806c47bca84cee6c3e7","modified":1723565027884},{"_id":"source/_posts/tech-windows-ue5-carla-build.md","hash":"7182baf7593eeb78d58fc8cf278b89a42b467b8b","modified":1723565027884},{"_id":"source/about/index.md","hash":"cbe8f118960b17c526c1ebdf0761c9d53fd65157","modified":1723565027884},{"_id":"source/tags/index.md","hash":"94bbb384e5e284787dbcef35f9ea0208409c2527","modified":1723565027884},{"_id":"themes/next/.github/CONTRIBUTING.md","hash":"5ab257af816986cd0e53f9527a92d5934ac70ae9","modified":1723565027896},{"_id":"themes/next/.github/ISSUE_TEMPLATE.md","hash":"c2024ded82143807c28a299c5fe6b927ef3525ff","modified":1723565027896},{"_id":"themes/next/languages/de.yml","hash":"1fdea1f84b7f691f5b4dd4d2b43eeb27b10fa0c8","modified":1723565027896},{"_id":"themes/next/languages/default.yml","hash":"767470a80dc257e23e14c3a78e8c52a46c9d6209","modified":1723565027896},{"_id":"themes/next/languages/en.yml","hash":"40057d6608e825d06e0864bac4dcd27ed88ada87","modified":1723565027896},{"_id":"themes/next/languages/fr-FR.yml","hash":"9fca01ef917d33ae2ae6bc04561ec6799dff5351","modified":1723565027896},{"_id":"themes/next/languages/id.yml","hash":"34396bef27c4ab9e9a3c5d3e3aa94b0e3b3a7b0d","modified":1723565027896},{"_id":"themes/next/languages/ja.yml","hash":"49f12149edcc1892b26a6207328cda64da20116d","modified":1723565027896},{"_id":"themes/next/languages/ko.yml","hash":"b6bc5d6b0c000deb44099b42d3aebb8c49dbfca9","modified":1723565027896},{"_id":"themes/next/languages/pt-BR.yml","hash":"7742ba4c0d682cbe1d38305332ebc928abd754b5","modified":1723565027896},{"_id":"themes/next/languages/pt.yml","hash":"6b660b117314cad93f08757601df3adb04c68beb","modified":1723565027896},{"_id":"themes/next/languages/ru.yml","hash":"257d11e626cbe4b9b78785a764190b9278f95c28","modified":1723565027896},{"_id":"themes/next/languages/zh-Hans.yml","hash":"f6c9fafa0f5f0050cd07ca2cf5e38fbae3e28145","modified":1723565027896},{"_id":"themes/next/languages/zh-hk.yml","hash":"34c84c6d04447a25bd5eac576922a13947c000e2","modified":1723565027896},{"_id":"themes/next/languages/zh-tw.yml","hash":"c97a5c41149de9b17f33439b0ecf0eff6fdae50e","modified":1723565027896},{"_id":"themes/next/layout/_layout.swig","hash":"2fa3c74066843a859fac77803324a1de51044da9","modified":1723565027900},{"_id":"themes/next/layout/archive.swig","hash":"b5b59d70fc1563f482fa07afd435752774ad5981","modified":1723565027904},{"_id":"themes/next/layout/category.swig","hash":"6422d196ceaff4220d54b8af770e7e957f3364ad","modified":1723565027904},{"_id":"themes/next/layout/index.swig","hash":"427d0b95b854e311ae363088ab39a393bf8fdc8b","modified":1723565027904},{"_id":"themes/next/layout/page.swig","hash":"3727fab9dadb967e9c2204edca787dc72264674a","modified":1723565027904},{"_id":"themes/next/layout/post.swig","hash":"e2e512142961ddfe77eba29eaa88f4a2ee43ae18","modified":1723565027904},{"_id":"themes/next/layout/schedule.swig","hash":"1f1cdc268f4ef773fd3ae693bbdf7d0b2f45c3a3","modified":1723565027904},{"_id":"themes/next/layout/tag.swig","hash":"07cf49c49c39a14dfbe9ce8e7d7eea3d4d0a4911","modified":1723565027904},{"_id":"themes/next/scripts/merge-configs.js","hash":"0c56be2e85c694247cfa327ea6d627b99ca265e8","modified":1723565027904},{"_id":"themes/next/test/.jshintrc","hash":"19f93d13d1689fe033c82eb2d5f3ce30b6543cc0","modified":1723565027936},{"_id":"themes/next/test/helpers.js","hash":"a1f5de25154c3724ffc24a91ddc576cdbd60864f","modified":1723565027936},{"_id":"themes/next/test/intern.js","hash":"11fa8a4f5c3b4119a179ae0a2584c8187f907a73","modified":1723565027936},{"_id":"themes/next/source/fonts/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1723565027916},{"_id":"source/_posts/note-essence-of-linear-algrbra/combination.png","hash":"7fff8d00a0245e19564c05b2037f3f7d836a6e36","modified":1723565027848},{"_id":"source/_posts/note-essence-of-linear-algrbra/dot_product_order.png","hash":"7e98037126903e36880c30bacc83b6232787f9ca","modified":1723565027848},{"_id":"source/_posts/note-essence-of-linear-algrbra/dot_product_projection.png","hash":"d85a3e7b264bb1bff7624a85a6f9f6ef2de727f3","modified":1723565027848},{"_id":"source/_posts/note-essence-of-linear-algrbra/representation.png","hash":"19ad51b9238092074ec0b0dae6c47aaf3940c7b7","modified":1723565027848},{"_id":"source/_posts/note-essence-of-linear-algrbra/transformation.png","hash":"0bf2d5acd0d7e7a81df341aca79c9082a2b194a6","modified":1723565027852},{"_id":"source/_posts/note-reinforcement-learning/lec1_Intro_to_RL.png","hash":"7ea12e992a3e1286dab7a50b1868db90399f9033","modified":1723565027856},{"_id":"source/_posts/note-reinforcement-learning/lec3_Planning_by_DP.png","hash":"3768d82b093bc44890435da2da314704c5d92485","modified":1723565027860},{"_id":"source/_posts/note-reinforcement-learning/lec9_Exploration_and_Exploitation.png","hash":"a5b60b7951e0aaf8a1be5fdbda7dfa14b63739f6","modified":1723565027864},{"_id":"source/_posts/paper-orca/orca_sol.png","hash":"18e1ed3a4bd3ca056c1a1944e866c224f4d5be62","modified":1723565027864},{"_id":"source/_posts/paper-prioritized-experience-replay/env.png","hash":"6bb91e717c7802f102ec72005a930cdc605bd17e","modified":1723565027868},{"_id":"source/_posts/paper-prioritized-experience-replay/fig.png","hash":"0811b241f509eeb147e0682fdb9b2036155d5e64","modified":1723565027868},{"_id":"source/_posts/paper-rvo/left_right.png","hash":"4c42a652cdc5dea16e432cebfea3edf9a8c32189","modified":1723565027868},{"_id":"source/_posts/paper-rvo/oscillation.png","hash":"fb6232bb65cb8c3550060247c48d2aa9283547d6","modified":1723565027868},{"_id":"source/_posts/paper-rvo/prob_disc.png","hash":"3580292f8e4e853a79dff930bf07be0d6752350f","modified":1723565027868},{"_id":"source/_posts/paper-rvo/prob_sol.png","hash":"021f98d1225200335f37a63881d7733986ea7264","modified":1723565027868},{"_id":"source/_posts/summary-derivative/bp1.png","hash":"e3aad72351087efdf3ef6e6fbdb99792039a46b4","modified":1723565027872},{"_id":"source/_posts/summary-derivative/bp2.png","hash":"6d19f03c276c7aaaee4911eea9f8d37796a478ae","modified":1723565027872},{"_id":"source/_posts/summary-derivative/bp3.png","hash":"00d38a54775dfd8015fd45b0afceefa7975b1ccf","modified":1723565027872},{"_id":"source/_posts/summary-derivative/rnn.png","hash":"2b658f64d3db195da40fe5cf80674687055196ea","modified":1723565027876},{"_id":"source/_posts/summary-derivative/softmax.png","hash":"477d7fe77499f6d01202edc3e34350f24680ddd1","modified":1723565027876},{"_id":"source/_posts/summary-gps/1.png","hash":"ab590897eac804ae593beb48bca2aea1fb329050","modified":1723565027876},{"_id":"source/_posts/summary-gps/lqr.png","hash":"50a5d0e7f7291e8099ad4f808fef69b58c4eb003","modified":1723565027884},{"_id":"source/_posts/summary-rl-drl/ppo_objective.png","hash":"88efe85eba5758c768b118156f73da9872e6c31e","modified":1723565027884},{"_id":"themes/next/layout/_custom/header.swig","hash":"adc83b19e793491b1c6ea0fd8b46cd9f32e592fc","modified":1723565027900},{"_id":"themes/next/layout/_custom/sidebar.swig","hash":"adc83b19e793491b1c6ea0fd8b46cd9f32e592fc","modified":1723565027900},{"_id":"themes/next/layout/_macro/post-collapse.swig","hash":"5864f5567ba5efeabcf6ea355013c0b603ee07f2","modified":1723565027900},{"_id":"themes/next/layout/_macro/post.swig","hash":"e6016def9b512188f4c2725399c9adc7bc41cdae","modified":1723565027900},{"_id":"themes/next/layout/_macro/reward.swig","hash":"37e5b7c42ec17b9b6b786c5512bcc481a21c974e","modified":1723565027900},{"_id":"themes/next/layout/_macro/sidebar.swig","hash":"43d8830bb19da4fc7a5773866be19fa066b62645","modified":1723565027900},{"_id":"themes/next/layout/_macro/wechat-subscriber.swig","hash":"14e785adeb0e671ba0ff9a553e6f0d8def6c670c","modified":1723565027900},{"_id":"themes/next/layout/_partials/comments.swig","hash":"78ccfc1dc915247c1fec3c86d742e0f4c2f6d99c","modified":1723565027900},{"_id":"themes/next/layout/_partials/duoshuo-hot-articles.swig","hash":"5d4638c46aef65bf32a01681495b62416ccc98db","modified":1723565027900},{"_id":"themes/next/layout/_partials/footer.swig","hash":"7172c6053118b7c291a56a7860128a652ae66b83","modified":1723565027900},{"_id":"themes/next/layout/_partials/head.swig","hash":"ca56f92e2fa82b03853869f5073ee1a5626a4796","modified":1723565027900},{"_id":"themes/next/layout/_partials/header.swig","hash":"adab5c3f7b173f1b45454787f39dde07aea03483","modified":1723565027900},{"_id":"themes/next/layout/_partials/page-header.swig","hash":"39d613e5a9f8389d4ea52d6082502af8e833b9f2","modified":1723565027900},{"_id":"themes/next/layout/_partials/pagination.swig","hash":"9e8e21d194ef44d271b1cca0bc1448c14d7edf4f","modified":1723565027900},{"_id":"themes/next/layout/_partials/search.swig","hash":"1431719d1dbba3f5ee385eebc46376d1a960b2d5","modified":1723565027900},{"_id":"themes/next/layout/_scripts/baidu-push.swig","hash":"c057b17f79e8261680fbae8dc4e81317a127c799","modified":1723565027900},{"_id":"themes/next/layout/_scripts/boostrap.swig","hash":"03aaebe9d50f6acb007ec38cc04acd1cfceb404d","modified":1723565027900},{"_id":"themes/next/layout/_scripts/commons.swig","hash":"766b2bdda29523ed6cd8d7aa197f996022f8fd94","modified":1723565027900},{"_id":"themes/next/layout/_scripts/vendors.swig","hash":"4512867d80d9eddfc3a0f5fea3c456f33aa9d522","modified":1723565027904},{"_id":"themes/next/scripts/tags/button.js","hash":"62e6dbeb53d07627a048132c79630b45d9a8f2cc","modified":1723565027904},{"_id":"themes/next/scripts/tags/center-quote.js","hash":"535fc542781021c4326dec24d8495cbb1387634a","modified":1723565027904},{"_id":"themes/next/scripts/tags/full-image.js","hash":"8eeb3fb89540299bdbb799edfdfdac3743b50596","modified":1723565027904},{"_id":"themes/next/scripts/tags/group-pictures.js","hash":"49252824cd53184dc9b97b2f2d87ff28e1b3ef27","modified":1723565027904},{"_id":"themes/next/scripts/tags/note.js","hash":"6752925eedbdb939d8ec4d11bdfb75199f18dd70","modified":1723565027904},{"_id":"themes/next/source/css/main.styl","hash":"f4d6504b783a4944d8d456dd7acb7ba21b64f8c7","modified":1723565027916},{"_id":"themes/next/source/images/algolia_logo.svg","hash":"90035272fa31a3f65b3c0e2cb8a633876ef457dc","modified":1723565027916},{"_id":"themes/next/source/images/avatar.gif","hash":"264082bb3a1af70d5499c7d22b0902cb454b6d12","modified":1723565027916},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","hash":"c6524ece3f8039a5f612feaf865d21ec8a794564","modified":1723565027916},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","hash":"3031be41e8753c70508aa88e84ed8f4f653f157e","modified":1723565027916},{"_id":"themes/next/source/images/cc-by-nc.svg","hash":"8d39b39d88f8501c0d27f8df9aae47136ebc59b7","modified":1723565027916},{"_id":"themes/next/source/images/cc-by-nd.svg","hash":"c563508ce9ced1e66948024ba1153400ac0e0621","modified":1723565027916},{"_id":"themes/next/source/images/cc-by-sa.svg","hash":"aa4742d733c8af8d38d4c183b8adbdcab045872e","modified":1723565027916},{"_id":"themes/next/source/images/cc-by.svg","hash":"28a0a4fe355a974a5e42f68031652b76798d4f7e","modified":1723565027916},{"_id":"themes/next/source/images/cc-zero.svg","hash":"87669bf8ac268a91d027a0a4802c92a1473e9030","modified":1723565027916},{"_id":"themes/next/source/images/loading.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1723565027916},{"_id":"themes/next/source/images/placeholder.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1723565027916},{"_id":"themes/next/source/images/quote-l.svg","hash":"94e870b4c8c48da61d09522196d4dd40e277a98f","modified":1723565027916},{"_id":"themes/next/source/images/quote-r.svg","hash":"e60ae504f9d99b712c793c3740c6b100d057d4ec","modified":1723565027916},{"_id":"themes/next/source/images/searchicon.png","hash":"67727a6a969be0b2659b908518fa6706eed307b8","modified":1723565027920},{"_id":"source/_posts/note-essence-of-linear-algrbra/det.png","hash":"ebb7e873f5987d657e4fc7121eb7f8800604278f","modified":1723565027848},{"_id":"source/_posts/note-reinforcement-learning/lec2_MDP.png","hash":"89c39e318abdc30fc5c65db7d79453488ff6e975","modified":1723565027856},{"_id":"source/_posts/note-reinforcement-learning/lec4_Model_Free_Prediction.png","hash":"71162a00429564ceef6dfd329d58748d01006286","modified":1723565027860},{"_id":"source/_posts/note-reinforcement-learning/lec6_Value_Function_Approximation.png","hash":"50434bdb5c6c0ba3d3a80f3ecb786b599e0d1267","modified":1723565027860},{"_id":"source/_posts/note-reinforcement-learning/lec7_Policy_Gradient.png","hash":"e6b33b6be0d0c2de7aea59fcb75e83b5c241a03f","modified":1723565027860},{"_id":"source/_posts/note-reinforcement-learning/lec8_Integrating_Learning_and_Planning.png","hash":"fb387a3f2e67a1d08f0d892cf56111e363d47d67","modified":1723565027864},{"_id":"source/_posts/paper-orca/opt.png","hash":"92aef50ae799ffc7ad40a672c6ac824f2ed81342","modified":1723565027864},{"_id":"source/_posts/paper-orca/orca_app.png","hash":"ebcca0d12534dbc566480dbd7184cbd6ee6722dd","modified":1723565027864},{"_id":"source/_posts/paper-orca/time_interval.png","hash":"0421ecf30741ed973344ce3728d9674c87efe308","modified":1723565027864},{"_id":"source/_posts/paper-rvo/rvo.png","hash":"d22c1078da30825c16b942a4f2aff8155c32181b","modified":1723565027872},{"_id":"source/_posts/paper-rvo/vo.png","hash":"84b84f74b4f83c979842f181b632cc314b30b611","modified":1723565027872},{"_id":"source/_posts/source-carlaue5-architecture/carla.png","hash":"fefb964d9474203661579196432c5601ffdae48e","modified":1723642725985},{"_id":"source/_posts/summary-gps/2.png","hash":"c8e52031e86c63255ee374f6736911fbbdec7a20","modified":1723565027876},{"_id":"source/_posts/summary-gps/3_1.png","hash":"7fb5f326336b0c51974306654728a7403853167a","modified":1723565027880},{"_id":"themes/next/layout/_scripts/schemes/mist.swig","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1723565027900},{"_id":"themes/next/layout/_scripts/schemes/muse.swig","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1723565027900},{"_id":"themes/next/source/css/_mixins/Mist.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1723565027912},{"_id":"themes/next/source/css/_mixins/Muse.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1723565027912},{"_id":"themes/next/source/css/_mixins/custom.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1723565027912},{"_id":"themes/next/source/css/_variables/Muse.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1723565027916},{"_id":"themes/next/source/css/_variables/custom.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1723565027916},{"_id":"source/_posts/source-carlaue5-architecture/pythonapi.png","hash":"10822010b0d821c2060c1be84302e27bc819bd60","modified":1723598425928},{"_id":"source/_posts/summary-derivative/cnn1.png","hash":"71a300c340c5e933cd009fe54462a2d9de4f8d11","modified":1723565027876},{"_id":"source/_posts/summary-gps/3.png","hash":"3b3ed866a498942542c3bc79c27d3d42ec836c2a","modified":1723565027880},{"_id":"source/_posts/summary-gps/3_2.png","hash":"6383a5ce8de41f471675edc6a1d398b68135444f","modified":1723565027880},{"_id":"source/_posts/summary-gps/4.png","hash":"ea3dc37746b8b154fc5ff72a4921ee8158829c45","modified":1723565027884},{"_id":"themes/next/layout/_components/algolia-search/assets.swig","hash":"28ff4ed6714c59124569ffcbd10f1173d53ca923","modified":1723565027896},{"_id":"themes/next/layout/_components/algolia-search/dom.swig","hash":"636f1181dd5887a70b4a08ca8f655d4e46635792","modified":1723565027900},{"_id":"themes/next/layout/_partials/head/custom-head.swig","hash":"9e1b9666efa77f4cf8d8261bcfa445a9ac608e53","modified":1723565027900},{"_id":"themes/next/layout/_partials/head/external-fonts.swig","hash":"7ce76358411184482bb0934e70037949dd0da8ca","modified":1723565027900},{"_id":"themes/next/layout/_partials/search/localsearch.swig","hash":"ff5523d5dacaa77a55a24e50e6e6530c3b98bfad","modified":1723565027900},{"_id":"themes/next/layout/_partials/search/swiftype.swig","hash":"959b7e04a96a5596056e4009b73b6489c117597e","modified":1723565027900},{"_id":"themes/next/layout/_partials/search/tinysou.swig","hash":"eefe2388ff3d424694045eda21346989b123977c","modified":1723565027900},{"_id":"themes/next/layout/_partials/share/add-this.swig","hash":"23e23dc0f76ef3c631f24c65277adf7ea517b383","modified":1723565027900},{"_id":"themes/next/layout/_partials/share/baidushare.swig","hash":"1f1107468aaf03f7d0dcd7eb2b653e2813a675b4","modified":1723565027900},{"_id":"themes/next/layout/_partials/share/duoshuo_share.swig","hash":"89c5a5240ecb223acfe1d12377df5562a943fd5d","modified":1723565027900},{"_id":"themes/next/layout/_partials/share/jiathis.swig","hash":"63315fcf210799f894208c9f512737096df84962","modified":1723565027900},{"_id":"themes/next/layout/_scripts/pages/post-details.swig","hash":"069d1357c717572256e5cdee09574ebce529cbae","modified":1723565027900},{"_id":"themes/next/layout/_scripts/schemes/pisces.swig","hash":"a44acf9b0d0f44ef3dfc767376a95c984cc127de","modified":1723565027900},{"_id":"themes/next/layout/_scripts/third-party/analytics.swig","hash":"394d9fff7951287cc90f52acc2d4cbfd1bae079d","modified":1723565027900},{"_id":"themes/next/layout/_scripts/third-party/comments.swig","hash":"4abc01bc870e1d7a783cdbd26166edc782a6a4f4","modified":1723565027900},{"_id":"themes/next/layout/_scripts/third-party/lean-analytics.swig","hash":"92dc60821307fc9769bea9b2d60adaeb798342af","modified":1723565027904},{"_id":"themes/next/layout/_scripts/third-party/localsearch.swig","hash":"b460e27db3dcd4ab40b17d8926a5c4e624f293a9","modified":1723565027904},{"_id":"themes/next/layout/_scripts/third-party/mathjax.swig","hash":"6d25596d6a7c57700d37b607f8d9a62d89708683","modified":1723565027904},{"_id":"themes/next/layout/_scripts/third-party/schedule.swig","hash":"22369026c87fc23893c35a7f250b42f3bb1b60f1","modified":1723565027904},{"_id":"themes/next/layout/_scripts/third-party/tinysou.swig","hash":"cb3a5d36dbe1630bab84e03a52733a46df7c219b","modified":1723565027904},{"_id":"themes/next/source/css/_custom/custom.styl","hash":"328d9a9696cc2ccf59c67d3c26000d569f46344c","modified":1723565027912},{"_id":"themes/next/source/css/_mixins/Pisces.styl","hash":"715d5b40dc52f319fe4bff0325beb874774d9bd9","modified":1723565027912},{"_id":"themes/next/source/css/_mixins/base.styl","hash":"78a83c38f69a8747bb74e420e6c9eeef1ea76525","modified":1723565027912},{"_id":"themes/next/source/css/_variables/Mist.styl","hash":"c8d35a6b9e3bff6d8fdb66de853065af9d37562d","modified":1723565027916},{"_id":"themes/next/source/css/_variables/Pisces.styl","hash":"c459aa6d607d8bcb747544e74f6ad0b8374aa3b1","modified":1723565027916},{"_id":"themes/next/source/css/_variables/base.styl","hash":"fc185c6cec79593775d1c2440dbe2a71cfbe2e99","modified":1723565027916},{"_id":"themes/next/source/js/src/affix.js","hash":"978e0422b5bf1b560236d8d10ebc1adcf66392e3","modified":1723565027920},{"_id":"themes/next/source/js/src/algolia-search.js","hash":"96b29f69b8b916b22f62c9959a117b5a968200a5","modified":1723565027920},{"_id":"themes/next/source/js/src/bootstrap.js","hash":"39bf93769d9080fa01a9a875183b43198f79bc19","modified":1723565027920},{"_id":"themes/next/source/js/src/hook-duoshuo.js","hash":"a6119070c0119f33e08b29da7d2cce2635eb40a0","modified":1723565027920},{"_id":"themes/next/source/js/src/motion.js","hash":"269414e84df544a4ccb88519f6abae4943db3c67","modified":1723565027920},{"_id":"themes/next/source/js/src/post-details.js","hash":"2038f54e289b6da5def09689e69f623187147be5","modified":1723565027920},{"_id":"themes/next/source/js/src/scrollspy.js","hash":"fe4da1b9fe73518226446f5f27d2831e4426fc35","modified":1723565027920},{"_id":"themes/next/source/js/src/utils.js","hash":"384e17ff857f073060f5bf8c6e4f4b7353236331","modified":1723565027920},{"_id":"themes/next/source/lib/algolia-instant-search/instantsearch.min.css","hash":"90ef19edc982645b118b095615838d9c5eaba0de","modified":1723565027920},{"_id":"themes/next/source/lib/canvas-nest/canvas-nest.min.js","hash":"0387e75e23b1db108a755073fe52a0d03eb391a7","modified":1723565027924},{"_id":"themes/next/source/lib/fastclick/.bower.json","hash":"93ebd5b35e632f714dcf1753e1f6db77ec74449b","modified":1723565027928},{"_id":"themes/next/source/lib/fastclick/LICENSE","hash":"dcd5b6b43095d9e90353a28b09cb269de8d4838e","modified":1723565027928},{"_id":"themes/next/source/lib/fastclick/README.md","hash":"1decd8e1adad2cd6db0ab50cf56de6035156f4ea","modified":1723565027928},{"_id":"themes/next/source/lib/fastclick/bower.json","hash":"13379463c7463b4b96d13556b46faa4cc38d81e6","modified":1723565027928},{"_id":"themes/next/source/lib/font-awesome/.bower.json","hash":"c1072942459fa0880e8a33a1bd929176b62b4171","modified":1723565027928},{"_id":"themes/next/source/lib/font-awesome/.gitignore","hash":"69d152fa46b517141ec3b1114dd6134724494d83","modified":1723565027928},{"_id":"themes/next/source/lib/font-awesome/.npmignore","hash":"dcf470ab3a358103bb896a539cc03caeda10fa8b","modified":1723565027928},{"_id":"themes/next/source/lib/font-awesome/HELP-US-OUT.txt","hash":"4f7bf961f1bed448f6ba99aeb9219fabf930ba96","modified":1723565027928},{"_id":"themes/next/source/lib/font-awesome/bower.json","hash":"279a8a718ab6c930a67c41237f0aac166c1b9440","modified":1723565027928},{"_id":"themes/next/source/lib/jquery/.bower.json","hash":"91745c2cc6c946c7275f952b2b0760b880cea69e","modified":1723565027932},{"_id":"themes/next/source/lib/jquery_lazyload/.bower.json","hash":"b7638afc93e9cd350d0783565ee9a7da6805ad8e","modified":1723565027932},{"_id":"themes/next/source/lib/jquery_lazyload/CONTRIBUTING.md","hash":"4891864c24c28efecd81a6a8d3f261145190f901","modified":1723565027932},{"_id":"themes/next/source/lib/jquery_lazyload/README.md","hash":"895d50fa29759af7835256522e9dd7dac597765c","modified":1723565027932},{"_id":"themes/next/source/lib/jquery_lazyload/bower.json","hash":"65bc85d12197e71c40a55c0cd7f6823995a05222","modified":1723565027932},{"_id":"themes/next/source/lib/jquery_lazyload/jquery.lazyload.js","hash":"481fd478650e12b67c201a0ea41e92743f8b45a3","modified":1723565027932},{"_id":"themes/next/source/lib/jquery_lazyload/jquery.scrollstop.js","hash":"0e9a81785a011c98be5ea821a8ed7d411818cfd1","modified":1723565027932},{"_id":"themes/next/source/lib/velocity/.bower.json","hash":"05f960846f1c7a93dab1d3f9a1121e86812e8c88","modified":1723565027936},{"_id":"themes/next/source/lib/velocity/bower.json","hash":"2ec99573e84c7117368beccb9e94b6bf35d2db03","modified":1723565027936},{"_id":"themes/next/source/lib/velocity/velocity.min.js","hash":"2f1afadc12e4cf59ef3b405308d21baa97e739c6","modified":1723565027936},{"_id":"themes/next/source/lib/velocity/velocity.ui.js","hash":"6a1d101eab3de87527bb54fcc8c7b36b79d8f0df","modified":1723565027936},{"_id":"themes/next/source/lib/velocity/velocity.ui.min.js","hash":"ed5e534cd680a25d8d14429af824f38a2c7d9908","modified":1723565027936},{"_id":"source/_posts/note-learning-how-to-learn/learning_how_to_learn.png","hash":"a059657d99823762027a024dc3f7b8bff72278a8","modified":1723565027852},{"_id":"source/_posts/note-reinforcement-learning/lec5_Model_Free_Control.png","hash":"b5bb0f24c087f240a8d349ea72f542f6ffd06b83","modified":1723565027860},{"_id":"source/_posts/summary-derivative/cnn2.png","hash":"6667442bd7b0a5de38e00cc55abf117eb8644bdb","modified":1723565027876},{"_id":"themes/next/source/lib/jquery/index.js","hash":"41b4bfbaa96be6d1440db6e78004ade1c134e276","modified":1723565027932},{"_id":"themes/next/layout/_scripts/third-party/analytics/application-insights.swig","hash":"60426bf73f8a89ba61fb1be2df3ad5398e32c4ef","modified":1723565027900},{"_id":"themes/next/layout/_scripts/third-party/analytics/baidu-analytics.swig","hash":"deda6a814ed48debc694c4e0c466f06c127163d0","modified":1723565027900},{"_id":"themes/next/layout/_scripts/third-party/analytics/busuanzi-counter.swig","hash":"3e1cc3c3461a2a85812c4b05c8430c21084e5e8a","modified":1723565027900},{"_id":"themes/next/layout/_scripts/third-party/analytics/cnzz-analytics.swig","hash":"8160b27bee0aa372c7dc7c8476c05bae57f58d0f","modified":1723565027900},{"_id":"themes/next/layout/_scripts/third-party/analytics/facebook-sdk.swig","hash":"394d008e5e94575280407ad8a1607a028026cbc3","modified":1723565027900},{"_id":"themes/next/layout/_scripts/third-party/analytics/google-analytics.swig","hash":"b5e3820ef3ed7ab6d06933661516d92bba8e8c3a","modified":1723730786064},{"_id":"themes/next/layout/_scripts/third-party/analytics/tencent-analytics.swig","hash":"3658414379e0e8a34c45c40feadc3edc8dc55f88","modified":1723565027900},{"_id":"themes/next/layout/_scripts/third-party/comments/disqus.swig","hash":"fb1d04ede838b52ca7541973f86c3810f1ad396e","modified":1723565027904},{"_id":"themes/next/layout/_scripts/third-party/comments/duoshuo.swig","hash":"a356b2185d40914447fde817eb3d358ab6b3e4c3","modified":1723565027904},{"_id":"themes/next/layout/_scripts/third-party/comments/gentie.swig","hash":"03592d1d731592103a41ebb87437fe4b0a4c78ca","modified":1723565027904},{"_id":"themes/next/layout/_scripts/third-party/comments/hypercomments.swig","hash":"3e8dc5c6c912628a37e3b5f886bec7b2e5ed14ea","modified":1723565027904},{"_id":"themes/next/layout/_scripts/third-party/comments/youyan.swig","hash":"ea8078fa9e10be2bb042749d8b6a97adc38f914c","modified":1723565027904},{"_id":"themes/next/source/css/_common/components/back-to-top.styl","hash":"b49efc66bd055a2d0be7deabfcb02ee72a9a28c8","modified":1723565027904},{"_id":"themes/next/source/css/_common/components/buttons.styl","hash":"0dfb4b3ba3180d7285e66f270e1d3fa0f132c3d2","modified":1723565027904},{"_id":"themes/next/source/css/_common/components/comments.styl","hash":"471f1627891aca5c0e1973e09fbcb01e1510d193","modified":1723565027904},{"_id":"themes/next/source/css/_common/components/components.styl","hash":"10994990d6e0b4d965a728a22cf7f6ee29cae9f6","modified":1723565027904},{"_id":"themes/next/source/css/_common/components/pagination.styl","hash":"711c8830886619d4f4a0598b0cde5499dce50c62","modified":1723565027908},{"_id":"themes/next/source/css/_common/components/tag-cloud.styl","hash":"dd8a3b22fc2f222ac6e6c05bd8a773fb039169c0","modified":1723565027912},{"_id":"themes/next/source/css/_common/outline/outline.styl","hash":"2186be20e317505cd31886f1291429cc21f76703","modified":1723565027912},{"_id":"themes/next/source/css/_common/scaffolding/base.styl","hash":"5304f99581da3a31de3ecec959b7adf9002fde83","modified":1723565027912},{"_id":"themes/next/source/css/_common/scaffolding/helpers.styl","hash":"54c90cf7bdbf5c596179d8dae6e671bad1292662","modified":1723565027912},{"_id":"themes/next/source/css/_common/scaffolding/normalize.styl","hash":"ece571f38180febaf02ace8187ead8318a300ea7","modified":1723565027912},{"_id":"themes/next/source/css/_common/scaffolding/scaffolding.styl","hash":"013619c472c7e4b08311c464fcbe9fcf5edde603","modified":1723565027912},{"_id":"themes/next/source/css/_common/scaffolding/tables.styl","hash":"64f5d56c08d74a338813df1265580ca0cbf0190b","modified":1723565027912},{"_id":"themes/next/source/css/_schemes/Mist/_base.styl","hash":"c2d079788d6fc2e9a191ccdae94e50d55bf849dc","modified":1723565027912},{"_id":"themes/next/source/css/_schemes/Mist/_header.styl","hash":"5ae7906dc7c1d9468c7f4b4a6feddddc555797a1","modified":1723565027912},{"_id":"themes/next/source/css/_schemes/Mist/_logo.styl","hash":"38e5df90c8689a71c978fd83ba74af3d4e4e5386","modified":1723565027912},{"_id":"themes/next/source/css/_schemes/Mist/_menu.styl","hash":"b0dcca862cd0cc6e732e33d975b476d744911742","modified":1723565027912},{"_id":"themes/next/source/css/_schemes/Mist/_posts-expanded.styl","hash":"bbc82c34b5815ff32974f9675e2e9aeff67ac50f","modified":1723565027912},{"_id":"themes/next/source/css/_schemes/Mist/_posts-expanded.styl.bak","hash":"bbc82c34b5815ff32974f9675e2e9aeff67ac50f","modified":1723565027912},{"_id":"themes/next/source/css/_schemes/Mist/_search.styl","hash":"1452cbe674cc1d008e1e9640eb4283841058fc64","modified":1723565027912},{"_id":"themes/next/source/css/_schemes/Mist/index.styl","hash":"9a5581a770af8964064fef7afd3e16963e45547f","modified":1723565027912},{"_id":"themes/next/source/css/_schemes/Muse/_layout.styl","hash":"0efa036a15c18f5abb058b7c0fad1dd9ac5eed4c","modified":1723565027912},{"_id":"themes/next/source/css/_schemes/Muse/_logo.styl","hash":"8829bc556ca38bfec4add4f15a2f028092ac6d46","modified":1723565027912},{"_id":"themes/next/source/css/_schemes/Muse/_menu.styl","hash":"82bbaa6322764779a1ac2e2c8390ce901c7972e2","modified":1723565027916},{"_id":"themes/next/source/css/_schemes/Muse/_search.styl","hash":"1452cbe674cc1d008e1e9640eb4283841058fc64","modified":1723565027916},{"_id":"themes/next/source/css/_schemes/Muse/index.styl","hash":"a0e2030a606c934fb2c5c7373aaae04a1caac4c5","modified":1723565027916},{"_id":"themes/next/source/css/_schemes/Pisces/_brand.styl","hash":"ff9f163bb05c0709577040a875924d36c9ab99d6","modified":1723565027916},{"_id":"themes/next/source/css/_schemes/Pisces/_layout.styl","hash":"dcf9fe43b2ef78b923118ba39efedb38760e76b1","modified":1723565027916},{"_id":"themes/next/source/css/_schemes/Pisces/_menu.styl","hash":"1408209dfb9a22a0982a30bdbd14842c2b53f264","modified":1723565027916},{"_id":"themes/next/source/css/_schemes/Pisces/_posts.styl","hash":"2f878213cb24c5ddc18877f6d15ec5c5f57745ac","modified":1723565027916},{"_id":"themes/next/source/css/_schemes/Pisces/_sidebar.styl","hash":"9b63bd8effc7cf4b96acdea4d73add7df934a222","modified":1723565027916},{"_id":"themes/next/source/css/_schemes/Pisces/index.styl","hash":"69ecd6c97e7cdfd822ac8102b45ad0ede85050db","modified":1723565027916},{"_id":"themes/next/source/js/src/schemes/pisces.js","hash":"9ccee9189c910b8a264802d7b2ec305d12dedcd0","modified":1723565027920},{"_id":"themes/next/source/lib/fancybox/source/blank.gif","hash":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a","modified":1723565027924},{"_id":"themes/next/source/lib/fancybox/source/fancybox_loading.gif","hash":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c","modified":1723565027924},{"_id":"themes/next/source/lib/fancybox/source/fancybox_loading@2x.gif","hash":"273b123496a42ba45c3416adb027cd99745058b0","modified":1723565027924},{"_id":"themes/next/source/lib/fancybox/source/fancybox_overlay.png","hash":"b3a4ee645ba494f52840ef8412015ba0f465dbe0","modified":1723565027924},{"_id":"themes/next/source/lib/fancybox/source/fancybox_sprite.png","hash":"17df19f97628e77be09c352bf27425faea248251","modified":1723565027924},{"_id":"themes/next/source/lib/fancybox/source/fancybox_sprite@2x.png","hash":"30c58913f327e28f466a00f4c1ac8001b560aed8","modified":1723565027924},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.css","hash":"5f163444617b6cf267342f06ac166a237bb62df9","modified":1723565027924},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.js","hash":"1cf3d47b5ccb7cb6e9019c64f2a88d03a64853e4","modified":1723565027924},{"_id":"themes/next/source/lib/fastclick/lib/fastclick.js","hash":"06cef196733a710e77ad7e386ced6963f092dc55","modified":1723565027928},{"_id":"themes/next/source/lib/fastclick/lib/fastclick.min.js","hash":"2cae0f5a6c5d6f3cb993015e6863f9483fc4de18","modified":1723565027928},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css","hash":"4eda182cbcc046dbf449aef97c02c230cf80a494","modified":1723565027928},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css.map","hash":"0189d278706509412bac4745f96c83984e1d59f4","modified":1723565027928},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.min.css","hash":"fb5b49426dee7f1508500e698d1b3c6b04c8fcce","modified":1723565027928},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.min.js","hash":"38628e75e4412cc6f11074e03e1c6d257aae495b","modified":1723565027932},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.pack.js","hash":"214dad442a92d36af77ed0ca1d9092b16687f02f","modified":1723565027936},{"_id":"source/_posts/source-carlaue5-architecture/client.png","hash":"e9973bfe8bca081bdaef6536156924b41bd6cff5","modified":1723634925782},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.pack.js","hash":"53360764b429c212f424399384417ccc233bb3be","modified":1723565027928},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.eot","hash":"965ce8f688fedbeed504efd498bc9c1622d12362","modified":1723565027928},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff","hash":"6d7e6a5fc802b13694d8820fc0138037c0977d2e","modified":1723565027932},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff2","hash":"97e438cc545714309882fbceadbf344fcaddcec5","modified":1723565027932},{"_id":"themes/next/source/css/_common/components/footer/footer.styl","hash":"8994ffcce84deac0471532f270f97c44fea54dc0","modified":1723565027904},{"_id":"themes/next/source/css/_common/components/header/header.styl","hash":"ae1ca14e51de67b07dba8f61ec79ee0e2e344574","modified":1723565027904},{"_id":"themes/next/source/css/_common/components/header/headerband.styl","hash":"d27448f199fc2f9980b601bc22b87f08b5d64dd1","modified":1723565027904},{"_id":"themes/next/source/css/_common/components/header/menu.styl","hash":"c890ce7fe933abad7baf39764a01894924854e92","modified":1723565027904},{"_id":"themes/next/source/css/_common/components/header/site-meta.styl","hash":"6c00f6e0978f4d8f9a846a15579963728aaa6a17","modified":1723565027904},{"_id":"themes/next/source/css/_common/components/header/site-nav.styl","hash":"49c2b2c14a1e7fcc810c6be4b632975d0204c281","modified":1723565027904},{"_id":"themes/next/source/css/_common/components/highlight/diff.styl","hash":"96f32ea6c3265a3889e6abe57587f6e2a2a40dfb","modified":1723565027904},{"_id":"themes/next/source/css/_common/components/highlight/highlight.styl","hash":"4b7f81e1006e7acee3d1c840ccba155239f830cc","modified":1723565027904},{"_id":"themes/next/source/css/_common/components/highlight/theme.styl","hash":"b76387934fb6bb75212b23c1a194486892cc495e","modified":1723565027908},{"_id":"themes/next/source/css/_common/components/pages/archive.styl","hash":"7778920dd105fa4de3a7ab206eeba30b1a7bac45","modified":1723565027908},{"_id":"themes/next/source/css/_common/components/pages/categories.styl","hash":"4eff5b252d7b614e500fc7d52c97ce325e57d3ab","modified":1723565027908},{"_id":"themes/next/source/css/_common/components/pages/pages.styl","hash":"2039590632bba3943c39319d80ef630af7928185","modified":1723565027908},{"_id":"themes/next/source/css/_common/components/pages/post-detail.styl","hash":"9bf4362a4d0ae151ada84b219d39fbe5bb8c790e","modified":1723565027908},{"_id":"themes/next/source/css/_common/components/pages/schedule.styl","hash":"a82afbb72d83ee394aedc7b37ac0008a9823b4f4","modified":1723565027908},{"_id":"themes/next/source/css/_common/components/post/post-button.styl","hash":"fdfadbb4483043c7e0afd541ee9712389e633517","modified":1723565027908},{"_id":"themes/next/source/css/_common/components/post/post-collapse.styl","hash":"8fae54591877a73dff0b29b2be2e8935e3c63575","modified":1723565027908},{"_id":"themes/next/source/css/_common/components/post/post-eof.styl","hash":"2cdc094ecf907a02fce25ad4a607cd5c40da0f2b","modified":1723565027908},{"_id":"themes/next/source/css/_common/components/post/post-expand.styl","hash":"b25132fe6a7ad67059a2c3afc60feabb479bdd75","modified":1723565027908},{"_id":"themes/next/source/css/_common/components/post/post-gallery.styl","hash":"387ce23bba52b22a586b2dfb4ec618fe1ffd3926","modified":1723565027908},{"_id":"themes/next/source/css/_common/components/post/post-meta.styl","hash":"7f1aab694caf603809e33cff82beea84cd0128fd","modified":1723565027908},{"_id":"themes/next/source/css/_common/components/post/post-nav.styl","hash":"c6dab7661a6b8c678b21b7eb273cef7100f970f6","modified":1723565027908},{"_id":"themes/next/source/css/_common/components/post/post-reward.styl","hash":"e792c8dc41561c96d128e9b421187f1c3dc978a0","modified":1723565027908},{"_id":"themes/next/source/css/_common/components/post/post-tags.styl","hash":"a352ae5b1f8857393bf770d2e638bf15f0c9585d","modified":1723565027908},{"_id":"themes/next/source/css/_common/components/post/post-title.styl","hash":"963105a531403d7aad6d9e5e23e3bfabb8ec065a","modified":1723565027908},{"_id":"themes/next/source/css/_common/components/post/post-type.styl","hash":"10251257aceecb117233c9554dcf8ecfef8e2104","modified":1723565027908},{"_id":"themes/next/source/css/_common/components/post/post.styl","hash":"bfd806d0a9f21446a22df82ac02e37d0075cc3b5","modified":1723565027908},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-author-links.styl","hash":"2e7ec9aaa3293941106b1bdd09055246aa3c3dc6","modified":1723565027908},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-author.styl","hash":"920343e41c124221a17f050bbb989494d44f7a24","modified":1723565027908},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-blogroll.styl","hash":"c44f6a553ec7ea5508f2054a13be33a62a15d3a9","modified":1723565027908},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-feed-link.styl","hash":"9486ddd2cb255227db102d09a7df4cae0fabad72","modified":1723565027908},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-nav.styl","hash":"45fa7193435a8eae9960267438750b4c9fa9587f","modified":1723565027908},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-toc.styl","hash":"7690b9596ec3a49befbe529a5a2649abec0faf76","modified":1723565027908},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-toggle.styl","hash":"2d3abbc85b979a648e0e579e45f16a6eba49d1e7","modified":1723565027908},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar.styl","hash":"234facd038f144bd0fe09a31ed1357c5d74c517f","modified":1723565027908},{"_id":"themes/next/source/css/_common/components/sidebar/site-state.styl","hash":"3623e7fa4324ec1307370f33d8f287a9e20a5578","modified":1723565027908},{"_id":"themes/next/source/css/_common/components/tags/blockquote-center.styl","hash":"c2abe4d87148e23e15d49ee225bc650de60baf46","modified":1723565027912},{"_id":"themes/next/source/css/_common/components/tags/full-image.styl","hash":"b8969e1654eec89a0fd10d88b337fee9cb03cd44","modified":1723565027912},{"_id":"themes/next/source/css/_common/components/tags/group-pictures.styl","hash":"4851b981020c5cbc354a1af9b831a2dcb3cf9d39","modified":1723565027912},{"_id":"themes/next/source/css/_common/components/tags/note.styl","hash":"74d0ba86f698165d13402670382a822c8736a556","modified":1723565027912},{"_id":"themes/next/source/css/_common/components/tags/tags.styl","hash":"3eb73cee103b810fa56901577ecb9c9bb1793cff","modified":1723565027912},{"_id":"themes/next/source/css/_common/components/third-party/algolia-search.styl","hash":"eba491ae624b4c843c8be4c94a044085dad4ba0f","modified":1723565027912},{"_id":"themes/next/source/css/_common/components/third-party/baidushare.styl","hash":"93b08815c4d17e2b96fef8530ec1f1064dede6ef","modified":1723565027912},{"_id":"themes/next/source/css/_common/components/third-party/busuanzi-counter.styl","hash":"b03f891883446f3a5548b7cc90d29c77e62f1053","modified":1723565027912},{"_id":"themes/next/source/css/_common/components/third-party/duoshuo.styl","hash":"2340dd9b3202c61d73cc708b790fac5adddbfc7f","modified":1723565027912},{"_id":"themes/next/source/css/_common/components/third-party/gentie.styl","hash":"586a3ec0f1015e7207cd6a2474362e068c341744","modified":1723565027912},{"_id":"themes/next/source/css/_common/components/third-party/jiathis.styl","hash":"327b5f63d55ec26f7663185c1a778440588d9803","modified":1723565027912},{"_id":"themes/next/source/css/_common/components/third-party/localsearch.styl","hash":"637c6b32c58ecf40041be6e911471cd82671919b","modified":1723565027912},{"_id":"themes/next/source/css/_common/components/third-party/third-party.styl","hash":"42348219db93a85d2ee23cb06cebd4d8ab121726","modified":1723565027912},{"_id":"themes/next/source/css/_schemes/Mist/outline/outline.styl","hash":"5dc4859c66305f871e56cba78f64bfe3bf1b5f01","modified":1723565027912},{"_id":"themes/next/source/css/_schemes/Mist/sidebar/sidebar-blogroll.styl","hash":"8b8e8cbce98a9296c8fd77f512ae85d945f65d40","modified":1723565027912},{"_id":"themes/next/source/css/_schemes/Muse/sidebar/sidebar-blogroll.styl","hash":"8b8e8cbce98a9296c8fd77f512ae85d945f65d40","modified":1723565027916},{"_id":"themes/next/source/lib/fancybox/source/helpers/fancybox_buttons.png","hash":"e385b139516c6813dcd64b8fc431c364ceafe5f3","modified":1723565027924},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.css","hash":"1a9d8e5c22b371fcc69d4dbbb823d9c39f04c0c8","modified":1723565027924},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.js","hash":"91e41741c2e93f732c82aaacec4cfc6e3f3ec876","modified":1723565027924},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-media.js","hash":"3bdf69ed2469e4fb57f5a95f17300eef891ff90d","modified":1723565027924},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.css","hash":"4ac329c16a5277592fc12a37cca3d72ca4ec292f","modified":1723565027924},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.js","hash":"53e194f4a72e649c04fb586dd57762b8c022800b","modified":1723565027924},{"_id":"themes/next/source/lib/font-awesome/fonts/FontAwesome.otf","hash":"1b22f17fdc38070de50e6d1ab3a32da71aa2d819","modified":1723565027928},{"_id":"themes/next/source/lib/velocity/velocity.js","hash":"9f08181baea0cc0e906703b7e5df9111b9ef3373","modified":1723565027936},{"_id":"source/_posts/note-linear-algebra/linear_algebra.png","hash":"f88d5ce92c3b630755fc4c945f1f1bfaf6d2a10b","modified":1723565027856},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.ttf","hash":"61d8d967807ef12598d81582fa95b9f600c3ee01","modified":1723565027932},{"_id":"themes/next/source/lib/algolia-instant-search/instantsearch.min.js","hash":"9ccc6f8144f54e86df9a3fd33a18368d81cf3a4f","modified":1723565027924},{"_id":"source/_posts/source-carlaue5-architecture/server.png","hash":"1b91793c57619b052e4e9f9308fa3dc9495bce45","modified":1723636528697},{"_id":"source/_posts/paper-rvo/five_agents.gif","hash":"808251205f52fe3f90dc17cb14e7a5da62d86bc4","modified":1723565027868},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.svg","hash":"c0522272bbaef2acb3d341912754d6ea2d0ecfc0","modified":1723565027932},{"_id":"public/sitemap.xml","hash":"a5a737beb900a2d6131750f50c5a96faa81f9d24","modified":1723734536649},{"_id":"public/CNAME","hash":"4ee9f53b2f454d366c75978ad3c8dd83ca7614b2","modified":1723734536951},{"_id":"public/images/algolia_logo.svg","hash":"90035272fa31a3f65b3c0e2cb8a633876ef457dc","modified":1723734536951},{"_id":"public/images/avatar.gif","hash":"264082bb3a1af70d5499c7d22b0902cb454b6d12","modified":1723734536952},{"_id":"public/images/cc-by-nc-nd.svg","hash":"c6524ece3f8039a5f612feaf865d21ec8a794564","modified":1723734536952},{"_id":"public/images/cc-by-nc-sa.svg","hash":"3031be41e8753c70508aa88e84ed8f4f653f157e","modified":1723734536952},{"_id":"public/images/cc-by-nc.svg","hash":"8d39b39d88f8501c0d27f8df9aae47136ebc59b7","modified":1723734536952},{"_id":"public/images/cc-by-nd.svg","hash":"c563508ce9ced1e66948024ba1153400ac0e0621","modified":1723734536952},{"_id":"public/images/cc-by-sa.svg","hash":"aa4742d733c8af8d38d4c183b8adbdcab045872e","modified":1723734536952},{"_id":"public/images/cc-by.svg","hash":"28a0a4fe355a974a5e42f68031652b76798d4f7e","modified":1723734536952},{"_id":"public/images/cc-zero.svg","hash":"87669bf8ac268a91d027a0a4802c92a1473e9030","modified":1723734536952},{"_id":"public/images/loading.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1723734536952},{"_id":"public/images/placeholder.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1723734536952},{"_id":"public/images/quote-l.svg","hash":"94e870b4c8c48da61d09522196d4dd40e277a98f","modified":1723734536952},{"_id":"public/images/quote-r.svg","hash":"e60ae504f9d99b712c793c3740c6b100d057d4ec","modified":1723734536952},{"_id":"public/images/searchicon.png","hash":"67727a6a969be0b2659b908518fa6706eed307b8","modified":1723734536953},{"_id":"public/lib/fastclick/LICENSE","hash":"dcd5b6b43095d9e90353a28b09cb269de8d4838e","modified":1723734536953},{"_id":"public/lib/font-awesome/HELP-US-OUT.txt","hash":"4f7bf961f1bed448f6ba99aeb9219fabf930ba96","modified":1723734536953},{"_id":"public/lib/fancybox/source/blank.gif","hash":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a","modified":1723734536953},{"_id":"public/lib/fancybox/source/fancybox_loading.gif","hash":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c","modified":1723734536953},{"_id":"public/lib/fancybox/source/fancybox_loading@2x.gif","hash":"273b123496a42ba45c3416adb027cd99745058b0","modified":1723734536953},{"_id":"public/lib/fancybox/source/fancybox_overlay.png","hash":"b3a4ee645ba494f52840ef8412015ba0f465dbe0","modified":1723734536953},{"_id":"public/lib/fancybox/source/fancybox_sprite.png","hash":"17df19f97628e77be09c352bf27425faea248251","modified":1723734536953},{"_id":"public/lib/fancybox/source/fancybox_sprite@2x.png","hash":"30c58913f327e28f466a00f4c1ac8001b560aed8","modified":1723734536953},{"_id":"public/lib/font-awesome/css/font-awesome.css.map","hash":"0189d278706509412bac4745f96c83984e1d59f4","modified":1723734536953},{"_id":"public/lib/fancybox/source/helpers/fancybox_buttons.png","hash":"e385b139516c6813dcd64b8fc431c364ceafe5f3","modified":1723734536953},{"_id":"public/2018/02/03/summary-rl-drl/ppo_objective.png","hash":"88efe85eba5758c768b118156f73da9872e6c31e","modified":1723734536953},{"_id":"public/2018/03/18/paper-prioritized-experience-replay/env.png","hash":"6bb91e717c7802f102ec72005a930cdc605bd17e","modified":1723734536953},{"_id":"public/2018/03/18/paper-prioritized-experience-replay/fig.png","hash":"0811b241f509eeb147e0682fdb9b2036155d5e64","modified":1723734536954},{"_id":"public/2017/01/14/paper-orca/opt.png","hash":"92aef50ae799ffc7ad40a672c6ac824f2ed81342","modified":1723734536954},{"_id":"public/2017/01/14/paper-orca/orca_sol.png","hash":"18e1ed3a4bd3ca056c1a1944e866c224f4d5be62","modified":1723734536954},{"_id":"public/2017/09/09/note-essence-of-linear-algrbra/combination.png","hash":"7fff8d00a0245e19564c05b2037f3f7d836a6e36","modified":1723734536954},{"_id":"public/2017/09/09/note-essence-of-linear-algrbra/dot_product_order.png","hash":"7e98037126903e36880c30bacc83b6232787f9ca","modified":1723734536954},{"_id":"public/2017/09/09/note-essence-of-linear-algrbra/representation.png","hash":"19ad51b9238092074ec0b0dae6c47aaf3940c7b7","modified":1723734536954},{"_id":"public/2017/09/09/note-essence-of-linear-algrbra/transformation.png","hash":"0bf2d5acd0d7e7a81df341aca79c9082a2b194a6","modified":1723734536954},{"_id":"public/2017/01/13/paper-rvo/left_right.png","hash":"4c42a652cdc5dea16e432cebfea3edf9a8c32189","modified":1723734536954},{"_id":"public/2017/01/13/paper-rvo/oscillation.png","hash":"fb6232bb65cb8c3550060247c48d2aa9283547d6","modified":1723734536954},{"_id":"public/2017/01/13/paper-rvo/prob_disc.png","hash":"3580292f8e4e853a79dff930bf07be0d6752350f","modified":1723734536954},{"_id":"public/2017/01/13/paper-rvo/prob_sol.png","hash":"021f98d1225200335f37a63881d7733986ea7264","modified":1723734536954},{"_id":"public/2018/03/31/summary-derivative/bp1.png","hash":"e3aad72351087efdf3ef6e6fbdb99792039a46b4","modified":1723734536955},{"_id":"public/2018/03/31/summary-derivative/bp3.png","hash":"00d38a54775dfd8015fd45b0afceefa7975b1ccf","modified":1723734536955},{"_id":"public/2018/03/31/summary-derivative/rnn.png","hash":"2b658f64d3db195da40fe5cf80674687055196ea","modified":1723734536955},{"_id":"public/2018/03/31/summary-derivative/softmax.png","hash":"477d7fe77499f6d01202edc3e34350f24680ddd1","modified":1723734536955},{"_id":"public/2018/05/17/summary-gps/1.png","hash":"ab590897eac804ae593beb48bca2aea1fb329050","modified":1723734536955},{"_id":"public/2017/09/09/note-reinforcement-learning/lec2_MDP.png","hash":"89c39e318abdc30fc5c65db7d79453488ff6e975","modified":1723734536955},{"_id":"public/2017/09/09/note-reinforcement-learning/lec3_Planning_by_DP.png","hash":"3768d82b093bc44890435da2da314704c5d92485","modified":1723734536955},{"_id":"public/2017/09/09/note-reinforcement-learning/lec9_Exploration_and_Exploitation.png","hash":"a5b60b7951e0aaf8a1be5fdbda7dfa14b63739f6","modified":1723734536955},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.eot","hash":"965ce8f688fedbeed504efd498bc9c1622d12362","modified":1723734537659},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.woff","hash":"6d7e6a5fc802b13694d8820fc0138037c0977d2e","modified":1723734537662},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.woff2","hash":"97e438cc545714309882fbceadbf344fcaddcec5","modified":1723734537665},{"_id":"public/lib/font-awesome/fonts/FontAwesome.otf","hash":"1b22f17fdc38070de50e6d1ab3a32da71aa2d819","modified":1723734537665},{"_id":"public/2017/01/14/paper-orca/orca_app.png","hash":"ebcca0d12534dbc566480dbd7184cbd6ee6722dd","modified":1723734537665},{"_id":"public/2017/01/14/paper-orca/time_interval.png","hash":"0421ecf30741ed973344ce3728d9674c87efe308","modified":1723734537665},{"_id":"public/2024/08/13/source-carlaue5-architecture/carla.png","hash":"fefb964d9474203661579196432c5601ffdae48e","modified":1723734537666},{"_id":"public/2017/09/09/note-essence-of-linear-algrbra/det.png","hash":"ebb7e873f5987d657e4fc7121eb7f8800604278f","modified":1723734537666},{"_id":"public/2017/09/09/note-essence-of-linear-algrbra/dot_product_projection.png","hash":"d85a3e7b264bb1bff7624a85a6f9f6ef2de727f3","modified":1723734537666},{"_id":"public/2017/01/13/paper-rvo/rvo.png","hash":"d22c1078da30825c16b942a4f2aff8155c32181b","modified":1723734537666},{"_id":"public/2017/01/13/paper-rvo/vo.png","hash":"84b84f74b4f83c979842f181b632cc314b30b611","modified":1723734537666},{"_id":"public/2018/03/31/summary-derivative/bp2.png","hash":"6d19f03c276c7aaaee4911eea9f8d37796a478ae","modified":1723734537666},{"_id":"public/2018/05/17/summary-gps/2.png","hash":"c8e52031e86c63255ee374f6736911fbbdec7a20","modified":1723734537666},{"_id":"public/2018/05/17/summary-gps/lqr.png","hash":"50a5d0e7f7291e8099ad4f808fef69b58c4eb003","modified":1723734537667},{"_id":"public/2017/09/09/note-reinforcement-learning/lec1_Intro_to_RL.png","hash":"7ea12e992a3e1286dab7a50b1868db90399f9033","modified":1723734537667},{"_id":"public/2017/09/09/note-reinforcement-learning/lec4_Model_Free_Prediction.png","hash":"71162a00429564ceef6dfd329d58748d01006286","modified":1723734537667},{"_id":"public/2017/09/09/note-reinforcement-learning/lec6_Value_Function_Approximation.png","hash":"50434bdb5c6c0ba3d3a80f3ecb786b599e0d1267","modified":1723734537667},{"_id":"public/2017/09/09/note-reinforcement-learning/lec7_Policy_Gradient.png","hash":"e6b33b6be0d0c2de7aea59fcb75e83b5c241a03f","modified":1723734537667},{"_id":"public/2017/09/09/note-reinforcement-learning/lec8_Integrating_Learning_and_Planning.png","hash":"fb387a3f2e67a1d08f0d892cf56111e363d47d67","modified":1723734537667},{"_id":"public/tags/index.html","hash":"258f390c28b9fba2160fad52295152b2c70f580a","modified":1723734537695},{"_id":"public/2016/07/07/mindmap-jingjin/index.html","hash":"71acd5f11b0674d6f39a01fc29b24b2ebbf3c011","modified":1723734537695},{"_id":"public/archives/2016/page/2/index.html","hash":"b758258a7447790bb307ea7f430a5492ff1cdfd7","modified":1723734537695},{"_id":"public/archives/2016/06/index.html","hash":"f079a3cea94c7ddfca7e34555f07b3b329c4dd93","modified":1723734537695},{"_id":"public/archives/2016/07/index.html","hash":"9341ddf081012eb70fe4b45139d0ddc5ee8e1252","modified":1723734537695},{"_id":"public/archives/2016/08/index.html","hash":"2b291eaa067f42d11e67b90f7cc982b2e5e822e6","modified":1723734537696},{"_id":"public/archives/2016/09/index.html","hash":"4e096d2687ef2b4021151ec80f9e1f8a72838d74","modified":1723734537696},{"_id":"public/archives/2017/index.html","hash":"b609aefb4df0cfa95019f1c7b1fc4ee3560652c7","modified":1723734537696},{"_id":"public/archives/2017/01/index.html","hash":"8f59a02b689a408169fb6d6b674a088b5b454378","modified":1723734537696},{"_id":"public/archives/2017/09/index.html","hash":"7b784e19bcba200c7d55f7a4158d095429088300","modified":1723734537696},{"_id":"public/archives/2018/02/index.html","hash":"044516b3566a2c2b67d454de6892bdf539c08505","modified":1723734537696},{"_id":"public/archives/2018/03/index.html","hash":"f0cc3c6a15157ab3d8451e6c52e48371836713bb","modified":1723734537696},{"_id":"public/archives/2018/05/index.html","hash":"439c28f8843f8d9a1f4963a4c0e1194721ad853a","modified":1723734537696},{"_id":"public/archives/2018/09/index.html","hash":"8229f17486acd638176c061ad97d27d17de62d20","modified":1723734537696},{"_id":"public/archives/2018/10/index.html","hash":"56e97097162f75a6f3900801c34e61d32136aa3c","modified":1723734537696},{"_id":"public/archives/2021/index.html","hash":"0bb56fdf2eb2cafe4564d02a00c5b677e6757129","modified":1723734537696},{"_id":"public/archives/2021/12/index.html","hash":"8df4a214605bf2356c016a97ec3acd7ee1a1b4f4","modified":1723734537697},{"_id":"public/archives/2024/index.html","hash":"281690a453ee99e4542ea05a4c7f3cc7e112527e","modified":1723734537697},{"_id":"public/archives/2024/08/index.html","hash":"489b2c38d8da847792a4d876dab61c2d1d0d7124","modified":1723734537697},{"_id":"public/categories//index.html","hash":"04c59c19ca4cf37401a95da5681e24479b47e3ed","modified":1723734537697},{"_id":"public/categories/caffe/index.html","hash":"a6010b4a0973aa1c67d9c2644fb31d04f90164e0","modified":1723734537697},{"_id":"public/categories//index.html","hash":"10c8f7abdf14fab1cff2fe5219baa90a04d3aa6d","modified":1723734537697},{"_id":"public/categories//index.html","hash":"284d492b9c990e818998a1762cc78a8bee666f3e","modified":1723734537697},{"_id":"public/categories//index.html","hash":"bb0834214b1ed6e33f743a2cfbfe167b06b98fd0","modified":1723734537697},{"_id":"public/categories//index.html","hash":"6db2d83e847d29b0aa5c10858da2a955d344426d","modified":1723734537697},{"_id":"public/categories//index.html","hash":"e44ea6cccbb3896eebd549ab041625707ffbfdcf","modified":1723734537697},{"_id":"public/categories//index.html","hash":"be4e8bfd9eb2f74e5daf90a011f80c07a67a28aa","modified":1723734537697},{"_id":"public/categories//index.html","hash":"1b3a7abafb54999d683a61121c2f6801ef111801","modified":1723734537697},{"_id":"public/tags/caffe/index.html","hash":"1f8cad4a5892f28ef593f1aa9df76de8a0157cb8","modified":1723734537697},{"_id":"public/tags/caffe/index.html","hash":"68d9884dd274ff9fd71734847a8607743a2dfc32","modified":1723734537698},{"_id":"public/tags/rnn/index.html","hash":"88216c74319fa728878903615061010a7f6603d4","modified":1723734537698},{"_id":"public/tags/s2vt-data/index.html","hash":"5a1f2d4769b8bb5ffc83592c96100dd54a245399","modified":1723734537698},{"_id":"public/tags/lstm/index.html","hash":"fbe65416cf58618da8558f94f57e730d628024a4","modified":1723734537698},{"_id":"public/tags/s2vt-captioner/index.html","hash":"985acac974f16a999c9a9010a07055a35582d036","modified":1723734537698},{"_id":"public/tags/AlexNet/index.html","hash":"3dd5a71d15a9b1dda303680606c388e03d9d75de","modified":1723734537698},{"_id":"public/tags//index.html","hash":"33a7bbd0e10d072d465371984cfd5dd7c522db6a","modified":1723734537698},{"_id":"public/tags//index.html","hash":"7993c90d57ec4e1ac9d52a803a77cc5753528b97","modified":1723734537698},{"_id":"public/tags//index.html","hash":"b3f6cfb9dcdec19d85bf17ea6c686198201bfb28","modified":1723734537698},{"_id":"public/tags/A-Tour-of-C/index.html","hash":"b97188d8873a1dd7f812ce711607d43f0052a61c","modified":1723734537698},{"_id":"public/tags//index.html","hash":"1f28fa128bf521dabfe5d06b934f64c944ef83ea","modified":1723734537698},{"_id":"public/tags//index.html","hash":"10024e53d9bcc8e6bcda0999ebac4413cd58cc9c","modified":1723734537698},{"_id":"public/tags//index.html","hash":"01ae70b9aa8d39f4ba4027d80e69efd9a58f535d","modified":1723734537698},{"_id":"public/tags//index.html","hash":"12e810c04e39b4ce58e8a258d61a37b0e418a437","modified":1723734537699},{"_id":"public/tags/K-FAC/index.html","hash":"6711e256af92a76881f148cd23ede709b53a8fc9","modified":1723734537699},{"_id":"public/tags/ACKTR/index.html","hash":"8acfaa82f86ced6a96607eb22a0d5f716fd4ab6d","modified":1723734537699},{"_id":"public/tags/ORCA/index.html","hash":"6d2419d0dd0d7730b45e26cf1213e2c0cb61b3ac","modified":1723734537699},{"_id":"public/tags/Prioritized-Experience-Replay/index.html","hash":"0073a84b7b0516edac8910588a431295014d0ca0","modified":1723734537699},{"_id":"public/tags/VO-Velocity-Obstacle/index.html","hash":"701955da1d98b82b5603d8ab09b50bc1245f8705","modified":1723734537699},{"_id":"public/tags/RVO-Reciprocal-Velocity-Obstacle/index.html","hash":"ff79166c5ab882d0562627663e7220a44a0381c5","modified":1723734537699},{"_id":"public/tags/rcnn/index.html","hash":"d9040c3be51c882d8664895946826fc05af39b85","modified":1723734537700},{"_id":"public/tags/CarlaUE5/index.html","hash":"496664ee244810545baa2e2a3d8e39548193c43a","modified":1723734537700},{"_id":"public/tags/pytorch-ppo/index.html","hash":"5b4ee71915b02425ecf84bba1ef740f5c0907d3e","modified":1723734537700},{"_id":"public/tags/derivative/index.html","hash":"2ebb751ff7cae94a0f593229ca0d5e587432ff67","modified":1723734537700},{"_id":"public/tags/softmax/index.html","hash":"c53b45c7b312bffeaa2b66004602344a6dd99ea4","modified":1723734537700},{"_id":"public/tags/backpropagation/index.html","hash":"20e2aad701de4a21743a5cec292a5b7f93cf6d49","modified":1723734537700},{"_id":"public/tags/cnn/index.html","hash":"fc48acf6090ea0dea61f0dd3517dc88775af93a0","modified":1723734537700},{"_id":"public/tags/bptt/index.html","hash":"8ae98591b63d84662e3252f532721b3ea482ffe4","modified":1723734537700},{"_id":"public/tags/max-pooling/index.html","hash":"6c6f7dd7f28a613fe567aa8951a19d334ddea4e6","modified":1723734537700},{"_id":"public/tags/Guided-Policy-Search/index.html","hash":"72c9b8c77908153e14150ca3ad6b56aeba22c250","modified":1723734537701},{"_id":"public/tags/GPS/index.html","hash":"6f24ebb71618e540588b9c1359b50b5805447fab","modified":1723734537701},{"_id":"public/tags//index.html","hash":"00c2e3ceb009983b654bd61a208ae6a1d28c1561","modified":1723734537701},{"_id":"public/tags/GAE/index.html","hash":"65df50f43ccf4ec62831235d6970b0eea1bac9d3","modified":1723734537701},{"_id":"public/tags/A3C/index.html","hash":"9e1fe7d556ba3175a8f289bf1056d6fdc445a5a0","modified":1723734537701},{"_id":"public/tags/DPG/index.html","hash":"5876baca8d3f78d7996a56fec4500330ff516a5c","modified":1723734537701},{"_id":"public/tags/DDPG/index.html","hash":"049499eb579fd9c41889adee0620d5babcbe4941","modified":1723734537701},{"_id":"public/tags/TRPO/index.html","hash":"df87b8428ad07c2680afcaff49a9abb2c6bbb3df","modified":1723734537701},{"_id":"public/tags/PPO/index.html","hash":"1e3685247f50d9b98b8f88369fc211a828e64080","modified":1723734537701},{"_id":"public/tags/Gym/index.html","hash":"6940c2087facce561c41eee35c1ce265086ca018","modified":1723734537705},{"_id":"public/tags/Ubuntu-USB/index.html","hash":"fc0a633064c678743d82e0fdda90d0665d3ed0b5","modified":1723734537705},{"_id":"public/tags/Ubuntu-to-Go/index.html","hash":"2d3b308e2dedbc91bb51d4aadffb948ce84c5f11","modified":1723734537705},{"_id":"public/tags/Vim/index.html","hash":"20514ad2aa4f021e4112d96c8bf4d0a86b4242d8","modified":1723734537706},{"_id":"public/js/src/affix.js","hash":"978e0422b5bf1b560236d8d10ebc1adcf66392e3","modified":1723734537706},{"_id":"public/js/src/algolia-search.js","hash":"96b29f69b8b916b22f62c9959a117b5a968200a5","modified":1723734537706},{"_id":"public/js/src/bootstrap.js","hash":"39bf93769d9080fa01a9a875183b43198f79bc19","modified":1723734537706},{"_id":"public/js/src/hook-duoshuo.js","hash":"a6119070c0119f33e08b29da7d2cce2635eb40a0","modified":1723734537706},{"_id":"public/js/src/motion.js","hash":"269414e84df544a4ccb88519f6abae4943db3c67","modified":1723734537706},{"_id":"public/js/src/post-details.js","hash":"2038f54e289b6da5def09689e69f623187147be5","modified":1723734537706},{"_id":"public/js/src/scrollspy.js","hash":"fe4da1b9fe73518226446f5f27d2831e4426fc35","modified":1723734537706},{"_id":"public/js/src/utils.js","hash":"384e17ff857f073060f5bf8c6e4f4b7353236331","modified":1723734537706},{"_id":"public/lib/algolia-instant-search/instantsearch.min.css","hash":"90ef19edc982645b118b095615838d9c5eaba0de","modified":1723734537706},{"_id":"public/lib/canvas-nest/canvas-nest.min.js","hash":"0387e75e23b1db108a755073fe52a0d03eb391a7","modified":1723734537706},{"_id":"public/lib/fastclick/bower.json","hash":"4dcecf83afddba148464d5339c93f6d0aa9f42e9","modified":1723734537706},{"_id":"public/lib/font-awesome/bower.json","hash":"64394a2a9aa00f8e321d8daa5e51a420f0e96dad","modified":1723734537706},{"_id":"public/lib/jquery_lazyload/bower.json","hash":"ae3c3b61e6e7f9e1d7e3585ad854380ecc04cf53","modified":1723734537706},{"_id":"public/lib/jquery_lazyload/jquery.lazyload.js","hash":"481fd478650e12b67c201a0ea41e92743f8b45a3","modified":1723734537707},{"_id":"public/lib/jquery_lazyload/jquery.scrollstop.js","hash":"0e9a81785a011c98be5ea821a8ed7d411818cfd1","modified":1723734537707},{"_id":"public/lib/velocity/bower.json","hash":"0ef14e7ccdfba5db6eb3f8fc6aa3b47282c36409","modified":1723734537707},{"_id":"public/lib/velocity/velocity.ui.min.js","hash":"ed5e534cd680a25d8d14429af824f38a2c7d9908","modified":1723734537707},{"_id":"public/js/src/schemes/pisces.js","hash":"9ccee9189c910b8a264802d7b2ec305d12dedcd0","modified":1723734537707},{"_id":"public/lib/fancybox/source/jquery.fancybox.css","hash":"5f163444617b6cf267342f06ac166a237bb62df9","modified":1723734537707},{"_id":"public/lib/fastclick/lib/fastclick.min.js","hash":"2cae0f5a6c5d6f3cb993015e6863f9483fc4de18","modified":1723734537707},{"_id":"public/lib/ua-parser-js/dist/ua-parser.min.js","hash":"38628e75e4412cc6f11074e03e1c6d257aae495b","modified":1723734537707},{"_id":"public/lib/ua-parser-js/dist/ua-parser.pack.js","hash":"214dad442a92d36af77ed0ca1d9092b16687f02f","modified":1723734537707},{"_id":"public/lib/fancybox/source/helpers/jquery.fancybox-buttons.css","hash":"1a9d8e5c22b371fcc69d4dbbb823d9c39f04c0c8","modified":1723734537707},{"_id":"public/lib/fancybox/source/helpers/jquery.fancybox-buttons.js","hash":"91e41741c2e93f732c82aaacec4cfc6e3f3ec876","modified":1723734537707},{"_id":"public/lib/fancybox/source/helpers/jquery.fancybox-media.js","hash":"3bdf69ed2469e4fb57f5a95f17300eef891ff90d","modified":1723734537707},{"_id":"public/lib/fancybox/source/helpers/jquery.fancybox-thumbs.css","hash":"4ac329c16a5277592fc12a37cca3d72ca4ec292f","modified":1723734537707},{"_id":"public/lib/fancybox/source/helpers/jquery.fancybox-thumbs.js","hash":"53e194f4a72e649c04fb586dd57762b8c022800b","modified":1723734537707},{"_id":"public/lib/fastclick/README.html","hash":"c52d599f3a276053019fc41af2759ce6491ef581","modified":1723734537707},{"_id":"public/lib/jquery_lazyload/CONTRIBUTING.html","hash":"a6358170d346af13b1452ac157b60505bec7015c","modified":1723734537708},{"_id":"public/lib/jquery_lazyload/README.html","hash":"bde24335f6bc09d8801c0dcd7274f71b466552bd","modified":1723734537708},{"_id":"public/2024/08/13/source-carlaue5-architecture/index.html","hash":"c1c5740445152381d64def79d4270b849bc0dfb6","modified":1723734537708},{"_id":"public/2024/08/11/note-a-tour-of-cpp-1/index.html","hash":"4fc37ea14aa626824db4a167201b6b6d86969633","modified":1723734537708},{"_id":"public/2024/08/04/tech-windows-ue5-carla-build/index.html","hash":"b50693f5580707067f985d7153083a9d0c03d2ae","modified":1723734537708},{"_id":"public/2021/12/29/tech-ubuntu-bluetooth/index.html","hash":"656d46b2821a7f0f8abdaf90f96d920425f520c3","modified":1723734537708},{"_id":"public/2021/12/11/tech-ubuntu-to-go/index.html","hash":"9c09d70bdb54c5f8ddbb8fbeb67585cb9984bd74","modified":1723734537708},{"_id":"public/2018/10/09/source-ppo/index.html","hash":"c0f54be857c8ced5c38a3b38c34241c4e92b61e4","modified":1723734537708},{"_id":"public/2018/09/27/tech-vimrc/index.html","hash":"f845a8753c5f705e360f894488ee4c054b8d131d","modified":1723734537708},{"_id":"public/2018/05/17/summary-gps/index.html","hash":"aebfad0d1a518dfc2f69a8a7a7d430319cc80aef","modified":1723734537709},{"_id":"public/2018/03/31/summary-derivative/index.html","hash":"c2bb46fbc178ac751bb502e686fd860ddeb18d1b","modified":1723734537709},{"_id":"public/2018/03/26/tech-gym/index.html","hash":"26c4b911bcb0ae69f82a45b9903d266124ddb238","modified":1723734537709},{"_id":"public/2018/03/18/paper-prioritized-experience-replay/index.html","hash":"c2ed47135dcfb7fee3de09de661ca2c833908591","modified":1723734537709},{"_id":"public/2018/02/26/paper-acktr/index.html","hash":"1766b902613685e632003f57e2905acd6613d125","modified":1723734537709},{"_id":"public/2018/02/03/summary-rl-drl/index.html","hash":"30761973d7621fcf740f477cee635308c1a1033d","modified":1723734537709},{"_id":"public/2017/09/09/note-reinforcement-learning/index.html","hash":"70500d508e1fabc4cc005efb300d5fa31d9f2dda","modified":1723734537709},{"_id":"public/2017/09/09/note-learning-how-to-learn/index.html","hash":"83308a335f082c2958cf86f3d141ed74f5623286","modified":1723734537709},{"_id":"public/2017/09/09/note-linear-algebra/index.html","hash":"0382b0637f6d76ebdc3cb78536517e920094b0e9","modified":1723734537709},{"_id":"public/2017/09/09/note-essence-of-linear-algrbra/index.html","hash":"5125faa9a63da59a760716549e387990d45d80e3","modified":1723734537709},{"_id":"public/2017/01/14/paper-orca/index.html","hash":"b1482d81ccaa41397272e19fbfc2302b62b97ed4","modified":1723734537710},{"_id":"public/2017/01/13/paper-rvo/index.html","hash":"ad889cf55fb63d492ad6a3efa89c9c0482a50573","modified":1723734537710},{"_id":"public/2016/09/02/mindmap-zhexuejiamendouganlexieshenme/index.html","hash":"1ebca925dba71250aa90f399412d1f6f50fed398","modified":1723734537710},{"_id":"public/2016/08/29/mindmap-goutongdeyishu/index.html","hash":"2a499c19868b0d0c7d53ac14214554a6dd56eea2","modified":1723734537710},{"_id":"public/2016/08/17/caffe_5_s2vt_captioner/index.html","hash":"1623a312f353b351cabc7b89c5adaeec1bbb887d","modified":1723734537710},{"_id":"public/2016/08/05/caffe_4_lstm/index.html","hash":"420c18c9d3d2153c4d8d7238fb1dbbb31b0ed91e","modified":1723734537710},{"_id":"public/2016/07/22/caffe_3_s2vt_data_process/index.html","hash":"8e65743805ef5e7080c692827ac1767a40875a9a","modified":1723734537710},{"_id":"public/2016/07/13/caffe_2_rnn/index.html","hash":"f6b621b9da4ed8cfe20c54f7e4effc656563127c","modified":1723734537710},{"_id":"public/2016/07/08/paper_rcnn/index.html","hash":"8609b87224d2836f36b477c2cfbd7363137bacec","modified":1723734537710},{"_id":"public/2016/07/04/caffe_1_layer/index.html","hash":"1dd6545738d50ea6809069ee6ad2a1018b35e4a7","modified":1723734537710},{"_id":"public/2016/07/01/imagenet/index.html","hash":"a264dcde761e851ef1858564d7259afc24854356","modified":1723734537710},{"_id":"public/2016/06/28/caffe-configuration/index.html","hash":"134c1ffe3b5981c2c6a5515d3058b54becc6c48b","modified":1723734537710},{"_id":"public/archives/index.html","hash":"b2ca0f1486b156a4ddf2317d3339d7afad68ce3d","modified":1723734537711},{"_id":"public/archives/page/2/index.html","hash":"dcc08984e248488f3420b122a26ca0dcef046df8","modified":1723734537711},{"_id":"public/archives/page/3/index.html","hash":"51ff40ccc03862799262ba12b378a53d44adff60","modified":1723734537711},{"_id":"public/archives/2016/index.html","hash":"85b7fc79dd1913ec77bb8eecdb6b2f29a3b5bff1","modified":1723734537711},{"_id":"public/archives/2018/index.html","hash":"4b7c8c643e11e714c824d884730ec95e322225d6","modified":1723734537711},{"_id":"public/index.html","hash":"c853298484a540db742a070ac4f6fe91e5e9cf72","modified":1723734537711},{"_id":"public/page/2/index.html","hash":"f8438f1102a628f3b26640393c124b833e2f41bd","modified":1723734537711},{"_id":"public/page/3/index.html","hash":"410dd0cb6a059371b69075a2bf70afa2e12291f1","modified":1723734537711},{"_id":"public/css/main.css","hash":"d298599ba6cfd63829e133307bbc9ab941c05c31","modified":1723734537711},{"_id":"public/lib/velocity/velocity.min.js","hash":"2f1afadc12e4cf59ef3b405308d21baa97e739c6","modified":1723734537711},{"_id":"public/lib/velocity/velocity.ui.js","hash":"6a1d101eab3de87527bb54fcc8c7b36b79d8f0df","modified":1723734537712},{"_id":"public/lib/jquery/index.js","hash":"41b4bfbaa96be6d1440db6e78004ade1c134e276","modified":1723734537712},{"_id":"public/lib/fancybox/source/jquery.fancybox.js","hash":"1cf3d47b5ccb7cb6e9019c64f2a88d03a64853e4","modified":1723734537712},{"_id":"public/lib/fastclick/lib/fastclick.js","hash":"06cef196733a710e77ad7e386ced6963f092dc55","modified":1723734537712},{"_id":"public/lib/font-awesome/css/font-awesome.css","hash":"4eda182cbcc046dbf449aef97c02c230cf80a494","modified":1723734537712},{"_id":"public/lib/font-awesome/css/font-awesome.min.css","hash":"fb5b49426dee7f1508500e698d1b3c6b04c8fcce","modified":1723734537712},{"_id":"public/lib/fancybox/source/jquery.fancybox.pack.js","hash":"53360764b429c212f424399384417ccc233bb3be","modified":1723734537712},{"_id":"public/lib/velocity/velocity.js","hash":"9f08181baea0cc0e906703b7e5df9111b9ef3373","modified":1723734537712},{"_id":"public/lib/algolia-instant-search/instantsearch.min.js","hash":"9ccc6f8144f54e86df9a3fd33a18368d81cf3a4f","modified":1723734537712},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.ttf","hash":"61d8d967807ef12598d81582fa95b9f600c3ee01","modified":1723734537713},{"_id":"public/2017/09/09/note-reinforcement-learning/lec5_Model_Free_Control.png","hash":"b5bb0f24c087f240a8d349ea72f542f6ffd06b83","modified":1723734537713},{"_id":"public/2018/03/31/summary-derivative/cnn2.png","hash":"6667442bd7b0a5de38e00cc55abf117eb8644bdb","modified":1723734537713},{"_id":"public/2017/09/09/note-learning-how-to-learn/learning_how_to_learn.png","hash":"a059657d99823762027a024dc3f7b8bff72278a8","modified":1723734537725},{"_id":"public/2024/08/13/source-carlaue5-architecture/pythonapi.png","hash":"10822010b0d821c2060c1be84302e27bc819bd60","modified":1723734537725},{"_id":"public/2018/03/31/summary-derivative/cnn1.png","hash":"71a300c340c5e933cd009fe54462a2d9de4f8d11","modified":1723734537725},{"_id":"public/2018/05/17/summary-gps/3.png","hash":"3b3ed866a498942542c3bc79c27d3d42ec836c2a","modified":1723734537725},{"_id":"public/2018/05/17/summary-gps/3_1.png","hash":"7fb5f326336b0c51974306654728a7403853167a","modified":1723734537726},{"_id":"public/2018/05/17/summary-gps/3_2.png","hash":"6383a5ce8de41f471675edc6a1d398b68135444f","modified":1723734537726},{"_id":"public/2018/05/17/summary-gps/4.png","hash":"ea3dc37746b8b154fc5ff72a4921ee8158829c45","modified":1723734537737},{"_id":"public/2024/08/13/source-carlaue5-architecture/client.png","hash":"e9973bfe8bca081bdaef6536156924b41bd6cff5","modified":1723734537776},{"_id":"public/2017/09/09/note-linear-algebra/linear_algebra.png","hash":"f88d5ce92c3b630755fc4c945f1f1bfaf6d2a10b","modified":1723734537819},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.svg","hash":"c0522272bbaef2acb3d341912754d6ea2d0ecfc0","modified":1723734537835},{"_id":"public/2017/01/13/paper-rvo/five_agents.gif","hash":"808251205f52fe3f90dc17cb14e7a5da62d86bc4","modified":1723734537874},{"_id":"public/2024/08/13/source-carlaue5-architecture/server.png","hash":"1b91793c57619b052e4e9f9308fa3dc9495bce45","modified":1723734537880}],"Category":[{"name":"","_id":"clzvf190v0003eqwovgfzelqr"},{"name":"caffe","_id":"clzvf19170008eqwo4qjdk8wq"},{"name":"","_id":"clzvf1920000xeqwof1lqngvg"},{"name":"","_id":"clzvf19240013eqwoestr1vom"},{"name":"","_id":"clzvf192g001neqwopkn8vv7k"},{"name":"","_id":"clzvf192j001veqwob3q8wppv"},{"name":"","_id":"clzvf192v002ieqwoeg8wgjhp"},{"name":"","_id":"clzvf192y002peqwo8cf339nl"},{"name":"","_id":"clzvf19360030eqwozsf9bhwy"}],"Data":[],"Page":[{"title":"tags","date":"2016-06-29T11:14:59.000Z","type":"tags","_content":"","source":"tags/index.md","raw":"---\ntitle: tags\ndate: 2016-06-29 19:14:59\ntype: \"tags\"\n---\n","updated":"2024-08-13T16:03:47.884Z","path":"tags/index.html","comments":1,"layout":"page","_id":"clzvf190o0001eqwo3dloqxx7","content":"","excerpt":"","more":""}],"Post":[{"title":"Ubuntu 16.04Caffe","date":"2016-06-28T11:21:42.000Z","description":["Ubuntu 16.04Caffe"],"_content":"\n## \n1.  [caffe](https://github.com/BVLC/caffe)\n> git clone git@github.com:BVLC/caffe.git\n\n2.  [](http://caffe.berkeleyvision.org/installation.html) \n\t1.  [](http://caffe.berkeleyvision.org/install_apt.html)\n\t> sudo apt-get install libprotobuf-dev libleveldb-dev libsnappy-dev libopencv-dev libhdf5-serial-dev protobuf-compiler\n\tsudo apt-get install --no-install-recommends libboost-all-dev  \n\tsudo apt-get install libatlas-base-dev  \n\tsudo apt-get install libgflags-dev libgoogle-glog-dev liblmdb-dev\n\n\t2. (**GPU-j4**) [](http://caffe.berkeleyvision.org/installation.html#compilation)\n\t> cp Makefile.config.example Makefile.config  \n\tmake all  \n\tmake test  \n\tmake runtest\n\n## \n- **can't find hdf5.h when build caffe**: shinclude [source](https://github.com/NVIDIA/DIGITS/issues/156)\n```\n#!/bin/bash\n# manipulate header path, before building caffe on debian jessie\n# usage:\n# 1. cd root of caffe\n# 2. bash <this_script>\n# 3. build\n\n# transformations :\n#  #include \"hdf5/serial/hdf5.h\" -> #include \"hdf5/serial/hdf5.h\"\n#  #include \"hdf5_hl.h\" -> #include \"hdf5/serial/hdf5_hl.h\"\n\nfind . -type f -exec sed -i -e 's^\"hdf5.h\"^\"hdf5/serial/hdf5.h\"^g' -e 's^\"hdf5_hl.h\"^\"hdf5/serial/hdf5_hl.h\"^g' '{}' \\;\n```\n\n- **/usr/bin/ld: cannot find -lhdf5_hl**:  [source](https://github.com/NVIDIA/DIGITS/issues/156)  \n> cd /usr/lib/x86_64-linux-gnu  \nsudo ln -s libhdf5_serial.so.10.1.0 libhdf5.so  \nsudo ln -s libhdf5_serial_hl.so.10.0.2 libhdf5_hl.so\n\n- **memcpy was not declared in this scope**: Makefile.config [source](https://github.com/BVLC/caffe/issues/4046)\n> Makefile.config  \nNVCCFLAGS += -ccbin=$(CXX) -Xcompiler -fPIC $(COMMON_FLAGS)  \n  \nNVCCFLAGS += -D_FORCE_INLINES -ccbin=$(CXX) -Xcompiler -fPIC $(COMMON_FLAGS)  \n\n- **Cuda**:  Cuda14.0415.04Cuda7.5apt-get16.04Cuda7.5\n\t1. cuda\n\t> sudo apt-get install nvidia-cuda-toolkit\n\t2. caffe/Makefile.configCUDA_DIR\n\n\n- ****: --\n\t*  [](http://askubuntu.com/questions/76081/brightness-not-working-after-installing-nvidia-driver)\n\t* `nvidia-setttings`gpu\n\n\n\n\n","source":"_posts/caffe-configuration.md","raw":"---\ntitle: Ubuntu 16.04Caffe\ndate: 2016-06-28 19:21:42\ntags: \n  - caffe\ndescription:\n  - Ubuntu 16.04Caffe\ncategories:\n  - \n---\n\n## \n1.  [caffe](https://github.com/BVLC/caffe)\n> git clone git@github.com:BVLC/caffe.git\n\n2.  [](http://caffe.berkeleyvision.org/installation.html) \n\t1.  [](http://caffe.berkeleyvision.org/install_apt.html)\n\t> sudo apt-get install libprotobuf-dev libleveldb-dev libsnappy-dev libopencv-dev libhdf5-serial-dev protobuf-compiler\n\tsudo apt-get install --no-install-recommends libboost-all-dev  \n\tsudo apt-get install libatlas-base-dev  \n\tsudo apt-get install libgflags-dev libgoogle-glog-dev liblmdb-dev\n\n\t2. (**GPU-j4**) [](http://caffe.berkeleyvision.org/installation.html#compilation)\n\t> cp Makefile.config.example Makefile.config  \n\tmake all  \n\tmake test  \n\tmake runtest\n\n## \n- **can't find hdf5.h when build caffe**: shinclude [source](https://github.com/NVIDIA/DIGITS/issues/156)\n```\n#!/bin/bash\n# manipulate header path, before building caffe on debian jessie\n# usage:\n# 1. cd root of caffe\n# 2. bash <this_script>\n# 3. build\n\n# transformations :\n#  #include \"hdf5/serial/hdf5.h\" -> #include \"hdf5/serial/hdf5.h\"\n#  #include \"hdf5_hl.h\" -> #include \"hdf5/serial/hdf5_hl.h\"\n\nfind . -type f -exec sed -i -e 's^\"hdf5.h\"^\"hdf5/serial/hdf5.h\"^g' -e 's^\"hdf5_hl.h\"^\"hdf5/serial/hdf5_hl.h\"^g' '{}' \\;\n```\n\n- **/usr/bin/ld: cannot find -lhdf5_hl**:  [source](https://github.com/NVIDIA/DIGITS/issues/156)  \n> cd /usr/lib/x86_64-linux-gnu  \nsudo ln -s libhdf5_serial.so.10.1.0 libhdf5.so  \nsudo ln -s libhdf5_serial_hl.so.10.0.2 libhdf5_hl.so\n\n- **memcpy was not declared in this scope**: Makefile.config [source](https://github.com/BVLC/caffe/issues/4046)\n> Makefile.config  \nNVCCFLAGS += -ccbin=$(CXX) -Xcompiler -fPIC $(COMMON_FLAGS)  \n  \nNVCCFLAGS += -D_FORCE_INLINES -ccbin=$(CXX) -Xcompiler -fPIC $(COMMON_FLAGS)  \n\n- **Cuda**:  Cuda14.0415.04Cuda7.5apt-get16.04Cuda7.5\n\t1. cuda\n\t> sudo apt-get install nvidia-cuda-toolkit\n\t2. caffe/Makefile.configCUDA_DIR\n\n\n- ****: --\n\t*  [](http://askubuntu.com/questions/76081/brightness-not-working-after-installing-nvidia-driver)\n\t* `nvidia-setttings`gpu\n\n\n\n\n","slug":"caffe-configuration","published":1,"updated":"2024-08-13T16:03:47.848Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clzvf190j0000eqwo4x5rnktz","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ol>\n<li><p> <a href=\"https://github.com/BVLC/caffe\" target=\"_blank\" rel=\"external\">caffe</a></p>\n<blockquote>\n<p>git clone git@github.com:BVLC/caffe.git</p>\n</blockquote>\n</li>\n<li><p> <a href=\"http://caffe.berkeleyvision.org/installation.html\" target=\"_blank\" rel=\"external\"></a> </p>\n<ol>\n<li><p> <a href=\"http://caffe.berkeleyvision.org/install_apt.html\" target=\"_blank\" rel=\"external\"></a></p>\n<blockquote>\n<p>sudo apt-get install libprotobuf-dev libleveldb-dev libsnappy-dev libopencv-dev libhdf5-serial-dev protobuf-compiler<br>sudo apt-get install no-install-recommends libboost-all-dev<br>sudo apt-get install libatlas-base-dev<br>sudo apt-get install libgflags-dev libgoogle-glog-dev liblmdb-dev</p>\n</blockquote>\n</li>\n<li><p>(<strong>GPU-j4</strong>) <a href=\"http://caffe.berkeleyvision.org/installation.html#compilation\" target=\"_blank\" rel=\"external\"></a></p>\n<blockquote>\n<p>cp Makefile.config.example Makefile.config<br>make all<br>make test<br>make runtest</p>\n</blockquote>\n</li>\n</ol>\n</li>\n</ol>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><p><strong>cant find hdf5.h when build caffe</strong>: shinclude <a href=\"https://github.com/NVIDIA/DIGITS/issues/156\" target=\"_blank\" rel=\"external\">source</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">#!/bin/bash</div><div class=\"line\"># manipulate header path, before building caffe on debian jessie</div><div class=\"line\"># usage:</div><div class=\"line\"># 1. cd root of caffe</div><div class=\"line\"># 2. bash &lt;this_script&gt;</div><div class=\"line\"># 3. build</div><div class=\"line\"></div><div class=\"line\"># transformations :</div><div class=\"line\">#  #include &quot;hdf5/serial/hdf5.h&quot; -&gt; #include &quot;hdf5/serial/hdf5.h&quot;</div><div class=\"line\">#  #include &quot;hdf5_hl.h&quot; -&gt; #include &quot;hdf5/serial/hdf5_hl.h&quot;</div><div class=\"line\"></div><div class=\"line\">find . -type f -exec sed -i -e &apos;s^&quot;hdf5.h&quot;^&quot;hdf5/serial/hdf5.h&quot;^g&apos; -e &apos;s^&quot;hdf5_hl.h&quot;^&quot;hdf5/serial/hdf5_hl.h&quot;^g&apos; &apos;&#123;&#125;&apos; \\;</div></pre></td></tr></table></figure>\n</li>\n<li><p><strong>/usr/bin/ld: cannot find -lhdf5_hl</strong>:  <a href=\"https://github.com/NVIDIA/DIGITS/issues/156\" target=\"_blank\" rel=\"external\">source</a>  </p>\n<blockquote>\n<p>cd /usr/lib/x86_64-linux-gnu<br>sudo ln -s libhdf5_serial.so.10.1.0 libhdf5.so<br>sudo ln -s libhdf5_serial_hl.so.10.0.2 libhdf5_hl.so</p>\n</blockquote>\n</li>\n<li><p><strong>memcpy was not declared in this scope</strong>: Makefile.config <a href=\"https://github.com/BVLC/caffe/issues/4046\" target=\"_blank\" rel=\"external\">source</a></p>\n<blockquote>\n<p>Makefile.config<br>NVCCFLAGS += -ccbin=$(CXX) -Xcompiler -fPIC $(COMMON_FLAGS)<br><br>NVCCFLAGS += -D_FORCE_INLINES -ccbin=$(CXX) -Xcompiler -fPIC $(COMMON_FLAGS)  </p>\n</blockquote>\n</li>\n<li><p><strong>Cuda</strong>:  Cuda14.0415.04Cuda7.5apt-get16.04Cuda7.5</p>\n<ol>\n<li>cuda<blockquote>\n<p>sudo apt-get install nvidia-cuda-toolkit</p>\n</blockquote>\n</li>\n<li>caffe/Makefile.configCUDA_DIR</li>\n</ol>\n</li>\n</ul>\n<ul>\n<li><strong></strong>: --<ul>\n<li> <a href=\"http://askubuntu.com/questions/76081/brightness-not-working-after-installing-nvidia-driver\" target=\"_blank\" rel=\"external\"></a></li>\n<li><code>nvidia-setttings</code>gpu</li>\n</ul>\n</li>\n</ul>\n","excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ol>\n<li><p> <a href=\"https://github.com/BVLC/caffe\">caffe</a></p>\n<blockquote>\n<p>git clone git@github.com:BVLC/caffe.git</p>\n</blockquote>\n</li>\n<li><p> <a href=\"http://caffe.berkeleyvision.org/installation.html\"></a> </p>\n<ol>\n<li><p> <a href=\"http://caffe.berkeleyvision.org/install_apt.html\"></a></p>\n<blockquote>\n<p>sudo apt-get install libprotobuf-dev libleveldb-dev libsnappy-dev libopencv-dev libhdf5-serial-dev protobuf-compiler<br>sudo apt-get install no-install-recommends libboost-all-dev<br>sudo apt-get install libatlas-base-dev<br>sudo apt-get install libgflags-dev libgoogle-glog-dev liblmdb-dev</p>\n</blockquote>\n</li>\n<li><p>(<strong>GPU-j4</strong>) <a href=\"http://caffe.berkeleyvision.org/installation.html#compilation\"></a></p>\n<blockquote>\n<p>cp Makefile.config.example Makefile.config<br>make all<br>make test<br>make runtest</p>\n</blockquote>\n</li>\n</ol>\n</li>\n</ol>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><p><strong>cant find hdf5.h when build caffe</strong>: shinclude <a href=\"https://github.com/NVIDIA/DIGITS/issues/156\">source</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">#!/bin/bash</div><div class=\"line\"># manipulate header path, before building caffe on debian jessie</div><div class=\"line\"># usage:</div><div class=\"line\"># 1. cd root of caffe</div><div class=\"line\"># 2. bash &lt;this_script&gt;</div><div class=\"line\"># 3. build</div><div class=\"line\"></div><div class=\"line\"># transformations :</div><div class=\"line\">#  #include &quot;hdf5/serial/hdf5.h&quot; -&gt; #include &quot;hdf5/serial/hdf5.h&quot;</div><div class=\"line\">#  #include &quot;hdf5_hl.h&quot; -&gt; #include &quot;hdf5/serial/hdf5_hl.h&quot;</div><div class=\"line\"></div><div class=\"line\">find . -type f -exec sed -i -e &apos;s^&quot;hdf5.h&quot;^&quot;hdf5/serial/hdf5.h&quot;^g&apos; -e &apos;s^&quot;hdf5_hl.h&quot;^&quot;hdf5/serial/hdf5_hl.h&quot;^g&apos; &apos;&#123;&#125;&apos; \\;</div></pre></td></tr></table></figure>\n</li>\n<li><p><strong>/usr/bin/ld: cannot find -lhdf5_hl</strong>:  <a href=\"https://github.com/NVIDIA/DIGITS/issues/156\">source</a>  </p>\n<blockquote>\n<p>cd /usr/lib/x86_64-linux-gnu<br>sudo ln -s libhdf5_serial.so.10.1.0 libhdf5.so<br>sudo ln -s libhdf5_serial_hl.so.10.0.2 libhdf5_hl.so</p>\n</blockquote>\n</li>\n<li><p><strong>memcpy was not declared in this scope</strong>: Makefile.config <a href=\"https://github.com/BVLC/caffe/issues/4046\">source</a></p>\n<blockquote>\n<p>Makefile.config<br>NVCCFLAGS += -ccbin=$(CXX) -Xcompiler -fPIC $(COMMON_FLAGS)<br><br>NVCCFLAGS += -D_FORCE_INLINES -ccbin=$(CXX) -Xcompiler -fPIC $(COMMON_FLAGS)  </p>\n</blockquote>\n</li>\n<li><p><strong>Cuda</strong>:  Cuda14.0415.04Cuda7.5apt-get16.04Cuda7.5</p>\n<ol>\n<li>cuda<blockquote>\n<p>sudo apt-get install nvidia-cuda-toolkit</p>\n</blockquote>\n</li>\n<li>caffe/Makefile.configCUDA_DIR</li>\n</ol>\n</li>\n</ul>\n<ul>\n<li><strong></strong>: --<ul>\n<li> <a href=\"http://askubuntu.com/questions/76081/brightness-not-working-after-installing-nvidia-driver\"></a></li>\n<li><code>nvidia-setttings</code>gpu</li>\n</ul>\n</li>\n</ul>\n"},{"title":"Caffe","date":"2016-07-04T11:23:42.000Z","description":["Caffeimage_data_layerCaffe"],"_content":"\n## Caffe\n\n### \nCaffeAlexNetLeNetc++protocol buffer\n\n### \n\n.cpp\n\n- **CAFFE_ROOT/include/caffe/layers**: .hpp\n- **CAFFE_ROOT/src/caffe/layers**: .cpp\n- **CAFFE_ROOT/src/caffe/proto**: .protoprotocol buffer\n\n### \n\n- **MODEL_ROOT/train_val.prototxt**: \n- **MODEL_ROOT/solver.prototxt**: \n- **MODEL_ROOT/train.sh**: \n- **MODEL_ROOT/test.sh**: \n\n## \n\n### \n[MSRA 10K Salient Object Database](http://mmcheng.net/msra10k/)1w.jpg.png9k1k\n\n### image_data_layer\n\nimage_data_layer\n\n- **DataLayerSetUp**: N, K, H, W)\n- **ShuffleImages**: \n- **load_batch**: \n- **INSTANTIATE_CLASS****REGISTER_LAYER_CLASS**: \n\n\n### DataLayerSetUp\n\n- ****: protocol bufferk,h,w800\\*600256\\*256\n```cpp\n  const int new_height = this->layer_param_.image_data_param().new_height();\n  const int new_width  = this->layer_param_.image_data_param().new_width();\n  const bool is_color  = this->layer_param_.image_data_param().is_color();\n  string root_folder = this->layer_param_.image_data_param().root_folder();\n\n```\n- ****: txtlabellines_\n```cpp\n  while (std::getline(infile, line)) {\n    pos = line.find_last_of(' ');\n    label = atoi(line.substr(pos + 1).c_str());\n    lines_.push_back(std::make_pair(line.substr(0, pos), label));\n  }\n```\n- **shuffle & skip**\n- ****: \n```cpp\n  // Read an image, and use it to initialize the top blob.\n  cv::Mat cv_img = ReadImageToCVMat(root_folder + lines_[lines_id_].first,\n                                    new_height, new_width, is_color);\n  CHECK(cv_img.data) << \"Could not load \" << lines_[lines_id_].first;\n  // Use data_transformer to infer the expected blob shape from a cv_image.\n  vector<int> top_shape = this->data_transformer_->InferBlobShape(cv_img);\n  this->transformed_data_.Reshape(top_shape);\n  // Reshape prefetch_data and top[0] according to the batch_size.\n  const int batch_size = this->layer_param_.image_data_param().batch_size();\n  CHECK_GT(batch_size, 0) << \"Positive batch size required\";\n  top_shape[0] = batch_size;\n  for (int i = 0; i < this->PREFETCH_COUNT; ++i) {\n    this->prefetch_[i].data_.Reshape(top_shape);\n  }\n  top[0]->Reshape(top_shape);\n\n```\n\n### load_batch\n\n- ****\n- ****\n- ****: prefetch\\_dataoffsetprefetch\\_data+offsettransformed\\_data\\_\n```cpp\n    cv::Mat cv_img = ReadImageToCVMat(root_folder + lines_[lines_id_].first,\n        new_height, new_width, is_color);\n    CHECK(cv_img.data) << \"Could not load \" << lines_[lines_id_].first;\n    read_time += timer.MicroSeconds();\n    timer.Start();\n    // Apply transformations (mirror, crop...) to the image\n    int offset = batch->data_.offset(item_id);\n    this->transformed_data_.set_cpu_data(prefetch_data + offset);\n    this->data_transformer_->Transform(cv_img, &(this->transformed_data_));\n    trans_time += timer.MicroSeconds();\n```\n\n### image_data_layer_disc\n\n[DISC](http://ieeexplore.ieee.org/xpls/abs_all.jsp?arnumber=7372470&tag=1)labelintlabel\n\n- **image_data_layer_disc.hpp**: lines_stringpair\n- **image_data_layer_disc.cpp**: datalabel\n- **caffe.proto**: disc_image_data_paralabel\n\n## \n\n- **train_val.prototxt**: modelsAlexNetdataimage_data_layer_disclossaccuracy\n- **solver.prototxt**: train_val.prototxt1e-9\n- **train.sh**: \n```shell\n#!/usr/bin/env sh\n\n./build/tools/caffe train --solver=models/disc/solver.prototxt\n\n```\n- **test.sh**:\n```shell\n#!/usr/bin/env sh\n\n./build/tools/caffe.bin test -model=models/disc/train_val.prototxt -weights=models/disc/caffe_alexnet_train_iter_370000.caffemodel -gpu=1\n```\n## Protocol Buffer\nProtocol Buffer\n- [IMB](https://www.ibm.com/developerworks/cn/linux/l-cn-gpb/)\n- [Google](https://developers.google.com/protocol-buffers/docs/encoding#optional)\n- [pb1](http://www.iloveandroid.net/2015/10/08/studyPtorobuf/)\n- [pb2](http://www.cnblogs.com/royenhome/archive/2010/10/29/1864860.html)","source":"_posts/caffe_1_layer.md","raw":"---\ntitle: Caffe\ndate: 2016-07-04 19:23:42\ntags: \n  - caffe\ndescription:\n  - Caffeimage_data_layerCaffe\ncategories:\n  - caffe\n---\n\n## Caffe\n\n### \nCaffeAlexNetLeNetc++protocol buffer\n\n### \n\n.cpp\n\n- **CAFFE_ROOT/include/caffe/layers**: .hpp\n- **CAFFE_ROOT/src/caffe/layers**: .cpp\n- **CAFFE_ROOT/src/caffe/proto**: .protoprotocol buffer\n\n### \n\n- **MODEL_ROOT/train_val.prototxt**: \n- **MODEL_ROOT/solver.prototxt**: \n- **MODEL_ROOT/train.sh**: \n- **MODEL_ROOT/test.sh**: \n\n## \n\n### \n[MSRA 10K Salient Object Database](http://mmcheng.net/msra10k/)1w.jpg.png9k1k\n\n### image_data_layer\n\nimage_data_layer\n\n- **DataLayerSetUp**: N, K, H, W)\n- **ShuffleImages**: \n- **load_batch**: \n- **INSTANTIATE_CLASS****REGISTER_LAYER_CLASS**: \n\n\n### DataLayerSetUp\n\n- ****: protocol bufferk,h,w800\\*600256\\*256\n```cpp\n  const int new_height = this->layer_param_.image_data_param().new_height();\n  const int new_width  = this->layer_param_.image_data_param().new_width();\n  const bool is_color  = this->layer_param_.image_data_param().is_color();\n  string root_folder = this->layer_param_.image_data_param().root_folder();\n\n```\n- ****: txtlabellines_\n```cpp\n  while (std::getline(infile, line)) {\n    pos = line.find_last_of(' ');\n    label = atoi(line.substr(pos + 1).c_str());\n    lines_.push_back(std::make_pair(line.substr(0, pos), label));\n  }\n```\n- **shuffle & skip**\n- ****: \n```cpp\n  // Read an image, and use it to initialize the top blob.\n  cv::Mat cv_img = ReadImageToCVMat(root_folder + lines_[lines_id_].first,\n                                    new_height, new_width, is_color);\n  CHECK(cv_img.data) << \"Could not load \" << lines_[lines_id_].first;\n  // Use data_transformer to infer the expected blob shape from a cv_image.\n  vector<int> top_shape = this->data_transformer_->InferBlobShape(cv_img);\n  this->transformed_data_.Reshape(top_shape);\n  // Reshape prefetch_data and top[0] according to the batch_size.\n  const int batch_size = this->layer_param_.image_data_param().batch_size();\n  CHECK_GT(batch_size, 0) << \"Positive batch size required\";\n  top_shape[0] = batch_size;\n  for (int i = 0; i < this->PREFETCH_COUNT; ++i) {\n    this->prefetch_[i].data_.Reshape(top_shape);\n  }\n  top[0]->Reshape(top_shape);\n\n```\n\n### load_batch\n\n- ****\n- ****\n- ****: prefetch\\_dataoffsetprefetch\\_data+offsettransformed\\_data\\_\n```cpp\n    cv::Mat cv_img = ReadImageToCVMat(root_folder + lines_[lines_id_].first,\n        new_height, new_width, is_color);\n    CHECK(cv_img.data) << \"Could not load \" << lines_[lines_id_].first;\n    read_time += timer.MicroSeconds();\n    timer.Start();\n    // Apply transformations (mirror, crop...) to the image\n    int offset = batch->data_.offset(item_id);\n    this->transformed_data_.set_cpu_data(prefetch_data + offset);\n    this->data_transformer_->Transform(cv_img, &(this->transformed_data_));\n    trans_time += timer.MicroSeconds();\n```\n\n### image_data_layer_disc\n\n[DISC](http://ieeexplore.ieee.org/xpls/abs_all.jsp?arnumber=7372470&tag=1)labelintlabel\n\n- **image_data_layer_disc.hpp**: lines_stringpair\n- **image_data_layer_disc.cpp**: datalabel\n- **caffe.proto**: disc_image_data_paralabel\n\n## \n\n- **train_val.prototxt**: modelsAlexNetdataimage_data_layer_disclossaccuracy\n- **solver.prototxt**: train_val.prototxt1e-9\n- **train.sh**: \n```shell\n#!/usr/bin/env sh\n\n./build/tools/caffe train --solver=models/disc/solver.prototxt\n\n```\n- **test.sh**:\n```shell\n#!/usr/bin/env sh\n\n./build/tools/caffe.bin test -model=models/disc/train_val.prototxt -weights=models/disc/caffe_alexnet_train_iter_370000.caffemodel -gpu=1\n```\n## Protocol Buffer\nProtocol Buffer\n- [IMB](https://www.ibm.com/developerworks/cn/linux/l-cn-gpb/)\n- [Google](https://developers.google.com/protocol-buffers/docs/encoding#optional)\n- [pb1](http://www.iloveandroid.net/2015/10/08/studyPtorobuf/)\n- [pb2](http://www.cnblogs.com/royenhome/archive/2010/10/29/1864860.html)","slug":"caffe_1_layer","published":1,"updated":"2024-08-13T16:03:47.848Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clzvf190s0002eqwoq82gsteh","content":"<h2 id=\"Caffe\"><a href=\"#Caffe\" class=\"headerlink\" title=\"Caffe\"></a>Caffe</h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>CaffeAlexNetLeNetc++protocol buffer</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>.cpp</p>\n<ul>\n<li><strong>CAFFE_ROOT/include/caffe/layers</strong>: .hpp</li>\n<li><strong>CAFFE_ROOT/src/caffe/layers</strong>: .cpp</li>\n<li><strong>CAFFE_ROOT/src/caffe/proto</strong>: .protoprotocol buffer</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li><strong>MODEL_ROOT/train_val.prototxt</strong>: </li>\n<li><strong>MODEL_ROOT/solver.prototxt</strong>: </li>\n<li><strong>MODEL_ROOT/train.sh</strong>: </li>\n<li><strong>MODEL_ROOT/test.sh</strong>: </li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><a href=\"http://mmcheng.net/msra10k/\" target=\"_blank\" rel=\"external\">MSRA 10K Salient Object Database</a>1w.jpg.png9k1k</p>\n<h3 id=\"image-data-layer\"><a href=\"#image-data-layer\" class=\"headerlink\" title=\"image_data_layer\"></a>image_data_layer</h3><p>image_data_layer</p>\n<ul>\n<li><strong>DataLayerSetUp</strong>: N, K, H, W)</li>\n<li><strong>ShuffleImages</strong>: </li>\n<li><strong>load_batch</strong>: </li>\n<li><strong>INSTANTIATE_CLASS</strong><strong>REGISTER_LAYER_CLASS</strong>: </li>\n</ul>\n<h3 id=\"DataLayerSetUp\"><a href=\"#DataLayerSetUp\" class=\"headerlink\" title=\"DataLayerSetUp\"></a>DataLayerSetUp</h3><ul>\n<li><p><strong></strong>: protocol bufferk,h,w800*600256*256</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">int</span> new_height = <span class=\"keyword\">this</span>-&gt;layer_param_.image_data_param().new_height();</div><div class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">int</span> new_width  = <span class=\"keyword\">this</span>-&gt;layer_param_.image_data_param().new_width();</div><div class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">bool</span> is_color  = <span class=\"keyword\">this</span>-&gt;layer_param_.image_data_param().is_color();</div><div class=\"line\"><span class=\"built_in\">string</span> root_folder = <span class=\"keyword\">this</span>-&gt;layer_param_.image_data_param().root_folder();</div></pre></td></tr></table></figure>\n</li>\n<li><p><strong></strong>: txtlabellines_</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">while</span> (<span class=\"built_in\">std</span>::getline(infile, line)) &#123;</div><div class=\"line\">  pos = line.find_last_of(<span class=\"string\">' '</span>);</div><div class=\"line\">  label = atoi(line.substr(pos + <span class=\"number\">1</span>).c_str());</div><div class=\"line\">  lines_.push_back(<span class=\"built_in\">std</span>::make_pair(line.substr(<span class=\"number\">0</span>, pos), label));</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n</li>\n<li><p><strong>shuffle &amp; skip</strong></p>\n</li>\n<li><strong></strong>: <figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// Read an image, and use it to initialize the top blob.</span></div><div class=\"line\">cv::Mat cv_img = ReadImageToCVMat(root_folder + lines_[lines_id_].first,</div><div class=\"line\">                                  new_height, new_width, is_color);</div><div class=\"line\">CHECK(cv_img.data) &lt;&lt; <span class=\"string\">\"Could not load \"</span> &lt;&lt; lines_[lines_id_].first;</div><div class=\"line\"><span class=\"comment\">// Use data_transformer to infer the expected blob shape from a cv_image.</span></div><div class=\"line\"><span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; top_shape = <span class=\"keyword\">this</span>-&gt;data_transformer_-&gt;InferBlobShape(cv_img);</div><div class=\"line\"><span class=\"keyword\">this</span>-&gt;transformed_data_.Reshape(top_shape);</div><div class=\"line\"><span class=\"comment\">// Reshape prefetch_data and top[0] according to the batch_size.</span></div><div class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">int</span> batch_size = <span class=\"keyword\">this</span>-&gt;layer_param_.image_data_param().batch_size();</div><div class=\"line\">CHECK_GT(batch_size, <span class=\"number\">0</span>) &lt;&lt; <span class=\"string\">\"Positive batch size required\"</span>;</div><div class=\"line\">top_shape[<span class=\"number\">0</span>] = batch_size;</div><div class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"keyword\">this</span>-&gt;PREFETCH_COUNT; ++i) &#123;</div><div class=\"line\">  <span class=\"keyword\">this</span>-&gt;prefetch_[i].data_.Reshape(top_shape);</div><div class=\"line\">&#125;</div><div class=\"line\">top[<span class=\"number\">0</span>]-&gt;Reshape(top_shape);</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"load-batch\"><a href=\"#load-batch\" class=\"headerlink\" title=\"load_batch\"></a>load_batch</h3><ul>\n<li><strong></strong></li>\n<li><strong></strong></li>\n<li><strong></strong>: prefetch_dataoffsetprefetch_data+offsettransformed_data_<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">cv::Mat cv_img = ReadImageToCVMat(root_folder + lines_[lines_id_].first,</div><div class=\"line\">    new_height, new_width, is_color);</div><div class=\"line\">CHECK(cv_img.data) &lt;&lt; <span class=\"string\">\"Could not load \"</span> &lt;&lt; lines_[lines_id_].first;</div><div class=\"line\">read_time += timer.MicroSeconds();</div><div class=\"line\">timer.Start();</div><div class=\"line\"><span class=\"comment\">// Apply transformations (mirror, crop...) to the image</span></div><div class=\"line\"><span class=\"keyword\">int</span> offset = batch-&gt;data_.offset(item_id);</div><div class=\"line\"><span class=\"keyword\">this</span>-&gt;transformed_data_.set_cpu_data(prefetch_data + offset);</div><div class=\"line\"><span class=\"keyword\">this</span>-&gt;data_transformer_-&gt;Transform(cv_img, &amp;(<span class=\"keyword\">this</span>-&gt;transformed_data_));</div><div class=\"line\">trans_time += timer.MicroSeconds();</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"image-data-layer-disc\"><a href=\"#image-data-layer-disc\" class=\"headerlink\" title=\"image_data_layer_disc\"></a>image_data_layer_disc</h3><p><a href=\"http://ieeexplore.ieee.org/xpls/abs_all.jsp?arnumber=7372470&amp;tag=1\" target=\"_blank\" rel=\"external\">DISC</a>labelintlabel</p>\n<ul>\n<li><strong>image_data_layer_disc.hpp</strong>: lines_stringpair</li>\n<li><strong>image_data_layer_disc.cpp</strong>: datalabel</li>\n<li><strong>caffe.proto</strong>: disc_image_data_paralabel</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><strong>train_val.prototxt</strong>: modelsAlexNetdataimage_data_layer_disclossaccuracy</li>\n<li><strong>solver.prototxt</strong>: train_val.prototxt1e-9</li>\n<li><p><strong>train.sh</strong>: </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">#!/usr/bin/env sh</div><div class=\"line\"></div><div class=\"line\">./build/tools/caffe train --solver=models/disc/solver.prototxt</div></pre></td></tr></table></figure>\n</li>\n<li><p><strong>test.sh</strong>:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">#!/usr/bin/env sh</div><div class=\"line\"></div><div class=\"line\">./build/tools/caffe.bin test -model=models/disc/train_val.prototxt -weights=models/disc/caffe_alexnet_train_iter_370000.caffemodel -gpu=1</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<h2 id=\"Protocol-Buffer\"><a href=\"#Protocol-Buffer\" class=\"headerlink\" title=\"Protocol Buffer\"></a>Protocol Buffer</h2><p>Protocol Buffer</p>\n<ul>\n<li><a href=\"https://www.ibm.com/developerworks/cn/linux/l-cn-gpb/\" target=\"_blank\" rel=\"external\">IMB</a></li>\n<li><a href=\"https://developers.google.com/protocol-buffers/docs/encoding#optional\" target=\"_blank\" rel=\"external\">Google</a></li>\n<li><a href=\"http://www.iloveandroid.net/2015/10/08/studyPtorobuf/\" target=\"_blank\" rel=\"external\">pb1</a></li>\n<li><a href=\"http://www.cnblogs.com/royenhome/archive/2010/10/29/1864860.html\" target=\"_blank\" rel=\"external\">pb2</a></li>\n</ul>\n","excerpt":"","more":"<h2 id=\"Caffe\"><a href=\"#Caffe\" class=\"headerlink\" title=\"Caffe\"></a>Caffe</h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>CaffeAlexNetLeNetc++protocol buffer</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>.cpp</p>\n<ul>\n<li><strong>CAFFE_ROOT/include/caffe/layers</strong>: .hpp</li>\n<li><strong>CAFFE_ROOT/src/caffe/layers</strong>: .cpp</li>\n<li><strong>CAFFE_ROOT/src/caffe/proto</strong>: .protoprotocol buffer</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li><strong>MODEL_ROOT/train_val.prototxt</strong>: </li>\n<li><strong>MODEL_ROOT/solver.prototxt</strong>: </li>\n<li><strong>MODEL_ROOT/train.sh</strong>: </li>\n<li><strong>MODEL_ROOT/test.sh</strong>: </li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><a href=\"http://mmcheng.net/msra10k/\">MSRA 10K Salient Object Database</a>1w.jpg.png9k1k</p>\n<h3 id=\"image-data-layer\"><a href=\"#image-data-layer\" class=\"headerlink\" title=\"image_data_layer\"></a>image_data_layer</h3><p>image_data_layer</p>\n<ul>\n<li><strong>DataLayerSetUp</strong>: N, K, H, W)</li>\n<li><strong>ShuffleImages</strong>: </li>\n<li><strong>load_batch</strong>: </li>\n<li><strong>INSTANTIATE_CLASS</strong><strong>REGISTER_LAYER_CLASS</strong>: </li>\n</ul>\n<h3 id=\"DataLayerSetUp\"><a href=\"#DataLayerSetUp\" class=\"headerlink\" title=\"DataLayerSetUp\"></a>DataLayerSetUp</h3><ul>\n<li><p><strong></strong>: protocol bufferk,h,w800*600256*256</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">int</span> new_height = <span class=\"keyword\">this</span>-&gt;layer_param_.image_data_param().new_height();</div><div class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">int</span> new_width  = <span class=\"keyword\">this</span>-&gt;layer_param_.image_data_param().new_width();</div><div class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">bool</span> is_color  = <span class=\"keyword\">this</span>-&gt;layer_param_.image_data_param().is_color();</div><div class=\"line\"><span class=\"built_in\">string</span> root_folder = <span class=\"keyword\">this</span>-&gt;layer_param_.image_data_param().root_folder();</div></pre></td></tr></table></figure>\n</li>\n<li><p><strong></strong>: txtlabellines_</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">while</span> (<span class=\"built_in\">std</span>::getline(infile, line)) &#123;</div><div class=\"line\">  pos = line.find_last_of(<span class=\"string\">' '</span>);</div><div class=\"line\">  label = atoi(line.substr(pos + <span class=\"number\">1</span>).c_str());</div><div class=\"line\">  lines_.push_back(<span class=\"built_in\">std</span>::make_pair(line.substr(<span class=\"number\">0</span>, pos), label));</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n</li>\n<li><p><strong>shuffle &amp; skip</strong></p>\n</li>\n<li><strong></strong>: <figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// Read an image, and use it to initialize the top blob.</span></div><div class=\"line\">cv::Mat cv_img = ReadImageToCVMat(root_folder + lines_[lines_id_].first,</div><div class=\"line\">                                  new_height, new_width, is_color);</div><div class=\"line\">CHECK(cv_img.data) &lt;&lt; <span class=\"string\">\"Could not load \"</span> &lt;&lt; lines_[lines_id_].first;</div><div class=\"line\"><span class=\"comment\">// Use data_transformer to infer the expected blob shape from a cv_image.</span></div><div class=\"line\"><span class=\"built_in\">vector</span>&lt;<span class=\"keyword\">int</span>&gt; top_shape = <span class=\"keyword\">this</span>-&gt;data_transformer_-&gt;InferBlobShape(cv_img);</div><div class=\"line\"><span class=\"keyword\">this</span>-&gt;transformed_data_.Reshape(top_shape);</div><div class=\"line\"><span class=\"comment\">// Reshape prefetch_data and top[0] according to the batch_size.</span></div><div class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">int</span> batch_size = <span class=\"keyword\">this</span>-&gt;layer_param_.image_data_param().batch_size();</div><div class=\"line\">CHECK_GT(batch_size, <span class=\"number\">0</span>) &lt;&lt; <span class=\"string\">\"Positive batch size required\"</span>;</div><div class=\"line\">top_shape[<span class=\"number\">0</span>] = batch_size;</div><div class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"keyword\">this</span>-&gt;PREFETCH_COUNT; ++i) &#123;</div><div class=\"line\">  <span class=\"keyword\">this</span>-&gt;prefetch_[i].data_.Reshape(top_shape);</div><div class=\"line\">&#125;</div><div class=\"line\">top[<span class=\"number\">0</span>]-&gt;Reshape(top_shape);</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"load-batch\"><a href=\"#load-batch\" class=\"headerlink\" title=\"load_batch\"></a>load_batch</h3><ul>\n<li><strong></strong></li>\n<li><strong></strong></li>\n<li><strong></strong>: prefetch_dataoffsetprefetch_data+offsettransformed_data_<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">cv::Mat cv_img = ReadImageToCVMat(root_folder + lines_[lines_id_].first,</div><div class=\"line\">    new_height, new_width, is_color);</div><div class=\"line\">CHECK(cv_img.data) &lt;&lt; <span class=\"string\">\"Could not load \"</span> &lt;&lt; lines_[lines_id_].first;</div><div class=\"line\">read_time += timer.MicroSeconds();</div><div class=\"line\">timer.Start();</div><div class=\"line\"><span class=\"comment\">// Apply transformations (mirror, crop...) to the image</span></div><div class=\"line\"><span class=\"keyword\">int</span> offset = batch-&gt;data_.offset(item_id);</div><div class=\"line\"><span class=\"keyword\">this</span>-&gt;transformed_data_.set_cpu_data(prefetch_data + offset);</div><div class=\"line\"><span class=\"keyword\">this</span>-&gt;data_transformer_-&gt;Transform(cv_img, &amp;(<span class=\"keyword\">this</span>-&gt;transformed_data_));</div><div class=\"line\">trans_time += timer.MicroSeconds();</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"image-data-layer-disc\"><a href=\"#image-data-layer-disc\" class=\"headerlink\" title=\"image_data_layer_disc\"></a>image_data_layer_disc</h3><p><a href=\"http://ieeexplore.ieee.org/xpls/abs_all.jsp?arnumber=7372470&amp;tag=1\">DISC</a>labelintlabel</p>\n<ul>\n<li><strong>image_data_layer_disc.hpp</strong>: lines_stringpair</li>\n<li><strong>image_data_layer_disc.cpp</strong>: datalabel</li>\n<li><strong>caffe.proto</strong>: disc_image_data_paralabel</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><strong>train_val.prototxt</strong>: modelsAlexNetdataimage_data_layer_disclossaccuracy</li>\n<li><strong>solver.prototxt</strong>: train_val.prototxt1e-9</li>\n<li><p><strong>train.sh</strong>: </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">#!/usr/bin/env sh</div><div class=\"line\"></div><div class=\"line\">./build/tools/caffe train --solver=models/disc/solver.prototxt</div></pre></td></tr></table></figure>\n</li>\n<li><p><strong>test.sh</strong>:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">#!/usr/bin/env sh</div><div class=\"line\"></div><div class=\"line\">./build/tools/caffe.bin test -model=models/disc/train_val.prototxt -weights=models/disc/caffe_alexnet_train_iter_370000.caffemodel -gpu=1</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<h2 id=\"Protocol-Buffer\"><a href=\"#Protocol-Buffer\" class=\"headerlink\" title=\"Protocol Buffer\"></a>Protocol Buffer</h2><p>Protocol Buffer</p>\n<ul>\n<li><a href=\"https://www.ibm.com/developerworks/cn/linux/l-cn-gpb/\">IMB</a></li>\n<li><a href=\"https://developers.google.com/protocol-buffers/docs/encoding#optional\">Google</a></li>\n<li><a href=\"http://www.iloveandroid.net/2015/10/08/studyPtorobuf/\">pb1</a></li>\n<li><a href=\"http://www.cnblogs.com/royenhome/archive/2010/10/29/1864860.html\">pb2</a></li>\n</ul>\n"},{"title":"CaffeRNN","date":"2016-07-13T07:20:42.000Z","description":["CaffeRNN"],"_content":"\n## \nRNN(Recurrent Neural Network)RNNRNN\n\n## \n\n### \n- **sequence_layers.hpp:**  RecurrentLayerRNNLSTM\n- **recurrent_layer.cpp:** RecurrentLayer\n- **rnn_layer.cpp:** RNN\n\n### \n- ****\n- **RecurrentLayer:** \n- **RNNLayer:** \n- **bottom:**\n\t* bottom[0]: T\n\t* bottom[1]: N\n\t* ...: data\n- **top:** bottom\n\n## sequence_layers.hpp\n\n### \n- **shared\\_ptr< Net< Dtype> \\> unrolled\\_net\\_:** \n- **int N\\_:** \n- **int T\\_:** \n- **bool static\\_input\\_:** \n- **vector< Blob< Dtype\\>* \\> recur\\_input\\_blobs\\_:** ($h_0$)\n- **vector< Blob< Dtype\\>* \\> recur\\_output\\_blobs\\_:** ($h_T$)\n- **vector< Blob< Dtype\\>* \\> output\\_blobs\\_:** (top)\n- **Blob< Dtype\\>* x\\_input\\_blob\\_:** (bottom[0])\n- **Blob< Dtype\\>* x\\_static\\_input\\_blob\\_:** (bottom[2])\n- **Blob< Dtype\\>* cont\\_input\\_blob\\_:** (bottom[1])cont0\n\n### \n- **FillUnrolledNet(NetParameter* net\\_param):** \t\n\t* net\\_param\n\t* prototxt\n\t* xml\n- **xxxBlobNames:** \n\t* blobblob\n\t* findViewByID\n\n## recurrent_layer.cpp\n\n### Reshape\nblobblobbottomtop\n\n1. **Reshape:** x\\_input\\_blob\\_, cont\\_input\\_blob\\_x\\_static\\_input\\_blob\\_blobshapebottom\n2. **Reshape:** recur\\_input\\_blobs\\_blob($h_0$)\n3. **Share:** x\\_input\\_blob\\_, cont\\_input\\_blob\\_x\\_static\\_input\\_blob\\_bottomdatadiff\n4. **Share:** output\\_blobs\\_topdatadiff\n\n### LayerSetUp\nprototxtnet\\_paramNet\n\n1. **bottom**\n\t- bottom[0]:  (T \\* N \\* ...)\n\t- bottom[1]: 01 (T \\* N \\* 1)\n\t- bottom[2]: \n2. ****\n\t- x: bottom[0]\n\t- cont: bottom[1]\n\t- x_static: bottom[2]\n3. ****FillUnrolledNetnet\\_param\n4. **net\\_param**\n```cpp\n  unrolled_net_.reset(new Net<Dtype>(net_param));\n```\n5. ****\n\t- \n\t- net->blob\\_by\\_name(\"xxx\")findViewByIdblobkeyxxxBlobNames\n6. ****\n\t- blobs\\_: blobprototxtcaffeblobs\\_\n\t- param\\_propagate\\_down\\_: bp\n\t- recur\\_output\\_blobs\\_0****\n\n## rnn_layer.cpp\n\n### \n\n- **:** $h_0$1 \\* N \\* num\\_outputshapenum\\_output\n- **:** $h_t$\n- **:** o\n\n### FillUnrolledNet\n\nprototxt\n\n``` \n################################\n#            input             #\n################################\nlayer{\n\t#sliced x\n\tbottom: x\n\ttop: x_1\n\ttop: x_2\n\t.\n\t.\n\t.\n\ttop: x_t\n}\nlayer{\n\t#sliced cont\n\tbottom: cont\n\ttop: cont_1\n\ttop: cont_2\n\t.\n\t.\n\t.\n\ttop: cont_t\n}\n################################\n#          recur layer         #\n################################\nlayer{\n\t#recur_unit_1\n\tbottom: x_1, cont_1, h_0\n\ttop: o_1, h_1\n}\nlayer{\n\t#recur_unit_2\n\tbottom: x_2, cont_2, h_1\n\ttop: o_2, h_2\n}\n\t\t.\n\t\t.\n\t\t.\n\nlayer{\n\t#recur_unit_t\n\tbottom: x_t, cont_t, h_t-1\n\ttop: o_t, h_t\n}\n################################\n#           output             #\n################################\nlayer{\n\t#concated output\n\tbottom: o_1\n\tbottom: o_2\n\t.\n\t.\n\t.\n\tbottom: o_t\n\ttop: o\n}\n```\n\n## \n\n- ************\n- ****\n- ********\n\n\n## Reference\n- [s2vt](https://github.com/vsubhashini/caffe/tree/recurrent/examples/s2vt)\n- [Sequence to Sequence -- Video to Text](https://arxiv.org/abs/1505.00487)\n- [LSTM](http://colah.github.io/posts/2015-08-Understanding-LSTMs/), [Sequences in Caffe](http://tutorial.caffe.berkeleyvision.org/caffe-cvpr15-sequences.pdf)\n","source":"_posts/caffe_2_rnn.md","raw":"---\ntitle: CaffeRNN\ndate: 2016-07-13 15:20:42\ntags: \n  - rnn\ndescription:\n  - CaffeRNN\ncategories:\n  - caffe\n---\n\n## \nRNN(Recurrent Neural Network)RNNRNN\n\n## \n\n### \n- **sequence_layers.hpp:**  RecurrentLayerRNNLSTM\n- **recurrent_layer.cpp:** RecurrentLayer\n- **rnn_layer.cpp:** RNN\n\n### \n- ****\n- **RecurrentLayer:** \n- **RNNLayer:** \n- **bottom:**\n\t* bottom[0]: T\n\t* bottom[1]: N\n\t* ...: data\n- **top:** bottom\n\n## sequence_layers.hpp\n\n### \n- **shared\\_ptr< Net< Dtype> \\> unrolled\\_net\\_:** \n- **int N\\_:** \n- **int T\\_:** \n- **bool static\\_input\\_:** \n- **vector< Blob< Dtype\\>* \\> recur\\_input\\_blobs\\_:** ($h_0$)\n- **vector< Blob< Dtype\\>* \\> recur\\_output\\_blobs\\_:** ($h_T$)\n- **vector< Blob< Dtype\\>* \\> output\\_blobs\\_:** (top)\n- **Blob< Dtype\\>* x\\_input\\_blob\\_:** (bottom[0])\n- **Blob< Dtype\\>* x\\_static\\_input\\_blob\\_:** (bottom[2])\n- **Blob< Dtype\\>* cont\\_input\\_blob\\_:** (bottom[1])cont0\n\n### \n- **FillUnrolledNet(NetParameter* net\\_param):** \t\n\t* net\\_param\n\t* prototxt\n\t* xml\n- **xxxBlobNames:** \n\t* blobblob\n\t* findViewByID\n\n## recurrent_layer.cpp\n\n### Reshape\nblobblobbottomtop\n\n1. **Reshape:** x\\_input\\_blob\\_, cont\\_input\\_blob\\_x\\_static\\_input\\_blob\\_blobshapebottom\n2. **Reshape:** recur\\_input\\_blobs\\_blob($h_0$)\n3. **Share:** x\\_input\\_blob\\_, cont\\_input\\_blob\\_x\\_static\\_input\\_blob\\_bottomdatadiff\n4. **Share:** output\\_blobs\\_topdatadiff\n\n### LayerSetUp\nprototxtnet\\_paramNet\n\n1. **bottom**\n\t- bottom[0]:  (T \\* N \\* ...)\n\t- bottom[1]: 01 (T \\* N \\* 1)\n\t- bottom[2]: \n2. ****\n\t- x: bottom[0]\n\t- cont: bottom[1]\n\t- x_static: bottom[2]\n3. ****FillUnrolledNetnet\\_param\n4. **net\\_param**\n```cpp\n  unrolled_net_.reset(new Net<Dtype>(net_param));\n```\n5. ****\n\t- \n\t- net->blob\\_by\\_name(\"xxx\")findViewByIdblobkeyxxxBlobNames\n6. ****\n\t- blobs\\_: blobprototxtcaffeblobs\\_\n\t- param\\_propagate\\_down\\_: bp\n\t- recur\\_output\\_blobs\\_0****\n\n## rnn_layer.cpp\n\n### \n\n- **:** $h_0$1 \\* N \\* num\\_outputshapenum\\_output\n- **:** $h_t$\n- **:** o\n\n### FillUnrolledNet\n\nprototxt\n\n``` \n################################\n#            input             #\n################################\nlayer{\n\t#sliced x\n\tbottom: x\n\ttop: x_1\n\ttop: x_2\n\t.\n\t.\n\t.\n\ttop: x_t\n}\nlayer{\n\t#sliced cont\n\tbottom: cont\n\ttop: cont_1\n\ttop: cont_2\n\t.\n\t.\n\t.\n\ttop: cont_t\n}\n################################\n#          recur layer         #\n################################\nlayer{\n\t#recur_unit_1\n\tbottom: x_1, cont_1, h_0\n\ttop: o_1, h_1\n}\nlayer{\n\t#recur_unit_2\n\tbottom: x_2, cont_2, h_1\n\ttop: o_2, h_2\n}\n\t\t.\n\t\t.\n\t\t.\n\nlayer{\n\t#recur_unit_t\n\tbottom: x_t, cont_t, h_t-1\n\ttop: o_t, h_t\n}\n################################\n#           output             #\n################################\nlayer{\n\t#concated output\n\tbottom: o_1\n\tbottom: o_2\n\t.\n\t.\n\t.\n\tbottom: o_t\n\ttop: o\n}\n```\n\n## \n\n- ************\n- ****\n- ********\n\n\n## Reference\n- [s2vt](https://github.com/vsubhashini/caffe/tree/recurrent/examples/s2vt)\n- [Sequence to Sequence -- Video to Text](https://arxiv.org/abs/1505.00487)\n- [LSTM](http://colah.github.io/posts/2015-08-Understanding-LSTMs/), [Sequences in Caffe](http://tutorial.caffe.berkeleyvision.org/caffe-cvpr15-sequences.pdf)\n","slug":"caffe_2_rnn","published":1,"updated":"2024-08-13T16:03:47.848Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clzvf190z0005eqwoib78amfq","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>RNN(Recurrent Neural Network)RNNRNN</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li><strong>sequence_layers.hpp:</strong>  RecurrentLayerRNNLSTM</li>\n<li><strong>recurrent_layer.cpp:</strong> RecurrentLayer</li>\n<li><strong>rnn_layer.cpp:</strong> RNN</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li><strong></strong></li>\n<li><strong>RecurrentLayer:</strong> </li>\n<li><strong>RNNLayer:</strong> </li>\n<li><strong>bottom:</strong><ul>\n<li>bottom[0]: T</li>\n<li>bottom[1]: N</li>\n<li>: data</li>\n</ul>\n</li>\n<li><strong>top:</strong> bottom</li>\n</ul>\n<h2 id=\"sequence-layers-hpp\"><a href=\"#sequence-layers-hpp\" class=\"headerlink\" title=\"sequence_layers.hpp\"></a>sequence_layers.hpp</h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li><strong>shared_ptr&lt; Net&lt; Dtype&gt; > unrolled_net_:</strong> </li>\n<li><strong>int N_:</strong> </li>\n<li><strong>int T_:</strong> </li>\n<li><strong>bool static_input_:</strong> </li>\n<li><strong>vector&lt; Blob&lt; Dtype>* > recur_input_blobs_:</strong> ($h_0$)</li>\n<li><strong>vector&lt; Blob&lt; Dtype>* > recur_output_blobs_:</strong> ($h_T$)</li>\n<li><strong>vector&lt; Blob&lt; Dtype>* > output_blobs_:</strong> (top)</li>\n<li><strong>Blob&lt; Dtype>* x_input_blob_:</strong> (bottom[0])</li>\n<li><strong>Blob&lt; Dtype>* x_static_input_blob_:</strong> (bottom[2])</li>\n<li><strong>Blob&lt; Dtype>* cont_input_blob_:</strong> (bottom[1])cont0</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li><strong>FillUnrolledNet(NetParameter* net_param):</strong>     <ul>\n<li>net_param</li>\n<li>prototxt</li>\n<li>xml</li>\n</ul>\n</li>\n<li><strong>xxxBlobNames:</strong> <ul>\n<li>blobblob</li>\n<li>findViewByID</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"recurrent-layer-cpp\"><a href=\"#recurrent-layer-cpp\" class=\"headerlink\" title=\"recurrent_layer.cpp\"></a>recurrent_layer.cpp</h2><h3 id=\"Reshape\"><a href=\"#Reshape\" class=\"headerlink\" title=\"Reshape\"></a>Reshape</h3><p>blobblobbottomtop</p>\n<ol>\n<li><strong>Reshape:</strong> x_input_blob_, cont_input_blob_x_static_input_blob_blobshapebottom</li>\n<li><strong>Reshape:</strong> recur_input_blobs_blob($h_0$)</li>\n<li><strong>Share:</strong> x_input_blob_, cont_input_blob_x_static_input_blob_bottomdatadiff</li>\n<li><strong>Share:</strong> output_blobs_topdatadiff</li>\n</ol>\n<h3 id=\"LayerSetUp\"><a href=\"#LayerSetUp\" class=\"headerlink\" title=\"LayerSetUp\"></a>LayerSetUp</h3><p>prototxtnet_paramNet</p>\n<ol>\n<li><strong>bottom</strong><ul>\n<li>bottom[0]:  (T * N * )</li>\n<li>bottom[1]: 01 (T * N * 1)</li>\n<li>bottom[2]: </li>\n</ul>\n</li>\n<li><strong></strong><ul>\n<li>x: bottom[0]</li>\n<li>cont: bottom[1]</li>\n<li>x_static: bottom[2]</li>\n</ul>\n</li>\n<li><strong></strong>FillUnrolledNetnet_param</li>\n<li><p><strong>net_param</strong></p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">unrolled_net_.reset(<span class=\"keyword\">new</span> Net&lt;Dtype&gt;(net_param));</div></pre></td></tr></table></figure>\n</li>\n<li><p><strong></strong></p>\n<ul>\n<li></li>\n<li>net-&gt;blob_by_name(xxx)findViewByIdblobkeyxxxBlobNames</li>\n</ul>\n</li>\n<li><strong></strong><ul>\n<li>blobs_: blobprototxtcaffeblobs_</li>\n<li>param_propagate_down_: bp</li>\n<li>recur_output_blobs_0<strong></strong></li>\n</ul>\n</li>\n</ol>\n<h2 id=\"rnn-layer-cpp\"><a href=\"#rnn-layer-cpp\" class=\"headerlink\" title=\"rnn_layer.cpp\"></a>rnn_layer.cpp</h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li><strong>:</strong> $h_0$1 * N * num_outputshapenum_output</li>\n<li><strong>:</strong> $h_t$</li>\n<li><strong>:</strong> o</li>\n</ul>\n<h3 id=\"FillUnrolledNet\"><a href=\"#FillUnrolledNet\" class=\"headerlink\" title=\"FillUnrolledNet\"></a>FillUnrolledNet</h3><p>prototxt</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div></pre></td><td class=\"code\"><pre><div class=\"line\">################################</div><div class=\"line\">#            input             #</div><div class=\"line\">################################</div><div class=\"line\">layer&#123;</div><div class=\"line\">\t#sliced x</div><div class=\"line\">\tbottom: x</div><div class=\"line\">\ttop: x_1</div><div class=\"line\">\ttop: x_2</div><div class=\"line\">\t.</div><div class=\"line\">\t.</div><div class=\"line\">\t.</div><div class=\"line\">\ttop: x_t</div><div class=\"line\">&#125;</div><div class=\"line\">layer&#123;</div><div class=\"line\">\t#sliced cont</div><div class=\"line\">\tbottom: cont</div><div class=\"line\">\ttop: cont_1</div><div class=\"line\">\ttop: cont_2</div><div class=\"line\">\t.</div><div class=\"line\">\t.</div><div class=\"line\">\t.</div><div class=\"line\">\ttop: cont_t</div><div class=\"line\">&#125;</div><div class=\"line\">################################</div><div class=\"line\">#          recur layer         #</div><div class=\"line\">################################</div><div class=\"line\">layer&#123;</div><div class=\"line\">\t#recur_unit_1</div><div class=\"line\">\tbottom: x_1, cont_1, h_0</div><div class=\"line\">\ttop: o_1, h_1</div><div class=\"line\">&#125;</div><div class=\"line\">layer&#123;</div><div class=\"line\">\t#recur_unit_2</div><div class=\"line\">\tbottom: x_2, cont_2, h_1</div><div class=\"line\">\ttop: o_2, h_2</div><div class=\"line\">&#125;</div><div class=\"line\">\t\t.</div><div class=\"line\">\t\t.</div><div class=\"line\">\t\t.</div><div class=\"line\"></div><div class=\"line\">layer&#123;</div><div class=\"line\">\t#recur_unit_t</div><div class=\"line\">\tbottom: x_t, cont_t, h_t-1</div><div class=\"line\">\ttop: o_t, h_t</div><div class=\"line\">&#125;</div><div class=\"line\">################################</div><div class=\"line\">#           output             #</div><div class=\"line\">################################</div><div class=\"line\">layer&#123;</div><div class=\"line\">\t#concated output</div><div class=\"line\">\tbottom: o_1</div><div class=\"line\">\tbottom: o_2</div><div class=\"line\">\t.</div><div class=\"line\">\t.</div><div class=\"line\">\t.</div><div class=\"line\">\tbottom: o_t</div><div class=\"line\">\ttop: o</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><strong></strong><strong></strong><strong></strong></li>\n<li><strong></strong></li>\n<li><strong></strong><strong></strong></li>\n</ul>\n<h2 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h2><ul>\n<li><a href=\"https://github.com/vsubhashini/caffe/tree/recurrent/examples/s2vt\" target=\"_blank\" rel=\"external\">s2vt</a></li>\n<li><a href=\"https://arxiv.org/abs/1505.00487\" target=\"_blank\" rel=\"external\">Sequence to Sequence  Video to Text</a></li>\n<li><a href=\"http://colah.github.io/posts/2015-08-Understanding-LSTMs/\" target=\"_blank\" rel=\"external\">LSTM</a>, <a href=\"http://tutorial.caffe.berkeleyvision.org/caffe-cvpr15-sequences.pdf\" target=\"_blank\" rel=\"external\">Sequences in Caffe</a></li>\n</ul>\n","excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>RNN(Recurrent Neural Network)RNNRNN</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li><strong>sequence_layers.hpp:</strong>  RecurrentLayerRNNLSTM</li>\n<li><strong>recurrent_layer.cpp:</strong> RecurrentLayer</li>\n<li><strong>rnn_layer.cpp:</strong> RNN</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li><strong></strong></li>\n<li><strong>RecurrentLayer:</strong> </li>\n<li><strong>RNNLayer:</strong> </li>\n<li><strong>bottom:</strong><ul>\n<li>bottom[0]: T</li>\n<li>bottom[1]: N</li>\n<li>: data</li>\n</ul>\n</li>\n<li><strong>top:</strong> bottom</li>\n</ul>\n<h2 id=\"sequence-layers-hpp\"><a href=\"#sequence-layers-hpp\" class=\"headerlink\" title=\"sequence_layers.hpp\"></a>sequence_layers.hpp</h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li><strong>shared_ptr&lt; Net&lt; Dtype&gt; > unrolled_net_:</strong> </li>\n<li><strong>int N_:</strong> </li>\n<li><strong>int T_:</strong> </li>\n<li><strong>bool static_input_:</strong> </li>\n<li><strong>vector&lt; Blob&lt; Dtype>* > recur_input_blobs_:</strong> ($h_0$)</li>\n<li><strong>vector&lt; Blob&lt; Dtype>* > recur_output_blobs_:</strong> ($h_T$)</li>\n<li><strong>vector&lt; Blob&lt; Dtype>* > output_blobs_:</strong> (top)</li>\n<li><strong>Blob&lt; Dtype>* x_input_blob_:</strong> (bottom[0])</li>\n<li><strong>Blob&lt; Dtype>* x_static_input_blob_:</strong> (bottom[2])</li>\n<li><strong>Blob&lt; Dtype>* cont_input_blob_:</strong> (bottom[1])cont0</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li><strong>FillUnrolledNet(NetParameter* net_param):</strong>     <ul>\n<li>net_param</li>\n<li>prototxt</li>\n<li>xml</li>\n</ul>\n</li>\n<li><strong>xxxBlobNames:</strong> <ul>\n<li>blobblob</li>\n<li>findViewByID</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"recurrent-layer-cpp\"><a href=\"#recurrent-layer-cpp\" class=\"headerlink\" title=\"recurrent_layer.cpp\"></a>recurrent_layer.cpp</h2><h3 id=\"Reshape\"><a href=\"#Reshape\" class=\"headerlink\" title=\"Reshape\"></a>Reshape</h3><p>blobblobbottomtop</p>\n<ol>\n<li><strong>Reshape:</strong> x_input_blob_, cont_input_blob_x_static_input_blob_blobshapebottom</li>\n<li><strong>Reshape:</strong> recur_input_blobs_blob($h_0$)</li>\n<li><strong>Share:</strong> x_input_blob_, cont_input_blob_x_static_input_blob_bottomdatadiff</li>\n<li><strong>Share:</strong> output_blobs_topdatadiff</li>\n</ol>\n<h3 id=\"LayerSetUp\"><a href=\"#LayerSetUp\" class=\"headerlink\" title=\"LayerSetUp\"></a>LayerSetUp</h3><p>prototxtnet_paramNet</p>\n<ol>\n<li><strong>bottom</strong><ul>\n<li>bottom[0]:  (T * N * )</li>\n<li>bottom[1]: 01 (T * N * 1)</li>\n<li>bottom[2]: </li>\n</ul>\n</li>\n<li><strong></strong><ul>\n<li>x: bottom[0]</li>\n<li>cont: bottom[1]</li>\n<li>x_static: bottom[2]</li>\n</ul>\n</li>\n<li><strong></strong>FillUnrolledNetnet_param</li>\n<li><p><strong>net_param</strong></p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">unrolled_net_.reset(<span class=\"keyword\">new</span> Net&lt;Dtype&gt;(net_param));</div></pre></td></tr></table></figure>\n</li>\n<li><p><strong></strong></p>\n<ul>\n<li></li>\n<li>net-&gt;blob_by_name(xxx)findViewByIdblobkeyxxxBlobNames</li>\n</ul>\n</li>\n<li><strong></strong><ul>\n<li>blobs_: blobprototxtcaffeblobs_</li>\n<li>param_propagate_down_: bp</li>\n<li>recur_output_blobs_0<strong></strong></li>\n</ul>\n</li>\n</ol>\n<h2 id=\"rnn-layer-cpp\"><a href=\"#rnn-layer-cpp\" class=\"headerlink\" title=\"rnn_layer.cpp\"></a>rnn_layer.cpp</h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li><strong>:</strong> $h_0$1 * N * num_outputshapenum_output</li>\n<li><strong>:</strong> $h_t$</li>\n<li><strong>:</strong> o</li>\n</ul>\n<h3 id=\"FillUnrolledNet\"><a href=\"#FillUnrolledNet\" class=\"headerlink\" title=\"FillUnrolledNet\"></a>FillUnrolledNet</h3><p>prototxt</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div></pre></td><td class=\"code\"><pre><div class=\"line\">################################</div><div class=\"line\">#            input             #</div><div class=\"line\">################################</div><div class=\"line\">layer&#123;</div><div class=\"line\">\t#sliced x</div><div class=\"line\">\tbottom: x</div><div class=\"line\">\ttop: x_1</div><div class=\"line\">\ttop: x_2</div><div class=\"line\">\t.</div><div class=\"line\">\t.</div><div class=\"line\">\t.</div><div class=\"line\">\ttop: x_t</div><div class=\"line\">&#125;</div><div class=\"line\">layer&#123;</div><div class=\"line\">\t#sliced cont</div><div class=\"line\">\tbottom: cont</div><div class=\"line\">\ttop: cont_1</div><div class=\"line\">\ttop: cont_2</div><div class=\"line\">\t.</div><div class=\"line\">\t.</div><div class=\"line\">\t.</div><div class=\"line\">\ttop: cont_t</div><div class=\"line\">&#125;</div><div class=\"line\">################################</div><div class=\"line\">#          recur layer         #</div><div class=\"line\">################################</div><div class=\"line\">layer&#123;</div><div class=\"line\">\t#recur_unit_1</div><div class=\"line\">\tbottom: x_1, cont_1, h_0</div><div class=\"line\">\ttop: o_1, h_1</div><div class=\"line\">&#125;</div><div class=\"line\">layer&#123;</div><div class=\"line\">\t#recur_unit_2</div><div class=\"line\">\tbottom: x_2, cont_2, h_1</div><div class=\"line\">\ttop: o_2, h_2</div><div class=\"line\">&#125;</div><div class=\"line\">\t\t.</div><div class=\"line\">\t\t.</div><div class=\"line\">\t\t.</div><div class=\"line\"></div><div class=\"line\">layer&#123;</div><div class=\"line\">\t#recur_unit_t</div><div class=\"line\">\tbottom: x_t, cont_t, h_t-1</div><div class=\"line\">\ttop: o_t, h_t</div><div class=\"line\">&#125;</div><div class=\"line\">################################</div><div class=\"line\">#           output             #</div><div class=\"line\">################################</div><div class=\"line\">layer&#123;</div><div class=\"line\">\t#concated output</div><div class=\"line\">\tbottom: o_1</div><div class=\"line\">\tbottom: o_2</div><div class=\"line\">\t.</div><div class=\"line\">\t.</div><div class=\"line\">\t.</div><div class=\"line\">\tbottom: o_t</div><div class=\"line\">\ttop: o</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><strong></strong><strong></strong><strong></strong></li>\n<li><strong></strong></li>\n<li><strong></strong><strong></strong></li>\n</ul>\n<h2 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h2><ul>\n<li><a href=\"https://github.com/vsubhashini/caffe/tree/recurrent/examples/s2vt\">s2vt</a></li>\n<li><a href=\"https://arxiv.org/abs/1505.00487\">Sequence to Sequence  Video to Text</a></li>\n<li><a href=\"http://colah.github.io/posts/2015-08-Understanding-LSTMs/\">LSTM</a>, <a href=\"http://tutorial.caffe.berkeleyvision.org/caffe-cvpr15-sequences.pdf\">Sequences in Caffe</a></li>\n</ul>\n"},{"title":"Caffes2vt","date":"2016-07-22T03:32:32.000Z","description":["s2vttxthdf5python"],"_content":"\n## \ns2vttxthdf5**txthdf5****hdf5**\n\n## \n\n### txthdf5python\n\n- ****\n- **hdf5\\_npstreamsequence\\_generator.py**: \n\t* **SequenceGenerator: **txthdf5batch\n\t* **HDF5SequenceWriter: **I/OSequenceGenerator.h5\n- **framefc7\\_stream\\_text\\_to\\_hdf5\\_data.py**: \n\n### hdf5\n\n- **hdf5\\_data\\_layer.cpp**\n\n### ()\n\n- **HDF5SequenceWriter::write\\_to\\_exhaustion**\n\t* write\\_batch\n- **HDF5SequenceWriter::write\\_batch**\n\t* **input:** get\\_next\\_batchbatch\n\t* **output:** batch.h5\n- **SequenceGenerator::get\\_next\\_batch**\n\t* **intput:** \n\t* **output:** batch\\[Name]\\[T]\\[N]\n- **SequenceGenerator::reset\\_stream**\n\t* **input:** \n\t* **output:** batchi\n- **fc7FrameSequenceGenerator::get_streams**\n\t* **input:** txt\n\t* **output:** lineframes\n\n## hdf5\\_npstreamsequence\\_generator.py\n\n### HDF5SequenceWriter::write\\_to\\_exhaustion\n\nwrite\\_batchline\n\n```python\ndef write_to_exhaustion(self):\n    while not self.generator.streams_exhausted():\n      self.write_batch(stop_at_exhaustion=True)\n```\n\n### HDF5SequenceWriter::write\\_batch\n\nbatchhdf5.h5hdf5NumPy[h5py.doc](http://docs.h5py.org/en/latest/high/dataset.html#creating-datasets)\n\n```python\nh5file = h5py.File(filename, 'w')\n# return the container\ndataset = h5file.create_dataset('cont', shape=cont_indicators.shape, dtype=cont_indicators.dtype)\n# write data intot the container\ndataset[:] = cont_indicators\nh5file.close()\n```\n\n### SequenceGenerator::get\\_next\\_batch\n\n\n\n- **batch:** batch\\[Name]\\[T]\\[N]\n\t* \n\t* **Name:** framefc7, intput_sentence\n\t* **T:** batchT1000T80NT=80T=81N\n- **batch\\_indicators:** batch\\_indicators\\[T]\\[N]\n\t* 01\n- **self.substream\\_names:** batchNameframefc7, input_sentence\n- **self.array\\_type\\_inputs:** nameframefc7\\[num_frames]\\[4096]\n- **exhausted:** vector<bool>(N)\n\t* batchN80N\n- **all\\_exhausted:** true if all exahusted are true\n- **reached\\_exhaustion:** streams_exhausted()\n- **self.stream\\_indices:** NT\n\n\n\nbatchbatch\\_indicatorshape\n```python\nif not self.streams_initialized:\n\tself.init_streams()\n# format: len0: [s0, s2, num of streams, s_n]\n#         len1: [s0, s2, num of streams, s_n]\n#         len2: [s0, s2, num of streams, s_n]\nbatch_size = self.batch_num_streams * self.batch_stream_length\nbatch = {}\nbatch_indicators = np.zeros((self.batch_stream_length, self.batch_num_streams))\n# reshape batch[name] like batch_indicators\n# and set value to pad value\nfor name in self.substream_names:\n\t# if value is high dimension\n\tif name in self.array_type_inputs.keys():\n    \tdim = self.array_type_inputs[name]\n        batch[name] = self.get_pad_value(name) * np.ones((self.batch_stream_length, self.batch_num_streams, dim))\n\t# if value is 1d\n\telse:\n        # each batch[name] is a T * N * dim blob\n        batch[name] = self.get_pad_value(name) * np.ones_like(batch_indicators)\n```\niireset\\_stream(i)\n```python\n# never been initialized or come to the end of a stream\nif self.streams[i] is None or \\\n\tself.stream_indices[i] == len(self.streams[i][self.substream_names[0]]): \n\tself.stream_indices[i] = 0\n\t# Q: self.streams_exhausted() always return false, so the expression is meaningless?\n\t# A: derived class will override function streams_exhausted\n\t# reached_exhaustion is forever True after pass through all lines\n\treached_exhaustion = reached_exhaustion or self.streams_exhausted()\n\t# exhausted[i] indicates the end of ith stream i.e. all lines in ith stream are read\n\tif reached_exhaustion: exhausted[i] = True\n\t# Q: why reset stream i? self.streams is the same data for all stream i\n\t# A: get_streams() in reset_stream() is wrapped around\n\tif not reached_exhaustion or not truncate_at_exhaustion:\n\t\tself.reset_stream(i)\n\telse:\n\t\tcontinue\n```\n\nnamet, ibatch\\[name]\\[t][i]\n```python\nfor name in self.substream_names:\n    if isinstance(self.streams[i][name], np.ndarray) and self.streams[i][name].ndim > 1:\n        batch[name].resize((batch_size, self.streams[i][name].shape[1],1))\n        batch[name][(t*self.batch_num_streams + i), :,0] = self.streams[i][name][self.stream_indices[i],:]\n    elif name in self.array_type_inputs.keys():\n        batch[name][t, i] = self.streams[i][name][self.stream_indices[i]][0,:]\n    else:\n        batch[name][t, i] = self.streams[i][name][self.stream_indices[i]]\n```\n\n### SequenceGenerator::reset\\_stream\n\n1. get_streams()lineinput, framefc7 ...)\n2. streams[stream_index]\n\n## framefc7\\_stream\\_text\\_to\\_hdf5\\_data.py\n\n### fc7FrameSequenceGenerator::\\__init__\n\ntxt\n\n- self.vid\\_framefeats[video\\_id]: video_idframes(frame1, frame2)feats(4096)\n- self.lines: pair< vid, line >\n\n### fc7FrameSequenceGenerator::get_streams\n\nlineframes featsMAX_WORDoutout\n\n```\n\t\t     MAX_WORD\ncont_sentence\tx x x x ... x x x x\ninput_sentence  x x x x ... x x x x \nframe_fc7\tx x x x ... x x x x\n\t\t| | | |     | | | |  \n\t\t| | | |     | | | |  4096\n\n```\n\n## \n\n- ****\n- ****\n- python****\n\n## resource\n- [hdf5\\_npstreamsequence\\_generator.py](https://github.com/meltycriss/commented_src/blob/master/s2vt_data/hdf5_npstreamsequence_generator.py)\n\n## reference\n\n- [Sequence to Sequence -- Video to Text](https://arxiv.org/abs/1505.00487)\n\n","source":"_posts/caffe_3_s2vt_data_process.md","raw":"---\ntitle: Caffes2vt\ndate: 2016-07-22 11:32:32\ntags: \n  - s2vt data\ndescription:\n  - s2vttxthdf5python\ncategories:\n  - caffe\n---\n\n## \ns2vttxthdf5**txthdf5****hdf5**\n\n## \n\n### txthdf5python\n\n- ****\n- **hdf5\\_npstreamsequence\\_generator.py**: \n\t* **SequenceGenerator: **txthdf5batch\n\t* **HDF5SequenceWriter: **I/OSequenceGenerator.h5\n- **framefc7\\_stream\\_text\\_to\\_hdf5\\_data.py**: \n\n### hdf5\n\n- **hdf5\\_data\\_layer.cpp**\n\n### ()\n\n- **HDF5SequenceWriter::write\\_to\\_exhaustion**\n\t* write\\_batch\n- **HDF5SequenceWriter::write\\_batch**\n\t* **input:** get\\_next\\_batchbatch\n\t* **output:** batch.h5\n- **SequenceGenerator::get\\_next\\_batch**\n\t* **intput:** \n\t* **output:** batch\\[Name]\\[T]\\[N]\n- **SequenceGenerator::reset\\_stream**\n\t* **input:** \n\t* **output:** batchi\n- **fc7FrameSequenceGenerator::get_streams**\n\t* **input:** txt\n\t* **output:** lineframes\n\n## hdf5\\_npstreamsequence\\_generator.py\n\n### HDF5SequenceWriter::write\\_to\\_exhaustion\n\nwrite\\_batchline\n\n```python\ndef write_to_exhaustion(self):\n    while not self.generator.streams_exhausted():\n      self.write_batch(stop_at_exhaustion=True)\n```\n\n### HDF5SequenceWriter::write\\_batch\n\nbatchhdf5.h5hdf5NumPy[h5py.doc](http://docs.h5py.org/en/latest/high/dataset.html#creating-datasets)\n\n```python\nh5file = h5py.File(filename, 'w')\n# return the container\ndataset = h5file.create_dataset('cont', shape=cont_indicators.shape, dtype=cont_indicators.dtype)\n# write data intot the container\ndataset[:] = cont_indicators\nh5file.close()\n```\n\n### SequenceGenerator::get\\_next\\_batch\n\n\n\n- **batch:** batch\\[Name]\\[T]\\[N]\n\t* \n\t* **Name:** framefc7, intput_sentence\n\t* **T:** batchT1000T80NT=80T=81N\n- **batch\\_indicators:** batch\\_indicators\\[T]\\[N]\n\t* 01\n- **self.substream\\_names:** batchNameframefc7, input_sentence\n- **self.array\\_type\\_inputs:** nameframefc7\\[num_frames]\\[4096]\n- **exhausted:** vector<bool>(N)\n\t* batchN80N\n- **all\\_exhausted:** true if all exahusted are true\n- **reached\\_exhaustion:** streams_exhausted()\n- **self.stream\\_indices:** NT\n\n\n\nbatchbatch\\_indicatorshape\n```python\nif not self.streams_initialized:\n\tself.init_streams()\n# format: len0: [s0, s2, num of streams, s_n]\n#         len1: [s0, s2, num of streams, s_n]\n#         len2: [s0, s2, num of streams, s_n]\nbatch_size = self.batch_num_streams * self.batch_stream_length\nbatch = {}\nbatch_indicators = np.zeros((self.batch_stream_length, self.batch_num_streams))\n# reshape batch[name] like batch_indicators\n# and set value to pad value\nfor name in self.substream_names:\n\t# if value is high dimension\n\tif name in self.array_type_inputs.keys():\n    \tdim = self.array_type_inputs[name]\n        batch[name] = self.get_pad_value(name) * np.ones((self.batch_stream_length, self.batch_num_streams, dim))\n\t# if value is 1d\n\telse:\n        # each batch[name] is a T * N * dim blob\n        batch[name] = self.get_pad_value(name) * np.ones_like(batch_indicators)\n```\niireset\\_stream(i)\n```python\n# never been initialized or come to the end of a stream\nif self.streams[i] is None or \\\n\tself.stream_indices[i] == len(self.streams[i][self.substream_names[0]]): \n\tself.stream_indices[i] = 0\n\t# Q: self.streams_exhausted() always return false, so the expression is meaningless?\n\t# A: derived class will override function streams_exhausted\n\t# reached_exhaustion is forever True after pass through all lines\n\treached_exhaustion = reached_exhaustion or self.streams_exhausted()\n\t# exhausted[i] indicates the end of ith stream i.e. all lines in ith stream are read\n\tif reached_exhaustion: exhausted[i] = True\n\t# Q: why reset stream i? self.streams is the same data for all stream i\n\t# A: get_streams() in reset_stream() is wrapped around\n\tif not reached_exhaustion or not truncate_at_exhaustion:\n\t\tself.reset_stream(i)\n\telse:\n\t\tcontinue\n```\n\nnamet, ibatch\\[name]\\[t][i]\n```python\nfor name in self.substream_names:\n    if isinstance(self.streams[i][name], np.ndarray) and self.streams[i][name].ndim > 1:\n        batch[name].resize((batch_size, self.streams[i][name].shape[1],1))\n        batch[name][(t*self.batch_num_streams + i), :,0] = self.streams[i][name][self.stream_indices[i],:]\n    elif name in self.array_type_inputs.keys():\n        batch[name][t, i] = self.streams[i][name][self.stream_indices[i]][0,:]\n    else:\n        batch[name][t, i] = self.streams[i][name][self.stream_indices[i]]\n```\n\n### SequenceGenerator::reset\\_stream\n\n1. get_streams()lineinput, framefc7 ...)\n2. streams[stream_index]\n\n## framefc7\\_stream\\_text\\_to\\_hdf5\\_data.py\n\n### fc7FrameSequenceGenerator::\\__init__\n\ntxt\n\n- self.vid\\_framefeats[video\\_id]: video_idframes(frame1, frame2)feats(4096)\n- self.lines: pair< vid, line >\n\n### fc7FrameSequenceGenerator::get_streams\n\nlineframes featsMAX_WORDoutout\n\n```\n\t\t     MAX_WORD\ncont_sentence\tx x x x ... x x x x\ninput_sentence  x x x x ... x x x x \nframe_fc7\tx x x x ... x x x x\n\t\t| | | |     | | | |  \n\t\t| | | |     | | | |  4096\n\n```\n\n## \n\n- ****\n- ****\n- python****\n\n## resource\n- [hdf5\\_npstreamsequence\\_generator.py](https://github.com/meltycriss/commented_src/blob/master/s2vt_data/hdf5_npstreamsequence_generator.py)\n\n## reference\n\n- [Sequence to Sequence -- Video to Text](https://arxiv.org/abs/1505.00487)\n\n","slug":"caffe_3_s2vt_data_process","published":1,"updated":"2024-08-13T16:03:47.848Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clzvf19120006eqwoa5tsl4g7","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>s2vttxthdf5<strong>txthdf5</strong><strong>hdf5</strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"txthdf5python\"><a href=\"#txthdf5python\" class=\"headerlink\" title=\"txthdf5python\"></a>txthdf5python</h3><ul>\n<li><strong></strong></li>\n<li><strong>hdf5_npstreamsequence_generator.py</strong>: <ul>\n<li><strong>SequenceGenerator: </strong>txthdf5batch</li>\n<li><strong>HDF5SequenceWriter: </strong>I/OSequenceGenerator.h5</li>\n</ul>\n</li>\n<li><strong>framefc7_stream_text_to_hdf5_data.py</strong>: </li>\n</ul>\n<h3 id=\"hdf5\"><a href=\"#hdf5\" class=\"headerlink\" title=\"hdf5\"></a>hdf5</h3><ul>\n<li><strong>hdf5_data_layer.cpp</strong></li>\n</ul>\n<h3 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\"()\"></a>()</h3><ul>\n<li><strong>HDF5SequenceWriter::write_to_exhaustion</strong><ul>\n<li>write_batch</li>\n</ul>\n</li>\n<li><strong>HDF5SequenceWriter::write_batch</strong><ul>\n<li><strong>input:</strong> get_next_batchbatch</li>\n<li><strong>output:</strong> batch.h5</li>\n</ul>\n</li>\n<li><strong>SequenceGenerator::get_next_batch</strong><ul>\n<li><strong>intput:</strong> </li>\n<li><strong>output:</strong> batch[Name][T][N]</li>\n</ul>\n</li>\n<li><strong>SequenceGenerator::reset_stream</strong><ul>\n<li><strong>input:</strong> </li>\n<li><strong>output:</strong> batchi</li>\n</ul>\n</li>\n<li><strong>fc7FrameSequenceGenerator::get_streams</strong><ul>\n<li><strong>input:</strong> txt</li>\n<li><strong>output:</strong> lineframes</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"hdf5-npstreamsequence-generator-py\"><a href=\"#hdf5-npstreamsequence-generator-py\" class=\"headerlink\" title=\"hdf5_npstreamsequence_generator.py\"></a>hdf5_npstreamsequence_generator.py</h2><h3 id=\"HDF5SequenceWriter-write-to-exhaustion\"><a href=\"#HDF5SequenceWriter-write-to-exhaustion\" class=\"headerlink\" title=\"HDF5SequenceWriter::write_to_exhaustion\"></a>HDF5SequenceWriter::write_to_exhaustion</h3><p>write_batchline</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">write_to_exhaustion</span><span class=\"params\">(self)</span>:</span></div><div class=\"line\">    <span class=\"keyword\">while</span> <span class=\"keyword\">not</span> self.generator.streams_exhausted():</div><div class=\"line\">      self.write_batch(stop_at_exhaustion=<span class=\"keyword\">True</span>)</div></pre></td></tr></table></figure>\n<h3 id=\"HDF5SequenceWriter-write-batch\"><a href=\"#HDF5SequenceWriter-write-batch\" class=\"headerlink\" title=\"HDF5SequenceWriter::write_batch\"></a>HDF5SequenceWriter::write_batch</h3><p>batchhdf5.h5hdf5NumPy<a href=\"http://docs.h5py.org/en/latest/high/dataset.html#creating-datasets\" target=\"_blank\" rel=\"external\">h5py.doc</a></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">h5file = h5py.File(filename, <span class=\"string\">'w'</span>)</div><div class=\"line\"><span class=\"comment\"># return the container</span></div><div class=\"line\">dataset = h5file.create_dataset(<span class=\"string\">'cont'</span>, shape=cont_indicators.shape, dtype=cont_indicators.dtype)</div><div class=\"line\"><span class=\"comment\"># write data intot the container</span></div><div class=\"line\">dataset[:] = cont_indicators</div><div class=\"line\">h5file.close()</div></pre></td></tr></table></figure>\n<h3 id=\"SequenceGenerator-get-next-batch\"><a href=\"#SequenceGenerator-get-next-batch\" class=\"headerlink\" title=\"SequenceGenerator::get_next_batch\"></a>SequenceGenerator::get_next_batch</h3><p></p>\n<ul>\n<li><strong>batch:</strong> batch[Name][T][N]<ul>\n<li></li>\n<li><strong>Name:</strong> framefc7, intput_sentence</li>\n<li><strong>T:</strong> batchT1000T80NT=80T=81N</li>\n</ul>\n</li>\n<li><strong>batch_indicators:</strong> batch_indicators[T][N]<ul>\n<li>01</li>\n</ul>\n</li>\n<li><strong>self.substream_names:</strong> batchNameframefc7, input_sentence</li>\n<li><strong>self.array_type_inputs:</strong> nameframefc7[num_frames][4096]</li>\n<li><strong>exhausted:</strong> vector<bool>(N)<ul>\n<li>batchN80N</li>\n</ul>\n</bool></li>\n<li><strong>all_exhausted:</strong> true if all exahusted are true</li>\n<li><strong>reached_exhaustion:</strong> streams_exhausted()</li>\n<li><strong>self.stream_indices:</strong> NT</li>\n</ul>\n<p></p>\n<p>batchbatch_indicatorshape<br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">if</span> <span class=\"keyword\">not</span> self.streams_initialized:</div><div class=\"line\">\tself.init_streams()</div><div class=\"line\"><span class=\"comment\"># format: len0: [s0, s2, num of streams, s_n]</span></div><div class=\"line\"><span class=\"comment\">#         len1: [s0, s2, num of streams, s_n]</span></div><div class=\"line\"><span class=\"comment\">#         len2: [s0, s2, num of streams, s_n]</span></div><div class=\"line\">batch_size = self.batch_num_streams * self.batch_stream_length</div><div class=\"line\">batch = &#123;&#125;</div><div class=\"line\">batch_indicators = np.zeros((self.batch_stream_length, self.batch_num_streams))</div><div class=\"line\"><span class=\"comment\"># reshape batch[name] like batch_indicators</span></div><div class=\"line\"><span class=\"comment\"># and set value to pad value</span></div><div class=\"line\"><span class=\"keyword\">for</span> name <span class=\"keyword\">in</span> self.substream_names:</div><div class=\"line\">\t<span class=\"comment\"># if value is high dimension</span></div><div class=\"line\">\t<span class=\"keyword\">if</span> name <span class=\"keyword\">in</span> self.array_type_inputs.keys():</div><div class=\"line\">    \tdim = self.array_type_inputs[name]</div><div class=\"line\">        batch[name] = self.get_pad_value(name) * np.ones((self.batch_stream_length, self.batch_num_streams, dim))</div><div class=\"line\">\t<span class=\"comment\"># if value is 1d</span></div><div class=\"line\">\t<span class=\"keyword\">else</span>:</div><div class=\"line\">        <span class=\"comment\"># each batch[name] is a T * N * dim blob</span></div><div class=\"line\">        batch[name] = self.get_pad_value(name) * np.ones_like(batch_indicators)</div></pre></td></tr></table></figure></p>\n<p>iireset_stream(i)<br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># never been initialized or come to the end of a stream</span></div><div class=\"line\"><span class=\"keyword\">if</span> self.streams[i] <span class=\"keyword\">is</span> <span class=\"keyword\">None</span> <span class=\"keyword\">or</span> \\</div><div class=\"line\">\tself.stream_indices[i] == len(self.streams[i][self.substream_names[<span class=\"number\">0</span>]]): </div><div class=\"line\">\tself.stream_indices[i] = <span class=\"number\">0</span></div><div class=\"line\">\t<span class=\"comment\"># Q: self.streams_exhausted() always return false, so the expression is meaningless?</span></div><div class=\"line\">\t<span class=\"comment\"># A: derived class will override function streams_exhausted</span></div><div class=\"line\">\t<span class=\"comment\"># reached_exhaustion is forever True after pass through all lines</span></div><div class=\"line\">\treached_exhaustion = reached_exhaustion <span class=\"keyword\">or</span> self.streams_exhausted()</div><div class=\"line\">\t<span class=\"comment\"># exhausted[i] indicates the end of ith stream i.e. all lines in ith stream are read</span></div><div class=\"line\">\t<span class=\"keyword\">if</span> reached_exhaustion: exhausted[i] = <span class=\"keyword\">True</span></div><div class=\"line\">\t<span class=\"comment\"># Q: why reset stream i? self.streams is the same data for all stream i</span></div><div class=\"line\">\t<span class=\"comment\"># A: get_streams() in reset_stream() is wrapped around</span></div><div class=\"line\">\t<span class=\"keyword\">if</span> <span class=\"keyword\">not</span> reached_exhaustion <span class=\"keyword\">or</span> <span class=\"keyword\">not</span> truncate_at_exhaustion:</div><div class=\"line\">\t\tself.reset_stream(i)</div><div class=\"line\">\t<span class=\"keyword\">else</span>:</div><div class=\"line\">\t\t<span class=\"keyword\">continue</span></div></pre></td></tr></table></figure></p>\n<p>namet, ibatch[name][t][i]<br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">for</span> name <span class=\"keyword\">in</span> self.substream_names:</div><div class=\"line\">    <span class=\"keyword\">if</span> isinstance(self.streams[i][name], np.ndarray) <span class=\"keyword\">and</span> self.streams[i][name].ndim &gt; <span class=\"number\">1</span>:</div><div class=\"line\">        batch[name].resize((batch_size, self.streams[i][name].shape[<span class=\"number\">1</span>],<span class=\"number\">1</span>))</div><div class=\"line\">        batch[name][(t*self.batch_num_streams + i), :,<span class=\"number\">0</span>] = self.streams[i][name][self.stream_indices[i],:]</div><div class=\"line\">    <span class=\"keyword\">elif</span> name <span class=\"keyword\">in</span> self.array_type_inputs.keys():</div><div class=\"line\">        batch[name][t, i] = self.streams[i][name][self.stream_indices[i]][<span class=\"number\">0</span>,:]</div><div class=\"line\">    <span class=\"keyword\">else</span>:</div><div class=\"line\">        batch[name][t, i] = self.streams[i][name][self.stream_indices[i]]</div></pre></td></tr></table></figure></p>\n<h3 id=\"SequenceGenerator-reset-stream\"><a href=\"#SequenceGenerator-reset-stream\" class=\"headerlink\" title=\"SequenceGenerator::reset_stream\"></a>SequenceGenerator::reset_stream</h3><ol>\n<li>get_streams()lineinput, framefc7 )</li>\n<li>streams[stream_index]</li>\n</ol>\n<h2 id=\"framefc7-stream-text-to-hdf5-data-py\"><a href=\"#framefc7-stream-text-to-hdf5-data-py\" class=\"headerlink\" title=\"framefc7_stream_text_to_hdf5_data.py\"></a>framefc7_stream_text_to_hdf5_data.py</h2><h3 id=\"fc7FrameSequenceGenerator-init\"><a href=\"#fc7FrameSequenceGenerator-init\" class=\"headerlink\" title=\"fc7FrameSequenceGenerator::__init__\"></a>fc7FrameSequenceGenerator::__init__</h3><p>txt</p>\n<ul>\n<li>self.vid_framefeats[video_id]: video_idframes(frame1, frame2)feats(4096)</li>\n<li>self.lines: pair&lt; vid, line &gt;</li>\n</ul>\n<h3 id=\"fc7FrameSequenceGenerator-get-streams\"><a href=\"#fc7FrameSequenceGenerator-get-streams\" class=\"headerlink\" title=\"fc7FrameSequenceGenerator::get_streams\"></a>fc7FrameSequenceGenerator::get_streams</h3><p>lineframes featsMAX_WORDoutout</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">\t\t     MAX_WORD</div><div class=\"line\">cont_sentence\tx x x x ... x x x x</div><div class=\"line\">input_sentence  x x x x ... x x x x </div><div class=\"line\">frame_fc7\tx x x x ... x x x x</div><div class=\"line\">\t\t| | | |     | | | |  </div><div class=\"line\">\t\t| | | |     | | | |  4096</div></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><strong></strong></li>\n<li><strong></strong></li>\n<li>python<strong></strong></li>\n</ul>\n<h2 id=\"resource\"><a href=\"#resource\" class=\"headerlink\" title=\"resource\"></a>resource</h2><ul>\n<li><a href=\"https://github.com/meltycriss/commented_src/blob/master/s2vt_data/hdf5_npstreamsequence_generator.py\" target=\"_blank\" rel=\"external\">hdf5_npstreamsequence_generator.py</a></li>\n</ul>\n<h2 id=\"reference\"><a href=\"#reference\" class=\"headerlink\" title=\"reference\"></a>reference</h2><ul>\n<li><a href=\"https://arxiv.org/abs/1505.00487\" target=\"_blank\" rel=\"external\">Sequence to Sequence  Video to Text</a></li>\n</ul>\n","excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>s2vttxthdf5<strong>txthdf5</strong><strong>hdf5</strong></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"txthdf5python\"><a href=\"#txthdf5python\" class=\"headerlink\" title=\"txthdf5python\"></a>txthdf5python</h3><ul>\n<li><strong></strong></li>\n<li><strong>hdf5_npstreamsequence_generator.py</strong>: <ul>\n<li><strong>SequenceGenerator: </strong>txthdf5batch</li>\n<li><strong>HDF5SequenceWriter: </strong>I/OSequenceGenerator.h5</li>\n</ul>\n</li>\n<li><strong>framefc7_stream_text_to_hdf5_data.py</strong>: </li>\n</ul>\n<h3 id=\"hdf5\"><a href=\"#hdf5\" class=\"headerlink\" title=\"hdf5\"></a>hdf5</h3><ul>\n<li><strong>hdf5_data_layer.cpp</strong></li>\n</ul>\n<h3 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\"()\"></a>()</h3><ul>\n<li><strong>HDF5SequenceWriter::write_to_exhaustion</strong><ul>\n<li>write_batch</li>\n</ul>\n</li>\n<li><strong>HDF5SequenceWriter::write_batch</strong><ul>\n<li><strong>input:</strong> get_next_batchbatch</li>\n<li><strong>output:</strong> batch.h5</li>\n</ul>\n</li>\n<li><strong>SequenceGenerator::get_next_batch</strong><ul>\n<li><strong>intput:</strong> </li>\n<li><strong>output:</strong> batch[Name][T][N]</li>\n</ul>\n</li>\n<li><strong>SequenceGenerator::reset_stream</strong><ul>\n<li><strong>input:</strong> </li>\n<li><strong>output:</strong> batchi</li>\n</ul>\n</li>\n<li><strong>fc7FrameSequenceGenerator::get_streams</strong><ul>\n<li><strong>input:</strong> txt</li>\n<li><strong>output:</strong> lineframes</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"hdf5-npstreamsequence-generator-py\"><a href=\"#hdf5-npstreamsequence-generator-py\" class=\"headerlink\" title=\"hdf5_npstreamsequence_generator.py\"></a>hdf5_npstreamsequence_generator.py</h2><h3 id=\"HDF5SequenceWriter-write-to-exhaustion\"><a href=\"#HDF5SequenceWriter-write-to-exhaustion\" class=\"headerlink\" title=\"HDF5SequenceWriter::write_to_exhaustion\"></a>HDF5SequenceWriter::write_to_exhaustion</h3><p>write_batchline</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">write_to_exhaustion</span><span class=\"params\">(self)</span>:</span></div><div class=\"line\">    <span class=\"keyword\">while</span> <span class=\"keyword\">not</span> self.generator.streams_exhausted():</div><div class=\"line\">      self.write_batch(stop_at_exhaustion=<span class=\"keyword\">True</span>)</div></pre></td></tr></table></figure>\n<h3 id=\"HDF5SequenceWriter-write-batch\"><a href=\"#HDF5SequenceWriter-write-batch\" class=\"headerlink\" title=\"HDF5SequenceWriter::write_batch\"></a>HDF5SequenceWriter::write_batch</h3><p>batchhdf5.h5hdf5NumPy<a href=\"http://docs.h5py.org/en/latest/high/dataset.html#creating-datasets\">h5py.doc</a></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">h5file = h5py.File(filename, <span class=\"string\">'w'</span>)</div><div class=\"line\"><span class=\"comment\"># return the container</span></div><div class=\"line\">dataset = h5file.create_dataset(<span class=\"string\">'cont'</span>, shape=cont_indicators.shape, dtype=cont_indicators.dtype)</div><div class=\"line\"><span class=\"comment\"># write data intot the container</span></div><div class=\"line\">dataset[:] = cont_indicators</div><div class=\"line\">h5file.close()</div></pre></td></tr></table></figure>\n<h3 id=\"SequenceGenerator-get-next-batch\"><a href=\"#SequenceGenerator-get-next-batch\" class=\"headerlink\" title=\"SequenceGenerator::get_next_batch\"></a>SequenceGenerator::get_next_batch</h3><p></p>\n<ul>\n<li><strong>batch:</strong> batch[Name][T][N]<ul>\n<li></li>\n<li><strong>Name:</strong> framefc7, intput_sentence</li>\n<li><strong>T:</strong> batchT1000T80NT=80T=81N</li>\n</ul>\n</li>\n<li><strong>batch_indicators:</strong> batch_indicators[T][N]<ul>\n<li>01</li>\n</ul>\n</li>\n<li><strong>self.substream_names:</strong> batchNameframefc7, input_sentence</li>\n<li><strong>self.array_type_inputs:</strong> nameframefc7[num_frames][4096]</li>\n<li><strong>exhausted:</strong> vector<bool>(N)<ul>\n<li>batchN80N</li>\n</ul>\n</li>\n<li><strong>all_exhausted:</strong> true if all exahusted are true</li>\n<li><strong>reached_exhaustion:</strong> streams_exhausted()</li>\n<li><strong>self.stream_indices:</strong> NT</li>\n</ul>\n<p></p>\n<p>batchbatch_indicatorshape<br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">if</span> <span class=\"keyword\">not</span> self.streams_initialized:</div><div class=\"line\">\tself.init_streams()</div><div class=\"line\"><span class=\"comment\"># format: len0: [s0, s2, num of streams, s_n]</span></div><div class=\"line\"><span class=\"comment\">#         len1: [s0, s2, num of streams, s_n]</span></div><div class=\"line\"><span class=\"comment\">#         len2: [s0, s2, num of streams, s_n]</span></div><div class=\"line\">batch_size = self.batch_num_streams * self.batch_stream_length</div><div class=\"line\">batch = &#123;&#125;</div><div class=\"line\">batch_indicators = np.zeros((self.batch_stream_length, self.batch_num_streams))</div><div class=\"line\"><span class=\"comment\"># reshape batch[name] like batch_indicators</span></div><div class=\"line\"><span class=\"comment\"># and set value to pad value</span></div><div class=\"line\"><span class=\"keyword\">for</span> name <span class=\"keyword\">in</span> self.substream_names:</div><div class=\"line\">\t<span class=\"comment\"># if value is high dimension</span></div><div class=\"line\">\t<span class=\"keyword\">if</span> name <span class=\"keyword\">in</span> self.array_type_inputs.keys():</div><div class=\"line\">    \tdim = self.array_type_inputs[name]</div><div class=\"line\">        batch[name] = self.get_pad_value(name) * np.ones((self.batch_stream_length, self.batch_num_streams, dim))</div><div class=\"line\">\t<span class=\"comment\"># if value is 1d</span></div><div class=\"line\">\t<span class=\"keyword\">else</span>:</div><div class=\"line\">        <span class=\"comment\"># each batch[name] is a T * N * dim blob</span></div><div class=\"line\">        batch[name] = self.get_pad_value(name) * np.ones_like(batch_indicators)</div></pre></td></tr></table></figure></p>\n<p>iireset_stream(i)<br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># never been initialized or come to the end of a stream</span></div><div class=\"line\"><span class=\"keyword\">if</span> self.streams[i] <span class=\"keyword\">is</span> <span class=\"keyword\">None</span> <span class=\"keyword\">or</span> \\</div><div class=\"line\">\tself.stream_indices[i] == len(self.streams[i][self.substream_names[<span class=\"number\">0</span>]]): </div><div class=\"line\">\tself.stream_indices[i] = <span class=\"number\">0</span></div><div class=\"line\">\t<span class=\"comment\"># Q: self.streams_exhausted() always return false, so the expression is meaningless?</span></div><div class=\"line\">\t<span class=\"comment\"># A: derived class will override function streams_exhausted</span></div><div class=\"line\">\t<span class=\"comment\"># reached_exhaustion is forever True after pass through all lines</span></div><div class=\"line\">\treached_exhaustion = reached_exhaustion <span class=\"keyword\">or</span> self.streams_exhausted()</div><div class=\"line\">\t<span class=\"comment\"># exhausted[i] indicates the end of ith stream i.e. all lines in ith stream are read</span></div><div class=\"line\">\t<span class=\"keyword\">if</span> reached_exhaustion: exhausted[i] = <span class=\"keyword\">True</span></div><div class=\"line\">\t<span class=\"comment\"># Q: why reset stream i? self.streams is the same data for all stream i</span></div><div class=\"line\">\t<span class=\"comment\"># A: get_streams() in reset_stream() is wrapped around</span></div><div class=\"line\">\t<span class=\"keyword\">if</span> <span class=\"keyword\">not</span> reached_exhaustion <span class=\"keyword\">or</span> <span class=\"keyword\">not</span> truncate_at_exhaustion:</div><div class=\"line\">\t\tself.reset_stream(i)</div><div class=\"line\">\t<span class=\"keyword\">else</span>:</div><div class=\"line\">\t\t<span class=\"keyword\">continue</span></div></pre></td></tr></table></figure></p>\n<p>namet, ibatch[name][t][i]<br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">for</span> name <span class=\"keyword\">in</span> self.substream_names:</div><div class=\"line\">    <span class=\"keyword\">if</span> isinstance(self.streams[i][name], np.ndarray) <span class=\"keyword\">and</span> self.streams[i][name].ndim &gt; <span class=\"number\">1</span>:</div><div class=\"line\">        batch[name].resize((batch_size, self.streams[i][name].shape[<span class=\"number\">1</span>],<span class=\"number\">1</span>))</div><div class=\"line\">        batch[name][(t*self.batch_num_streams + i), :,<span class=\"number\">0</span>] = self.streams[i][name][self.stream_indices[i],:]</div><div class=\"line\">    <span class=\"keyword\">elif</span> name <span class=\"keyword\">in</span> self.array_type_inputs.keys():</div><div class=\"line\">        batch[name][t, i] = self.streams[i][name][self.stream_indices[i]][<span class=\"number\">0</span>,:]</div><div class=\"line\">    <span class=\"keyword\">else</span>:</div><div class=\"line\">        batch[name][t, i] = self.streams[i][name][self.stream_indices[i]]</div></pre></td></tr></table></figure></p>\n<h3 id=\"SequenceGenerator-reset-stream\"><a href=\"#SequenceGenerator-reset-stream\" class=\"headerlink\" title=\"SequenceGenerator::reset_stream\"></a>SequenceGenerator::reset_stream</h3><ol>\n<li>get_streams()lineinput, framefc7 )</li>\n<li>streams[stream_index]</li>\n</ol>\n<h2 id=\"framefc7-stream-text-to-hdf5-data-py\"><a href=\"#framefc7-stream-text-to-hdf5-data-py\" class=\"headerlink\" title=\"framefc7_stream_text_to_hdf5_data.py\"></a>framefc7_stream_text_to_hdf5_data.py</h2><h3 id=\"fc7FrameSequenceGenerator-init\"><a href=\"#fc7FrameSequenceGenerator-init\" class=\"headerlink\" title=\"fc7FrameSequenceGenerator::__init__\"></a>fc7FrameSequenceGenerator::__init__</h3><p>txt</p>\n<ul>\n<li>self.vid_framefeats[video_id]: video_idframes(frame1, frame2)feats(4096)</li>\n<li>self.lines: pair&lt; vid, line &gt;</li>\n</ul>\n<h3 id=\"fc7FrameSequenceGenerator-get-streams\"><a href=\"#fc7FrameSequenceGenerator-get-streams\" class=\"headerlink\" title=\"fc7FrameSequenceGenerator::get_streams\"></a>fc7FrameSequenceGenerator::get_streams</h3><p>lineframes featsMAX_WORDoutout</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">\t\t     MAX_WORD</div><div class=\"line\">cont_sentence\tx x x x ... x x x x</div><div class=\"line\">input_sentence  x x x x ... x x x x </div><div class=\"line\">frame_fc7\tx x x x ... x x x x</div><div class=\"line\">\t\t| | | |     | | | |  </div><div class=\"line\">\t\t| | | |     | | | |  4096</div></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><strong></strong></li>\n<li><strong></strong></li>\n<li>python<strong></strong></li>\n</ul>\n<h2 id=\"resource\"><a href=\"#resource\" class=\"headerlink\" title=\"resource\"></a>resource</h2><ul>\n<li><a href=\"https://github.com/meltycriss/commented_src/blob/master/s2vt_data/hdf5_npstreamsequence_generator.py\">hdf5_npstreamsequence_generator.py</a></li>\n</ul>\n<h2 id=\"reference\"><a href=\"#reference\" class=\"headerlink\" title=\"reference\"></a>reference</h2><ul>\n<li><a href=\"https://arxiv.org/abs/1505.00487\">Sequence to Sequence  Video to Text</a></li>\n</ul>\n"},{"title":"CaffeLSTM","date":"2016-08-05T02:00:46.000Z","description":["LSTMtricky"],"_content":"\n## \nRNNLSTMRNNtricky\n\n## \n\n### \n- **sequence_layers.hpp:**  RecurrentLayerRNNLSTM\n- **recurrent_layer.cpp:** RecurrentLayer\n- **lstm_layer.cpp:** LSTM\n- **lstm\\_unit\\_layer.cpp:** LSTM\n\n### \nLSTM[LSTM](http://www.jianshu.com/p/9dc9f41f0b29/)[Sequence to Sequence - Video to Text](https://github.com/vsubhashini/caffe/tree/recurrent/examples/s2vt)xh\n\nfornetcont\n\n```\n     |---|         |---|\n c_0 |   |   c_0   |   |  c_1\n-----|   |---------|   |-----\n h_0 |   | Wh+Wx+b |   |  h_1\n-----|   |---------|   |-----\n     |---|         |---|\n   lstm_layer  lstm_unit_layer\n\n```\n\n## num_output * 4\nlstm\\_layer.cppnum\\_outputnum_output * 4\n\n```cpp\n  LayerParameter hidden_param;\n  hidden_param.set_type(\"InnerProduct\");\n  hidden_param.mutable_inner_product_param()->set_num_output(num_output * 4);\n  hidden_param.mutable_inner_product_param()->set_bias_term(false);\n  hidden_param.mutable_inner_product_param()->set_axis(2);\n  hidden_param.mutable_inner_product_param()->\n      mutable_weight_filler()->CopyFrom(weight_filler);\n```\n\nhnum_output * 4\n\n```cpp\n  LayerParameter* w_param = net_param->add_layer();\n  w_param->CopyFrom(hidden_param);\n  w_param->set_name(\"transform_\" + ts);\n  w_param->add_param()->set_name(\"W_hc\");\n  w_param->add_bottom(\"h_conted_\" + tm1s);\n  w_param->add_top(\"W_hc_h_\" + tm1s);\n  w_param->mutable_inner_product_param()->set_axis(2);\n```\n\nlstm\\_unit\\_layer.cppnum_output * 44\n\n\n```cpp\n  const Dtype i = sigmoid(X[d]);\n  const Dtype f = (*flush == 0) ? 0 :\n      (*flush * sigmoid(X[1 * hidden_dim_ + d]));\n  const Dtype o = sigmoid(X[2 * hidden_dim_ + d]);\n  const Dtype g = tanh(X[3 * hidden_dim_ + d]);\n```\n\n****\n\n- layer****\n- \n\t* ****\n\t* ****[](https://www.zhihu.com/question/19706331)\n\n## gate_input\n\nlstm\\_unit\\_layer.cpphxgate_inputhxlstm\\_unit\\_layer.cpp\n\n```cpp\n // Add LSTMUnit layer to compute the cell & hidden vectors c_t and h_t.\n // Inputs: c_{t-1}, gate_input_t = (i_t, f_t, o_t, g_t), cont_t\n // Outputs: c_t, h_t\n //     [ i_t' ]\n //     [ f_t' ] := gate_input_t\n //     [ o_t' ]\n //     [ g_t' ]\n //         i_t := \\sigmoid[i_t']\n //         f_t := \\sigmoid[f_t']\n //         o_t := \\sigmoid[o_t']\n //         g_t := \\tanh[g_t']\n //         c_t := cont_t * (f_t .* c_{t-1}) + (i_t .* g_t)\n //         h_t := o_t .* \\tanh[c_t]\n {\n   LayerParameter* lstm_unit_param = net_param->add_layer();\n   lstm_unit_param->set_type(\"LSTMUnit\");\n   lstm_unit_param->add_bottom(\"c_\" + tm1s);\n   lstm_unit_param->add_bottom(\"gate_input_\" + ts);\n   lstm_unit_param->add_bottom(\"cont_\" + ts);\n   lstm_unit_param->add_top(\"c_\" + ts);\n   lstm_unit_param->add_top(\"h_\" + ts);\n   lstm_unit_param->set_name(\"unit_\" + ts);\n }\n\n```\n\nXunithxgate_inputunit****\n\n- unit****\n- unitunit\n\n## tanhsigmoid\n\ntanhsigmoid\n\n```cpp\n  template <typename Dtype>\n  inline Dtype sigmoid(Dtype x) {\n    return 1. / (1. + exp(-x));\n  }\n\n  template <typename Dtype>\n  inline Dtype tanh(Dtype x) {\n    return 2. * sigmoid(2. * x) - 1.;\n  }\n\n```\n\n\n\n$$\nsigmoid' = sigmoid * (1 - sigmoid)\\\\\\\\\ntanh' = 1 - tanh^{2}\n$$\n\n## cont\n\ncont0\n\n- h0\n\n```cpp\n  // Add layers to flush the hidden state when beginning a new\n  // sequence, as indicated by cont_t.\n  //     h_conted_{t-1} := cont_t * h_{t-1}\n  //\n  // Normally, cont_t is binary (i.e., 0 or 1), so:\n  //     h_conted_{t-1} := h_{t-1} if cont_t == 1\n  //                       0   otherwise\n  {\n    LayerParameter* cont_h_param = net_param->add_layer();\n    cont_h_param->CopyFrom(scalar_param);\n    cont_h_param->set_name(\"h_conted_\" + tm1s);\n    cont_h_param->add_bottom(\"h_\" + tm1s);\n    cont_h_param->add_bottom(\"cont_\" + ts);\n    cont_h_param->add_top(\"h_conted_\" + tm1s);\n  }\n```\n\n- c\n\n```cpp\n    //         c_t := cont_t * (f_t .* c_{t-1}) + (i_t .* g_t)\n    const Dtype f = (*flush == 0) ? 0 :\n        (*flush * sigmoid(X[1 * hidden_dim_ + d]));\n\n```\n\n$h_0$$c_0$\n\n- 0cont0$h_0$0\n- f\\_t=0c\\_{t-1}c_{t}\n\n## \n\n- ********\n- \n\t* ****\n\t* ****","source":"_posts/caffe_4_lstm.md","raw":"---\ntitle: CaffeLSTM\ndate: 2016-08-05 10:00:46\ntags: \n  - lstm\ndescription:\n  - LSTMtricky\ncategories:\n  - caffe\n---\n\n## \nRNNLSTMRNNtricky\n\n## \n\n### \n- **sequence_layers.hpp:**  RecurrentLayerRNNLSTM\n- **recurrent_layer.cpp:** RecurrentLayer\n- **lstm_layer.cpp:** LSTM\n- **lstm\\_unit\\_layer.cpp:** LSTM\n\n### \nLSTM[LSTM](http://www.jianshu.com/p/9dc9f41f0b29/)[Sequence to Sequence - Video to Text](https://github.com/vsubhashini/caffe/tree/recurrent/examples/s2vt)xh\n\nfornetcont\n\n```\n     |---|         |---|\n c_0 |   |   c_0   |   |  c_1\n-----|   |---------|   |-----\n h_0 |   | Wh+Wx+b |   |  h_1\n-----|   |---------|   |-----\n     |---|         |---|\n   lstm_layer  lstm_unit_layer\n\n```\n\n## num_output * 4\nlstm\\_layer.cppnum\\_outputnum_output * 4\n\n```cpp\n  LayerParameter hidden_param;\n  hidden_param.set_type(\"InnerProduct\");\n  hidden_param.mutable_inner_product_param()->set_num_output(num_output * 4);\n  hidden_param.mutable_inner_product_param()->set_bias_term(false);\n  hidden_param.mutable_inner_product_param()->set_axis(2);\n  hidden_param.mutable_inner_product_param()->\n      mutable_weight_filler()->CopyFrom(weight_filler);\n```\n\nhnum_output * 4\n\n```cpp\n  LayerParameter* w_param = net_param->add_layer();\n  w_param->CopyFrom(hidden_param);\n  w_param->set_name(\"transform_\" + ts);\n  w_param->add_param()->set_name(\"W_hc\");\n  w_param->add_bottom(\"h_conted_\" + tm1s);\n  w_param->add_top(\"W_hc_h_\" + tm1s);\n  w_param->mutable_inner_product_param()->set_axis(2);\n```\n\nlstm\\_unit\\_layer.cppnum_output * 44\n\n\n```cpp\n  const Dtype i = sigmoid(X[d]);\n  const Dtype f = (*flush == 0) ? 0 :\n      (*flush * sigmoid(X[1 * hidden_dim_ + d]));\n  const Dtype o = sigmoid(X[2 * hidden_dim_ + d]);\n  const Dtype g = tanh(X[3 * hidden_dim_ + d]);\n```\n\n****\n\n- layer****\n- \n\t* ****\n\t* ****[](https://www.zhihu.com/question/19706331)\n\n## gate_input\n\nlstm\\_unit\\_layer.cpphxgate_inputhxlstm\\_unit\\_layer.cpp\n\n```cpp\n // Add LSTMUnit layer to compute the cell & hidden vectors c_t and h_t.\n // Inputs: c_{t-1}, gate_input_t = (i_t, f_t, o_t, g_t), cont_t\n // Outputs: c_t, h_t\n //     [ i_t' ]\n //     [ f_t' ] := gate_input_t\n //     [ o_t' ]\n //     [ g_t' ]\n //         i_t := \\sigmoid[i_t']\n //         f_t := \\sigmoid[f_t']\n //         o_t := \\sigmoid[o_t']\n //         g_t := \\tanh[g_t']\n //         c_t := cont_t * (f_t .* c_{t-1}) + (i_t .* g_t)\n //         h_t := o_t .* \\tanh[c_t]\n {\n   LayerParameter* lstm_unit_param = net_param->add_layer();\n   lstm_unit_param->set_type(\"LSTMUnit\");\n   lstm_unit_param->add_bottom(\"c_\" + tm1s);\n   lstm_unit_param->add_bottom(\"gate_input_\" + ts);\n   lstm_unit_param->add_bottom(\"cont_\" + ts);\n   lstm_unit_param->add_top(\"c_\" + ts);\n   lstm_unit_param->add_top(\"h_\" + ts);\n   lstm_unit_param->set_name(\"unit_\" + ts);\n }\n\n```\n\nXunithxgate_inputunit****\n\n- unit****\n- unitunit\n\n## tanhsigmoid\n\ntanhsigmoid\n\n```cpp\n  template <typename Dtype>\n  inline Dtype sigmoid(Dtype x) {\n    return 1. / (1. + exp(-x));\n  }\n\n  template <typename Dtype>\n  inline Dtype tanh(Dtype x) {\n    return 2. * sigmoid(2. * x) - 1.;\n  }\n\n```\n\n\n\n$$\nsigmoid' = sigmoid * (1 - sigmoid)\\\\\\\\\ntanh' = 1 - tanh^{2}\n$$\n\n## cont\n\ncont0\n\n- h0\n\n```cpp\n  // Add layers to flush the hidden state when beginning a new\n  // sequence, as indicated by cont_t.\n  //     h_conted_{t-1} := cont_t * h_{t-1}\n  //\n  // Normally, cont_t is binary (i.e., 0 or 1), so:\n  //     h_conted_{t-1} := h_{t-1} if cont_t == 1\n  //                       0   otherwise\n  {\n    LayerParameter* cont_h_param = net_param->add_layer();\n    cont_h_param->CopyFrom(scalar_param);\n    cont_h_param->set_name(\"h_conted_\" + tm1s);\n    cont_h_param->add_bottom(\"h_\" + tm1s);\n    cont_h_param->add_bottom(\"cont_\" + ts);\n    cont_h_param->add_top(\"h_conted_\" + tm1s);\n  }\n```\n\n- c\n\n```cpp\n    //         c_t := cont_t * (f_t .* c_{t-1}) + (i_t .* g_t)\n    const Dtype f = (*flush == 0) ? 0 :\n        (*flush * sigmoid(X[1 * hidden_dim_ + d]));\n\n```\n\n$h_0$$c_0$\n\n- 0cont0$h_0$0\n- f\\_t=0c\\_{t-1}c_{t}\n\n## \n\n- ********\n- \n\t* ****\n\t* ****","slug":"caffe_4_lstm","published":1,"updated":"2024-08-13T16:03:47.848Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clzvf19160007eqwo6za4exy6","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>RNNLSTMRNNtricky</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li><strong>sequence_layers.hpp:</strong>  RecurrentLayerRNNLSTM</li>\n<li><strong>recurrent_layer.cpp:</strong> RecurrentLayer</li>\n<li><strong>lstm_layer.cpp:</strong> LSTM</li>\n<li><strong>lstm_unit_layer.cpp:</strong> LSTM</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>LSTM<a href=\"http://www.jianshu.com/p/9dc9f41f0b29/\" target=\"_blank\" rel=\"external\">LSTM</a><a href=\"https://github.com/vsubhashini/caffe/tree/recurrent/examples/s2vt\" target=\"_blank\" rel=\"external\">Sequence to Sequence - Video to Text</a>xh</p>\n<p>fornetcont</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">     |---|         |---|</div><div class=\"line\"> c_0 |   |   c_0   |   |  c_1</div><div class=\"line\">-----|   |---------|   |-----</div><div class=\"line\"> h_0 |   | Wh+Wx+b |   |  h_1</div><div class=\"line\">-----|   |---------|   |-----</div><div class=\"line\">     |---|         |---|</div><div class=\"line\">   lstm_layer  lstm_unit_layer</div></pre></td></tr></table></figure>\n<h2 id=\"num-output-4\"><a href=\"#num-output-4\" class=\"headerlink\" title=\"num_output * 4\"></a>num_output * 4</h2><p>lstm_layer.cppnum_outputnum_output * 4</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">LayerParameter hidden_param;</div><div class=\"line\">hidden_param.set_type(<span class=\"string\">\"InnerProduct\"</span>);</div><div class=\"line\">hidden_param.mutable_inner_product_param()-&gt;set_num_output(num_output * <span class=\"number\">4</span>);</div><div class=\"line\">hidden_param.mutable_inner_product_param()-&gt;set_bias_term(<span class=\"literal\">false</span>);</div><div class=\"line\">hidden_param.mutable_inner_product_param()-&gt;set_axis(<span class=\"number\">2</span>);</div><div class=\"line\">hidden_param.mutable_inner_product_param()-&gt;</div><div class=\"line\">    mutable_weight_filler()-&gt;CopyFrom(weight_filler);</div></pre></td></tr></table></figure>\n<p>hnum_output * 4</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">LayerParameter* w_param = net_param-&gt;add_layer();</div><div class=\"line\">w_param-&gt;CopyFrom(hidden_param);</div><div class=\"line\">w_param-&gt;set_name(<span class=\"string\">\"transform_\"</span> + ts);</div><div class=\"line\">w_param-&gt;add_param()-&gt;set_name(<span class=\"string\">\"W_hc\"</span>);</div><div class=\"line\">w_param-&gt;add_bottom(<span class=\"string\">\"h_conted_\"</span> + tm1s);</div><div class=\"line\">w_param-&gt;add_top(<span class=\"string\">\"W_hc_h_\"</span> + tm1s);</div><div class=\"line\">w_param-&gt;mutable_inner_product_param()-&gt;set_axis(<span class=\"number\">2</span>);</div></pre></td></tr></table></figure>\n<p>lstm_unit_layer.cppnum_output * 44</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> Dtype i = sigmoid(X[d]);</div><div class=\"line\"><span class=\"keyword\">const</span> Dtype f = (*flush == <span class=\"number\">0</span>) ? <span class=\"number\">0</span> :</div><div class=\"line\">    (*flush * sigmoid(X[<span class=\"number\">1</span> * hidden_dim_ + d]));</div><div class=\"line\"><span class=\"keyword\">const</span> Dtype o = sigmoid(X[<span class=\"number\">2</span> * hidden_dim_ + d]);</div><div class=\"line\"><span class=\"keyword\">const</span> Dtype g = <span class=\"built_in\">tanh</span>(X[<span class=\"number\">3</span> * hidden_dim_ + d]);</div></pre></td></tr></table></figure>\n<p><strong></strong></p>\n<ul>\n<li>layer<strong></strong></li>\n<li><ul>\n<li><strong></strong></li>\n<li><strong></strong><a href=\"https://www.zhihu.com/question/19706331\" target=\"_blank\" rel=\"external\"></a></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"gate-input\"><a href=\"#gate-input\" class=\"headerlink\" title=\"gate_input\"></a>gate_input</h2><p>lstm_unit_layer.cpphxgate_inputhxlstm_unit_layer.cpp</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// Add LSTMUnit layer to compute the cell &amp; hidden vectors c_t and h_t.</span></div><div class=\"line\"><span class=\"comment\">// Inputs: c_&#123;t-1&#125;, gate_input_t = (i_t, f_t, o_t, g_t), cont_t</span></div><div class=\"line\"><span class=\"comment\">// Outputs: c_t, h_t</span></div><div class=\"line\"><span class=\"comment\">//     [ i_t' ]</span></div><div class=\"line\"><span class=\"comment\">//     [ f_t' ] := gate_input_t</span></div><div class=\"line\"><span class=\"comment\">//     [ o_t' ]</span></div><div class=\"line\"><span class=\"comment\">//     [ g_t' ]</span></div><div class=\"line\"><span class=\"comment\">//         i_t := \\sigmoid[i_t']</span></div><div class=\"line\"><span class=\"comment\">//         f_t := \\sigmoid[f_t']</span></div><div class=\"line\"><span class=\"comment\">//         o_t := \\sigmoid[o_t']</span></div><div class=\"line\"><span class=\"comment\">//         g_t := \\tanh[g_t']</span></div><div class=\"line\"><span class=\"comment\">//         c_t := cont_t * (f_t .* c_&#123;t-1&#125;) + (i_t .* g_t)</span></div><div class=\"line\"><span class=\"comment\">//         h_t := o_t .* \\tanh[c_t]</span></div><div class=\"line\">&#123;</div><div class=\"line\">  LayerParameter* lstm_unit_param = net_param-&gt;add_layer();</div><div class=\"line\">  lstm_unit_param-&gt;set_type(<span class=\"string\">\"LSTMUnit\"</span>);</div><div class=\"line\">  lstm_unit_param-&gt;add_bottom(<span class=\"string\">\"c_\"</span> + tm1s);</div><div class=\"line\">  lstm_unit_param-&gt;add_bottom(<span class=\"string\">\"gate_input_\"</span> + ts);</div><div class=\"line\">  lstm_unit_param-&gt;add_bottom(<span class=\"string\">\"cont_\"</span> + ts);</div><div class=\"line\">  lstm_unit_param-&gt;add_top(<span class=\"string\">\"c_\"</span> + ts);</div><div class=\"line\">  lstm_unit_param-&gt;add_top(<span class=\"string\">\"h_\"</span> + ts);</div><div class=\"line\">  lstm_unit_param-&gt;set_name(<span class=\"string\">\"unit_\"</span> + ts);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>Xunithxgate_inputunit<strong></strong></p>\n<ul>\n<li>unit<strong></strong></li>\n<li>unitunit</li>\n</ul>\n<h2 id=\"tanhsigmoid\"><a href=\"#tanhsigmoid\" class=\"headerlink\" title=\"tanhsigmoid\"></a>tanhsigmoid</h2><p>tanhsigmoid</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">template</span> &lt;<span class=\"keyword\">typename</span> Dtype&gt;</div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">inline</span> Dtype <span class=\"title\">sigmoid</span><span class=\"params\">(Dtype x)</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"number\">1.</span> / (<span class=\"number\">1.</span> + <span class=\"built_in\">exp</span>(-x));</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">template</span> &lt;<span class=\"keyword\">typename</span> Dtype&gt;</div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">inline</span> Dtype <span class=\"title\">tanh</span><span class=\"params\">(Dtype x)</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"number\">2.</span> * sigmoid(<span class=\"number\">2.</span> * x) - <span class=\"number\">1.</span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p></p>\n<p>$$<br>sigmoid = sigmoid * (1 - sigmoid)\\\\\\\\<br>tanh = 1 - tanh^{2}<br>$$</p>\n<h2 id=\"cont\"><a href=\"#cont\" class=\"headerlink\" title=\"cont\"></a>cont</h2><p>cont0</p>\n<ul>\n<li>h0</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// Add layers to flush the hidden state when beginning a new</span></div><div class=\"line\"><span class=\"comment\">// sequence, as indicated by cont_t.</span></div><div class=\"line\"><span class=\"comment\">//     h_conted_&#123;t-1&#125; := cont_t * h_&#123;t-1&#125;</span></div><div class=\"line\"><span class=\"comment\">//</span></div><div class=\"line\"><span class=\"comment\">// Normally, cont_t is binary (i.e., 0 or 1), so:</span></div><div class=\"line\"><span class=\"comment\">//     h_conted_&#123;t-1&#125; := h_&#123;t-1&#125; if cont_t == 1</span></div><div class=\"line\"><span class=\"comment\">//                       0   otherwise</span></div><div class=\"line\">&#123;</div><div class=\"line\">  LayerParameter* cont_h_param = net_param-&gt;add_layer();</div><div class=\"line\">  cont_h_param-&gt;CopyFrom(scalar_param);</div><div class=\"line\">  cont_h_param-&gt;set_name(<span class=\"string\">\"h_conted_\"</span> + tm1s);</div><div class=\"line\">  cont_h_param-&gt;add_bottom(<span class=\"string\">\"h_\"</span> + tm1s);</div><div class=\"line\">  cont_h_param-&gt;add_bottom(<span class=\"string\">\"cont_\"</span> + ts);</div><div class=\"line\">  cont_h_param-&gt;add_top(<span class=\"string\">\"h_conted_\"</span> + tm1s);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<ul>\n<li>c</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//         c_t := cont_t * (f_t .* c_&#123;t-1&#125;) + (i_t .* g_t)</span></div><div class=\"line\"><span class=\"keyword\">const</span> Dtype f = (*flush == <span class=\"number\">0</span>) ? <span class=\"number\">0</span> :</div><div class=\"line\">    (*flush * sigmoid(X[<span class=\"number\">1</span> * hidden_dim_ + d]));</div></pre></td></tr></table></figure>\n<p>$h_0$$c_0$</p>\n<ul>\n<li>0cont0$h_0$0</li>\n<li>f_t=0c_{t-1}c_{t}</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><strong></strong><strong></strong></li>\n<li><ul>\n<li><strong></strong></li>\n<li><strong></strong></li>\n</ul>\n</li>\n</ul>\n","excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>RNNLSTMRNNtricky</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li><strong>sequence_layers.hpp:</strong>  RecurrentLayerRNNLSTM</li>\n<li><strong>recurrent_layer.cpp:</strong> RecurrentLayer</li>\n<li><strong>lstm_layer.cpp:</strong> LSTM</li>\n<li><strong>lstm_unit_layer.cpp:</strong> LSTM</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>LSTM<a href=\"http://www.jianshu.com/p/9dc9f41f0b29/\">LSTM</a><a href=\"https://github.com/vsubhashini/caffe/tree/recurrent/examples/s2vt\">Sequence to Sequence - Video to Text</a>xh</p>\n<p>fornetcont</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">     |---|         |---|</div><div class=\"line\"> c_0 |   |   c_0   |   |  c_1</div><div class=\"line\">-----|   |---------|   |-----</div><div class=\"line\"> h_0 |   | Wh+Wx+b |   |  h_1</div><div class=\"line\">-----|   |---------|   |-----</div><div class=\"line\">     |---|         |---|</div><div class=\"line\">   lstm_layer  lstm_unit_layer</div></pre></td></tr></table></figure>\n<h2 id=\"num-output-4\"><a href=\"#num-output-4\" class=\"headerlink\" title=\"num_output * 4\"></a>num_output * 4</h2><p>lstm_layer.cppnum_outputnum_output * 4</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">LayerParameter hidden_param;</div><div class=\"line\">hidden_param.set_type(<span class=\"string\">\"InnerProduct\"</span>);</div><div class=\"line\">hidden_param.mutable_inner_product_param()-&gt;set_num_output(num_output * <span class=\"number\">4</span>);</div><div class=\"line\">hidden_param.mutable_inner_product_param()-&gt;set_bias_term(<span class=\"literal\">false</span>);</div><div class=\"line\">hidden_param.mutable_inner_product_param()-&gt;set_axis(<span class=\"number\">2</span>);</div><div class=\"line\">hidden_param.mutable_inner_product_param()-&gt;</div><div class=\"line\">    mutable_weight_filler()-&gt;CopyFrom(weight_filler);</div></pre></td></tr></table></figure>\n<p>hnum_output * 4</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">LayerParameter* w_param = net_param-&gt;add_layer();</div><div class=\"line\">w_param-&gt;CopyFrom(hidden_param);</div><div class=\"line\">w_param-&gt;set_name(<span class=\"string\">\"transform_\"</span> + ts);</div><div class=\"line\">w_param-&gt;add_param()-&gt;set_name(<span class=\"string\">\"W_hc\"</span>);</div><div class=\"line\">w_param-&gt;add_bottom(<span class=\"string\">\"h_conted_\"</span> + tm1s);</div><div class=\"line\">w_param-&gt;add_top(<span class=\"string\">\"W_hc_h_\"</span> + tm1s);</div><div class=\"line\">w_param-&gt;mutable_inner_product_param()-&gt;set_axis(<span class=\"number\">2</span>);</div></pre></td></tr></table></figure>\n<p>lstm_unit_layer.cppnum_output * 44</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> Dtype i = sigmoid(X[d]);</div><div class=\"line\"><span class=\"keyword\">const</span> Dtype f = (*flush == <span class=\"number\">0</span>) ? <span class=\"number\">0</span> :</div><div class=\"line\">    (*flush * sigmoid(X[<span class=\"number\">1</span> * hidden_dim_ + d]));</div><div class=\"line\"><span class=\"keyword\">const</span> Dtype o = sigmoid(X[<span class=\"number\">2</span> * hidden_dim_ + d]);</div><div class=\"line\"><span class=\"keyword\">const</span> Dtype g = <span class=\"built_in\">tanh</span>(X[<span class=\"number\">3</span> * hidden_dim_ + d]);</div></pre></td></tr></table></figure>\n<p><strong></strong></p>\n<ul>\n<li>layer<strong></strong></li>\n<li><ul>\n<li><strong></strong></li>\n<li><strong></strong><a href=\"https://www.zhihu.com/question/19706331\"></a></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"gate-input\"><a href=\"#gate-input\" class=\"headerlink\" title=\"gate_input\"></a>gate_input</h2><p>lstm_unit_layer.cpphxgate_inputhxlstm_unit_layer.cpp</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// Add LSTMUnit layer to compute the cell &amp; hidden vectors c_t and h_t.</span></div><div class=\"line\"><span class=\"comment\">// Inputs: c_&#123;t-1&#125;, gate_input_t = (i_t, f_t, o_t, g_t), cont_t</span></div><div class=\"line\"><span class=\"comment\">// Outputs: c_t, h_t</span></div><div class=\"line\"><span class=\"comment\">//     [ i_t' ]</span></div><div class=\"line\"><span class=\"comment\">//     [ f_t' ] := gate_input_t</span></div><div class=\"line\"><span class=\"comment\">//     [ o_t' ]</span></div><div class=\"line\"><span class=\"comment\">//     [ g_t' ]</span></div><div class=\"line\"><span class=\"comment\">//         i_t := \\sigmoid[i_t']</span></div><div class=\"line\"><span class=\"comment\">//         f_t := \\sigmoid[f_t']</span></div><div class=\"line\"><span class=\"comment\">//         o_t := \\sigmoid[o_t']</span></div><div class=\"line\"><span class=\"comment\">//         g_t := \\tanh[g_t']</span></div><div class=\"line\"><span class=\"comment\">//         c_t := cont_t * (f_t .* c_&#123;t-1&#125;) + (i_t .* g_t)</span></div><div class=\"line\"><span class=\"comment\">//         h_t := o_t .* \\tanh[c_t]</span></div><div class=\"line\">&#123;</div><div class=\"line\">  LayerParameter* lstm_unit_param = net_param-&gt;add_layer();</div><div class=\"line\">  lstm_unit_param-&gt;set_type(<span class=\"string\">\"LSTMUnit\"</span>);</div><div class=\"line\">  lstm_unit_param-&gt;add_bottom(<span class=\"string\">\"c_\"</span> + tm1s);</div><div class=\"line\">  lstm_unit_param-&gt;add_bottom(<span class=\"string\">\"gate_input_\"</span> + ts);</div><div class=\"line\">  lstm_unit_param-&gt;add_bottom(<span class=\"string\">\"cont_\"</span> + ts);</div><div class=\"line\">  lstm_unit_param-&gt;add_top(<span class=\"string\">\"c_\"</span> + ts);</div><div class=\"line\">  lstm_unit_param-&gt;add_top(<span class=\"string\">\"h_\"</span> + ts);</div><div class=\"line\">  lstm_unit_param-&gt;set_name(<span class=\"string\">\"unit_\"</span> + ts);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>Xunithxgate_inputunit<strong></strong></p>\n<ul>\n<li>unit<strong></strong></li>\n<li>unitunit</li>\n</ul>\n<h2 id=\"tanhsigmoid\"><a href=\"#tanhsigmoid\" class=\"headerlink\" title=\"tanhsigmoid\"></a>tanhsigmoid</h2><p>tanhsigmoid</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">template</span> &lt;<span class=\"keyword\">typename</span> Dtype&gt;</div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">inline</span> Dtype <span class=\"title\">sigmoid</span><span class=\"params\">(Dtype x)</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"number\">1.</span> / (<span class=\"number\">1.</span> + <span class=\"built_in\">exp</span>(-x));</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">template</span> &lt;<span class=\"keyword\">typename</span> Dtype&gt;</div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">inline</span> Dtype <span class=\"title\">tanh</span><span class=\"params\">(Dtype x)</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"number\">2.</span> * sigmoid(<span class=\"number\">2.</span> * x) - <span class=\"number\">1.</span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p></p>\n<p>$$<br>sigmoid = sigmoid * (1 - sigmoid)\\\\\\\\<br>tanh = 1 - tanh^{2}<br>$$</p>\n<h2 id=\"cont\"><a href=\"#cont\" class=\"headerlink\" title=\"cont\"></a>cont</h2><p>cont0</p>\n<ul>\n<li>h0</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// Add layers to flush the hidden state when beginning a new</span></div><div class=\"line\"><span class=\"comment\">// sequence, as indicated by cont_t.</span></div><div class=\"line\"><span class=\"comment\">//     h_conted_&#123;t-1&#125; := cont_t * h_&#123;t-1&#125;</span></div><div class=\"line\"><span class=\"comment\">//</span></div><div class=\"line\"><span class=\"comment\">// Normally, cont_t is binary (i.e., 0 or 1), so:</span></div><div class=\"line\"><span class=\"comment\">//     h_conted_&#123;t-1&#125; := h_&#123;t-1&#125; if cont_t == 1</span></div><div class=\"line\"><span class=\"comment\">//                       0   otherwise</span></div><div class=\"line\">&#123;</div><div class=\"line\">  LayerParameter* cont_h_param = net_param-&gt;add_layer();</div><div class=\"line\">  cont_h_param-&gt;CopyFrom(scalar_param);</div><div class=\"line\">  cont_h_param-&gt;set_name(<span class=\"string\">\"h_conted_\"</span> + tm1s);</div><div class=\"line\">  cont_h_param-&gt;add_bottom(<span class=\"string\">\"h_\"</span> + tm1s);</div><div class=\"line\">  cont_h_param-&gt;add_bottom(<span class=\"string\">\"cont_\"</span> + ts);</div><div class=\"line\">  cont_h_param-&gt;add_top(<span class=\"string\">\"h_conted_\"</span> + tm1s);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<ul>\n<li>c</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//         c_t := cont_t * (f_t .* c_&#123;t-1&#125;) + (i_t .* g_t)</span></div><div class=\"line\"><span class=\"keyword\">const</span> Dtype f = (*flush == <span class=\"number\">0</span>) ? <span class=\"number\">0</span> :</div><div class=\"line\">    (*flush * sigmoid(X[<span class=\"number\">1</span> * hidden_dim_ + d]));</div></pre></td></tr></table></figure>\n<p>$h_0$$c_0$</p>\n<ul>\n<li>0cont0$h_0$0</li>\n<li>f_t=0c_{t-1}c_{t}</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><strong></strong><strong></strong></li>\n<li><ul>\n<li><strong></strong></li>\n<li><strong></strong></li>\n</ul>\n</li>\n</ul>\n"},{"title":"Caffes2vt_captioner.py","date":"2016-08-17T08:15:14.000Z","description":["s2vt_captioner.pyLSTMtestpython"],"_content":"\n## \n\ns2vt_captioner.pys2vt modelcaption\n\n- decodeLSTM2xgtunit\n- pythoncaffe\n\n\n\n## \n\n- **main:** vid chunks\n\t* **run\\_pred\\_iters:** vid\n\t\t- **encode\\_video\\_frames:** vidfeatsencode\n\t\t- **run\\_pred\\_iter:** decodevidcaptions\n\t\t\t* **predict\\_image\\_caption:** captioncaption\n\t\t\t\t- **predict\\_image\\_caption\\_beam\\_search:** beam searchcaption\n\t\t\t\t\t* **predict\\_single\\_word:** \n\n## main\n\nchunkrun\\_pred\\_iters\n\n```py\n    fsg = fc7FrameSequenceGenerator(filenames, BUFFER_SIZE,\n          vocab_file, max_words=MAX_WORDS, align=aligned, shuffle=False,\n          pad=aligned, truncate=aligned)\n    video_gt_pairs = all_video_gt_pairs(fsg)\n\n```\n\n- **video\\_gt\\_pairs:** dict{vid: list[gt\\_sents]}\n\t* gtlist[gt\\_sents]\n\n\n```py\n    outputs = run_pred_iters(lstm_net, chunk, video_gt_pairs,\n                  fsg, strategies=STRATEGIES, display_vocab=vocab_list)\n      \n```\n\n- **outputs:** dict{vid: output_batch}\n\t* vidcaptionoutput_batch\n- **output_batch:** list[dict{caption, prob, gt, source}]\n\t* **caption:** list[word1, word2, word3, ...]\n\t* **prob:** list[prob\\_word1, prob\\_word2, prob\\_word3, ...]\n\t* **source:**  e.g. sample / beam\n\n```py\n    text_out_types = to_text_output(outputs, vocab_list)\n\n```\n\n- **text\\_output\\_types:** dict{source\\_type: list[output string]}\n\t* **source\\_type:**  e.g. sample / beam\n\n## run\\_pred\\_iters\n\nchunkvidrun\\_pre\\_iter\n\n```py\n    # get fc7 feature for the video\n    video_features = video_to_descriptor(video_id, fsg)\n\n```\n\nvideo\\_features: list[1 \\* FEAT\\_DIM]\n\n```py\n    # run lstm on all the frames of video before predicting\n    encode_video_frames(pred_net, video_features)\n    outputs[video_id] = \\\n        run_pred_iter(pred_net, pad_img_feature, display_vocab, strategies=strategies)\n\n```\n\ncaption\n\n1. frame_feats encodeLSTM\n2. encodeLSTMdecodecaption\n\n## encode\\_video\\_frames\n\n```py\n    net.forward(frames_fc7=image_features, cont_sentence=cont, input_sentence=data_en,\n       stage_indicator=stage_ind)\n\n```\n\nframe\\_featsLSTMinput\\_sentence0\n\n## run\\_pred\\_iter\n\n```py\n    captions, probs = predict_image_caption(net, pad_image_feature, vocab_list, strategy=strategy)\n```\n\nstrategypredict\\_image\\_captioncaption\n\n## predict\\_image\\_caption\n\nstrategyimage\\_captioncaption\n\n## predict\\_image\\_caption\\_beam\\_search\n\nbeam\\_searchbeam\\_searchBFSbeam\\_size\n\n```py\n  beam_size = 1\t#\n  beams = [[]]\t#beams: list[sentence], sentence: list[word]\n  beams_complete = 0\t#beameos\n  beam_probs = [[]]\t#beams\n  beam_log_probs = [0.]\t#beam(i.e. )beamsbeam(log w1*w2*w3...)\n  current_input_word = 0  # first input is EOS\n  while beams_complete < len(beams):\n    # expansions: append a new word to current beams\n    expansions = []\t#\n\n\t  #\n      # extension : the new word\n      exp = {'prefix_beam_index': beam_index, 'extension': [ind],\n             'prob_extension': [prob], 'log_prob': extended_beam_log_prob}\n      expansions.append(exp)\n\n      #prefix_beam_index: beam\n      #extension: index\n      #prob_extension: \n      #log_prob: beamlog w1*w2*w3...*w_extension\n\n```\n\n\n\n```py\n    #       0       p_w1, p_w2...  w1, w2...\n    for beam_index, beam_log_prob, beam in \\\n        zip(range(len(beams)), beam_log_probs, beams):\n      if beam:\n        previous_word = beam[-1]\n        if len(beam) >= max_length or previous_word == 0:\n          exp = {'prefix_beam_index': beam_index, 'extension': [],\n                 'prob_extension': [], 'log_prob': beam_log_prob}\n          expansions.append(exp)\n          # Don't expand this beam; it was already ended with an EOS,\n          # or is the max length.\n          continue\n      else:\n        previous_word = 0  # EOS is first word\n      if beam_size == 1:\n        probs = predict_single_word(net, pad_img_feature, previous_word)\n      else:\n        probs = predict_single_word_from_all_previous(net, pad_img_feature, beam)\n      assert len(probs.shape) == 1\n      assert probs.shape[0] == len(vocab_list)\n      # index of top beam_size prob words\n      expansion_inds = probs.argsort()[-beam_size:]\n      for ind in expansion_inds:\n        prob = probs[ind]\n        extended_beam_log_prob = beam_log_prob + math.log(prob)\n        # extension : the new word\n        exp = {'prefix_beam_index': beam_index, 'extension': [ind],\n               'prob_extension': [prob], 'log_prob': extended_beam_log_prob}\n        expansions.append(exp)\n\n```\n\nbeambeam\\_sizeexpansionsexpansionslen(beams) * beam\\_size\n\n```py\n  while beams_complete < len(beams):\n    # expansions: append a new word to current beams\n    expansions = []\n\n  \t#\n\n    # Sort expansions in decreasing order of probabilitf.\n    expansions.sort(key=lambda expansion: -1 * expansion['log_prob'])\n    # only reserve beam_size number of node in each BFS layer\n    expansions = expansions[:beam_size]\n    new_beams = \\\n        [beams[e['prefix_beam_index']] + e['extension'] for e in expansions]\n    new_beam_probs = \\\n        [beam_probs[e['prefix_beam_index']] + e['prob_extension'] for e in expansions]\n    beam_log_probs = [e['log_prob'] for e in expansions]\n    beams_complete = 0\n    for beam in new_beams:\n      if beam[-1] == 0 or len(beam) >= max_length: beams_complete += 1\n    beams, beam_probs = new_beams, new_beam_probs\n\n```\n\nexpansionsbeam\\_sizebean\\_sizebeamssizebeam\\_sizenew_beamsbeamsbeam\n\n## predict\\_single\\_word\n\nencode\\_video\\_framepadframes_fc7\n\n## caffemodel\n\n\n\n- s2vt\\_captioner.py**test******outputinputch\n- **train**LSTM****\n- LSTM****\n- **traincaffemodeltest**\n\ntrainsharetrick`add_param()->set_name()`\n\n```cpp\n  //lstm_layer.cpp\n\n  // Add layer to transform all timesteps of x to the hidden state dimension.\n  //     W_xc_x = W_xc * x + b_c\n  //{\n  //  LayerParameter* x_transform_param = net_param->add_layer();\n  //  x_transform_param->CopyFrom(biased_hidden_param);\n  //  x_transform_param->set_name(\"x_transform\");\n    x_transform_param->add_param()->set_name(\"W_xc\");\n    x_transform_param->add_param()->set_name(\"b_c\");\n  //  x_transform_param->add_bottom(\"x\");\n  //  x_transform_param->add_top(\"W_xc_x\");\n  //}\n\n  // Add layer to compute\n  //     W_hc_h_{t-1} := W_hc * h_conted_{t-1}\n  //{\n  //  LayerParameter* w_param = net_param->add_layer();\n  //  w_param->CopyFrom(hidden_param);\n  //  w_param->set_name(\"transform_\" + ts);\n    w_param->add_param()->set_name(\"W_hc\");\n  //  w_param->add_bottom(\"h_conted_\" + tm1s);\n  //  w_param->add_top(\"W_hc_h_\" + tm1s);\n  //  w_param->mutable_inner_product_param()->set_axis(2);\n  //}\n\n```\n\ncaffe.protoparam\n\n```proto\n//caffe.proto\n\nmessage LayerParameter {\n  // Specifies training parameters (multipliers on global learning constants,\n  // and the name and other settings used for weight sharing).\n  repeated ParamSpec param = 6;\n}\n\n```\n\n\n\n## \n\n- ****.bak.bak1, .bak2, .bak3\n- debug****PYTHONPATH\n","source":"_posts/caffe_5_s2vt_captioner.md","raw":"---\ntitle: Caffes2vt_captioner.py\ndate: 2016-08-17 16:15:14\ntags: \n  - s2vt_captioner\ndescription:\n  - s2vt_captioner.pyLSTMtestpython\ncategories:\n  - caffe\n---\n\n## \n\ns2vt_captioner.pys2vt modelcaption\n\n- decodeLSTM2xgtunit\n- pythoncaffe\n\n\n\n## \n\n- **main:** vid chunks\n\t* **run\\_pred\\_iters:** vid\n\t\t- **encode\\_video\\_frames:** vidfeatsencode\n\t\t- **run\\_pred\\_iter:** decodevidcaptions\n\t\t\t* **predict\\_image\\_caption:** captioncaption\n\t\t\t\t- **predict\\_image\\_caption\\_beam\\_search:** beam searchcaption\n\t\t\t\t\t* **predict\\_single\\_word:** \n\n## main\n\nchunkrun\\_pred\\_iters\n\n```py\n    fsg = fc7FrameSequenceGenerator(filenames, BUFFER_SIZE,\n          vocab_file, max_words=MAX_WORDS, align=aligned, shuffle=False,\n          pad=aligned, truncate=aligned)\n    video_gt_pairs = all_video_gt_pairs(fsg)\n\n```\n\n- **video\\_gt\\_pairs:** dict{vid: list[gt\\_sents]}\n\t* gtlist[gt\\_sents]\n\n\n```py\n    outputs = run_pred_iters(lstm_net, chunk, video_gt_pairs,\n                  fsg, strategies=STRATEGIES, display_vocab=vocab_list)\n      \n```\n\n- **outputs:** dict{vid: output_batch}\n\t* vidcaptionoutput_batch\n- **output_batch:** list[dict{caption, prob, gt, source}]\n\t* **caption:** list[word1, word2, word3, ...]\n\t* **prob:** list[prob\\_word1, prob\\_word2, prob\\_word3, ...]\n\t* **source:**  e.g. sample / beam\n\n```py\n    text_out_types = to_text_output(outputs, vocab_list)\n\n```\n\n- **text\\_output\\_types:** dict{source\\_type: list[output string]}\n\t* **source\\_type:**  e.g. sample / beam\n\n## run\\_pred\\_iters\n\nchunkvidrun\\_pre\\_iter\n\n```py\n    # get fc7 feature for the video\n    video_features = video_to_descriptor(video_id, fsg)\n\n```\n\nvideo\\_features: list[1 \\* FEAT\\_DIM]\n\n```py\n    # run lstm on all the frames of video before predicting\n    encode_video_frames(pred_net, video_features)\n    outputs[video_id] = \\\n        run_pred_iter(pred_net, pad_img_feature, display_vocab, strategies=strategies)\n\n```\n\ncaption\n\n1. frame_feats encodeLSTM\n2. encodeLSTMdecodecaption\n\n## encode\\_video\\_frames\n\n```py\n    net.forward(frames_fc7=image_features, cont_sentence=cont, input_sentence=data_en,\n       stage_indicator=stage_ind)\n\n```\n\nframe\\_featsLSTMinput\\_sentence0\n\n## run\\_pred\\_iter\n\n```py\n    captions, probs = predict_image_caption(net, pad_image_feature, vocab_list, strategy=strategy)\n```\n\nstrategypredict\\_image\\_captioncaption\n\n## predict\\_image\\_caption\n\nstrategyimage\\_captioncaption\n\n## predict\\_image\\_caption\\_beam\\_search\n\nbeam\\_searchbeam\\_searchBFSbeam\\_size\n\n```py\n  beam_size = 1\t#\n  beams = [[]]\t#beams: list[sentence], sentence: list[word]\n  beams_complete = 0\t#beameos\n  beam_probs = [[]]\t#beams\n  beam_log_probs = [0.]\t#beam(i.e. )beamsbeam(log w1*w2*w3...)\n  current_input_word = 0  # first input is EOS\n  while beams_complete < len(beams):\n    # expansions: append a new word to current beams\n    expansions = []\t#\n\n\t  #\n      # extension : the new word\n      exp = {'prefix_beam_index': beam_index, 'extension': [ind],\n             'prob_extension': [prob], 'log_prob': extended_beam_log_prob}\n      expansions.append(exp)\n\n      #prefix_beam_index: beam\n      #extension: index\n      #prob_extension: \n      #log_prob: beamlog w1*w2*w3...*w_extension\n\n```\n\n\n\n```py\n    #       0       p_w1, p_w2...  w1, w2...\n    for beam_index, beam_log_prob, beam in \\\n        zip(range(len(beams)), beam_log_probs, beams):\n      if beam:\n        previous_word = beam[-1]\n        if len(beam) >= max_length or previous_word == 0:\n          exp = {'prefix_beam_index': beam_index, 'extension': [],\n                 'prob_extension': [], 'log_prob': beam_log_prob}\n          expansions.append(exp)\n          # Don't expand this beam; it was already ended with an EOS,\n          # or is the max length.\n          continue\n      else:\n        previous_word = 0  # EOS is first word\n      if beam_size == 1:\n        probs = predict_single_word(net, pad_img_feature, previous_word)\n      else:\n        probs = predict_single_word_from_all_previous(net, pad_img_feature, beam)\n      assert len(probs.shape) == 1\n      assert probs.shape[0] == len(vocab_list)\n      # index of top beam_size prob words\n      expansion_inds = probs.argsort()[-beam_size:]\n      for ind in expansion_inds:\n        prob = probs[ind]\n        extended_beam_log_prob = beam_log_prob + math.log(prob)\n        # extension : the new word\n        exp = {'prefix_beam_index': beam_index, 'extension': [ind],\n               'prob_extension': [prob], 'log_prob': extended_beam_log_prob}\n        expansions.append(exp)\n\n```\n\nbeambeam\\_sizeexpansionsexpansionslen(beams) * beam\\_size\n\n```py\n  while beams_complete < len(beams):\n    # expansions: append a new word to current beams\n    expansions = []\n\n  \t#\n\n    # Sort expansions in decreasing order of probabilitf.\n    expansions.sort(key=lambda expansion: -1 * expansion['log_prob'])\n    # only reserve beam_size number of node in each BFS layer\n    expansions = expansions[:beam_size]\n    new_beams = \\\n        [beams[e['prefix_beam_index']] + e['extension'] for e in expansions]\n    new_beam_probs = \\\n        [beam_probs[e['prefix_beam_index']] + e['prob_extension'] for e in expansions]\n    beam_log_probs = [e['log_prob'] for e in expansions]\n    beams_complete = 0\n    for beam in new_beams:\n      if beam[-1] == 0 or len(beam) >= max_length: beams_complete += 1\n    beams, beam_probs = new_beams, new_beam_probs\n\n```\n\nexpansionsbeam\\_sizebean\\_sizebeamssizebeam\\_sizenew_beamsbeamsbeam\n\n## predict\\_single\\_word\n\nencode\\_video\\_framepadframes_fc7\n\n## caffemodel\n\n\n\n- s2vt\\_captioner.py**test******outputinputch\n- **train**LSTM****\n- LSTM****\n- **traincaffemodeltest**\n\ntrainsharetrick`add_param()->set_name()`\n\n```cpp\n  //lstm_layer.cpp\n\n  // Add layer to transform all timesteps of x to the hidden state dimension.\n  //     W_xc_x = W_xc * x + b_c\n  //{\n  //  LayerParameter* x_transform_param = net_param->add_layer();\n  //  x_transform_param->CopyFrom(biased_hidden_param);\n  //  x_transform_param->set_name(\"x_transform\");\n    x_transform_param->add_param()->set_name(\"W_xc\");\n    x_transform_param->add_param()->set_name(\"b_c\");\n  //  x_transform_param->add_bottom(\"x\");\n  //  x_transform_param->add_top(\"W_xc_x\");\n  //}\n\n  // Add layer to compute\n  //     W_hc_h_{t-1} := W_hc * h_conted_{t-1}\n  //{\n  //  LayerParameter* w_param = net_param->add_layer();\n  //  w_param->CopyFrom(hidden_param);\n  //  w_param->set_name(\"transform_\" + ts);\n    w_param->add_param()->set_name(\"W_hc\");\n  //  w_param->add_bottom(\"h_conted_\" + tm1s);\n  //  w_param->add_top(\"W_hc_h_\" + tm1s);\n  //  w_param->mutable_inner_product_param()->set_axis(2);\n  //}\n\n```\n\ncaffe.protoparam\n\n```proto\n//caffe.proto\n\nmessage LayerParameter {\n  // Specifies training parameters (multipliers on global learning constants,\n  // and the name and other settings used for weight sharing).\n  repeated ParamSpec param = 6;\n}\n\n```\n\n\n\n## \n\n- ****.bak.bak1, .bak2, .bak3\n- debug****PYTHONPATH\n","slug":"caffe_5_s2vt_captioner","published":1,"updated":"2024-08-13T16:03:47.848Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clzvf191c000beqwo8ml7xkus","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>s2vt_captioner.pys2vt modelcaption</p>\n<ul>\n<li>decodeLSTM2xgtunit</li>\n<li>pythoncaffe</li>\n</ul>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><strong>main:</strong> vid chunks<ul>\n<li><strong>run_pred_iters:</strong> vid<ul>\n<li><strong>encode_video_frames:</strong> vidfeatsencode</li>\n<li><strong>run_pred_iter:</strong> decodevidcaptions<ul>\n<li><strong>predict_image_caption:</strong> captioncaption<ul>\n<li><strong>predict_image_caption_beam_search:</strong> beam searchcaption<ul>\n<li><strong>predict_single_word:</strong> </li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"main\"><a href=\"#main\" class=\"headerlink\" title=\"main\"></a>main</h2><p>chunkrun_pred_iters</p>\n<figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">fsg = fc7FrameSequenceGenerator(filenames, BUFFER_SIZE,</div><div class=\"line\">      vocab_file, max_words=MAX_WORDS, align=aligned, shuffle=<span class=\"keyword\">False</span>,</div><div class=\"line\">      pad=aligned, truncate=aligned)</div><div class=\"line\">video_gt_pairs = all_video_gt_pairs(fsg)</div></pre></td></tr></table></figure>\n<ul>\n<li><strong>video_gt_pairs:</strong> dict{vid: list[gt_sents]}<ul>\n<li>gtlist[gt_sents]</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">outputs = run_pred_iters(lstm_net, chunk, video_gt_pairs,</div><div class=\"line\">              fsg, strategies=STRATEGIES, display_vocab=vocab_list)</div></pre></td></tr></table></figure>\n<ul>\n<li><strong>outputs:</strong> dict{vid: output_batch}<ul>\n<li>vidcaptionoutput_batch</li>\n</ul>\n</li>\n<li><strong>output_batch:</strong> list[dict{caption, prob, gt, source}]<ul>\n<li><strong>caption:</strong> list[word1, word2, word3, ]</li>\n<li><strong>prob:</strong> list[prob_word1, prob_word2, prob_word3, ]</li>\n<li><strong>source:</strong>  e.g. sample / beam</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">text_out_types = to_text_output(outputs, vocab_list)</div></pre></td></tr></table></figure>\n<ul>\n<li><strong>text_output_types:</strong> dict{source_type: list[output string]}<ul>\n<li><strong>source_type:</strong>  e.g. sample / beam</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"run-pred-iters\"><a href=\"#run-pred-iters\" class=\"headerlink\" title=\"run_pred_iters\"></a>run_pred_iters</h2><p>chunkvidrun_pre_iter</p>\n<figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># get fc7 feature for the video</span></div><div class=\"line\">video_features = video_to_descriptor(video_id, fsg)</div></pre></td></tr></table></figure>\n<p>video_features: list[1 * FEAT_DIM]</p>\n<figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># run lstm on all the frames of video before predicting</span></div><div class=\"line\">encode_video_frames(pred_net, video_features)</div><div class=\"line\">outputs[video_id] = \\</div><div class=\"line\">    run_pred_iter(pred_net, pad_img_feature, display_vocab, strategies=strategies)</div></pre></td></tr></table></figure>\n<p>caption</p>\n<ol>\n<li>frame_feats encodeLSTM</li>\n<li>encodeLSTMdecodecaption</li>\n</ol>\n<h2 id=\"encode-video-frames\"><a href=\"#encode-video-frames\" class=\"headerlink\" title=\"encode_video_frames\"></a>encode_video_frames</h2><figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">net.forward(frames_fc7=image_features, cont_sentence=cont, input_sentence=data_en,</div><div class=\"line\">   stage_indicator=stage_ind)</div></pre></td></tr></table></figure>\n<p>frame_featsLSTMinput_sentence0</p>\n<h2 id=\"run-pred-iter\"><a href=\"#run-pred-iter\" class=\"headerlink\" title=\"run_pred_iter\"></a>run_pred_iter</h2><figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">captions, probs = predict_image_caption(net, pad_image_feature, vocab_list, strategy=strategy)</div></pre></td></tr></table></figure>\n<p>strategypredict_image_captioncaption</p>\n<h2 id=\"predict-image-caption\"><a href=\"#predict-image-caption\" class=\"headerlink\" title=\"predict_image_caption\"></a>predict_image_caption</h2><p>strategyimage_captioncaption</p>\n<h2 id=\"predict-image-caption-beam-search\"><a href=\"#predict-image-caption-beam-search\" class=\"headerlink\" title=\"predict_image_caption_beam_search\"></a>predict_image_caption_beam_search</h2><p>beam_searchbeam_searchBFSbeam_size</p>\n<figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\">beam_size = <span class=\"number\">1</span>\t<span class=\"comment\">#</span></div><div class=\"line\">beams = [[]]\t<span class=\"comment\">#beams: list[sentence], sentence: list[word]</span></div><div class=\"line\">beams_complete = <span class=\"number\">0</span>\t<span class=\"comment\">#beameos</span></div><div class=\"line\">beam_probs = [[]]\t<span class=\"comment\">#beams</span></div><div class=\"line\">beam_log_probs = [<span class=\"number\">0.</span>]\t<span class=\"comment\">#beam(i.e. )beamsbeam(log w1*w2*w3...)</span></div><div class=\"line\">current_input_word = <span class=\"number\">0</span>  <span class=\"comment\"># first input is EOS</span></div><div class=\"line\"><span class=\"keyword\">while</span> beams_complete &lt; len(beams):</div><div class=\"line\">  <span class=\"comment\"># expansions: append a new word to current beams</span></div><div class=\"line\">  expansions = []\t<span class=\"comment\">#</span></div><div class=\"line\"></div><div class=\"line\"> <span class=\"comment\">#</span></div><div class=\"line\">    <span class=\"comment\"># extension : the new word</span></div><div class=\"line\">    exp = &#123;<span class=\"string\">'prefix_beam_index'</span>: beam_index, <span class=\"string\">'extension'</span>: [ind],</div><div class=\"line\">           <span class=\"string\">'prob_extension'</span>: [prob], <span class=\"string\">'log_prob'</span>: extended_beam_log_prob&#125;</div><div class=\"line\">    expansions.append(exp)</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">#prefix_beam_index: beam</span></div><div class=\"line\">    <span class=\"comment\">#extension: index</span></div><div class=\"line\">    <span class=\"comment\">#prob_extension: </span></div><div class=\"line\">    <span class=\"comment\">#log_prob: beamlog w1*w2*w3...*w_extension</span></div></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">#       0       p_w1, p_w2...  w1, w2...</span></div><div class=\"line\"><span class=\"keyword\">for</span> beam_index, beam_log_prob, beam <span class=\"keyword\">in</span> \\</div><div class=\"line\">    zip(range(len(beams)), beam_log_probs, beams):</div><div class=\"line\">  <span class=\"keyword\">if</span> beam:</div><div class=\"line\">    previous_word = beam[<span class=\"number\">-1</span>]</div><div class=\"line\">    <span class=\"keyword\">if</span> len(beam) &gt;= max_length <span class=\"keyword\">or</span> previous_word == <span class=\"number\">0</span>:</div><div class=\"line\">      exp = &#123;<span class=\"string\">'prefix_beam_index'</span>: beam_index, <span class=\"string\">'extension'</span>: [],</div><div class=\"line\">             <span class=\"string\">'prob_extension'</span>: [], <span class=\"string\">'log_prob'</span>: beam_log_prob&#125;</div><div class=\"line\">      expansions.append(exp)</div><div class=\"line\">      <span class=\"comment\"># Don't expand this beam; it was already ended with an EOS,</span></div><div class=\"line\">      <span class=\"comment\"># or is the max length.</span></div><div class=\"line\">      <span class=\"keyword\">continue</span></div><div class=\"line\">  <span class=\"keyword\">else</span>:</div><div class=\"line\">    previous_word = <span class=\"number\">0</span>  <span class=\"comment\"># EOS is first word</span></div><div class=\"line\">  <span class=\"keyword\">if</span> beam_size == <span class=\"number\">1</span>:</div><div class=\"line\">    probs = predict_single_word(net, pad_img_feature, previous_word)</div><div class=\"line\">  <span class=\"keyword\">else</span>:</div><div class=\"line\">    probs = predict_single_word_from_all_previous(net, pad_img_feature, beam)</div><div class=\"line\">  <span class=\"keyword\">assert</span> len(probs.shape) == <span class=\"number\">1</span></div><div class=\"line\">  <span class=\"keyword\">assert</span> probs.shape[<span class=\"number\">0</span>] == len(vocab_list)</div><div class=\"line\">  <span class=\"comment\"># index of top beam_size prob words</span></div><div class=\"line\">  expansion_inds = probs.argsort()[-beam_size:]</div><div class=\"line\">  <span class=\"keyword\">for</span> ind <span class=\"keyword\">in</span> expansion_inds:</div><div class=\"line\">    prob = probs[ind]</div><div class=\"line\">    extended_beam_log_prob = beam_log_prob + math.log(prob)</div><div class=\"line\">    <span class=\"comment\"># extension : the new word</span></div><div class=\"line\">    exp = &#123;<span class=\"string\">'prefix_beam_index'</span>: beam_index, <span class=\"string\">'extension'</span>: [ind],</div><div class=\"line\">           <span class=\"string\">'prob_extension'</span>: [prob], <span class=\"string\">'log_prob'</span>: extended_beam_log_prob&#125;</div><div class=\"line\">    expansions.append(exp)</div></pre></td></tr></table></figure>\n<p>beambeam_sizeexpansionsexpansionslen(beams) * beam_size</p>\n<figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">while</span> beams_complete &lt; len(beams):</div><div class=\"line\">  <span class=\"comment\"># expansions: append a new word to current beams</span></div><div class=\"line\">  expansions = []</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"comment\">#</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\"># Sort expansions in decreasing order of probabilitf.</span></div><div class=\"line\">  expansions.sort(key=<span class=\"keyword\">lambda</span> expansion: <span class=\"number\">-1</span> * expansion[<span class=\"string\">'log_prob'</span>])</div><div class=\"line\">  <span class=\"comment\"># only reserve beam_size number of node in each BFS layer</span></div><div class=\"line\">  expansions = expansions[:beam_size]</div><div class=\"line\">  new_beams = \\</div><div class=\"line\">      [beams[e[<span class=\"string\">'prefix_beam_index'</span>]] + e[<span class=\"string\">'extension'</span>] <span class=\"keyword\">for</span> e <span class=\"keyword\">in</span> expansions]</div><div class=\"line\">  new_beam_probs = \\</div><div class=\"line\">      [beam_probs[e[<span class=\"string\">'prefix_beam_index'</span>]] + e[<span class=\"string\">'prob_extension'</span>] <span class=\"keyword\">for</span> e <span class=\"keyword\">in</span> expansions]</div><div class=\"line\">  beam_log_probs = [e[<span class=\"string\">'log_prob'</span>] <span class=\"keyword\">for</span> e <span class=\"keyword\">in</span> expansions]</div><div class=\"line\">  beams_complete = <span class=\"number\">0</span></div><div class=\"line\">  <span class=\"keyword\">for</span> beam <span class=\"keyword\">in</span> new_beams:</div><div class=\"line\">    <span class=\"keyword\">if</span> beam[<span class=\"number\">-1</span>] == <span class=\"number\">0</span> <span class=\"keyword\">or</span> len(beam) &gt;= max_length: beams_complete += <span class=\"number\">1</span></div><div class=\"line\">  beams, beam_probs = new_beams, new_beam_probs</div></pre></td></tr></table></figure>\n<p>expansionsbeam_sizebean_sizebeamssizebeam_sizenew_beamsbeamsbeam</p>\n<h2 id=\"predict-single-word\"><a href=\"#predict-single-word\" class=\"headerlink\" title=\"predict_single_word\"></a>predict_single_word</h2><p>encode_video_framepadframes_fc7</p>\n<h2 id=\"caffemodel\"><a href=\"#caffemodel\" class=\"headerlink\" title=\"caffemodel\"></a>caffemodel</h2><p></p>\n<ul>\n<li>s2vt_captioner.py<strong>test</strong><strong></strong>outputinputch</li>\n<li><strong>train</strong>LSTM<strong></strong></li>\n<li>LSTM<strong></strong></li>\n<li><strong>traincaffemodeltest</strong></li>\n</ul>\n<p>trainsharetrick<code>add_param()-&gt;set_name()</code></p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//lstm_layer.cpp</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Add layer to transform all timesteps of x to the hidden state dimension.</span></div><div class=\"line\"><span class=\"comment\">//     W_xc_x = W_xc * x + b_c</span></div><div class=\"line\"><span class=\"comment\">//&#123;</span></div><div class=\"line\"><span class=\"comment\">//  LayerParameter* x_transform_param = net_param-&gt;add_layer();</span></div><div class=\"line\"><span class=\"comment\">//  x_transform_param-&gt;CopyFrom(biased_hidden_param);</span></div><div class=\"line\"><span class=\"comment\">//  x_transform_param-&gt;set_name(\"x_transform\");</span></div><div class=\"line\">  x_transform_param-&gt;add_param()-&gt;set_name(<span class=\"string\">\"W_xc\"</span>);</div><div class=\"line\">  x_transform_param-&gt;add_param()-&gt;set_name(<span class=\"string\">\"b_c\"</span>);</div><div class=\"line\"><span class=\"comment\">//  x_transform_param-&gt;add_bottom(\"x\");</span></div><div class=\"line\"><span class=\"comment\">//  x_transform_param-&gt;add_top(\"W_xc_x\");</span></div><div class=\"line\"><span class=\"comment\">//&#125;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Add layer to compute</span></div><div class=\"line\"><span class=\"comment\">//     W_hc_h_&#123;t-1&#125; := W_hc * h_conted_&#123;t-1&#125;</span></div><div class=\"line\"><span class=\"comment\">//&#123;</span></div><div class=\"line\"><span class=\"comment\">//  LayerParameter* w_param = net_param-&gt;add_layer();</span></div><div class=\"line\"><span class=\"comment\">//  w_param-&gt;CopyFrom(hidden_param);</span></div><div class=\"line\"><span class=\"comment\">//  w_param-&gt;set_name(\"transform_\" + ts);</span></div><div class=\"line\">  w_param-&gt;add_param()-&gt;set_name(<span class=\"string\">\"W_hc\"</span>);</div><div class=\"line\"><span class=\"comment\">//  w_param-&gt;add_bottom(\"h_conted_\" + tm1s);</span></div><div class=\"line\"><span class=\"comment\">//  w_param-&gt;add_top(\"W_hc_h_\" + tm1s);</span></div><div class=\"line\"><span class=\"comment\">//  w_param-&gt;mutable_inner_product_param()-&gt;set_axis(2);</span></div><div class=\"line\"><span class=\"comment\">//&#125;</span></div></pre></td></tr></table></figure>\n<p>caffe.protoparam</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">//caffe.proto</div><div class=\"line\"></div><div class=\"line\">message LayerParameter &#123;</div><div class=\"line\">  // Specifies training parameters (multipliers on global learning constants,</div><div class=\"line\">  // and the name and other settings used for weight sharing).</div><div class=\"line\">  repeated ParamSpec param = 6;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><strong></strong>.bak.bak1, .bak2, .bak3</li>\n<li>debug<strong></strong>PYTHONPATH</li>\n</ul>\n","excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>s2vt_captioner.pys2vt modelcaption</p>\n<ul>\n<li>decodeLSTM2xgtunit</li>\n<li>pythoncaffe</li>\n</ul>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><strong>main:</strong> vid chunks<ul>\n<li><strong>run_pred_iters:</strong> vid<ul>\n<li><strong>encode_video_frames:</strong> vidfeatsencode</li>\n<li><strong>run_pred_iter:</strong> decodevidcaptions<ul>\n<li><strong>predict_image_caption:</strong> captioncaption<ul>\n<li><strong>predict_image_caption_beam_search:</strong> beam searchcaption<ul>\n<li><strong>predict_single_word:</strong> </li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"main\"><a href=\"#main\" class=\"headerlink\" title=\"main\"></a>main</h2><p>chunkrun_pred_iters</p>\n<figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">fsg = fc7FrameSequenceGenerator(filenames, BUFFER_SIZE,</div><div class=\"line\">      vocab_file, max_words=MAX_WORDS, align=aligned, shuffle=<span class=\"keyword\">False</span>,</div><div class=\"line\">      pad=aligned, truncate=aligned)</div><div class=\"line\">video_gt_pairs = all_video_gt_pairs(fsg)</div></pre></td></tr></table></figure>\n<ul>\n<li><strong>video_gt_pairs:</strong> dict{vid: list[gt_sents]}<ul>\n<li>gtlist[gt_sents]</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">outputs = run_pred_iters(lstm_net, chunk, video_gt_pairs,</div><div class=\"line\">              fsg, strategies=STRATEGIES, display_vocab=vocab_list)</div></pre></td></tr></table></figure>\n<ul>\n<li><strong>outputs:</strong> dict{vid: output_batch}<ul>\n<li>vidcaptionoutput_batch</li>\n</ul>\n</li>\n<li><strong>output_batch:</strong> list[dict{caption, prob, gt, source}]<ul>\n<li><strong>caption:</strong> list[word1, word2, word3, ]</li>\n<li><strong>prob:</strong> list[prob_word1, prob_word2, prob_word3, ]</li>\n<li><strong>source:</strong>  e.g. sample / beam</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">text_out_types = to_text_output(outputs, vocab_list)</div></pre></td></tr></table></figure>\n<ul>\n<li><strong>text_output_types:</strong> dict{source_type: list[output string]}<ul>\n<li><strong>source_type:</strong>  e.g. sample / beam</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"run-pred-iters\"><a href=\"#run-pred-iters\" class=\"headerlink\" title=\"run_pred_iters\"></a>run_pred_iters</h2><p>chunkvidrun_pre_iter</p>\n<figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># get fc7 feature for the video</span></div><div class=\"line\">video_features = video_to_descriptor(video_id, fsg)</div></pre></td></tr></table></figure>\n<p>video_features: list[1 * FEAT_DIM]</p>\n<figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># run lstm on all the frames of video before predicting</span></div><div class=\"line\">encode_video_frames(pred_net, video_features)</div><div class=\"line\">outputs[video_id] = \\</div><div class=\"line\">    run_pred_iter(pred_net, pad_img_feature, display_vocab, strategies=strategies)</div></pre></td></tr></table></figure>\n<p>caption</p>\n<ol>\n<li>frame_feats encodeLSTM</li>\n<li>encodeLSTMdecodecaption</li>\n</ol>\n<h2 id=\"encode-video-frames\"><a href=\"#encode-video-frames\" class=\"headerlink\" title=\"encode_video_frames\"></a>encode_video_frames</h2><figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">net.forward(frames_fc7=image_features, cont_sentence=cont, input_sentence=data_en,</div><div class=\"line\">   stage_indicator=stage_ind)</div></pre></td></tr></table></figure>\n<p>frame_featsLSTMinput_sentence0</p>\n<h2 id=\"run-pred-iter\"><a href=\"#run-pred-iter\" class=\"headerlink\" title=\"run_pred_iter\"></a>run_pred_iter</h2><figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">captions, probs = predict_image_caption(net, pad_image_feature, vocab_list, strategy=strategy)</div></pre></td></tr></table></figure>\n<p>strategypredict_image_captioncaption</p>\n<h2 id=\"predict-image-caption\"><a href=\"#predict-image-caption\" class=\"headerlink\" title=\"predict_image_caption\"></a>predict_image_caption</h2><p>strategyimage_captioncaption</p>\n<h2 id=\"predict-image-caption-beam-search\"><a href=\"#predict-image-caption-beam-search\" class=\"headerlink\" title=\"predict_image_caption_beam_search\"></a>predict_image_caption_beam_search</h2><p>beam_searchbeam_searchBFSbeam_size</p>\n<figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\">beam_size = <span class=\"number\">1</span>\t<span class=\"comment\">#</span></div><div class=\"line\">beams = [[]]\t<span class=\"comment\">#beams: list[sentence], sentence: list[word]</span></div><div class=\"line\">beams_complete = <span class=\"number\">0</span>\t<span class=\"comment\">#beameos</span></div><div class=\"line\">beam_probs = [[]]\t<span class=\"comment\">#beams</span></div><div class=\"line\">beam_log_probs = [<span class=\"number\">0.</span>]\t<span class=\"comment\">#beam(i.e. )beamsbeam(log w1*w2*w3...)</span></div><div class=\"line\">current_input_word = <span class=\"number\">0</span>  <span class=\"comment\"># first input is EOS</span></div><div class=\"line\"><span class=\"keyword\">while</span> beams_complete &lt; len(beams):</div><div class=\"line\">  <span class=\"comment\"># expansions: append a new word to current beams</span></div><div class=\"line\">  expansions = []\t<span class=\"comment\">#</span></div><div class=\"line\"></div><div class=\"line\"> <span class=\"comment\">#</span></div><div class=\"line\">    <span class=\"comment\"># extension : the new word</span></div><div class=\"line\">    exp = &#123;<span class=\"string\">'prefix_beam_index'</span>: beam_index, <span class=\"string\">'extension'</span>: [ind],</div><div class=\"line\">           <span class=\"string\">'prob_extension'</span>: [prob], <span class=\"string\">'log_prob'</span>: extended_beam_log_prob&#125;</div><div class=\"line\">    expansions.append(exp)</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">#prefix_beam_index: beam</span></div><div class=\"line\">    <span class=\"comment\">#extension: index</span></div><div class=\"line\">    <span class=\"comment\">#prob_extension: </span></div><div class=\"line\">    <span class=\"comment\">#log_prob: beamlog w1*w2*w3...*w_extension</span></div></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">#       0       p_w1, p_w2...  w1, w2...</span></div><div class=\"line\"><span class=\"keyword\">for</span> beam_index, beam_log_prob, beam <span class=\"keyword\">in</span> \\</div><div class=\"line\">    zip(range(len(beams)), beam_log_probs, beams):</div><div class=\"line\">  <span class=\"keyword\">if</span> beam:</div><div class=\"line\">    previous_word = beam[<span class=\"number\">-1</span>]</div><div class=\"line\">    <span class=\"keyword\">if</span> len(beam) &gt;= max_length <span class=\"keyword\">or</span> previous_word == <span class=\"number\">0</span>:</div><div class=\"line\">      exp = &#123;<span class=\"string\">'prefix_beam_index'</span>: beam_index, <span class=\"string\">'extension'</span>: [],</div><div class=\"line\">             <span class=\"string\">'prob_extension'</span>: [], <span class=\"string\">'log_prob'</span>: beam_log_prob&#125;</div><div class=\"line\">      expansions.append(exp)</div><div class=\"line\">      <span class=\"comment\"># Don't expand this beam; it was already ended with an EOS,</span></div><div class=\"line\">      <span class=\"comment\"># or is the max length.</span></div><div class=\"line\">      <span class=\"keyword\">continue</span></div><div class=\"line\">  <span class=\"keyword\">else</span>:</div><div class=\"line\">    previous_word = <span class=\"number\">0</span>  <span class=\"comment\"># EOS is first word</span></div><div class=\"line\">  <span class=\"keyword\">if</span> beam_size == <span class=\"number\">1</span>:</div><div class=\"line\">    probs = predict_single_word(net, pad_img_feature, previous_word)</div><div class=\"line\">  <span class=\"keyword\">else</span>:</div><div class=\"line\">    probs = predict_single_word_from_all_previous(net, pad_img_feature, beam)</div><div class=\"line\">  <span class=\"keyword\">assert</span> len(probs.shape) == <span class=\"number\">1</span></div><div class=\"line\">  <span class=\"keyword\">assert</span> probs.shape[<span class=\"number\">0</span>] == len(vocab_list)</div><div class=\"line\">  <span class=\"comment\"># index of top beam_size prob words</span></div><div class=\"line\">  expansion_inds = probs.argsort()[-beam_size:]</div><div class=\"line\">  <span class=\"keyword\">for</span> ind <span class=\"keyword\">in</span> expansion_inds:</div><div class=\"line\">    prob = probs[ind]</div><div class=\"line\">    extended_beam_log_prob = beam_log_prob + math.log(prob)</div><div class=\"line\">    <span class=\"comment\"># extension : the new word</span></div><div class=\"line\">    exp = &#123;<span class=\"string\">'prefix_beam_index'</span>: beam_index, <span class=\"string\">'extension'</span>: [ind],</div><div class=\"line\">           <span class=\"string\">'prob_extension'</span>: [prob], <span class=\"string\">'log_prob'</span>: extended_beam_log_prob&#125;</div><div class=\"line\">    expansions.append(exp)</div></pre></td></tr></table></figure>\n<p>beambeam_sizeexpansionsexpansionslen(beams) * beam_size</p>\n<figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">while</span> beams_complete &lt; len(beams):</div><div class=\"line\">  <span class=\"comment\"># expansions: append a new word to current beams</span></div><div class=\"line\">  expansions = []</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"comment\">#</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\"># Sort expansions in decreasing order of probabilitf.</span></div><div class=\"line\">  expansions.sort(key=<span class=\"keyword\">lambda</span> expansion: <span class=\"number\">-1</span> * expansion[<span class=\"string\">'log_prob'</span>])</div><div class=\"line\">  <span class=\"comment\"># only reserve beam_size number of node in each BFS layer</span></div><div class=\"line\">  expansions = expansions[:beam_size]</div><div class=\"line\">  new_beams = \\</div><div class=\"line\">      [beams[e[<span class=\"string\">'prefix_beam_index'</span>]] + e[<span class=\"string\">'extension'</span>] <span class=\"keyword\">for</span> e <span class=\"keyword\">in</span> expansions]</div><div class=\"line\">  new_beam_probs = \\</div><div class=\"line\">      [beam_probs[e[<span class=\"string\">'prefix_beam_index'</span>]] + e[<span class=\"string\">'prob_extension'</span>] <span class=\"keyword\">for</span> e <span class=\"keyword\">in</span> expansions]</div><div class=\"line\">  beam_log_probs = [e[<span class=\"string\">'log_prob'</span>] <span class=\"keyword\">for</span> e <span class=\"keyword\">in</span> expansions]</div><div class=\"line\">  beams_complete = <span class=\"number\">0</span></div><div class=\"line\">  <span class=\"keyword\">for</span> beam <span class=\"keyword\">in</span> new_beams:</div><div class=\"line\">    <span class=\"keyword\">if</span> beam[<span class=\"number\">-1</span>] == <span class=\"number\">0</span> <span class=\"keyword\">or</span> len(beam) &gt;= max_length: beams_complete += <span class=\"number\">1</span></div><div class=\"line\">  beams, beam_probs = new_beams, new_beam_probs</div></pre></td></tr></table></figure>\n<p>expansionsbeam_sizebean_sizebeamssizebeam_sizenew_beamsbeamsbeam</p>\n<h2 id=\"predict-single-word\"><a href=\"#predict-single-word\" class=\"headerlink\" title=\"predict_single_word\"></a>predict_single_word</h2><p>encode_video_framepadframes_fc7</p>\n<h2 id=\"caffemodel\"><a href=\"#caffemodel\" class=\"headerlink\" title=\"caffemodel\"></a>caffemodel</h2><p></p>\n<ul>\n<li>s2vt_captioner.py<strong>test</strong><strong></strong>outputinputch</li>\n<li><strong>train</strong>LSTM<strong></strong></li>\n<li>LSTM<strong></strong></li>\n<li><strong>traincaffemodeltest</strong></li>\n</ul>\n<p>trainsharetrick<code>add_param()-&gt;set_name()</code></p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//lstm_layer.cpp</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Add layer to transform all timesteps of x to the hidden state dimension.</span></div><div class=\"line\"><span class=\"comment\">//     W_xc_x = W_xc * x + b_c</span></div><div class=\"line\"><span class=\"comment\">//&#123;</span></div><div class=\"line\"><span class=\"comment\">//  LayerParameter* x_transform_param = net_param-&gt;add_layer();</span></div><div class=\"line\"><span class=\"comment\">//  x_transform_param-&gt;CopyFrom(biased_hidden_param);</span></div><div class=\"line\"><span class=\"comment\">//  x_transform_param-&gt;set_name(\"x_transform\");</span></div><div class=\"line\">  x_transform_param-&gt;add_param()-&gt;set_name(<span class=\"string\">\"W_xc\"</span>);</div><div class=\"line\">  x_transform_param-&gt;add_param()-&gt;set_name(<span class=\"string\">\"b_c\"</span>);</div><div class=\"line\"><span class=\"comment\">//  x_transform_param-&gt;add_bottom(\"x\");</span></div><div class=\"line\"><span class=\"comment\">//  x_transform_param-&gt;add_top(\"W_xc_x\");</span></div><div class=\"line\"><span class=\"comment\">//&#125;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Add layer to compute</span></div><div class=\"line\"><span class=\"comment\">//     W_hc_h_&#123;t-1&#125; := W_hc * h_conted_&#123;t-1&#125;</span></div><div class=\"line\"><span class=\"comment\">//&#123;</span></div><div class=\"line\"><span class=\"comment\">//  LayerParameter* w_param = net_param-&gt;add_layer();</span></div><div class=\"line\"><span class=\"comment\">//  w_param-&gt;CopyFrom(hidden_param);</span></div><div class=\"line\"><span class=\"comment\">//  w_param-&gt;set_name(\"transform_\" + ts);</span></div><div class=\"line\">  w_param-&gt;add_param()-&gt;set_name(<span class=\"string\">\"W_hc\"</span>);</div><div class=\"line\"><span class=\"comment\">//  w_param-&gt;add_bottom(\"h_conted_\" + tm1s);</span></div><div class=\"line\"><span class=\"comment\">//  w_param-&gt;add_top(\"W_hc_h_\" + tm1s);</span></div><div class=\"line\"><span class=\"comment\">//  w_param-&gt;mutable_inner_product_param()-&gt;set_axis(2);</span></div><div class=\"line\"><span class=\"comment\">//&#125;</span></div></pre></td></tr></table></figure>\n<p>caffe.protoparam</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">//caffe.proto</div><div class=\"line\"></div><div class=\"line\">message LayerParameter &#123;</div><div class=\"line\">  // Specifies training parameters (multipliers on global learning constants,</div><div class=\"line\">  // and the name and other settings used for weight sharing).</div><div class=\"line\">  repeated ParamSpec param = 6;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><strong></strong>.bak.bak1, .bak2, .bak3</li>\n<li>debug<strong></strong>PYTHONPATH</li>\n</ul>\n"},{"title":"ImageNet Classification with Deep Convolutional Neural Networks","date":"2016-07-01T11:10:02.000Z","description":["AlexNet"],"_content":"\nCNN[(CNN)](http://www.moonshile.com/post/juan-ji-shen-jing-wang-luo-quan-mian-jie-xi)\n\n## The Architecture\n\n1. **ReLU Nonlinearity**\n\t- **** \n\t- **** Rectified Linear Units(ReLUs)$$f(x) = max(0, x)$$\n\t- **** $$f(x) = tanh(x) \\\\\\\\ f(x) = \\frac{1}{1 + e^{-x} }$$(saturating)[()](http://zhangliliang.com/2014/07/01/paper-note-alexnet-nips2012/)ReLU01\n\n\n2. **Training on Multiple GPUs**\n\t- **** \n\n3. **Local Response Normalization**\n\t- **** \n\t- **** $$b_i = \\frac{a_i}{ {(k+\\alpha\\sum{a_j^2})}^\\beta}$$$b_i$i$a_i$i\n\t- **** \n\n4. **Overlapping Pooling**\n\t- **** \n\t- **** poolingstride < filter sizepooling\n\t- **** \n\n## Reduce Overfitting\n\n1. **Data Augmentation**\n\t- **** \n\t- **1** 256256224224,$(256-224)^2*2$\n\t- **2** PCA[()](http://zhangliliang.com/2014/07/01/paper-note-alexnet-nips2012/)\n\t- **** \n\n2. **Dropout**\n\t- **** \n\t- **** disable\n\t- **** robustfeature\n\n## Qulitative Evaluations\n\n1. **** CNN5\n2. **** CNN e.g. $i_1$$f_1$$f_1$$i_k$\n","source":"_posts/imagenet.md","raw":"---\ntitle: ImageNet Classification with Deep Convolutional Neural Networks\ndate: 2016-07-01 19:10:02\ntags: \n  - AlexNet\ndescription:\n  - AlexNet\ncategories:\n  - \n---\n\nCNN[(CNN)](http://www.moonshile.com/post/juan-ji-shen-jing-wang-luo-quan-mian-jie-xi)\n\n## The Architecture\n\n1. **ReLU Nonlinearity**\n\t- **** \n\t- **** Rectified Linear Units(ReLUs)$$f(x) = max(0, x)$$\n\t- **** $$f(x) = tanh(x) \\\\\\\\ f(x) = \\frac{1}{1 + e^{-x} }$$(saturating)[()](http://zhangliliang.com/2014/07/01/paper-note-alexnet-nips2012/)ReLU01\n\n\n2. **Training on Multiple GPUs**\n\t- **** \n\n3. **Local Response Normalization**\n\t- **** \n\t- **** $$b_i = \\frac{a_i}{ {(k+\\alpha\\sum{a_j^2})}^\\beta}$$$b_i$i$a_i$i\n\t- **** \n\n4. **Overlapping Pooling**\n\t- **** \n\t- **** poolingstride < filter sizepooling\n\t- **** \n\n## Reduce Overfitting\n\n1. **Data Augmentation**\n\t- **** \n\t- **1** 256256224224,$(256-224)^2*2$\n\t- **2** PCA[()](http://zhangliliang.com/2014/07/01/paper-note-alexnet-nips2012/)\n\t- **** \n\n2. **Dropout**\n\t- **** \n\t- **** disable\n\t- **** robustfeature\n\n## Qulitative Evaluations\n\n1. **** CNN5\n2. **** CNN e.g. $i_1$$f_1$$f_1$$i_k$\n","slug":"imagenet","published":1,"updated":"2024-08-13T16:03:47.848Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clzvf191g000deqwobf58k69b","content":"<p>CNN<a href=\"http://www.moonshile.com/post/juan-ji-shen-jing-wang-luo-quan-mian-jie-xi\" target=\"_blank\" rel=\"external\">(CNN)</a></p>\n<h2 id=\"The-Architecture\"><a href=\"#The-Architecture\" class=\"headerlink\" title=\"The Architecture\"></a>The Architecture</h2><ol>\n<li><strong>ReLU Nonlinearity</strong><ul>\n<li><strong></strong> </li>\n<li><strong></strong> Rectified Linear Units(ReLUs)$$f(x) = max(0, x)$$</li>\n<li><strong></strong> $$f(x) = tanh(x) \\\\\\ f(x) = \\frac{1}{1 + e^{-x} }$$(saturating)<a href=\"http://zhangliliang.com/2014/07/01/paper-note-alexnet-nips2012/\" target=\"_blank\" rel=\"external\">()</a>ReLU01</li>\n</ul>\n</li>\n</ol>\n<ol>\n<li><p><strong>Training on Multiple GPUs</strong></p>\n<ul>\n<li><strong></strong> </li>\n</ul>\n</li>\n<li><p><strong>Local Response Normalization</strong></p>\n<ul>\n<li><strong></strong> </li>\n<li><strong></strong> $$b_i = \\frac{a_i}{ {(k+\\alpha\\sum{a_j^2})}^\\beta}$$$b_i$i$a_i$i</li>\n<li><strong></strong> </li>\n</ul>\n</li>\n<li><p><strong>Overlapping Pooling</strong></p>\n<ul>\n<li><strong></strong> </li>\n<li><strong></strong> poolingstride &lt; filter sizepooling</li>\n<li><strong></strong> </li>\n</ul>\n</li>\n</ol>\n<h2 id=\"Reduce-Overfitting\"><a href=\"#Reduce-Overfitting\" class=\"headerlink\" title=\"Reduce Overfitting\"></a>Reduce Overfitting</h2><ol>\n<li><p><strong>Data Augmentation</strong></p>\n<ul>\n<li><strong></strong> </li>\n<li><strong>1</strong> 256256224224,$(256-224)^2*2$</li>\n<li><strong>2</strong> PCA<a href=\"http://zhangliliang.com/2014/07/01/paper-note-alexnet-nips2012/\" target=\"_blank\" rel=\"external\">()</a></li>\n<li><strong></strong> </li>\n</ul>\n</li>\n<li><p><strong>Dropout</strong></p>\n<ul>\n<li><strong></strong> </li>\n<li><strong></strong> disable</li>\n<li><strong></strong> robustfeature</li>\n</ul>\n</li>\n</ol>\n<h2 id=\"Qulitative-Evaluations\"><a href=\"#Qulitative-Evaluations\" class=\"headerlink\" title=\"Qulitative Evaluations\"></a>Qulitative Evaluations</h2><ol>\n<li><strong></strong> CNN5</li>\n<li><strong></strong> CNN e.g. $i_1$$f_1$$f_1$$i_k$</li>\n</ol>\n","excerpt":"","more":"<p>CNN<a href=\"http://www.moonshile.com/post/juan-ji-shen-jing-wang-luo-quan-mian-jie-xi\">(CNN)</a></p>\n<h2 id=\"The-Architecture\"><a href=\"#The-Architecture\" class=\"headerlink\" title=\"The Architecture\"></a>The Architecture</h2><ol>\n<li><strong>ReLU Nonlinearity</strong><ul>\n<li><strong></strong> </li>\n<li><strong></strong> Rectified Linear Units(ReLUs)$$f(x) = max(0, x)$$</li>\n<li><strong></strong> $$f(x) = tanh(x) \\\\\\ f(x) = \\frac{1}{1 + e^{-x} }$$(saturating)<a href=\"http://zhangliliang.com/2014/07/01/paper-note-alexnet-nips2012/\">()</a>ReLU01</li>\n</ul>\n</li>\n</ol>\n<ol>\n<li><p><strong>Training on Multiple GPUs</strong></p>\n<ul>\n<li><strong></strong> </li>\n</ul>\n</li>\n<li><p><strong>Local Response Normalization</strong></p>\n<ul>\n<li><strong></strong> </li>\n<li><strong></strong> $$b_i = \\frac{a_i}{ {(k+\\alpha\\sum{a_j^2})}^\\beta}$$$b_i$i$a_i$i</li>\n<li><strong></strong> </li>\n</ul>\n</li>\n<li><p><strong>Overlapping Pooling</strong></p>\n<ul>\n<li><strong></strong> </li>\n<li><strong></strong> poolingstride &lt; filter sizepooling</li>\n<li><strong></strong> </li>\n</ul>\n</li>\n</ol>\n<h2 id=\"Reduce-Overfitting\"><a href=\"#Reduce-Overfitting\" class=\"headerlink\" title=\"Reduce Overfitting\"></a>Reduce Overfitting</h2><ol>\n<li><p><strong>Data Augmentation</strong></p>\n<ul>\n<li><strong></strong> </li>\n<li><strong>1</strong> 256256224224,$(256-224)^2*2$</li>\n<li><strong>2</strong> PCA<a href=\"http://zhangliliang.com/2014/07/01/paper-note-alexnet-nips2012/\">()</a></li>\n<li><strong></strong> </li>\n</ul>\n</li>\n<li><p><strong>Dropout</strong></p>\n<ul>\n<li><strong></strong> </li>\n<li><strong></strong> disable</li>\n<li><strong></strong> robustfeature</li>\n</ul>\n</li>\n</ol>\n<h2 id=\"Qulitative-Evaluations\"><a href=\"#Qulitative-Evaluations\" class=\"headerlink\" title=\"Qulitative Evaluations\"></a>Qulitative Evaluations</h2><ol>\n<li><strong></strong> CNN5</li>\n<li><strong></strong> CNN e.g. $i_1$$f_1$$f_1$$i_k$</li>\n</ol>\n"},{"title":"","date":"2016-08-29T14:19:14.000Z","description":[""],"_content":"\n[](https://book.douban.com/subject/26275861/)8.6\n\n- \n- \n- \n- \n- \n- \n\n\n![](http://o9xzp7efk.bkt.clouddn.com/%E6%B2%9F%E9%80%9A%E7%9A%84%E8%89%BA%E6%9C%AF.png)\n\n","source":"_posts/mindmap-goutongdeyishu.md","raw":"---\ntitle: \ndate: 2016-08-29 22:19:14\ntags:\n\t- \ndescription:\n\t- \ncategories:\n\t- \n---\n\n[](https://book.douban.com/subject/26275861/)8.6\n\n- \n- \n- \n- \n- \n- \n\n\n![](http://o9xzp7efk.bkt.clouddn.com/%E6%B2%9F%E9%80%9A%E7%9A%84%E8%89%BA%E6%9C%AF.png)\n\n","slug":"mindmap-goutongdeyishu","published":1,"updated":"2024-08-13T16:03:47.848Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clzvf191n000geqwo1a4ji40i","content":"<p><a href=\"https://book.douban.com/subject/26275861/\" target=\"_blank\" rel=\"external\"></a>8.6</p>\n<ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<p><img src=\"http://o9xzp7efk.bkt.clouddn.com/%E6%B2%9F%E9%80%9A%E7%9A%84%E8%89%BA%E6%9C%AF.png\" alt=\"\"></p>\n","excerpt":"","more":"<p><a href=\"https://book.douban.com/subject/26275861/\"></a>8.6</p>\n<ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<p><img src=\"http://o9xzp7efk.bkt.clouddn.com/%E6%B2%9F%E9%80%9A%E7%9A%84%E8%89%BA%E6%9C%AF.png\" alt=\"\"></p>\n"},{"title":"","date":"2016-07-07T11:36:25.000Z","description":[""],"_content":"\n7[](https://book.douban.com/subject/26761696/)8.1\n\n![](http://o9xzp7efk.bkt.clouddn.com/%E7%B2%BE%E8%BF%9B.svg)\n","source":"_posts/mindmap-jingjin.md","raw":"---\ntitle: \ndate: 2016-07-07 19:36:25\ntags:\n\t- \ndescription:\n\t- \ncategories:\n\t- \n---\n\n7[](https://book.douban.com/subject/26761696/)8.1\n\n![](http://o9xzp7efk.bkt.clouddn.com/%E7%B2%BE%E8%BF%9B.svg)\n","slug":"mindmap-jingjin","published":1,"updated":"2024-08-13T16:03:47.848Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clzvf191p000jeqwozxlcc8ad","content":"<p>7<a href=\"https://book.douban.com/subject/26761696/\" target=\"_blank\" rel=\"external\"></a>8.1</p>\n<p><img src=\"http://o9xzp7efk.bkt.clouddn.com/%E7%B2%BE%E8%BF%9B.svg\" alt=\"\"></p>\n","excerpt":"","more":"<p>7<a href=\"https://book.douban.com/subject/26761696/\"></a>8.1</p>\n<p><img src=\"http://o9xzp7efk.bkt.clouddn.com/%E7%B2%BE%E8%BF%9B.svg\" alt=\"\"></p>\n"},{"title":"","date":"2016-09-02T12:34:46.000Z","description":[""],"_content":"\n[](https://book.douban.com/subject/26390842/)8.7\n\n\n\n![](http://o9xzp7efk.bkt.clouddn.com/%E5%93%B2%E5%AD%A6%E5%AE%B6%E4%BB%AC%E9%83%BD%E5%B9%B2%E4%BA%86%E4%BA%9B%E4%BB%80%E4%B9%88.png)\n","source":"_posts/mindmap-zhexuejiamendouganlexieshenme.md","raw":"---\ntitle: \ndate: 2016-09-02 20:34:46\ntags:\n\t- \ndescription:\n\t- \ncategories:\n\t- \n---\n\n[](https://book.douban.com/subject/26390842/)8.7\n\n\n\n![](http://o9xzp7efk.bkt.clouddn.com/%E5%93%B2%E5%AD%A6%E5%AE%B6%E4%BB%AC%E9%83%BD%E5%B9%B2%E4%BA%86%E4%BA%9B%E4%BB%80%E4%B9%88.png)\n","slug":"mindmap-zhexuejiamendouganlexieshenme","published":1,"updated":"2024-08-13T16:03:47.848Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clzvf191r000neqwodwng1z1c","content":"<p><a href=\"https://book.douban.com/subject/26390842/\" target=\"_blank\" rel=\"external\"></a>8.7</p>\n<p></p>\n<p><img src=\"http://o9xzp7efk.bkt.clouddn.com/%E5%93%B2%E5%AD%A6%E5%AE%B6%E4%BB%AC%E9%83%BD%E5%B9%B2%E4%BA%86%E4%BA%9B%E4%BB%80%E4%B9%88.png\" alt=\"\"></p>\n","excerpt":"","more":"<p><a href=\"https://book.douban.com/subject/26390842/\"></a>8.7</p>\n<p></p>\n<p><img src=\"http://o9xzp7efk.bkt.clouddn.com/%E5%93%B2%E5%AD%A6%E5%AE%B6%E4%BB%AC%E9%83%BD%E5%B9%B2%E4%BA%86%E4%BA%9B%E4%BB%80%E4%B9%88.png\" alt=\"\"></p>\n"},{"title":"A Tour of C++","date":"2024-08-11T13:18:04.000Z","description":["C++A Tour of C++"],"_content":"\n# \n\nC++Bjarne StroustrupC++C++\n\n1-77\n- 1-3\n- 45//\n- 67Concept\n\n8-15STL16\n\n[]\n\n---\n\n# \n\n## \n\n- [] *{} initialization*`int x{1.2}`\n- *constexpr function*constexpr\n    - constexprconst\n- referenceinitassignref\n- `nullptr`\n    - `int 0``func(class *ptr)``func(int x)`\n    - `(void *) 0``class *ptr = (void *) 0`C++`A *p = static_cast<A*>((void *)0)`\n- [] `if``if (n = v.size(); n > 0)`\n- [] `auto`\n\n## \n\n- `struct``public``class``private`\n- `enum class``enum`prefix`enum``int`\n- `union`: Entry`int / string / double`Entry`union``variant`\n\n## \n\n- C++20`Module`\n    - \n    - `#include h1 #include h2``#include h2 #include h1`\n- [] *structured binding*: `for (const auto [key,value] : map)`\n\n---\n\n# \n\n## \n\n- [] *RAII (Resource Acquisition Is Initialization)*scopedestructor\n- \n    - *Concrete Type*`Vector`\n    - *Abstract Type*`Container``=0`\n- \n    - `virtual`\n    - `= 0`\n    - `override`typo\n- \n    - \n    - \n        - \n        - \n- `dynamic_cast`\n\n## \n\n- \n    - (*constructor*)\n        - from different type: `default` / `ordinary`\n        - from same type:\n            - non-temporary: `copy`\n            - temporary: `move`\n    - (*destructor*)\n    - (*assignment*)\n        - from same type:\n            - non-temporary: `copy`\n            - temporary: `move`\n- \n    - `= default``{}`\n    - `= delete`\n    - `explicit`intclassclass(int)\n- [] *default member initializer*: `int x = 0`\n- `A a = A(1)`\n- `A a()`AA\n    - `B b`\n    - `B b{}`\n    - `B b{} = B()`\n- [] `move`\n    - motivation**copysrccopycopy**\n    - **src**copycopydstsrc\n    - src`&&`****\n        - \n        - \n    - src`move`\n    - `move``copy`copy\n    - *move constructor**move assignment*\n    - misc\n        - `std::move`cast\n        - \n            - `std::move`\n            - \n            - `std::move`\n                - \n- [] *literal operator*class\n    - `\"Surprise!\"s` is a `std::string`\n    - `\"Surprise!\"` is a `const char[10]`\n\n---\n\n# \n\n## \n\n- [] \n    - (program generation)(code generation)\n    - if xxx type call xxx function\n    - const\n- \n    - `typename/class`: for all T\n    - `Element`(e.g., `Sequence`)for all T such that*Concept*\n    - `using value_type = T``Class::value_type`T\n    - *type deduction*`vector v{1,2,3}``<type>`\n- [] \n    - virtual function\n        - `type * virtual func num * subclass depth`\n        - `type`\n        - `virtual function num`\n    - context\n    - lambda`[context](parameter){body}`\n        - context*capture list*lambdalocal variable`&``=`\n        - nicelamda\n- built-in\n    - variable: `template <class T> constexpr T viscosity = 0.4`\n    - alias: `template<typename C> using Value_type = typename C::value_type`\n    - compile time if: `if constexpr(xxx)`\n```c++\ntemplate<typename T>\nvoid update(T& target)\n{\n    // ...\n    if constexpr(is_pod<T>::value)\n        simple_and_fast(target); // for \"plain old data\"\n    else\n        slow_and_safe(target);\n    // ...\n}\n```\n\n## \n\n- *Concept*\n    - motivation`template<typename T>``T``T`\n    - `requires`concept`requires``requires`*requirements-clause*`requires`*requiresexpression**requiresexpression*STL\n```c++\ntemplate<Forward_iterator Iter, int n>\n    requires requires(Iter p, int i) { p[i]; p+i; } // Iter has subscripting and addition\nvoid advance(Iter p, int n) // move p n elements forward\n{\n    p+=n; // a random-access iterator has +=\n}\n```\n- concrete\n- `<first, left>`C++17fold expression\n- `std::forward`\n- concept\n    - \n    - \n    - *duck typing*operand\n- *module*\n    - .h.cpp\n    - module.cpp","source":"_posts/note-a-tour-of-cpp-1.md","raw":"---\ntitle: A Tour of C++\ndate: 2024-08-11 21:18:04\ntags:\n\t- A Tour of C++\ncategories:\n\t- \ndescription:\n\t- C++A Tour of C++\n---\n\n# \n\nC++Bjarne StroustrupC++C++\n\n1-77\n- 1-3\n- 45//\n- 67Concept\n\n8-15STL16\n\n[]\n\n---\n\n# \n\n## \n\n- [] *{} initialization*`int x{1.2}`\n- *constexpr function*constexpr\n    - constexprconst\n- referenceinitassignref\n- `nullptr`\n    - `int 0``func(class *ptr)``func(int x)`\n    - `(void *) 0``class *ptr = (void *) 0`C++`A *p = static_cast<A*>((void *)0)`\n- [] `if``if (n = v.size(); n > 0)`\n- [] `auto`\n\n## \n\n- `struct``public``class``private`\n- `enum class``enum`prefix`enum``int`\n- `union`: Entry`int / string / double`Entry`union``variant`\n\n## \n\n- C++20`Module`\n    - \n    - `#include h1 #include h2``#include h2 #include h1`\n- [] *structured binding*: `for (const auto [key,value] : map)`\n\n---\n\n# \n\n## \n\n- [] *RAII (Resource Acquisition Is Initialization)*scopedestructor\n- \n    - *Concrete Type*`Vector`\n    - *Abstract Type*`Container``=0`\n- \n    - `virtual`\n    - `= 0`\n    - `override`typo\n- \n    - \n    - \n        - \n        - \n- `dynamic_cast`\n\n## \n\n- \n    - (*constructor*)\n        - from different type: `default` / `ordinary`\n        - from same type:\n            - non-temporary: `copy`\n            - temporary: `move`\n    - (*destructor*)\n    - (*assignment*)\n        - from same type:\n            - non-temporary: `copy`\n            - temporary: `move`\n- \n    - `= default``{}`\n    - `= delete`\n    - `explicit`intclassclass(int)\n- [] *default member initializer*: `int x = 0`\n- `A a = A(1)`\n- `A a()`AA\n    - `B b`\n    - `B b{}`\n    - `B b{} = B()`\n- [] `move`\n    - motivation**copysrccopycopy**\n    - **src**copycopydstsrc\n    - src`&&`****\n        - \n        - \n    - src`move`\n    - `move``copy`copy\n    - *move constructor**move assignment*\n    - misc\n        - `std::move`cast\n        - \n            - `std::move`\n            - \n            - `std::move`\n                - \n- [] *literal operator*class\n    - `\"Surprise!\"s` is a `std::string`\n    - `\"Surprise!\"` is a `const char[10]`\n\n---\n\n# \n\n## \n\n- [] \n    - (program generation)(code generation)\n    - if xxx type call xxx function\n    - const\n- \n    - `typename/class`: for all T\n    - `Element`(e.g., `Sequence`)for all T such that*Concept*\n    - `using value_type = T``Class::value_type`T\n    - *type deduction*`vector v{1,2,3}``<type>`\n- [] \n    - virtual function\n        - `type * virtual func num * subclass depth`\n        - `type`\n        - `virtual function num`\n    - context\n    - lambda`[context](parameter){body}`\n        - context*capture list*lambdalocal variable`&``=`\n        - nicelamda\n- built-in\n    - variable: `template <class T> constexpr T viscosity = 0.4`\n    - alias: `template<typename C> using Value_type = typename C::value_type`\n    - compile time if: `if constexpr(xxx)`\n```c++\ntemplate<typename T>\nvoid update(T& target)\n{\n    // ...\n    if constexpr(is_pod<T>::value)\n        simple_and_fast(target); // for \"plain old data\"\n    else\n        slow_and_safe(target);\n    // ...\n}\n```\n\n## \n\n- *Concept*\n    - motivation`template<typename T>``T``T`\n    - `requires`concept`requires``requires`*requirements-clause*`requires`*requiresexpression**requiresexpression*STL\n```c++\ntemplate<Forward_iterator Iter, int n>\n    requires requires(Iter p, int i) { p[i]; p+i; } // Iter has subscripting and addition\nvoid advance(Iter p, int n) // move p n elements forward\n{\n    p+=n; // a random-access iterator has +=\n}\n```\n- concrete\n- `<first, left>`C++17fold expression\n- `std::forward`\n- concept\n    - \n    - \n    - *duck typing*operand\n- *module*\n    - .h.cpp\n    - module.cpp","slug":"note-a-tour-of-cpp-1","published":1,"updated":"2024-08-13T16:03:47.848Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clzvf191t000peqwoo01uu11x","content":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p>C++Bjarne StroustrupC++C++</p>\n<p>1-77</p>\n<ul>\n<li>1-3</li>\n<li>45//</li>\n<li>67Concept</li>\n</ul>\n<p>8-15STL16</p>\n<p>[]</p>\n<hr>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li>[] <em>{} initialization</em><code>int x{1.2}</code></li>\n<li><em>constexpr function</em>constexpr<ul>\n<li>constexprconst</li>\n</ul>\n</li>\n<li>referenceinitassignref</li>\n<li><code>nullptr</code><ul>\n<li><code>int 0</code><code>func(class *ptr)</code><code>func(int x)</code></li>\n<li><code>(void *) 0</code><code>class *ptr = (void *) 0</code>C++<code>A *p = static_cast&lt;A*&gt;((void *)0)</code></li>\n</ul>\n</li>\n<li>[] <code>if</code><code>if (n = v.size(); n &gt; 0)</code></li>\n<li>[] <code>auto</code></li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><code>struct</code><code>public</code><code>class</code><code>private</code></li>\n<li><code>enum class</code><code>enum</code>prefix<code>enum</code><code>int</code></li>\n<li><code>union</code>: Entry<code>int / string / double</code>Entry<code>union</code><code>variant</code></li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li>C++20<code>Module</code><ul>\n<li></li>\n<li><code>#include h1 #include h2</code><code>#include h2 #include h1</code></li>\n</ul>\n</li>\n<li>[] <em>structured binding</em>: <code>for (const auto [key,value] : map)</code></li>\n</ul>\n<hr>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li>[] <em>RAII (Resource Acquisition Is Initialization)</em>scopedestructor</li>\n<li><ul>\n<li><em>Concrete Type</em><code>Vector</code></li>\n<li><em>Abstract Type</em><code>Container</code><code>=0</code></li>\n</ul>\n</li>\n<li><ul>\n<li><code>virtual</code></li>\n<li><code>= 0</code></li>\n<li><code>override</code>typo</li>\n</ul>\n</li>\n<li><ul>\n<li></li>\n<li><ul>\n<li></li>\n<li></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><code>dynamic_cast</code></li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><ul>\n<li>(<em>constructor</em>)<ul>\n<li>from different type: <code>default</code> / <code>ordinary</code></li>\n<li>from same type:<ul>\n<li>non-temporary: <code>copy</code></li>\n<li>temporary: <code>move</code></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>(<em>destructor</em>)</li>\n<li>(<em>assignment</em>)<ul>\n<li>from same type:<ul>\n<li>non-temporary: <code>copy</code></li>\n<li>temporary: <code>move</code></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><ul>\n<li><code>= default</code><code>{}</code></li>\n<li><code>= delete</code></li>\n<li><code>explicit</code>intclassclass(int)</li>\n</ul>\n</li>\n<li>[] <em>default member initializer</em>: <code>int x = 0</code></li>\n<li><code>A a = A(1)</code></li>\n<li><code>A a()</code>AA<ul>\n<li><code>B b</code></li>\n<li><code>B b{}</code></li>\n<li><code>B b{} = B()</code></li>\n</ul>\n</li>\n<li>[] <code>move</code><ul>\n<li>motivation<strong>copysrccopycopy</strong></li>\n<li><strong>src</strong>copycopydstsrc</li>\n<li>src<code>&amp;&amp;</code><strong></strong><ul>\n<li></li>\n<li></li>\n</ul>\n</li>\n<li>src<code>move</code></li>\n<li><code>move</code><code>copy</code>copy</li>\n<li><em>move constructor</em><em>move assignment</em></li>\n<li>misc<ul>\n<li><code>std::move</code>cast</li>\n<li><ul>\n<li><code>std::move</code></li>\n<li></li>\n<li><code>std::move</code><ul>\n<li></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>[] <em>literal operator</em>class<ul>\n<li><code>&quot;Surprise!&quot;s</code> is a <code>std::string</code></li>\n<li><code>&quot;Surprise!&quot;</code> is a <code>const char[10]</code></li>\n</ul>\n</li>\n</ul>\n<hr>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li>[] <ul>\n<li>(program generation)(code generation)</li>\n<li>if xxx type call xxx function</li>\n<li>const</li>\n</ul>\n</li>\n<li><ul>\n<li><code>typename/class</code>: for all T</li>\n<li><code>Element</code>(e.g., <code>Sequence</code>)for all T such that<em>Concept</em></li>\n<li><code>using value_type = T</code><code>Class::value_type</code>T</li>\n<li><em>type deduction</em><code>vector v{1,2,3}</code><code>&lt;type&gt;</code></li>\n</ul>\n</li>\n<li>[] <ul>\n<li>virtual function<ul>\n<li><code>type * virtual func num * subclass depth</code></li>\n<li><code>type</code></li>\n<li><code>virtual function num</code></li>\n</ul>\n</li>\n<li>context</li>\n<li>lambda<code>[context](parameter){body}</code><ul>\n<li>context<em>capture list</em>lambdalocal variable<code>&amp;</code><code>=</code></li>\n<li>nicelamda</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>built-in<ul>\n<li>variable: <code>template &lt;class T&gt; constexpr T viscosity = 0.4</code></li>\n<li>alias: <code>template&lt;typename C&gt; using Value_type = typename C::value_type</code></li>\n<li>compile time if: <code>if constexpr(xxx)</code><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">template</span>&lt;<span class=\"keyword\">typename</span> T&gt;</div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">update</span><span class=\"params\">(T&amp; target)</span></span></div><div class=\"line\">&#123;</div><div class=\"line\">    <span class=\"comment\">// ...</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">if</span> <span class=\"title\">constexpr</span><span class=\"params\">(is_pod&lt;T&gt;::value)</span></span></div><div class=\"line\">        <span class=\"title\">simple_and_fast</span><span class=\"params\">(target)</span>; <span class=\"comment\">// for \"plain old data\"</span></div><div class=\"line\">    <span class=\"keyword\">else</span></div><div class=\"line\">        slow_and_safe(target);</div><div class=\"line\">    <span class=\"comment\">// ...</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><p><em>Concept</em></p>\n<ul>\n<li>motivation<code>template&lt;typename T&gt;</code><code>T</code><code>T</code></li>\n<li><code>requires</code>concept<code>requires</code><code>requires</code><em>requirements-clause</em><code>requires</code><em>requiresexpression</em><em>requiresexpression</em>STL<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">template</span>&lt;Forward_iterator Iter, <span class=\"keyword\">int</span> n&gt;</div><div class=\"line\">    <span class=\"function\">requires <span class=\"title\">requires</span><span class=\"params\">(Iter p, <span class=\"keyword\">int</span> i)</span> </span>&#123; p[i]; p+i; &#125; <span class=\"comment\">// Iter has subscripting and addition</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">advance</span><span class=\"params\">(Iter p, <span class=\"keyword\">int</span> n)</span> <span class=\"comment\">// move p n elements forward</span></span></div><div class=\"line\">&#123;</div><div class=\"line\">    p+=n; <span class=\"comment\">// a random-access iterator has +=</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n<li><p>concrete</p>\n</li>\n<li><code>&lt;first, left&gt;</code>C++17fold expression</li>\n<li><code>std::forward</code></li>\n<li>concept<ul>\n<li></li>\n<li></li>\n<li><em>duck typing</em>operand</li>\n</ul>\n</li>\n<li><em>module</em><ul>\n<li>.h.cpp</li>\n<li>module.cpp</li>\n</ul>\n</li>\n</ul>\n","excerpt":"","more":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p>C++Bjarne StroustrupC++C++</p>\n<p>1-77</p>\n<ul>\n<li>1-3</li>\n<li>45//</li>\n<li>67Concept</li>\n</ul>\n<p>8-15STL16</p>\n<p>[]</p>\n<hr>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li>[] <em>{} initialization</em><code>int x{1.2}</code></li>\n<li><em>constexpr function</em>constexpr<ul>\n<li>constexprconst</li>\n</ul>\n</li>\n<li>referenceinitassignref</li>\n<li><code>nullptr</code><ul>\n<li><code>int 0</code><code>func(class *ptr)</code><code>func(int x)</code></li>\n<li><code>(void *) 0</code><code>class *ptr = (void *) 0</code>C++<code>A *p = static_cast&lt;A*&gt;((void *)0)</code></li>\n</ul>\n</li>\n<li>[] <code>if</code><code>if (n = v.size(); n &gt; 0)</code></li>\n<li>[] <code>auto</code></li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><code>struct</code><code>public</code><code>class</code><code>private</code></li>\n<li><code>enum class</code><code>enum</code>prefix<code>enum</code><code>int</code></li>\n<li><code>union</code>: Entry<code>int / string / double</code>Entry<code>union</code><code>variant</code></li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li>C++20<code>Module</code><ul>\n<li></li>\n<li><code>#include h1 #include h2</code><code>#include h2 #include h1</code></li>\n</ul>\n</li>\n<li>[] <em>structured binding</em>: <code>for (const auto [key,value] : map)</code></li>\n</ul>\n<hr>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li>[] <em>RAII (Resource Acquisition Is Initialization)</em>scopedestructor</li>\n<li><ul>\n<li><em>Concrete Type</em><code>Vector</code></li>\n<li><em>Abstract Type</em><code>Container</code><code>=0</code></li>\n</ul>\n</li>\n<li><ul>\n<li><code>virtual</code></li>\n<li><code>= 0</code></li>\n<li><code>override</code>typo</li>\n</ul>\n</li>\n<li><ul>\n<li></li>\n<li><ul>\n<li></li>\n<li></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><code>dynamic_cast</code></li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><ul>\n<li>(<em>constructor</em>)<ul>\n<li>from different type: <code>default</code> / <code>ordinary</code></li>\n<li>from same type:<ul>\n<li>non-temporary: <code>copy</code></li>\n<li>temporary: <code>move</code></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>(<em>destructor</em>)</li>\n<li>(<em>assignment</em>)<ul>\n<li>from same type:<ul>\n<li>non-temporary: <code>copy</code></li>\n<li>temporary: <code>move</code></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><ul>\n<li><code>= default</code><code>{}</code></li>\n<li><code>= delete</code></li>\n<li><code>explicit</code>intclassclass(int)</li>\n</ul>\n</li>\n<li>[] <em>default member initializer</em>: <code>int x = 0</code></li>\n<li><code>A a = A(1)</code></li>\n<li><code>A a()</code>AA<ul>\n<li><code>B b</code></li>\n<li><code>B b{}</code></li>\n<li><code>B b{} = B()</code></li>\n</ul>\n</li>\n<li>[] <code>move</code><ul>\n<li>motivation<strong>copysrccopycopy</strong></li>\n<li><strong>src</strong>copycopydstsrc</li>\n<li>src<code>&amp;&amp;</code><strong></strong><ul>\n<li></li>\n<li></li>\n</ul>\n</li>\n<li>src<code>move</code></li>\n<li><code>move</code><code>copy</code>copy</li>\n<li><em>move constructor</em><em>move assignment</em></li>\n<li>misc<ul>\n<li><code>std::move</code>cast</li>\n<li><ul>\n<li><code>std::move</code></li>\n<li></li>\n<li><code>std::move</code><ul>\n<li></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>[] <em>literal operator</em>class<ul>\n<li><code>&quot;Surprise!&quot;s</code> is a <code>std::string</code></li>\n<li><code>&quot;Surprise!&quot;</code> is a <code>const char[10]</code></li>\n</ul>\n</li>\n</ul>\n<hr>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li>[] <ul>\n<li>(program generation)(code generation)</li>\n<li>if xxx type call xxx function</li>\n<li>const</li>\n</ul>\n</li>\n<li><ul>\n<li><code>typename/class</code>: for all T</li>\n<li><code>Element</code>(e.g., <code>Sequence</code>)for all T such that<em>Concept</em></li>\n<li><code>using value_type = T</code><code>Class::value_type</code>T</li>\n<li><em>type deduction</em><code>vector v{1,2,3}</code><code>&lt;type&gt;</code></li>\n</ul>\n</li>\n<li>[] <ul>\n<li>virtual function<ul>\n<li><code>type * virtual func num * subclass depth</code></li>\n<li><code>type</code></li>\n<li><code>virtual function num</code></li>\n</ul>\n</li>\n<li>context</li>\n<li>lambda<code>[context](parameter){body}</code><ul>\n<li>context<em>capture list</em>lambdalocal variable<code>&amp;</code><code>=</code></li>\n<li>nicelamda</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>built-in<ul>\n<li>variable: <code>template &lt;class T&gt; constexpr T viscosity = 0.4</code></li>\n<li>alias: <code>template&lt;typename C&gt; using Value_type = typename C::value_type</code></li>\n<li>compile time if: <code>if constexpr(xxx)</code><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">template</span>&lt;<span class=\"keyword\">typename</span> T&gt;</div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">update</span><span class=\"params\">(T&amp; target)</span></div><div class=\"line\"></span>&#123;</div><div class=\"line\">    <span class=\"comment\">// ...</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">if</span> <span class=\"title\">constexpr</span><span class=\"params\">(is_pod&lt;T&gt;::value)</span></div><div class=\"line\">        <span class=\"title\">simple_and_fast</span><span class=\"params\">(target)</span></span>; <span class=\"comment\">// for \"plain old data\"</span></div><div class=\"line\">    <span class=\"keyword\">else</span></div><div class=\"line\">        slow_and_safe(target);</div><div class=\"line\">    <span class=\"comment\">// ...</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><p><em>Concept</em></p>\n<ul>\n<li>motivation<code>template&lt;typename T&gt;</code><code>T</code><code>T</code></li>\n<li><code>requires</code>concept<code>requires</code><code>requires</code><em>requirements-clause</em><code>requires</code><em>requiresexpression</em><em>requiresexpression</em>STL<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">template</span>&lt;Forward_iterator Iter, <span class=\"keyword\">int</span> n&gt;</div><div class=\"line\">    <span class=\"function\">requires <span class=\"title\">requires</span><span class=\"params\">(Iter p, <span class=\"keyword\">int</span> i)</span> </span>&#123; p[i]; p+i; &#125; <span class=\"comment\">// Iter has subscripting and addition</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">advance</span><span class=\"params\">(Iter p, <span class=\"keyword\">int</span> n)</span> <span class=\"comment\">// move p n elements forward</span></div><div class=\"line\"></span>&#123;</div><div class=\"line\">    p+=n; <span class=\"comment\">// a random-access iterator has +=</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n<li><p>concrete</p>\n</li>\n<li><code>&lt;first, left&gt;</code>C++17fold expression</li>\n<li><code>std::forward</code></li>\n<li>concept<ul>\n<li></li>\n<li></li>\n<li><em>duck typing</em>operand</li>\n</ul>\n</li>\n<li><em>module</em><ul>\n<li>.h.cpp</li>\n<li>module.cpp</li>\n</ul>\n</li>\n</ul>\n"},{"title":"","description":[""],"date":"2017-09-09T03:15:46.000Z","_content":"\n## \n\n### \n\n- physics\n- cse.g. $ \\begin{bmatrix} 1 \\\\\\\\ 2\\end{bmatrix} $\n- mathematician $ \\vec{\\bf{v}} $\n\t* \n\t* physicscse.g. \n\n### physics viewcs view\n\n- \n- \n- \n\t* physicscs$ \\begin{bmatrix} 1 \\\\\\\\ 2\\end{bmatrix} $ \n\t* csphysics$ \\begin{bmatrix} 1 \\\\\\\\ 2\\end{bmatrix} $\n\n## \n\n$a \\vec{\\bf{v}} + b \\vec{\\bf{w}}$$\\vec{\\bf{v}}$$\\vec{\\bf{w}}$****$\\vec{\\bf{v}}$$\\vec{\\bf{w}}$\n\n## \n\n### Linear Transformation\n\n- transformation\n\t* function\n\t* functiontransformation\n\t* i.e. \n- linear\n\t* i.e. \n\n### Linear Transformation\n\n- pair\n- \n- $\\vec{\\bf{v}}$$\\hat{\\bf{i}}$$\\hat{\\bf{j}}$$\\vec{\\bf{v}}\\_{new}$$\\hat{\\bf{i}}\\_{new}$$\\hat{\\bf{j}}\\_{new}$\n- $\\hat{\\bf{i}}\\_{new}$$\\hat{\\bf{j}}\\_{new}$****$\\hat{\\bf{i}}$$\\hat{\\bf{j}}$$\\hat{\\bf{i}}\\_{new}$$\\hat{\\bf{j}}\\_{new}$\n- i.e. \n- \n- $\\hat{\\bf{i}}$$\\hat{\\bf{j}}$\n- $\\hat{\\bf{i}}\\_{new}$$\\hat{\\bf{j}}\\_{new}$\n- ****\n\n### \n\n- \n\t* $\\vec{\\bf{v}}$$\\hat{\\bf{i}}$$\\hat{\\bf{j}}$\n\t* mapping\n\t* \n- e.g.\n\t+ $\\bf{v} = 2\\bf{i} + 3\\bf{j}$\n<div style=\"width:400px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img combination.png  %}\n</div>\n\t+ \n\t\t* ${\\bf{v}}\\_{new}$${\\bf{i}}\\_{new}$${\\bf{j}}\\_{new}$\n\t\t* ${\\bf{v}}\\_{new}$${\\bf{i}}\\_{new}$${\\bf{j}}\\_{new}$23\n<div style=\"width:400px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img transformation.png  %}\n</div>\n\t+ \n\t\t* $\\bf{i}$$\\bf{j}$S\n\t\t* ${\\bf{i}}\\_{new}$${\\bf{j}}\\_{new}$T\n\t\t* ${\\bf{v}}\\_{new}$T\n<div style=\"width:400px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img representation.png  %}\n</div>\n- $\\bf{i}$$\\bf{j}$\n\t+ $\\bf{v}$\n\t+ ${\\bf{i}}\\_{new}$${\\bf{j}}\\_{new}$\n\t+ ${\\bf{v}}\\_{new}$$\\bf{v}$\n- \n\t+ $\\vec{v}$\n\t+ \n\t+ \n\n### $A\\vec{\\bf{x}}$\n\n- \n- \n- x\n\t* A$A\\vec{\\bf{x}}$1x1\n\t* A2$A\\vec{\\bf{x}}$2x1\n\n## \n\n- \n- ${\\bf{i}}\\_{new}$${\\bf{j}}\\_{new}$\n- \n\t+ $AB \\neq BA$\n\t+ $(AB)C = A(BC)$ABBA\n\n## \n\n- \n- \n\t+ //\n\t+ \n<div style=\"width:400px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img det.png  %}\n</div>\n- \n\t+ 0\n\t+ \n- $det(AB) = det(A)det(B)$\n\t+ $det(AB)$$AB$\n\t+ $AB$$B$$det(B)$$A$$det(A)$\n\t+ $det(A)det(B)$\n\n## \n\n### \n\n- $A\\vec{\\bf{x}} = \\vec{\\bf{b}}$$\\vec{\\bf{b}}$\n- $det(A) \\neq 0$\n\t+ $\\vec{\\bf{b}}$$\\vec{\\bf{x}}$\n\t+ $\\vec{\\bf{b}}$$\\vec{\\bf{x}}$\n\t+ $\\vec{\\bf{x}}$$A$\n\t+ $A$\n\t+ \n\t\t* \n\t\t* \n\t\t* 0\n- $det(A) = 0$$\\vec{\\bf{b}}$e.g. \n\t+ 0\n\t+ e.g. \n\t+ \n\t\t* \n\t\t* map\n\t\t* \n\n### Rank\n\n- //\n- \n\n### \n\n- $A\\vec{\\bf{x}}=\\vec{\\bf{0}}$\n- \n- \n- \n\t+ \n\t+ \n\t+ 0\n\n## \n\n- $\\begin{bmatrix} 1 & 2 \\\\\\\\ 2 & 2 \\\\\\\\ 3 & 3 \\end{bmatrix}$\n\t+ $\\begin{bmatrix}  \\\\\\\\ \\end{bmatrix}$ $\\begin{bmatrix} 1 \\\\\\\\ 2  \\\\\\\\ 3 \\end{bmatrix}$\n\t+ $\\begin{bmatrix} 0 \\\\\\\\ 1\\end{bmatrix}$ $\\begin{bmatrix}  \\\\\\\\ 2  \\\\\\\\ 3 \\end{bmatrix}$\n- $\\begin{bmatrix} 1 & 2 & 3\\\\\\\\ 2 & 2 & 3 \\end{bmatrix}$\n\t+ $\\begin{bmatrix}  \\\\\\\\  \\\\\\\\ 0\\end{bmatrix}$ $\\begin{bmatrix} 1 \\\\\\\\ 2\\end{bmatrix}$\n\t+ $\\begin{bmatrix} 0 \\\\\\\\ 1 \\\\\\\\ 0\\end{bmatrix}$ $\\begin{bmatrix} 2 \\\\\\\\ 2\\end{bmatrix}$\n\t+ $\\begin{bmatrix} 0 \\\\\\\\  \\\\\\\\ 1\\end{bmatrix}$ $\\begin{bmatrix} 3 \\\\\\\\ 3\\end{bmatrix}$\n\n## \n\n- \n\t+ \n\t+ \n<div style=\"width:400px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img dot_product_order.png  %}\n</div>\n- \n- \n\t+ \n\t+ \n- \n\t+ \n\t\t+ $\\vec{\\bf{\\hat{u}}}=\\begin{bmatrix} x \\\\\\\\ y \\end{bmatrix}$\n\t\t+ $\\begin{bmatrix} x & y\\end{bmatrix}$\n\t\t+ \n<div style=\"width:400px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img dot_product_projection.png  %}\n</div>\n\t+ \n\t\t+ $\\vec{\\bf{u}}=k\\vec{\\bf{\\hat{u}}}$\n\t\t+ $\\vec{\\bf{\\hat{u}}}=\\begin{bmatrix} x \\\\\\\\ y \\end{bmatrix}$k\n\t\t+ $k\\begin{bmatrix} x & y\\end{bmatrix}$\n\t\t+ $\\vec{\\bf{u}}$\n- \n\n## \n\n- \n\t+ \n\t+ \n\t\t* $det(\\begin{bmatrix} \\vec{\\bf{u}} & \\vec{\\bf{v}} \\end{bmatrix})$\n\t\t* $det(\\begin{bmatrix} {\\begin{bmatrix} i \\\\\\\\ j \\\\\\\\ k \\end{bmatrix}} & \\vec{\\bf{u}} & \\vec{\\bf{v}} \\end{bmatrix})$\n- \n\t+ $det(\\begin{bmatrix} {\\begin{bmatrix} i \\\\\\\\ j \\\\\\\\ k \\end{bmatrix}} & \\vec{\\bf{u}} & \\vec{\\bf{v}} \\end{bmatrix}) = Xi + Yj +Zk$$\\begin{bmatrix} X \\\\\\\\ Y \\\\\\\\ Z \\end{bmatrix}$\n\t+ $\\begin{bmatrix} X \\\\\\\\ Y \\\\\\\\ Z \\end{bmatrix}$$\\vec{\\bf{u}}$ $\\vec{\\bf{v}}$\n\t\t* $Xi + Yj +Zk$i.e. \n\t\t\t+ $\\begin{bmatrix} X \\\\\\\\ Y \\\\\\\\ Z \\end{bmatrix}$$\\begin{bmatrix} i \\\\\\\\ j \\\\\\\\ k \\end{bmatrix}$\n\t\t\t+ $\\begin{bmatrix} i \\\\\\\\ j \\\\\\\\ k \\end{bmatrix}$$\\vec{\\bf{u}}$ $\\vec{\\bf{v}}$\n\t\t* $Xi + Yj +Zk$$\\vec{\\bf{u}}$ $\\vec{\\bf{v}}$\n\n## \n\n### \n\n- AB\n\t+ $\\begin{bmatrix} 2 \\\\\\\\ 3\\end{bmatrix}$\n\t+ $\\vec{\\bf{u}}$$\\vec{\\bf{v}}$i.e. 23$\\vec{\\bf{u}}$$\\vec{\\bf{v}}$\n\t+ $\\vec{\\bf{i}}$$\\vec{\\bf{j}}$$\\vec{\\bf{u}}$$\\vec{\\bf{v}}$$\\vec{\\bf{i}}$$\\vec{\\bf{j}}$i.e. AB\n\t+ M\n- MBA\n\t+ BAM'\n\t+ A$\\begin{bmatrix} 2 \\\\\\\\ 3\\end{bmatrix}$\n\t+ MBM'BA$\\begin{bmatrix} 2 \\\\\\\\ 3\\end{bmatrix}$\n\t+ M'MM'M\n\n### \n\n- \n- MA\n\t* \n\t* \n\t* \n\t* \n\t* \n\t* \n- AA\n- MA\n- A'MAA'A\n- A'MAM\n\n## \n\n- eigen vector\n- eigen valueeigen vector\n- eigen basis\n\t* eigen vector\n\t* \n\t\t+ \n\t\t+ 0\n\t\t+ \n\t* A\n\t\t+ A\n\t\t+ Aeigen basisi.e.\n\t\t+ AeigenbasisB'AB\n\t\t+ eigen basis\n\t\t+ eigen basis\n\n## \n\n- 1mathematician viewi.e.physics viewcsview\n- \n\t+ \n\t+ \n\n## \n\n- \n\t+ \n\t+\n- idea\n- \n\n## References\n\n- [](http://space.bilibili.com/88461692#!/channel/detail?cid=9450)\n","source":"_posts/note-essence-of-linear-algrbra.md","raw":"---\ntitle: \ntags:\n  - \ndescription:\n  - \ncategories:\n  - \ndate: 2017-09-9 11:15:46\n---\n\n## \n\n### \n\n- physics\n- cse.g. $ \\begin{bmatrix} 1 \\\\\\\\ 2\\end{bmatrix} $\n- mathematician $ \\vec{\\bf{v}} $\n\t* \n\t* physicscse.g. \n\n### physics viewcs view\n\n- \n- \n- \n\t* physicscs$ \\begin{bmatrix} 1 \\\\\\\\ 2\\end{bmatrix} $ \n\t* csphysics$ \\begin{bmatrix} 1 \\\\\\\\ 2\\end{bmatrix} $\n\n## \n\n$a \\vec{\\bf{v}} + b \\vec{\\bf{w}}$$\\vec{\\bf{v}}$$\\vec{\\bf{w}}$****$\\vec{\\bf{v}}$$\\vec{\\bf{w}}$\n\n## \n\n### Linear Transformation\n\n- transformation\n\t* function\n\t* functiontransformation\n\t* i.e. \n- linear\n\t* i.e. \n\n### Linear Transformation\n\n- pair\n- \n- $\\vec{\\bf{v}}$$\\hat{\\bf{i}}$$\\hat{\\bf{j}}$$\\vec{\\bf{v}}\\_{new}$$\\hat{\\bf{i}}\\_{new}$$\\hat{\\bf{j}}\\_{new}$\n- $\\hat{\\bf{i}}\\_{new}$$\\hat{\\bf{j}}\\_{new}$****$\\hat{\\bf{i}}$$\\hat{\\bf{j}}$$\\hat{\\bf{i}}\\_{new}$$\\hat{\\bf{j}}\\_{new}$\n- i.e. \n- \n- $\\hat{\\bf{i}}$$\\hat{\\bf{j}}$\n- $\\hat{\\bf{i}}\\_{new}$$\\hat{\\bf{j}}\\_{new}$\n- ****\n\n### \n\n- \n\t* $\\vec{\\bf{v}}$$\\hat{\\bf{i}}$$\\hat{\\bf{j}}$\n\t* mapping\n\t* \n- e.g.\n\t+ $\\bf{v} = 2\\bf{i} + 3\\bf{j}$\n<div style=\"width:400px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img combination.png  %}\n</div>\n\t+ \n\t\t* ${\\bf{v}}\\_{new}$${\\bf{i}}\\_{new}$${\\bf{j}}\\_{new}$\n\t\t* ${\\bf{v}}\\_{new}$${\\bf{i}}\\_{new}$${\\bf{j}}\\_{new}$23\n<div style=\"width:400px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img transformation.png  %}\n</div>\n\t+ \n\t\t* $\\bf{i}$$\\bf{j}$S\n\t\t* ${\\bf{i}}\\_{new}$${\\bf{j}}\\_{new}$T\n\t\t* ${\\bf{v}}\\_{new}$T\n<div style=\"width:400px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img representation.png  %}\n</div>\n- $\\bf{i}$$\\bf{j}$\n\t+ $\\bf{v}$\n\t+ ${\\bf{i}}\\_{new}$${\\bf{j}}\\_{new}$\n\t+ ${\\bf{v}}\\_{new}$$\\bf{v}$\n- \n\t+ $\\vec{v}$\n\t+ \n\t+ \n\n### $A\\vec{\\bf{x}}$\n\n- \n- \n- x\n\t* A$A\\vec{\\bf{x}}$1x1\n\t* A2$A\\vec{\\bf{x}}$2x1\n\n## \n\n- \n- ${\\bf{i}}\\_{new}$${\\bf{j}}\\_{new}$\n- \n\t+ $AB \\neq BA$\n\t+ $(AB)C = A(BC)$ABBA\n\n## \n\n- \n- \n\t+ //\n\t+ \n<div style=\"width:400px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img det.png  %}\n</div>\n- \n\t+ 0\n\t+ \n- $det(AB) = det(A)det(B)$\n\t+ $det(AB)$$AB$\n\t+ $AB$$B$$det(B)$$A$$det(A)$\n\t+ $det(A)det(B)$\n\n## \n\n### \n\n- $A\\vec{\\bf{x}} = \\vec{\\bf{b}}$$\\vec{\\bf{b}}$\n- $det(A) \\neq 0$\n\t+ $\\vec{\\bf{b}}$$\\vec{\\bf{x}}$\n\t+ $\\vec{\\bf{b}}$$\\vec{\\bf{x}}$\n\t+ $\\vec{\\bf{x}}$$A$\n\t+ $A$\n\t+ \n\t\t* \n\t\t* \n\t\t* 0\n- $det(A) = 0$$\\vec{\\bf{b}}$e.g. \n\t+ 0\n\t+ e.g. \n\t+ \n\t\t* \n\t\t* map\n\t\t* \n\n### Rank\n\n- //\n- \n\n### \n\n- $A\\vec{\\bf{x}}=\\vec{\\bf{0}}$\n- \n- \n- \n\t+ \n\t+ \n\t+ 0\n\n## \n\n- $\\begin{bmatrix} 1 & 2 \\\\\\\\ 2 & 2 \\\\\\\\ 3 & 3 \\end{bmatrix}$\n\t+ $\\begin{bmatrix}  \\\\\\\\ \\end{bmatrix}$ $\\begin{bmatrix} 1 \\\\\\\\ 2  \\\\\\\\ 3 \\end{bmatrix}$\n\t+ $\\begin{bmatrix} 0 \\\\\\\\ 1\\end{bmatrix}$ $\\begin{bmatrix}  \\\\\\\\ 2  \\\\\\\\ 3 \\end{bmatrix}$\n- $\\begin{bmatrix} 1 & 2 & 3\\\\\\\\ 2 & 2 & 3 \\end{bmatrix}$\n\t+ $\\begin{bmatrix}  \\\\\\\\  \\\\\\\\ 0\\end{bmatrix}$ $\\begin{bmatrix} 1 \\\\\\\\ 2\\end{bmatrix}$\n\t+ $\\begin{bmatrix} 0 \\\\\\\\ 1 \\\\\\\\ 0\\end{bmatrix}$ $\\begin{bmatrix} 2 \\\\\\\\ 2\\end{bmatrix}$\n\t+ $\\begin{bmatrix} 0 \\\\\\\\  \\\\\\\\ 1\\end{bmatrix}$ $\\begin{bmatrix} 3 \\\\\\\\ 3\\end{bmatrix}$\n\n## \n\n- \n\t+ \n\t+ \n<div style=\"width:400px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img dot_product_order.png  %}\n</div>\n- \n- \n\t+ \n\t+ \n- \n\t+ \n\t\t+ $\\vec{\\bf{\\hat{u}}}=\\begin{bmatrix} x \\\\\\\\ y \\end{bmatrix}$\n\t\t+ $\\begin{bmatrix} x & y\\end{bmatrix}$\n\t\t+ \n<div style=\"width:400px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img dot_product_projection.png  %}\n</div>\n\t+ \n\t\t+ $\\vec{\\bf{u}}=k\\vec{\\bf{\\hat{u}}}$\n\t\t+ $\\vec{\\bf{\\hat{u}}}=\\begin{bmatrix} x \\\\\\\\ y \\end{bmatrix}$k\n\t\t+ $k\\begin{bmatrix} x & y\\end{bmatrix}$\n\t\t+ $\\vec{\\bf{u}}$\n- \n\n## \n\n- \n\t+ \n\t+ \n\t\t* $det(\\begin{bmatrix} \\vec{\\bf{u}} & \\vec{\\bf{v}} \\end{bmatrix})$\n\t\t* $det(\\begin{bmatrix} {\\begin{bmatrix} i \\\\\\\\ j \\\\\\\\ k \\end{bmatrix}} & \\vec{\\bf{u}} & \\vec{\\bf{v}} \\end{bmatrix})$\n- \n\t+ $det(\\begin{bmatrix} {\\begin{bmatrix} i \\\\\\\\ j \\\\\\\\ k \\end{bmatrix}} & \\vec{\\bf{u}} & \\vec{\\bf{v}} \\end{bmatrix}) = Xi + Yj +Zk$$\\begin{bmatrix} X \\\\\\\\ Y \\\\\\\\ Z \\end{bmatrix}$\n\t+ $\\begin{bmatrix} X \\\\\\\\ Y \\\\\\\\ Z \\end{bmatrix}$$\\vec{\\bf{u}}$ $\\vec{\\bf{v}}$\n\t\t* $Xi + Yj +Zk$i.e. \n\t\t\t+ $\\begin{bmatrix} X \\\\\\\\ Y \\\\\\\\ Z \\end{bmatrix}$$\\begin{bmatrix} i \\\\\\\\ j \\\\\\\\ k \\end{bmatrix}$\n\t\t\t+ $\\begin{bmatrix} i \\\\\\\\ j \\\\\\\\ k \\end{bmatrix}$$\\vec{\\bf{u}}$ $\\vec{\\bf{v}}$\n\t\t* $Xi + Yj +Zk$$\\vec{\\bf{u}}$ $\\vec{\\bf{v}}$\n\n## \n\n### \n\n- AB\n\t+ $\\begin{bmatrix} 2 \\\\\\\\ 3\\end{bmatrix}$\n\t+ $\\vec{\\bf{u}}$$\\vec{\\bf{v}}$i.e. 23$\\vec{\\bf{u}}$$\\vec{\\bf{v}}$\n\t+ $\\vec{\\bf{i}}$$\\vec{\\bf{j}}$$\\vec{\\bf{u}}$$\\vec{\\bf{v}}$$\\vec{\\bf{i}}$$\\vec{\\bf{j}}$i.e. AB\n\t+ M\n- MBA\n\t+ BAM'\n\t+ A$\\begin{bmatrix} 2 \\\\\\\\ 3\\end{bmatrix}$\n\t+ MBM'BA$\\begin{bmatrix} 2 \\\\\\\\ 3\\end{bmatrix}$\n\t+ M'MM'M\n\n### \n\n- \n- MA\n\t* \n\t* \n\t* \n\t* \n\t* \n\t* \n- AA\n- MA\n- A'MAA'A\n- A'MAM\n\n## \n\n- eigen vector\n- eigen valueeigen vector\n- eigen basis\n\t* eigen vector\n\t* \n\t\t+ \n\t\t+ 0\n\t\t+ \n\t* A\n\t\t+ A\n\t\t+ Aeigen basisi.e.\n\t\t+ AeigenbasisB'AB\n\t\t+ eigen basis\n\t\t+ eigen basis\n\n## \n\n- 1mathematician viewi.e.physics viewcsview\n- \n\t+ \n\t+ \n\n## \n\n- \n\t+ \n\t+\n- idea\n- \n\n## References\n\n- [](http://space.bilibili.com/88461692#!/channel/detail?cid=9450)\n","slug":"note-essence-of-linear-algrbra","published":1,"updated":"2024-08-13T16:03:47.848Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clzvf191x000teqwor5v4pmk4","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li>physics</li>\n<li>cse.g. $ \\begin{bmatrix} 1 \\\\\\ 2\\end{bmatrix} $</li>\n<li>mathematician $ \\vec{\\bf{v}} $<ul>\n<li></li>\n<li>physicscse.g. </li>\n</ul>\n</li>\n</ul>\n<h3 id=\"physics-viewcs-view\"><a href=\"#physics-viewcs-view\" class=\"headerlink\" title=\"physics viewcs view\"></a>physics viewcs view</h3><ul>\n<li></li>\n<li></li>\n<li><ul>\n<li>physicscs$ \\begin{bmatrix} 1 \\\\\\ 2\\end{bmatrix} $ </li>\n<li>csphysics$ \\begin{bmatrix} 1 \\\\\\ 2\\end{bmatrix} $</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>$a \\vec{\\bf{v}} + b \\vec{\\bf{w}}$$\\vec{\\bf{v}}$$\\vec{\\bf{w}}$<strong></strong>$\\vec{\\bf{v}}$$\\vec{\\bf{w}}$</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"Linear-Transformation\"><a href=\"#Linear-Transformation\" class=\"headerlink\" title=\"Linear Transformation\"></a>Linear Transformation</h3><ul>\n<li>transformation<ul>\n<li>function</li>\n<li>functiontransformation</li>\n<li>i.e. </li>\n</ul>\n</li>\n<li>linear<ul>\n<li>i.e. </li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Linear-Transformation\"><a href=\"#Linear-Transformation\" class=\"headerlink\" title=\"Linear Transformation\"></a>Linear Transformation</h3><ul>\n<li>pair</li>\n<li></li>\n<li>$\\vec{\\bf{v}}$$\\hat{\\bf{i}}$$\\hat{\\bf{j}}$$\\vec{\\bf{v}}_{new}$$\\hat{\\bf{i}}_{new}$$\\hat{\\bf{j}}_{new}$</li>\n<li>$\\hat{\\bf{i}}_{new}$$\\hat{\\bf{j}}_{new}$<strong></strong>$\\hat{\\bf{i}}$$\\hat{\\bf{j}}$$\\hat{\\bf{i}}_{new}$$\\hat{\\bf{j}}_{new}$</li>\n<li>i.e. </li>\n<li></li>\n<li>$\\hat{\\bf{i}}$$\\hat{\\bf{j}}$</li>\n<li>$\\hat{\\bf{i}}_{new}$$\\hat{\\bf{j}}_{new}$</li>\n<li><strong></strong></li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li><ul>\n<li>$\\vec{\\bf{v}}$$\\hat{\\bf{i}}$$\\hat{\\bf{j}}$</li>\n<li>mapping</li>\n<li></li>\n</ul>\n</li>\n<li>e.g.<ul>\n<li>$\\bf{v} = 2\\bf{i} + 3\\bf{j}$<div style=\"width:400px; margin-left:auto; margin-right:auto;\"><br><img src=\"/2017/09/09/note-essence-of-linear-algrbra/combination.png\" alt=\"\" title=\"\"><br></div></li>\n<li><ul>\n<li>${\\bf{v}}_{new}$${\\bf{i}}_{new}$${\\bf{j}}_{new}$</li>\n<li>${\\bf{v}}_{new}$${\\bf{i}}_{new}$${\\bf{j}}_{new}$23<div style=\"width:400px; margin-left:auto; margin-right:auto;\"><br><img src=\"/2017/09/09/note-essence-of-linear-algrbra/transformation.png\" alt=\"\" title=\"\"><br></div></li>\n</ul>\n</li>\n<li><ul>\n<li>$\\bf{i}$$\\bf{j}$S</li>\n<li>${\\bf{i}}_{new}$${\\bf{j}}_{new}$T</li>\n<li>${\\bf{v}}_{new}$T<div style=\"width:400px; margin-left:auto; margin-right:auto;\"><br><img src=\"/2017/09/09/note-essence-of-linear-algrbra/representation.png\" alt=\"\" title=\"\"><br></div></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>$\\bf{i}$$\\bf{j}$<ul>\n<li>$\\bf{v}$</li>\n<li>${\\bf{i}}_{new}$${\\bf{j}}_{new}$</li>\n<li>${\\bf{v}}_{new}$$\\bf{v}$</li>\n</ul>\n</li>\n<li><ul>\n<li>$\\vec{v}$</li>\n<li></li>\n<li></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"A-vec-bf-x-\"><a href=\"#A-vec-bf-x-\" class=\"headerlink\" title=\"$A\\vec{\\bf{x}}$\"></a>$A\\vec{\\bf{x}}$</h3><ul>\n<li></li>\n<li></li>\n<li>x<ul>\n<li>A$A\\vec{\\bf{x}}$1x1</li>\n<li>A2$A\\vec{\\bf{x}}$2x1</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li></li>\n<li>${\\bf{i}}_{new}$${\\bf{j}}_{new}$</li>\n<li><ul>\n<li>$AB \\neq BA$</li>\n<li>$(AB)C = A(BC)$ABBA</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li></li>\n<li><ul>\n<li>//</li>\n<li><div style=\"width:400px; margin-left:auto; margin-right:auto;\"><br><img src=\"/2017/09/09/note-essence-of-linear-algrbra/det.png\" alt=\"\" title=\"\"><br></div></li>\n</ul>\n</li>\n<li><ul>\n<li>0</li>\n<li></li>\n</ul>\n</li>\n<li>$det(AB) = det(A)det(B)$<ul>\n<li>$det(AB)$$AB$</li>\n<li>$AB$$B$$det(B)$$A$$det(A)$</li>\n<li>$det(A)det(B)$</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li>$A\\vec{\\bf{x}} = \\vec{\\bf{b}}$$\\vec{\\bf{b}}$</li>\n<li>$det(A) \\neq 0$<ul>\n<li>$\\vec{\\bf{b}}$$\\vec{\\bf{x}}$</li>\n<li>$\\vec{\\bf{b}}$$\\vec{\\bf{x}}$</li>\n<li>$\\vec{\\bf{x}}$$A$</li>\n<li>$A$</li>\n<li><ul>\n<li></li>\n<li></li>\n<li>0</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>$det(A) = 0$$\\vec{\\bf{b}}$e.g. <ul>\n<li>0</li>\n<li>e.g. </li>\n<li><ul>\n<li></li>\n<li>map</li>\n<li></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Rank\"><a href=\"#Rank\" class=\"headerlink\" title=\"Rank\"></a>Rank</h3><ul>\n<li>//</li>\n<li></li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li>$A\\vec{\\bf{x}}=\\vec{\\bf{0}}$</li>\n<li></li>\n<li></li>\n<li><ul>\n<li></li>\n<li></li>\n<li>0</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li>$\\begin{bmatrix} 1 &amp; 2 \\\\\\ 2 &amp; 2 \\\\\\ 3 &amp; 3 \\end{bmatrix}$<ul>\n<li>$\\begin{bmatrix}  \\\\\\ \\end{bmatrix}$ $\\begin{bmatrix} 1 \\\\\\ 2  \\\\\\ 3 \\end{bmatrix}$</li>\n<li>$\\begin{bmatrix} 0 \\\\\\ 1\\end{bmatrix}$ $\\begin{bmatrix}  \\\\\\ 2  \\\\\\ 3 \\end{bmatrix}$</li>\n</ul>\n</li>\n<li>$\\begin{bmatrix} 1 &amp; 2 &amp; 3\\\\\\ 2 &amp; 2 &amp; 3 \\end{bmatrix}$<ul>\n<li>$\\begin{bmatrix}  \\\\\\  \\\\\\ 0\\end{bmatrix}$ $\\begin{bmatrix} 1 \\\\\\ 2\\end{bmatrix}$</li>\n<li>$\\begin{bmatrix} 0 \\\\\\ 1 \\\\\\ 0\\end{bmatrix}$ $\\begin{bmatrix} 2 \\\\\\ 2\\end{bmatrix}$</li>\n<li>$\\begin{bmatrix} 0 \\\\\\  \\\\\\ 1\\end{bmatrix}$ $\\begin{bmatrix} 3 \\\\\\ 3\\end{bmatrix}$</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><ul>\n<li></li>\n<li><div style=\"width:400px; margin-left:auto; margin-right:auto;\"><br><img src=\"/2017/09/09/note-essence-of-linear-algrbra/dot_product_order.png\" alt=\"\" title=\"\"><br></div></li>\n</ul>\n</li>\n<li></li>\n<li><ul>\n<li></li>\n<li></li>\n</ul>\n</li>\n<li><ul>\n<li><ul>\n<li>$\\vec{\\bf{\\hat{u}}}=\\begin{bmatrix} x \\\\\\ y \\end{bmatrix}$</li>\n<li>$\\begin{bmatrix} x &amp; y\\end{bmatrix}$</li>\n<li><div style=\"width:400px; margin-left:auto; margin-right:auto;\"><br><img src=\"/2017/09/09/note-essence-of-linear-algrbra/dot_product_projection.png\" alt=\"\" title=\"\"><br></div></li>\n</ul>\n</li>\n<li><ul>\n<li>$\\vec{\\bf{u}}=k\\vec{\\bf{\\hat{u}}}$</li>\n<li>$\\vec{\\bf{\\hat{u}}}=\\begin{bmatrix} x \\\\\\ y \\end{bmatrix}$k</li>\n<li>$k\\begin{bmatrix} x &amp; y\\end{bmatrix}$</li>\n<li>$\\vec{\\bf{u}}$</li>\n</ul>\n</li>\n</ul>\n</li>\n<li></li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><ul>\n<li></li>\n<li><ul>\n<li>$det(\\begin{bmatrix} \\vec{\\bf{u}} &amp; \\vec{\\bf{v}} \\end{bmatrix})$</li>\n<li>$det(\\begin{bmatrix} {\\begin{bmatrix} i \\\\\\ j \\\\\\ k \\end{bmatrix}} &amp; \\vec{\\bf{u}} &amp; \\vec{\\bf{v}} \\end{bmatrix})$</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><ul>\n<li>$det(\\begin{bmatrix} {\\begin{bmatrix} i \\\\\\ j \\\\\\ k \\end{bmatrix}} &amp; \\vec{\\bf{u}} &amp; \\vec{\\bf{v}} \\end{bmatrix}) = Xi + Yj +Zk$$\\begin{bmatrix} X \\\\\\ Y \\\\\\ Z \\end{bmatrix}$</li>\n<li>$\\begin{bmatrix} X \\\\\\ Y \\\\\\ Z \\end{bmatrix}$$\\vec{\\bf{u}}$ $\\vec{\\bf{v}}$<ul>\n<li>$Xi + Yj +Zk$i.e. <ul>\n<li>$\\begin{bmatrix} X \\\\\\ Y \\\\\\ Z \\end{bmatrix}$$\\begin{bmatrix} i \\\\\\ j \\\\\\ k \\end{bmatrix}$</li>\n<li>$\\begin{bmatrix} i \\\\\\ j \\\\\\ k \\end{bmatrix}$$\\vec{\\bf{u}}$ $\\vec{\\bf{v}}$</li>\n</ul>\n</li>\n<li>$Xi + Yj +Zk$$\\vec{\\bf{u}}$ $\\vec{\\bf{v}}$</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li>AB<ul>\n<li>$\\begin{bmatrix} 2 \\\\\\ 3\\end{bmatrix}$</li>\n<li>$\\vec{\\bf{u}}$$\\vec{\\bf{v}}$i.e. 23$\\vec{\\bf{u}}$$\\vec{\\bf{v}}$</li>\n<li>$\\vec{\\bf{i}}$$\\vec{\\bf{j}}$$\\vec{\\bf{u}}$$\\vec{\\bf{v}}$$\\vec{\\bf{i}}$$\\vec{\\bf{j}}$i.e. AB</li>\n<li>M</li>\n</ul>\n</li>\n<li>MBA<ul>\n<li>BAM</li>\n<li>A$\\begin{bmatrix} 2 \\\\\\ 3\\end{bmatrix}$</li>\n<li>MBMBA$\\begin{bmatrix} 2 \\\\\\ 3\\end{bmatrix}$</li>\n<li>MMMM</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li></li>\n<li>MA<ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n</li>\n<li>AA</li>\n<li>MA</li>\n<li>AMAAA</li>\n<li>AMAM</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li>eigen vector</li>\n<li>eigen valueeigen vector</li>\n<li>eigen basis<ul>\n<li>eigen vector</li>\n<li><ul>\n<li></li>\n<li>0</li>\n<li></li>\n</ul>\n</li>\n<li>A<ul>\n<li>A</li>\n<li>Aeigen basisi.e.</li>\n<li>AeigenbasisBAB</li>\n<li>eigen basis</li>\n<li>eigen basis</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li>1mathematician viewi.e.physics viewcsview</li>\n<li><ul>\n<li></li>\n<li></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><ul>\n<li><br>+</li>\n</ul>\n</li>\n<li>idea</li>\n<li></li>\n</ul>\n<h2 id=\"References\"><a href=\"#References\" class=\"headerlink\" title=\"References\"></a>References</h2><ul>\n<li><a href=\"http://space.bilibili.com/88461692#!/channel/detail?cid=9450\" target=\"_blank\" rel=\"external\"></a></li>\n</ul>\n","excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li>physics</li>\n<li>cse.g. $ \\begin{bmatrix} 1 \\\\\\ 2\\end{bmatrix} $</li>\n<li>mathematician $ \\vec{\\bf{v}} $<ul>\n<li></li>\n<li>physicscse.g. </li>\n</ul>\n</li>\n</ul>\n<h3 id=\"physics-viewcs-view\"><a href=\"#physics-viewcs-view\" class=\"headerlink\" title=\"physics viewcs view\"></a>physics viewcs view</h3><ul>\n<li></li>\n<li></li>\n<li><ul>\n<li>physicscs$ \\begin{bmatrix} 1 \\\\\\ 2\\end{bmatrix} $ </li>\n<li>csphysics$ \\begin{bmatrix} 1 \\\\\\ 2\\end{bmatrix} $</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>$a \\vec{\\bf{v}} + b \\vec{\\bf{w}}$$\\vec{\\bf{v}}$$\\vec{\\bf{w}}$<strong></strong>$\\vec{\\bf{v}}$$\\vec{\\bf{w}}$</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"Linear-Transformation\"><a href=\"#Linear-Transformation\" class=\"headerlink\" title=\"Linear Transformation\"></a>Linear Transformation</h3><ul>\n<li>transformation<ul>\n<li>function</li>\n<li>functiontransformation</li>\n<li>i.e. </li>\n</ul>\n</li>\n<li>linear<ul>\n<li>i.e. </li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Linear-Transformation\"><a href=\"#Linear-Transformation\" class=\"headerlink\" title=\"Linear Transformation\"></a>Linear Transformation</h3><ul>\n<li>pair</li>\n<li></li>\n<li>$\\vec{\\bf{v}}$$\\hat{\\bf{i}}$$\\hat{\\bf{j}}$$\\vec{\\bf{v}}_{new}$$\\hat{\\bf{i}}_{new}$$\\hat{\\bf{j}}_{new}$</li>\n<li>$\\hat{\\bf{i}}_{new}$$\\hat{\\bf{j}}_{new}$<strong></strong>$\\hat{\\bf{i}}$$\\hat{\\bf{j}}$$\\hat{\\bf{i}}_{new}$$\\hat{\\bf{j}}_{new}$</li>\n<li>i.e. </li>\n<li></li>\n<li>$\\hat{\\bf{i}}$$\\hat{\\bf{j}}$</li>\n<li>$\\hat{\\bf{i}}_{new}$$\\hat{\\bf{j}}_{new}$</li>\n<li><strong></strong></li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li><ul>\n<li>$\\vec{\\bf{v}}$$\\hat{\\bf{i}}$$\\hat{\\bf{j}}$</li>\n<li>mapping</li>\n<li></li>\n</ul>\n</li>\n<li>e.g.<ul>\n<li>$\\bf{v} = 2\\bf{i} + 3\\bf{j}$<div style=\"width:400px; margin-left:auto; margin-right:auto;\" ><br><img src=\"/2017/09/09/note-essence-of-linear-algrbra/combination.png\" alt=\"\" title=\"\"><br></div></li>\n<li><ul>\n<li>${\\bf{v}}_{new}$${\\bf{i}}_{new}$${\\bf{j}}_{new}$</li>\n<li>${\\bf{v}}_{new}$${\\bf{i}}_{new}$${\\bf{j}}_{new}$23<div style=\"width:400px; margin-left:auto; margin-right:auto;\" ><br><img src=\"/2017/09/09/note-essence-of-linear-algrbra/transformation.png\" alt=\"\" title=\"\"><br></div></li>\n</ul>\n</li>\n<li><ul>\n<li>$\\bf{i}$$\\bf{j}$S</li>\n<li>${\\bf{i}}_{new}$${\\bf{j}}_{new}$T</li>\n<li>${\\bf{v}}_{new}$T<div style=\"width:400px; margin-left:auto; margin-right:auto;\" ><br><img src=\"/2017/09/09/note-essence-of-linear-algrbra/representation.png\" alt=\"\" title=\"\"><br></div></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>$\\bf{i}$$\\bf{j}$<ul>\n<li>$\\bf{v}$</li>\n<li>${\\bf{i}}_{new}$${\\bf{j}}_{new}$</li>\n<li>${\\bf{v}}_{new}$$\\bf{v}$</li>\n</ul>\n</li>\n<li><ul>\n<li>$\\vec{v}$</li>\n<li></li>\n<li></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"A-vec-bf-x-\"><a href=\"#A-vec-bf-x-\" class=\"headerlink\" title=\"$A\\vec{\\bf{x}}$\"></a>$A\\vec{\\bf{x}}$</h3><ul>\n<li></li>\n<li></li>\n<li>x<ul>\n<li>A$A\\vec{\\bf{x}}$1x1</li>\n<li>A2$A\\vec{\\bf{x}}$2x1</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li></li>\n<li>${\\bf{i}}_{new}$${\\bf{j}}_{new}$</li>\n<li><ul>\n<li>$AB \\neq BA$</li>\n<li>$(AB)C = A(BC)$ABBA</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li></li>\n<li><ul>\n<li>//</li>\n<li><div style=\"width:400px; margin-left:auto; margin-right:auto;\" ><br><img src=\"/2017/09/09/note-essence-of-linear-algrbra/det.png\" alt=\"\" title=\"\"><br></div></li>\n</ul>\n</li>\n<li><ul>\n<li>0</li>\n<li></li>\n</ul>\n</li>\n<li>$det(AB) = det(A)det(B)$<ul>\n<li>$det(AB)$$AB$</li>\n<li>$AB$$B$$det(B)$$A$$det(A)$</li>\n<li>$det(A)det(B)$</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li>$A\\vec{\\bf{x}} = \\vec{\\bf{b}}$$\\vec{\\bf{b}}$</li>\n<li>$det(A) \\neq 0$<ul>\n<li>$\\vec{\\bf{b}}$$\\vec{\\bf{x}}$</li>\n<li>$\\vec{\\bf{b}}$$\\vec{\\bf{x}}$</li>\n<li>$\\vec{\\bf{x}}$$A$</li>\n<li>$A$</li>\n<li><ul>\n<li></li>\n<li></li>\n<li>0</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>$det(A) = 0$$\\vec{\\bf{b}}$e.g. <ul>\n<li>0</li>\n<li>e.g. </li>\n<li><ul>\n<li></li>\n<li>map</li>\n<li></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Rank\"><a href=\"#Rank\" class=\"headerlink\" title=\"Rank\"></a>Rank</h3><ul>\n<li>//</li>\n<li></li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li>$A\\vec{\\bf{x}}=\\vec{\\bf{0}}$</li>\n<li></li>\n<li></li>\n<li><ul>\n<li></li>\n<li></li>\n<li>0</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li>$\\begin{bmatrix} 1 &amp; 2 \\\\\\ 2 &amp; 2 \\\\\\ 3 &amp; 3 \\end{bmatrix}$<ul>\n<li>$\\begin{bmatrix}  \\\\\\ \\end{bmatrix}$ $\\begin{bmatrix} 1 \\\\\\ 2  \\\\\\ 3 \\end{bmatrix}$</li>\n<li>$\\begin{bmatrix} 0 \\\\\\ 1\\end{bmatrix}$ $\\begin{bmatrix}  \\\\\\ 2  \\\\\\ 3 \\end{bmatrix}$</li>\n</ul>\n</li>\n<li>$\\begin{bmatrix} 1 &amp; 2 &amp; 3\\\\\\ 2 &amp; 2 &amp; 3 \\end{bmatrix}$<ul>\n<li>$\\begin{bmatrix}  \\\\\\  \\\\\\ 0\\end{bmatrix}$ $\\begin{bmatrix} 1 \\\\\\ 2\\end{bmatrix}$</li>\n<li>$\\begin{bmatrix} 0 \\\\\\ 1 \\\\\\ 0\\end{bmatrix}$ $\\begin{bmatrix} 2 \\\\\\ 2\\end{bmatrix}$</li>\n<li>$\\begin{bmatrix} 0 \\\\\\  \\\\\\ 1\\end{bmatrix}$ $\\begin{bmatrix} 3 \\\\\\ 3\\end{bmatrix}$</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><ul>\n<li></li>\n<li><div style=\"width:400px; margin-left:auto; margin-right:auto;\" ><br><img src=\"/2017/09/09/note-essence-of-linear-algrbra/dot_product_order.png\" alt=\"\" title=\"\"><br></div></li>\n</ul>\n</li>\n<li></li>\n<li><ul>\n<li></li>\n<li></li>\n</ul>\n</li>\n<li><ul>\n<li><ul>\n<li>$\\vec{\\bf{\\hat{u}}}=\\begin{bmatrix} x \\\\\\ y \\end{bmatrix}$</li>\n<li>$\\begin{bmatrix} x &amp; y\\end{bmatrix}$</li>\n<li><div style=\"width:400px; margin-left:auto; margin-right:auto;\" ><br><img src=\"/2017/09/09/note-essence-of-linear-algrbra/dot_product_projection.png\" alt=\"\" title=\"\"><br></div></li>\n</ul>\n</li>\n<li><ul>\n<li>$\\vec{\\bf{u}}=k\\vec{\\bf{\\hat{u}}}$</li>\n<li>$\\vec{\\bf{\\hat{u}}}=\\begin{bmatrix} x \\\\\\ y \\end{bmatrix}$k</li>\n<li>$k\\begin{bmatrix} x &amp; y\\end{bmatrix}$</li>\n<li>$\\vec{\\bf{u}}$</li>\n</ul>\n</li>\n</ul>\n</li>\n<li></li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><ul>\n<li></li>\n<li><ul>\n<li>$det(\\begin{bmatrix} \\vec{\\bf{u}} &amp; \\vec{\\bf{v}} \\end{bmatrix})$</li>\n<li>$det(\\begin{bmatrix} {\\begin{bmatrix} i \\\\\\ j \\\\\\ k \\end{bmatrix}} &amp; \\vec{\\bf{u}} &amp; \\vec{\\bf{v}} \\end{bmatrix})$</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><ul>\n<li>$det(\\begin{bmatrix} {\\begin{bmatrix} i \\\\\\ j \\\\\\ k \\end{bmatrix}} &amp; \\vec{\\bf{u}} &amp; \\vec{\\bf{v}} \\end{bmatrix}) = Xi + Yj +Zk$$\\begin{bmatrix} X \\\\\\ Y \\\\\\ Z \\end{bmatrix}$</li>\n<li>$\\begin{bmatrix} X \\\\\\ Y \\\\\\ Z \\end{bmatrix}$$\\vec{\\bf{u}}$ $\\vec{\\bf{v}}$<ul>\n<li>$Xi + Yj +Zk$i.e. <ul>\n<li>$\\begin{bmatrix} X \\\\\\ Y \\\\\\ Z \\end{bmatrix}$$\\begin{bmatrix} i \\\\\\ j \\\\\\ k \\end{bmatrix}$</li>\n<li>$\\begin{bmatrix} i \\\\\\ j \\\\\\ k \\end{bmatrix}$$\\vec{\\bf{u}}$ $\\vec{\\bf{v}}$</li>\n</ul>\n</li>\n<li>$Xi + Yj +Zk$$\\vec{\\bf{u}}$ $\\vec{\\bf{v}}$</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li>AB<ul>\n<li>$\\begin{bmatrix} 2 \\\\\\ 3\\end{bmatrix}$</li>\n<li>$\\vec{\\bf{u}}$$\\vec{\\bf{v}}$i.e. 23$\\vec{\\bf{u}}$$\\vec{\\bf{v}}$</li>\n<li>$\\vec{\\bf{i}}$$\\vec{\\bf{j}}$$\\vec{\\bf{u}}$$\\vec{\\bf{v}}$$\\vec{\\bf{i}}$$\\vec{\\bf{j}}$i.e. AB</li>\n<li>M</li>\n</ul>\n</li>\n<li>MBA<ul>\n<li>BAM</li>\n<li>A$\\begin{bmatrix} 2 \\\\\\ 3\\end{bmatrix}$</li>\n<li>MBMBA$\\begin{bmatrix} 2 \\\\\\ 3\\end{bmatrix}$</li>\n<li>MMMM</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li></li>\n<li>MA<ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n</li>\n<li>AA</li>\n<li>MA</li>\n<li>AMAAA</li>\n<li>AMAM</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li>eigen vector</li>\n<li>eigen valueeigen vector</li>\n<li>eigen basis<ul>\n<li>eigen vector</li>\n<li><ul>\n<li></li>\n<li>0</li>\n<li></li>\n</ul>\n</li>\n<li>A<ul>\n<li>A</li>\n<li>Aeigen basisi.e.</li>\n<li>AeigenbasisBAB</li>\n<li>eigen basis</li>\n<li>eigen basis</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li>1mathematician viewi.e.physics viewcsview</li>\n<li><ul>\n<li></li>\n<li></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><ul>\n<li><br>+</li>\n</ul>\n</li>\n<li>idea</li>\n<li></li>\n</ul>\n<h2 id=\"References\"><a href=\"#References\" class=\"headerlink\" title=\"References\"></a>References</h2><ul>\n<li><a href=\"http://space.bilibili.com/88461692#!/channel/detail?cid=9450\"></a></li>\n</ul>\n"},{"title":"Learning How to Learn","description":[""],"date":"2017-09-09T07:16:28.000Z","_content":"\n## \n\n<div style=\"width:800px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img learning_how_to_learn.png Learning How to Learn %}\n</div>\n\n## References\n\n- [Learning How to Learn](https://www.coursera.org/learn/learning-how-to-learn)","source":"_posts/note-learning-how-to-learn.md","raw":"---\ntitle: Learning How to Learn\ntags:\n  - \ndescription:\n  - \ncategories:\n  - \ndate: 2017-09-09 15:16:28\n---\n\n## \n\n<div style=\"width:800px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img learning_how_to_learn.png Learning How to Learn %}\n</div>\n\n## References\n\n- [Learning How to Learn](https://www.coursera.org/learn/learning-how-to-learn)","slug":"note-learning-how-to-learn","published":1,"updated":"2024-08-13T16:03:47.852Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clzvf191z000veqwodbuu30tr","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><div style=\"width:800px; margin-left:auto; margin-right:auto;\"><br>  <img src=\"/2017/09/09/note-learning-how-to-learn/learning_how_to_learn.png\" alt=\"Learning How to Learn\" title=\"Learning How to Learn\"><br></div>\n\n<h2 id=\"References\"><a href=\"#References\" class=\"headerlink\" title=\"References\"></a>References</h2><ul>\n<li><a href=\"https://www.coursera.org/learn/learning-how-to-learn\" target=\"_blank\" rel=\"external\">Learning How to Learn</a></li>\n</ul>\n","excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><div style=\"width:800px; margin-left:auto; margin-right:auto;\" ><br>  <img src=\"/2017/09/09/note-learning-how-to-learn/learning_how_to_learn.png\" alt=\"Learning How to Learn\" title=\"Learning How to Learn\"><br></div>\n\n<h2 id=\"References\"><a href=\"#References\" class=\"headerlink\" title=\"References\"></a>References</h2><ul>\n<li><a href=\"https://www.coursera.org/learn/learning-how-to-learn\">Learning How to Learn</a></li>\n</ul>\n"},{"title":"MIT18.06","description":["MIT Gilbert Strang"],"date":"2017-09-09T07:09:17.000Z","_content":"\n## \n\n<div style=\"width:800px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img linear_algebra.png MIT18.06 %}\n</div>\n\n## References\n\n- [MIT18.06](http://open.163.com/special/opencourse/daishu.html)","source":"_posts/note-linear-algebra.md","raw":"---\ntitle: MIT18.06\ntags:\n  - \ndescription:\n  - MIT Gilbert Strang\ncategories:\n  - \ndate: 2017-09-09 15:09:17\n---\n\n## \n\n<div style=\"width:800px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img linear_algebra.png MIT18.06 %}\n</div>\n\n## References\n\n- [MIT18.06](http://open.163.com/special/opencourse/daishu.html)","slug":"note-linear-algebra","published":1,"updated":"2024-08-13T16:03:47.852Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clzvf1921000yeqwod4s8qyy0","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><div style=\"width:800px; margin-left:auto; margin-right:auto;\"><br>  <img src=\"/2017/09/09/note-linear-algebra/linear_algebra.png\" alt=\"MIT18.06\" title=\"MIT18.06\"><br></div>\n\n<h2 id=\"References\"><a href=\"#References\" class=\"headerlink\" title=\"References\"></a>References</h2><ul>\n<li><a href=\"http://open.163.com/special/opencourse/daishu.html\" target=\"_blank\" rel=\"external\">MIT18.06</a></li>\n</ul>\n","excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><div style=\"width:800px; margin-left:auto; margin-right:auto;\" ><br>  <img src=\"/2017/09/09/note-linear-algebra/linear_algebra.png\" alt=\"MIT18.06\" title=\"MIT18.06\"><br></div>\n\n<h2 id=\"References\"><a href=\"#References\" class=\"headerlink\" title=\"References\"></a>References</h2><ul>\n<li><a href=\"http://open.163.com/special/opencourse/daishu.html\">MIT18.06</a></li>\n</ul>\n"},{"title":"UCL","description":["UCL David Silver"],"date":"2017-09-09T07:21:42.000Z","_content":"\n## \n\n### Intro to RL\n\n<div style=\"width:800px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img lec1_Intro_to_RL.png Intro to RL %}\n</div>\n\n### MDP\n\n<div style=\"width:800px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img lec2_MDP.png MDP %}\n</div>\n\n### Planning by DP\n\n<div style=\"width:800px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img lec3_Planning_by_DP.png Planning by DP %}\n</div>\n\n### Model-Free Prediction\n\n<div style=\"width:800px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img lec4_Model_Free_Prediction.png Model-Free Prediction %}\n</div>\n\n### Model-Free Control\n\n<div style=\"width:800px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img lec5_Model_Free_Control.png Model-Free Control %}\n</div>\n\n### Value Function Approximation\n\n<div style=\"width:800px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img lec6_Value_Function_Approximation.png Value Function Approximation %}\n</div>\n\n### Policy Gradient\n\n<div style=\"width:800px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img lec7_Policy_Gradient.png Policy Gradient %}\n</div>\n\n### Integrating Learning and Planning\n\n<div style=\"width:800px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img lec8_Integrating_Learning_and_Planning.png Integrating Learning and Planning %}\n</div>\n\n### Exploration and Exploitation\n\n<div style=\"width:800px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img lec9_Exploration_and_Exploitation.png Exploration and Exploitation %}\n</div>\n\n## References\n\n- [](http://www0.cs.ucl.ac.uk/staff/D.Silver/web/Teaching.html)\n- [](http://people.inf.elte.hu/lorincz/Files/RL_2006/SuttonBook.pdf)","source":"_posts/note-reinforcement-learning.md","raw":"---\ntitle: UCL\ntags:\n  - \ndescription:\n  - UCL David Silver\ncategories:\n  - \ndate: 2017-09-09 15:21:42\n---\n\n## \n\n### Intro to RL\n\n<div style=\"width:800px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img lec1_Intro_to_RL.png Intro to RL %}\n</div>\n\n### MDP\n\n<div style=\"width:800px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img lec2_MDP.png MDP %}\n</div>\n\n### Planning by DP\n\n<div style=\"width:800px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img lec3_Planning_by_DP.png Planning by DP %}\n</div>\n\n### Model-Free Prediction\n\n<div style=\"width:800px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img lec4_Model_Free_Prediction.png Model-Free Prediction %}\n</div>\n\n### Model-Free Control\n\n<div style=\"width:800px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img lec5_Model_Free_Control.png Model-Free Control %}\n</div>\n\n### Value Function Approximation\n\n<div style=\"width:800px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img lec6_Value_Function_Approximation.png Value Function Approximation %}\n</div>\n\n### Policy Gradient\n\n<div style=\"width:800px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img lec7_Policy_Gradient.png Policy Gradient %}\n</div>\n\n### Integrating Learning and Planning\n\n<div style=\"width:800px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img lec8_Integrating_Learning_and_Planning.png Integrating Learning and Planning %}\n</div>\n\n### Exploration and Exploitation\n\n<div style=\"width:800px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img lec9_Exploration_and_Exploitation.png Exploration and Exploitation %}\n</div>\n\n## References\n\n- [](http://www0.cs.ucl.ac.uk/staff/D.Silver/web/Teaching.html)\n- [](http://people.inf.elte.hu/lorincz/Files/RL_2006/SuttonBook.pdf)","slug":"note-reinforcement-learning","published":1,"updated":"2024-08-13T16:03:47.856Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clzvf19230011eqwod5y0jaoq","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"Intro-to-RL\"><a href=\"#Intro-to-RL\" class=\"headerlink\" title=\"Intro to RL\"></a>Intro to RL</h3><div style=\"width:800px; margin-left:auto; margin-right:auto;\"><br>  <img src=\"/2017/09/09/note-reinforcement-learning/lec1_Intro_to_RL.png\" alt=\"Intro to RL\" title=\"Intro to RL\"><br></div>\n\n<h3 id=\"MDP\"><a href=\"#MDP\" class=\"headerlink\" title=\"MDP\"></a>MDP</h3><div style=\"width:800px; margin-left:auto; margin-right:auto;\"><br>  <img src=\"/2017/09/09/note-reinforcement-learning/lec2_MDP.png\" alt=\"MDP\" title=\"MDP\"><br></div>\n\n<h3 id=\"Planning-by-DP\"><a href=\"#Planning-by-DP\" class=\"headerlink\" title=\"Planning by DP\"></a>Planning by DP</h3><div style=\"width:800px; margin-left:auto; margin-right:auto;\"><br>  <img src=\"/2017/09/09/note-reinforcement-learning/lec3_Planning_by_DP.png\" alt=\"Planning by DP\" title=\"Planning by DP\"><br></div>\n\n<h3 id=\"Model-Free-Prediction\"><a href=\"#Model-Free-Prediction\" class=\"headerlink\" title=\"Model-Free Prediction\"></a>Model-Free Prediction</h3><div style=\"width:800px; margin-left:auto; margin-right:auto;\"><br>  <img src=\"/2017/09/09/note-reinforcement-learning/lec4_Model_Free_Prediction.png\" alt=\"Model-Free Prediction\" title=\"Model-Free Prediction\"><br></div>\n\n<h3 id=\"Model-Free-Control\"><a href=\"#Model-Free-Control\" class=\"headerlink\" title=\"Model-Free Control\"></a>Model-Free Control</h3><div style=\"width:800px; margin-left:auto; margin-right:auto;\"><br>  <img src=\"/2017/09/09/note-reinforcement-learning/lec5_Model_Free_Control.png\" alt=\"Model-Free Control\" title=\"Model-Free Control\"><br></div>\n\n<h3 id=\"Value-Function-Approximation\"><a href=\"#Value-Function-Approximation\" class=\"headerlink\" title=\"Value Function Approximation\"></a>Value Function Approximation</h3><div style=\"width:800px; margin-left:auto; margin-right:auto;\"><br>  <img src=\"/2017/09/09/note-reinforcement-learning/lec6_Value_Function_Approximation.png\" alt=\"Value Function Approximation\" title=\"Value Function Approximation\"><br></div>\n\n<h3 id=\"Policy-Gradient\"><a href=\"#Policy-Gradient\" class=\"headerlink\" title=\"Policy Gradient\"></a>Policy Gradient</h3><div style=\"width:800px; margin-left:auto; margin-right:auto;\"><br>  <img src=\"/2017/09/09/note-reinforcement-learning/lec7_Policy_Gradient.png\" alt=\"Policy Gradient\" title=\"Policy Gradient\"><br></div>\n\n<h3 id=\"Integrating-Learning-and-Planning\"><a href=\"#Integrating-Learning-and-Planning\" class=\"headerlink\" title=\"Integrating Learning and Planning\"></a>Integrating Learning and Planning</h3><div style=\"width:800px; margin-left:auto; margin-right:auto;\"><br>  <img src=\"/2017/09/09/note-reinforcement-learning/lec8_Integrating_Learning_and_Planning.png\" alt=\"Integrating Learning and Planning\" title=\"Integrating Learning and Planning\"><br></div>\n\n<h3 id=\"Exploration-and-Exploitation\"><a href=\"#Exploration-and-Exploitation\" class=\"headerlink\" title=\"Exploration and Exploitation\"></a>Exploration and Exploitation</h3><div style=\"width:800px; margin-left:auto; margin-right:auto;\"><br>  <img src=\"/2017/09/09/note-reinforcement-learning/lec9_Exploration_and_Exploitation.png\" alt=\"Exploration and Exploitation\" title=\"Exploration and Exploitation\"><br></div>\n\n<h2 id=\"References\"><a href=\"#References\" class=\"headerlink\" title=\"References\"></a>References</h2><ul>\n<li><a href=\"http://www0.cs.ucl.ac.uk/staff/D.Silver/web/Teaching.html\" target=\"_blank\" rel=\"external\"></a></li>\n<li><a href=\"http://people.inf.elte.hu/lorincz/Files/RL_2006/SuttonBook.pdf\" target=\"_blank\" rel=\"external\"></a></li>\n</ul>\n","excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"Intro-to-RL\"><a href=\"#Intro-to-RL\" class=\"headerlink\" title=\"Intro to RL\"></a>Intro to RL</h3><div style=\"width:800px; margin-left:auto; margin-right:auto;\" ><br>  <img src=\"/2017/09/09/note-reinforcement-learning/lec1_Intro_to_RL.png\" alt=\"Intro to RL\" title=\"Intro to RL\"><br></div>\n\n<h3 id=\"MDP\"><a href=\"#MDP\" class=\"headerlink\" title=\"MDP\"></a>MDP</h3><div style=\"width:800px; margin-left:auto; margin-right:auto;\" ><br>  <img src=\"/2017/09/09/note-reinforcement-learning/lec2_MDP.png\" alt=\"MDP\" title=\"MDP\"><br></div>\n\n<h3 id=\"Planning-by-DP\"><a href=\"#Planning-by-DP\" class=\"headerlink\" title=\"Planning by DP\"></a>Planning by DP</h3><div style=\"width:800px; margin-left:auto; margin-right:auto;\" ><br>  <img src=\"/2017/09/09/note-reinforcement-learning/lec3_Planning_by_DP.png\" alt=\"Planning by DP\" title=\"Planning by DP\"><br></div>\n\n<h3 id=\"Model-Free-Prediction\"><a href=\"#Model-Free-Prediction\" class=\"headerlink\" title=\"Model-Free Prediction\"></a>Model-Free Prediction</h3><div style=\"width:800px; margin-left:auto; margin-right:auto;\" ><br>  <img src=\"/2017/09/09/note-reinforcement-learning/lec4_Model_Free_Prediction.png\" alt=\"Model-Free Prediction\" title=\"Model-Free Prediction\"><br></div>\n\n<h3 id=\"Model-Free-Control\"><a href=\"#Model-Free-Control\" class=\"headerlink\" title=\"Model-Free Control\"></a>Model-Free Control</h3><div style=\"width:800px; margin-left:auto; margin-right:auto;\" ><br>  <img src=\"/2017/09/09/note-reinforcement-learning/lec5_Model_Free_Control.png\" alt=\"Model-Free Control\" title=\"Model-Free Control\"><br></div>\n\n<h3 id=\"Value-Function-Approximation\"><a href=\"#Value-Function-Approximation\" class=\"headerlink\" title=\"Value Function Approximation\"></a>Value Function Approximation</h3><div style=\"width:800px; margin-left:auto; margin-right:auto;\" ><br>  <img src=\"/2017/09/09/note-reinforcement-learning/lec6_Value_Function_Approximation.png\" alt=\"Value Function Approximation\" title=\"Value Function Approximation\"><br></div>\n\n<h3 id=\"Policy-Gradient\"><a href=\"#Policy-Gradient\" class=\"headerlink\" title=\"Policy Gradient\"></a>Policy Gradient</h3><div style=\"width:800px; margin-left:auto; margin-right:auto;\" ><br>  <img src=\"/2017/09/09/note-reinforcement-learning/lec7_Policy_Gradient.png\" alt=\"Policy Gradient\" title=\"Policy Gradient\"><br></div>\n\n<h3 id=\"Integrating-Learning-and-Planning\"><a href=\"#Integrating-Learning-and-Planning\" class=\"headerlink\" title=\"Integrating Learning and Planning\"></a>Integrating Learning and Planning</h3><div style=\"width:800px; margin-left:auto; margin-right:auto;\" ><br>  <img src=\"/2017/09/09/note-reinforcement-learning/lec8_Integrating_Learning_and_Planning.png\" alt=\"Integrating Learning and Planning\" title=\"Integrating Learning and Planning\"><br></div>\n\n<h3 id=\"Exploration-and-Exploitation\"><a href=\"#Exploration-and-Exploitation\" class=\"headerlink\" title=\"Exploration and Exploitation\"></a>Exploration and Exploitation</h3><div style=\"width:800px; margin-left:auto; margin-right:auto;\" ><br>  <img src=\"/2017/09/09/note-reinforcement-learning/lec9_Exploration_and_Exploitation.png\" alt=\"Exploration and Exploitation\" title=\"Exploration and Exploitation\"><br></div>\n\n<h2 id=\"References\"><a href=\"#References\" class=\"headerlink\" title=\"References\"></a>References</h2><ul>\n<li><a href=\"http://www0.cs.ucl.ac.uk/staff/D.Silver/web/Teaching.html\"></a></li>\n<li><a href=\"http://people.inf.elte.hu/lorincz/Files/RL_2006/SuttonBook.pdf\"></a></li>\n</ul>\n"},{"title":"Scalable trust-region method for deep reinforcement learning using  Kronecker-factored approximation","date":"2018-02-26T06:30:42.000Z","description":["K-FACActor-Critic"],"_content":"\nKronecker-factored Approximate CurvatureK-FACActor Critic using Kronecker-factored Trust RegionACKTR\n\n## K-FAC\n\n- motivation\n\t+ Natural GradientNG\n\t\t+ **$x_1, \\dots, x_n$**\n\t\t\t1. e.g., $x \\sim q(x ; \\theta)$$q$$\\theta$e.g., $\\theta$1\n\t\t\t2. $L(\\theta) = \\log \\prod _i q(x_i ; \\theta)$\n\t\t\t3. e.g., SGD$\\theta = \\mathop{\\text{argmax}}_{\\theta} \\log \\prod _i q(x_i ; \\theta)$\n\t\t+ SGD****\n\t\t+ ****$q$$\\theta$\n\t\t$$\n\t\tq = \\mathop{\\text{argmax}}_{q} \\log \\prod _i q(x_i).\n\t\t$$$q_{\\text{new}}$$q_{\\text{old}}$\n\t\t+ $\\theta$$q$****$\\theta _{\\text{new}}$$\\theta _{\\text{old}}$$q_ {\\text{new}}$$q _{\\text{old}}$$\\theta$step size$q$step size****\n\t\t+ Natural Gradient$d$$\\theta$$d$i.e., $\\theta _{\\text{new}} = \\theta _{\\text{old}} + \\alpha d$$q(x ; \\theta)$**$q$step size**\n\t+ LevenbergMarquardtLM\n\t\t+ NG$q(x ; \\theta + d)$$q(x ; \\theta)$****$L(\\theta + d) > L(\\theta)$step sizeSGD\n\t\t+ Levenberg-Marquardt**NGD$q$step sizeSGD/**\n\t+ Kronecker-factored Approximate CurvatureK-FAC\n\t\t+ NGDLM$DIM(\\theta) \\times DIM(\\theta)$$G(\\theta)$$G(\\theta)x=g$****e.g., $q$$O(\\Vert \\theta \\Vert ^2)$\n\t\t+ K-FAC**$G(\\theta)$$G(\\theta) x=g$**NGDLM\n- idea\n\t+ NG\n\t\t- $d$$\\theta$$d$i.e., $\\theta _{\\text{new}} = \\theta _{\\text{old}} + \\alpha d$$q(x ; \\theta)$$L(\\theta + d) > L(\\theta)$\n\t\t$$\n\t\t\\begin{aligned}\n\t\t\\mathop{\\text{maximize }}_d & d^T \\nabla _ \\theta L(\\theta) \\\\\n\t\t\\text{subject to } & \\Vert d \\Vert _{G(\\theta)} ^2 < \\epsilon\n\t\t\\end{aligned},\n\t\t$$$\\Vert d \\Vert _{G(\\theta)} ^2 = d^T G(\\theta) d$$G(\\theta)$Fisher Information Matrix\n\t\t\t+ ****symmetric KL divergence$q$$\\theta$$d$$q(x;\\theta)$$KL(q(x ; \\theta) \\Vert q(x; \\theta + d))$$\\theta$$d$$q$\n\t\t\t+ ****$d$$L(\\theta + d) > L(\\theta)$\n\t\t\t+ $d$$d$\n\t\t- NG$d \\propto G(\\theta)^{-1} \\nabla L(\\theta)$$\\theta$$\\theta _{k+1} = \\theta _{k} + \\alpha _k G(\\theta)^{-1} \\nabla L(\\theta)$\n\t+ LM\n\t\t- $d$$d = (G(\\theta) + \\tau I)^{-1} \\nabla L(\\theta)$$\\tau$**NGDSGD**$\\tau$NGD$\\tau$SGD\n\t\t- $\\tau$$p$\n\t+ K-FAC\n\t\t- **Kronecker product**$G(\\theta)$****block0$G(\\theta)x = g$\n- more\n\t+ exponential average\n\t$$G_{n+1} = (1-\\epsilon) \\hat{G}_n + \\epsilon G_n \\Leftrightarrow G_{n+1} = (1-\\epsilon)( \\hat{G}_n + \\epsilon \\hat{G}_{n-1} + \\epsilon ^2 \\hat{G}_{n-2} + \\dots).\n\t$$\n\t+ K-FAC$q(y \\mid x ; \\theta) \\hat{q}(x)$\n\t+ LMK-FACi.e., $(G(\\theta) + \\tau I)^{-1}$\n- references\n\t+ [K-FAC tutorial](https://www.youtube.com/watch?v=FLV-MLPt3sU)\n\t+ [Kronecker product tutorial](https://hec.unil.ch/docs/files/23/100/handout1.pdf)\n\n## ACKTR\n\n- motivation\n\t+ K-FACactor-criticsample efficiency\n- idea\n\t+ actorstochastic policyactorK-FAC\n\t+ critic\n\t$$\n\t\\mathop{\\text{minimize}}_{\\theta} \\sum_i \\Vert f(s_i ; \\theta) - v_i \\Vert^2\n\t$$\n\t$$\n\t\\mathop{\\text{maximize}}_{\\theta} \\log \\prod _i p(v_i \\mid s_i ; \\theta).\n\t$$\n\t+ sharing parameter framework\n\t\t1. pair(a, v)\n\t\t2. actorcritic$p(a,v \\mid s ; \\theta) = \\pi(a \\mid s ; \\theta)p(v \\mid s ; \\theta)$\n\t\t3. $p(a, v ; \\theta)$\n\t+ trust regionK-FAC$\\theta$\n\t","source":"_posts/paper-acktr.md","raw":"---\ntitle: Scalable trust-region method for deep reinforcement learning using  Kronecker-factored approximation\ndate: 2018-02-26 14:30:42\ntags:\n\t- K-FAC\n\t- ACKTR\ncategories:\n\t- \ndescription:\n\t- K-FACActor-Critic\n\n---\n\nKronecker-factored Approximate CurvatureK-FACActor Critic using Kronecker-factored Trust RegionACKTR\n\n## K-FAC\n\n- motivation\n\t+ Natural GradientNG\n\t\t+ **$x_1, \\dots, x_n$**\n\t\t\t1. e.g., $x \\sim q(x ; \\theta)$$q$$\\theta$e.g., $\\theta$1\n\t\t\t2. $L(\\theta) = \\log \\prod _i q(x_i ; \\theta)$\n\t\t\t3. e.g., SGD$\\theta = \\mathop{\\text{argmax}}_{\\theta} \\log \\prod _i q(x_i ; \\theta)$\n\t\t+ SGD****\n\t\t+ ****$q$$\\theta$\n\t\t$$\n\t\tq = \\mathop{\\text{argmax}}_{q} \\log \\prod _i q(x_i).\n\t\t$$$q_{\\text{new}}$$q_{\\text{old}}$\n\t\t+ $\\theta$$q$****$\\theta _{\\text{new}}$$\\theta _{\\text{old}}$$q_ {\\text{new}}$$q _{\\text{old}}$$\\theta$step size$q$step size****\n\t\t+ Natural Gradient$d$$\\theta$$d$i.e., $\\theta _{\\text{new}} = \\theta _{\\text{old}} + \\alpha d$$q(x ; \\theta)$**$q$step size**\n\t+ LevenbergMarquardtLM\n\t\t+ NG$q(x ; \\theta + d)$$q(x ; \\theta)$****$L(\\theta + d) > L(\\theta)$step sizeSGD\n\t\t+ Levenberg-Marquardt**NGD$q$step sizeSGD/**\n\t+ Kronecker-factored Approximate CurvatureK-FAC\n\t\t+ NGDLM$DIM(\\theta) \\times DIM(\\theta)$$G(\\theta)$$G(\\theta)x=g$****e.g., $q$$O(\\Vert \\theta \\Vert ^2)$\n\t\t+ K-FAC**$G(\\theta)$$G(\\theta) x=g$**NGDLM\n- idea\n\t+ NG\n\t\t- $d$$\\theta$$d$i.e., $\\theta _{\\text{new}} = \\theta _{\\text{old}} + \\alpha d$$q(x ; \\theta)$$L(\\theta + d) > L(\\theta)$\n\t\t$$\n\t\t\\begin{aligned}\n\t\t\\mathop{\\text{maximize }}_d & d^T \\nabla _ \\theta L(\\theta) \\\\\n\t\t\\text{subject to } & \\Vert d \\Vert _{G(\\theta)} ^2 < \\epsilon\n\t\t\\end{aligned},\n\t\t$$$\\Vert d \\Vert _{G(\\theta)} ^2 = d^T G(\\theta) d$$G(\\theta)$Fisher Information Matrix\n\t\t\t+ ****symmetric KL divergence$q$$\\theta$$d$$q(x;\\theta)$$KL(q(x ; \\theta) \\Vert q(x; \\theta + d))$$\\theta$$d$$q$\n\t\t\t+ ****$d$$L(\\theta + d) > L(\\theta)$\n\t\t\t+ $d$$d$\n\t\t- NG$d \\propto G(\\theta)^{-1} \\nabla L(\\theta)$$\\theta$$\\theta _{k+1} = \\theta _{k} + \\alpha _k G(\\theta)^{-1} \\nabla L(\\theta)$\n\t+ LM\n\t\t- $d$$d = (G(\\theta) + \\tau I)^{-1} \\nabla L(\\theta)$$\\tau$**NGDSGD**$\\tau$NGD$\\tau$SGD\n\t\t- $\\tau$$p$\n\t+ K-FAC\n\t\t- **Kronecker product**$G(\\theta)$****block0$G(\\theta)x = g$\n- more\n\t+ exponential average\n\t$$G_{n+1} = (1-\\epsilon) \\hat{G}_n + \\epsilon G_n \\Leftrightarrow G_{n+1} = (1-\\epsilon)( \\hat{G}_n + \\epsilon \\hat{G}_{n-1} + \\epsilon ^2 \\hat{G}_{n-2} + \\dots).\n\t$$\n\t+ K-FAC$q(y \\mid x ; \\theta) \\hat{q}(x)$\n\t+ LMK-FACi.e., $(G(\\theta) + \\tau I)^{-1}$\n- references\n\t+ [K-FAC tutorial](https://www.youtube.com/watch?v=FLV-MLPt3sU)\n\t+ [Kronecker product tutorial](https://hec.unil.ch/docs/files/23/100/handout1.pdf)\n\n## ACKTR\n\n- motivation\n\t+ K-FACactor-criticsample efficiency\n- idea\n\t+ actorstochastic policyactorK-FAC\n\t+ critic\n\t$$\n\t\\mathop{\\text{minimize}}_{\\theta} \\sum_i \\Vert f(s_i ; \\theta) - v_i \\Vert^2\n\t$$\n\t$$\n\t\\mathop{\\text{maximize}}_{\\theta} \\log \\prod _i p(v_i \\mid s_i ; \\theta).\n\t$$\n\t+ sharing parameter framework\n\t\t1. pair(a, v)\n\t\t2. actorcritic$p(a,v \\mid s ; \\theta) = \\pi(a \\mid s ; \\theta)p(v \\mid s ; \\theta)$\n\t\t3. $p(a, v ; \\theta)$\n\t+ trust regionK-FAC$\\theta$\n\t","slug":"paper-acktr","published":1,"updated":"2024-08-13T16:03:47.864Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clzvf19250014eqwofyyfgerk","content":"<p>Kronecker-factored Approximate CurvatureK-FACActor Critic using Kronecker-factored Trust RegionACKTR</p>\n<h2 id=\"K-FAC\"><a href=\"#K-FAC\" class=\"headerlink\" title=\"K-FAC\"></a>K-FAC</h2><ul>\n<li>motivation<ul>\n<li>Natural GradientNG<ul>\n<li><strong>$x_1, \\dots, x_n$</strong><ol>\n<li>e.g., $x \\sim q(x ; \\theta)$$q$$\\theta$e.g., $\\theta$1</li>\n<li>$L(\\theta) = \\log \\prod _i q(x_i ; \\theta)$</li>\n<li>e.g., SGD$\\theta = \\mathop{\\text{argmax}}_{\\theta} \\log \\prod _i q(x_i ; \\theta)$</li>\n</ol>\n</li>\n<li>SGD<strong></strong></li>\n<li><strong></strong>$q$$\\theta$<br>$$<br>q = \\mathop{\\text{argmax}}_{q} \\log \\prod _i q(x_i).<br>$$$q_{\\text{new}}$$q_{\\text{old}}$</li>\n<li>$\\theta$$q$<strong></strong>$\\theta _{\\text{new}}$$\\theta _{\\text{old}}$$q_ {\\text{new}}$$q _{\\text{old}}$$\\theta$step size$q$step size<strong></strong></li>\n<li>Natural Gradient$d$$\\theta$$d$i.e., $\\theta _{\\text{new}} = \\theta _{\\text{old}} + \\alpha d$$q(x ; \\theta)$<strong>$q$step size</strong></li>\n</ul>\n</li>\n<li>LevenbergMarquardtLM<ul>\n<li>NG$q(x ; \\theta + d)$$q(x ; \\theta)$<strong></strong>$L(\\theta + d) &gt; L(\\theta)$step sizeSGD</li>\n<li>Levenberg-Marquardt<strong>NGD$q$step sizeSGD/</strong></li>\n</ul>\n</li>\n<li>Kronecker-factored Approximate CurvatureK-FAC<ul>\n<li>NGDLM$DIM(\\theta) \\times DIM(\\theta)$$G(\\theta)$$G(\\theta)x=g$<strong></strong>e.g., $q$$O(\\Vert \\theta \\Vert ^2)$</li>\n<li>K-FAC<strong>$G(\\theta)$$G(\\theta) x=g$</strong>NGDLM</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>idea<ul>\n<li>NG<ul>\n<li>$d$$\\theta$$d$i.e., $\\theta _{\\text{new}} = \\theta _{\\text{old}} + \\alpha d$$q(x ; \\theta)$$L(\\theta + d) &gt; L(\\theta)$<br>$$<br>\\begin{aligned}<br>\\mathop{\\text{maximize }}_d &amp; d^T \\nabla _ \\theta L(\\theta) \\\\<br>\\text{subject to } &amp; \\Vert d \\Vert _{G(\\theta)} ^2 &lt; \\epsilon<br>\\end{aligned},<br>$$$\\Vert d \\Vert _{G(\\theta)} ^2 = d^T G(\\theta) d$$G(\\theta)$Fisher Information Matrix<ul>\n<li><strong></strong>symmetric KL divergence$q$$\\theta$$d$$q(x;\\theta)$$KL(q(x ; \\theta) \\Vert q(x; \\theta + d))$$\\theta$$d$$q$</li>\n<li><strong></strong>$d$$L(\\theta + d) &gt; L(\\theta)$</li>\n<li>$d$$d$</li>\n</ul>\n</li>\n<li>NG$d \\propto G(\\theta)^{-1} \\nabla L(\\theta)$$\\theta$$\\theta _{k+1} = \\theta _{k} + \\alpha _k G(\\theta)^{-1} \\nabla L(\\theta)$</li>\n</ul>\n</li>\n<li>LM<ul>\n<li>$d$$d = (G(\\theta) + \\tau I)^{-1} \\nabla L(\\theta)$$\\tau$<strong>NGDSGD</strong>$\\tau$NGD$\\tau$SGD</li>\n<li>$\\tau$$p$</li>\n</ul>\n</li>\n<li>K-FAC<ul>\n<li><strong>Kronecker product</strong>$G(\\theta)$<strong></strong>block0$G(\\theta)x = g$</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>more<ul>\n<li>exponential average<br>$$G_{n+1} = (1-\\epsilon) \\hat{G}_n + \\epsilon G_n \\Leftrightarrow G_{n+1} = (1-\\epsilon)( \\hat{G}_n + \\epsilon \\hat{G}_{n-1} + \\epsilon ^2 \\hat{G}_{n-2} + \\dots).<br>$$</li>\n<li>K-FAC$q(y \\mid x ; \\theta) \\hat{q}(x)$</li>\n<li>LMK-FACi.e., $(G(\\theta) + \\tau I)^{-1}$</li>\n</ul>\n</li>\n<li>references<ul>\n<li><a href=\"https://www.youtube.com/watch?v=FLV-MLPt3sU\" target=\"_blank\" rel=\"external\">K-FAC tutorial</a></li>\n<li><a href=\"https://hec.unil.ch/docs/files/23/100/handout1.pdf\" target=\"_blank\" rel=\"external\">Kronecker product tutorial</a></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"ACKTR\"><a href=\"#ACKTR\" class=\"headerlink\" title=\"ACKTR\"></a>ACKTR</h2><ul>\n<li>motivation<ul>\n<li>K-FACactor-criticsample efficiency</li>\n</ul>\n</li>\n<li>idea<ul>\n<li>actorstochastic policyactorK-FAC</li>\n<li>critic<br>$$<br>\\mathop{\\text{minimize}}_{\\theta} \\sum_i \\Vert f(s_i ; \\theta) - v_i \\Vert^2<br>$$<br>$$<br>\\mathop{\\text{maximize}}_{\\theta} \\log \\prod _i p(v_i \\mid s_i ; \\theta).<br>$$</li>\n<li>sharing parameter framework<ol>\n<li>pair(a, v)</li>\n<li>actorcritic$p(a,v \\mid s ; \\theta) = \\pi(a \\mid s ; \\theta)p(v \\mid s ; \\theta)$</li>\n<li>$p(a, v ; \\theta)$</li>\n</ol>\n</li>\n<li>trust regionK-FAC$\\theta$</li>\n</ul>\n</li>\n</ul>\n","excerpt":"","more":"<p>Kronecker-factored Approximate CurvatureK-FACActor Critic using Kronecker-factored Trust RegionACKTR</p>\n<h2 id=\"K-FAC\"><a href=\"#K-FAC\" class=\"headerlink\" title=\"K-FAC\"></a>K-FAC</h2><ul>\n<li>motivation<ul>\n<li>Natural GradientNG<ul>\n<li><strong>$x_1, \\dots, x_n$</strong><ol>\n<li>e.g., $x \\sim q(x ; \\theta)$$q$$\\theta$e.g., $\\theta$1</li>\n<li>$L(\\theta) = \\log \\prod _i q(x_i ; \\theta)$</li>\n<li>e.g., SGD$\\theta = \\mathop{\\text{argmax}}_{\\theta} \\log \\prod _i q(x_i ; \\theta)$</li>\n</ol>\n</li>\n<li>SGD<strong></strong></li>\n<li><strong></strong>$q$$\\theta$<br>$$<br>q = \\mathop{\\text{argmax}}_{q} \\log \\prod _i q(x_i).<br>$$$q_{\\text{new}}$$q_{\\text{old}}$</li>\n<li>$\\theta$$q$<strong></strong>$\\theta _{\\text{new}}$$\\theta _{\\text{old}}$$q_ {\\text{new}}$$q _{\\text{old}}$$\\theta$step size$q$step size<strong></strong></li>\n<li>Natural Gradient$d$$\\theta$$d$i.e., $\\theta _{\\text{new}} = \\theta _{\\text{old}} + \\alpha d$$q(x ; \\theta)$<strong>$q$step size</strong></li>\n</ul>\n</li>\n<li>LevenbergMarquardtLM<ul>\n<li>NG$q(x ; \\theta + d)$$q(x ; \\theta)$<strong></strong>$L(\\theta + d) &gt; L(\\theta)$step sizeSGD</li>\n<li>Levenberg-Marquardt<strong>NGD$q$step sizeSGD/</strong></li>\n</ul>\n</li>\n<li>Kronecker-factored Approximate CurvatureK-FAC<ul>\n<li>NGDLM$DIM(\\theta) \\times DIM(\\theta)$$G(\\theta)$$G(\\theta)x=g$<strong></strong>e.g., $q$$O(\\Vert \\theta \\Vert ^2)$</li>\n<li>K-FAC<strong>$G(\\theta)$$G(\\theta) x=g$</strong>NGDLM</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>idea<ul>\n<li>NG<ul>\n<li>$d$$\\theta$$d$i.e., $\\theta _{\\text{new}} = \\theta _{\\text{old}} + \\alpha d$$q(x ; \\theta)$$L(\\theta + d) &gt; L(\\theta)$<br>$$<br>\\begin{aligned}<br>\\mathop{\\text{maximize }}_d &amp; d^T \\nabla _ \\theta L(\\theta) \\\\<br>\\text{subject to } &amp; \\Vert d \\Vert _{G(\\theta)} ^2 &lt; \\epsilon<br>\\end{aligned},<br>$$$\\Vert d \\Vert _{G(\\theta)} ^2 = d^T G(\\theta) d$$G(\\theta)$Fisher Information Matrix<ul>\n<li><strong></strong>symmetric KL divergence$q$$\\theta$$d$$q(x;\\theta)$$KL(q(x ; \\theta) \\Vert q(x; \\theta + d))$$\\theta$$d$$q$</li>\n<li><strong></strong>$d$$L(\\theta + d) &gt; L(\\theta)$</li>\n<li>$d$$d$</li>\n</ul>\n</li>\n<li>NG$d \\propto G(\\theta)^{-1} \\nabla L(\\theta)$$\\theta$$\\theta _{k+1} = \\theta _{k} + \\alpha _k G(\\theta)^{-1} \\nabla L(\\theta)$</li>\n</ul>\n</li>\n<li>LM<ul>\n<li>$d$$d = (G(\\theta) + \\tau I)^{-1} \\nabla L(\\theta)$$\\tau$<strong>NGDSGD</strong>$\\tau$NGD$\\tau$SGD</li>\n<li>$\\tau$$p$</li>\n</ul>\n</li>\n<li>K-FAC<ul>\n<li><strong>Kronecker product</strong>$G(\\theta)$<strong></strong>block0$G(\\theta)x = g$</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>more<ul>\n<li>exponential average<br>$$G_{n+1} = (1-\\epsilon) \\hat{G}_n + \\epsilon G_n \\Leftrightarrow G_{n+1} = (1-\\epsilon)( \\hat{G}_n + \\epsilon \\hat{G}_{n-1} + \\epsilon ^2 \\hat{G}_{n-2} + \\dots).<br>$$</li>\n<li>K-FAC$q(y \\mid x ; \\theta) \\hat{q}(x)$</li>\n<li>LMK-FACi.e., $(G(\\theta) + \\tau I)^{-1}$</li>\n</ul>\n</li>\n<li>references<ul>\n<li><a href=\"https://www.youtube.com/watch?v=FLV-MLPt3sU\">K-FAC tutorial</a></li>\n<li><a href=\"https://hec.unil.ch/docs/files/23/100/handout1.pdf\">Kronecker product tutorial</a></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"ACKTR\"><a href=\"#ACKTR\" class=\"headerlink\" title=\"ACKTR\"></a>ACKTR</h2><ul>\n<li>motivation<ul>\n<li>K-FACactor-criticsample efficiency</li>\n</ul>\n</li>\n<li>idea<ul>\n<li>actorstochastic policyactorK-FAC</li>\n<li>critic<br>$$<br>\\mathop{\\text{minimize}}_{\\theta} \\sum_i \\Vert f(s_i ; \\theta) - v_i \\Vert^2<br>$$<br>$$<br>\\mathop{\\text{maximize}}_{\\theta} \\log \\prod _i p(v_i \\mid s_i ; \\theta).<br>$$</li>\n<li>sharing parameter framework<ol>\n<li>pair(a, v)</li>\n<li>actorcritic$p(a,v \\mid s ; \\theta) = \\pi(a \\mid s ; \\theta)p(v \\mid s ; \\theta)$</li>\n<li>$p(a, v ; \\theta)$</li>\n</ol>\n</li>\n<li>trust regionK-FAC$\\theta$</li>\n</ul>\n</li>\n</ul>\n"},{"title":"Reciprocal n-body Collision Avoidance","description":[""],"date":"2017-01-14T13:41:51.000Z","_content":"\n\n## \n\nORCAA\n\n- ****AB$r\\_A$$r\\_B$$p\\_A$$p\\_B$$v\\_A$$v\\_B$A$v\\_A^{pref}$$v\\_A^{max}$\n- ****$v\\_A^{\\prime}$\n- ****ORCA********$v\\_A^{\\prime}$$v\\_B^{\\prime}$\n\nRVOORCAVO\n\n- ********VORVO\n- ********VORVO\n\n## $\\tau$\n\n1. (a)****\n    + $\\bf{p\\_B}$$r\\_B$$B$\n    + $\\bf{p\\_A}$$r\\_A$$A$\n2. (b)$\\tau$********\n    1. ****(a)$A$$A$\n    2. ****$B$$v\\_A * \\tau$$A$$B$VO$\\frac{p\\_{}}{\\tau}$\n    3. $VO^{\\tau}\\_{A|B}$\n3. (c)**$B$$V\\_B$**$B$$VO^{\\tau}\\_{A|B}$$CA^{\\tau}\\_{A|B}(V\\_B)$\n\n<div style=\"width:800px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img time_interval.png  %}\n</div>\n\n\n\n- $D({\\bf{p}},r)$$p$$r$\n $$D({\\bf{p}},r)=\\\\{ \\ {\\bf{q}} \\ | \\ \\\\| {\\bf{q}} - {\\bf{p}} \\\\| < r \\ \\\\}$$\n\n- $VO^{\\tau}\\_{A|B}$\n $$VO^{\\tau}\\_{A|B} = \\\\{ \\ {\\bf{v}} \\ | \\ \\exists t \\in [0, \\tau], t {\\bf{v}} \\in D({\\bf{p\\_B}} -{\\bf{p\\_A}}, r\\_A+r\\_B) \\  \\\\}$$\n\n- $CA^{\\tau}\\_{A|B}(V\\_B)$$B$$V\\_B$\n $$CA^{\\tau}\\_{A|B}(V\\_B)=\\\\{ \\ {\\bf{v}} \\ | \\ {\\bf{v}} \\notin VO^{\\tau}\\_{A|B} \\oplus V\\_B \\ \\\\}\\oplus$$\n\nVO********\n\np.s. VO{% post_link paper-rvo Reciprocal Velocity Obstacles for Real-Time Multi-Agent Navigation %}\n\n## ORCA\n\nORCAOptimal Reciprocal Collision Avoidance$CA^{\\tau}\\_{A|B}(V\\_B)$\n\n**$v^{opt}$**$V\\_A$$V\\_B$\n\n- **Reciprocally collision avoiding**$CA$\n$$V\\_A \\subseteq CA^{\\tau}\\_{A|B}(V\\_B) \\land V\\_B \\subseteq CA^{\\tau}\\_{B|A}(V\\_A)$$\n- **Reciprocally maximal**$V\\_A$$V\\_B$\n$$V\\_A = CA^{\\tau}\\_{A|B}(V\\_B) \\land V\\_B = CA^{\\tau}\\_{B|A}(V\\_A)$$\n- **$v^{opt}$**$v^{opt}$\n\t+ $v^{opt}$\n- **$v^{opt}$**$A$$B$$v^{opt}\\_A$$v^{opt}\\_B$\n\t+ $A$$v^{opt}\\_A$$n\\_A$\n\t+ $B$$v^{opt}\\_B$$n\\_B$\n\t+ $n\\_A = n\\_B$\n\n\n$$| ORCA^{\\tau}\\_{A|B} \\cap D({\\bf{v^{opt}\\_A}}, r) | = | ORCA^{\\tau}\\_{B|A} \\cap D({\\bf{v^{opt}\\_B}}, r) | \\ge min(|V\\_A \\cap D({\\bf{v^{opt}\\_A}}, r)|, |V\\_B \\cap D({\\bf{v^{opt}\\_B}}, r)|)$$\n\n\n\n- $ORCA^{\\tau}\\_{A|B}$$ORCA^{\\tau}\\_{B|A}$reciprocally maximal\n$$ORCA^{\\tau}\\_{A|B} = CA^{\\tau}\\_{A|B}(ORCA^{\\tau}\\_{B|A}) \\land ORCA^{\\tau}\\_{B|A} = CA^{\\tau}\\_{B|A}(ORCA^{\\tau}\\_{A|B})$$\n- $V\\_A$$V\\_B$reciprocally collision avoiding\n$$V\\_A \\subseteq CA^{\\tau}\\_{A|B}(V\\_B) \\land V\\_B \\subseteq CA^{\\tau}\\_{B|A}(V\\_A)$$\n- $r$\n- $D({\\bf{v^{opt}}},r)$$v^{opt}$\n\n## ORCA\n\nORCA\n\n$A$$A$$\\bf{v^{opt}\\_B}$\n\n1. ****${\\bf{v^{opt}\\_A}}-{\\bf{v^{opt}\\_B}}$\n2. $VO^{\\tau}\\_{A|B}$****${\\bf{v^{opt}\\_A}}-{\\bf{v^{opt}\\_B}}$****$\\bf{x}$\n3. ${\\bf{v^{opt}\\_A}}-{\\bf{v^{opt}\\_B}}$$\\bf{x}$$\\bf{u}$\n4. ${\\bf{v^{opt}\\_A}} + \\frac{1}{2}{\\bf{u}}$\n5. ${\\bf{v^{opt}\\_A}} + \\frac{1}{2}{\\bf{u}}$$ORCA^{\\tau}\\_{A|B}$\n\n<div style=\"width:600px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img orca_sol.png ORCA %}\n</div>\n\n\n\n- **Reciprocally collision avoiding**\n\t+ ${\\bf{v^{opt}\\_A}}-{\\bf{v^{opt}\\_B}}+{\\bf{u}}$$VO^{\\tau}\\_{A|B}$\n\t+ $A$${\\bf{v^{opt}\\_A}} + \\frac{1}{2}{\\bf{u}}$\n\t+ $B$${\\bf{v^{opt}\\_B}} - \\frac{1}{2}{\\bf{u}}$\n\t+ ${\\bf{v^{opt}\\_A}} + \\frac{1}{2}{\\bf{u}} - ({\\bf{v^{opt}\\_B}} - \\frac{1}{2}{\\bf{u}}) = {\\bf{v^{opt}\\_A}}-{\\bf{v^{opt}\\_B}}+{\\bf{u}}$$VO^{\\tau}\\_{A|B}$\n- **Reciprocally maximal**\n\t+ $ORCA^{\\tau}\\_{A|B} = CA^{\\tau}\\_{A|B}(ORCA^{\\tau}\\_{B|A})$\n\t+ $CA^{\\tau}\\_{A|B}(ORCA^{\\tau}\\_{B|A})$\n\t\t* $\\tau$$CA^{\\tau}\\_{A|B}(ORCA^{\\tau}\\_{B|A})$\n\t\t\t1. ${\\bf{v^{opt}\\_B}}-\\frac{1}{2}{\\bf{u}}$\n\t\t\t2. $ORCA^{\\tau}\\_{B|A}$\n\t\t* $\\bf{v^{opt}\\_B}$${\\bf{v^{opt}\\_A}}-{\\bf{v^{opt}\\_B}}$$\\bf{v^{opt}\\_A}$$\\bf{x}$$\\bf{v^{opt}\\_A}$$ORCA^{\\tau}\\_{A|B}$\n\t\t* $-{\\frac{1}{2}\\bf{u}}$$\\bf{x}$$ORCA^{\\tau}\\_{A|B}$\n\t\t* $ORCA^{\\tau}\\_{B|A}$$CA^{\\tau}\\_{A|B}(ORCA^{\\tau}\\_{B|A})$\n\t+ $CA^{\\tau}\\_{A|B}(ORCA^{\\tau}\\_{B|A})$$ORCA^{\\tau}\\_{A|B}$\n- **$v^{opt}$**\n\t+ $\\bf{x}$\n\t+ p.s. \n- **$v^{opt}$**\n\t+ $\\bf{v^{opt}\\_A}$$ORCA^{\\tau}\\_{A|B}$$\\bf{v^{opt}\\_B}$$ORCA^{\\tau}\\_{B|A}$\n\t+ \n\nORCA\n\n$$ORCA^{\\tau}\\_{A|B} = \\\\{ \\ {\\bf{v}} \\ | \\ ({\\bf{v}} - ({\\bf{v^{opt}\\_A}} + \\frac{1}{2}{\\bf{u}})) \\cdot {\\bf{n}} \\ge 0 \\  \\\\}$$\n\n\n\n- ${\\bf{u}}$\n$${\\bf{u}} = (\\mathop{argmin}\\_{ {\\bf{v}} \\in \\partial VO^{\\tau}\\_{A|B}}{\\\\| {\\bf{v}} - ( {\\bf{v^{opt}\\_A}} - {\\bf{v^{opt}\\_B}} )  \\\\|}) - ({\\bf{v^{opt}\\_A}} - {\\bf{v^{opt}\\_B}})$$\n- ${\\bf{n}}$${\\bf{u}}$\n- ${\\bf{v}} \\cdot {\\bf{n}} \\ge 0$\n\n## ORCA\n\n1. agents$ORCA$$ORCA^{\\tau}\\_{A}$\n$$ORCA^{\\tau}\\_{A}=D({\\bf{0}}, {\\bf{v^{max}\\_A}}) \\cap \\mathop{\\bigcap}\\_{B \\ne A}{ORCA^{\\tau}\\_{A|B}}$$\n2. ${\\bf{v^{new}\\_A}}$\n$${\\bf{v^{new}\\_A}} = \\mathop{argmin}\\_{ {\\bf{v}} \\in ORCA^{\\tau}\\_A}{\\\\| {\\bf{v}} - {\\bf{v^{opt}\\_A}} \\\\|}$$\n\n<div style=\"width:600px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img orca_app.png ORCA %}\n</div>\n\nORCA$ORCA^{\\tau}\\_{A}$$\\\\| {\\bf{v}} - {\\bf{v^{opt}\\_A}} \\\\|$\n\n## ${\\bf{v^{opt}}}$\n\n${\\bf{v\\_A}} = {\\bf{0}}$$ORCA^{\\tau}\\_{A|B}$$\\frac{1}{2}{\\bf{u}}$\n\n${\\bf{v^{opt}}}$$ORCA^{\\tau}\\_{A}$\n\n- ${\\bf{0}}$\n\t+ (c)\n\t+ \n- ${\\bf{v^{pref}}}$\n\t+ (b)${\\bf{v^{pref}}}$\n\t+ ${\\bf{v^{pref}}}$\n- ${\\bf{v\\_{curr}}}$\n\t+ \n\n<div style=\"width:800px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img opt.png opt %}\n</div>\n\n## \n\n\n\n$$ {\\bf{v^{new}\\_{A}}} = \\mathop{argmin}\\_{ {\\bf{v}} \\in D({\\bf{0}}, {\\bf{v^{max}\\_A}})} {\\mathop{max}\\_{B \\ne A}{\\ d\\_{A|B}({\\bf{v}})}} $$\n\n\n\n1. $d\\_{A|B}({\\bf{v}})$${\\bf{v}}$${\\bf{v}}$ORCA${\\bf{v}}$ORCA\n2. ${\\mathop{max}\\_{B \\ne A}{\\ d\\_{A|B}({\\bf{v}})}}$${\\bf{v}}$\n3. $\\mathop{argmin}\\_{ {\\bf{v}} \\in D({\\bf{0}}, {\\bf{v^{max}\\_A}})} {\\mathop{max}\\_{B \\ne A}{\\ d\\_{A|B}({\\bf{v}})}}$\n\n## \n- \n\t+ ****\n\t+ ****\n\n## References\n\n- [Reciprocal n-body Collision Avoidance](http://gamma.cs.unc.edu/ORCA/publications/ORCA.pdf)\n","source":"_posts/paper-orca.md","raw":"---\ntitle: Reciprocal n-body Collision Avoidance\ntags:\n  - ORCA\ndescription:\n  - \ncategories:\n  - \ndate: 2017-01-14 21:41:51\n---\n\n\n## \n\nORCAA\n\n- ****AB$r\\_A$$r\\_B$$p\\_A$$p\\_B$$v\\_A$$v\\_B$A$v\\_A^{pref}$$v\\_A^{max}$\n- ****$v\\_A^{\\prime}$\n- ****ORCA********$v\\_A^{\\prime}$$v\\_B^{\\prime}$\n\nRVOORCAVO\n\n- ********VORVO\n- ********VORVO\n\n## $\\tau$\n\n1. (a)****\n    + $\\bf{p\\_B}$$r\\_B$$B$\n    + $\\bf{p\\_A}$$r\\_A$$A$\n2. (b)$\\tau$********\n    1. ****(a)$A$$A$\n    2. ****$B$$v\\_A * \\tau$$A$$B$VO$\\frac{p\\_{}}{\\tau}$\n    3. $VO^{\\tau}\\_{A|B}$\n3. (c)**$B$$V\\_B$**$B$$VO^{\\tau}\\_{A|B}$$CA^{\\tau}\\_{A|B}(V\\_B)$\n\n<div style=\"width:800px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img time_interval.png  %}\n</div>\n\n\n\n- $D({\\bf{p}},r)$$p$$r$\n $$D({\\bf{p}},r)=\\\\{ \\ {\\bf{q}} \\ | \\ \\\\| {\\bf{q}} - {\\bf{p}} \\\\| < r \\ \\\\}$$\n\n- $VO^{\\tau}\\_{A|B}$\n $$VO^{\\tau}\\_{A|B} = \\\\{ \\ {\\bf{v}} \\ | \\ \\exists t \\in [0, \\tau], t {\\bf{v}} \\in D({\\bf{p\\_B}} -{\\bf{p\\_A}}, r\\_A+r\\_B) \\  \\\\}$$\n\n- $CA^{\\tau}\\_{A|B}(V\\_B)$$B$$V\\_B$\n $$CA^{\\tau}\\_{A|B}(V\\_B)=\\\\{ \\ {\\bf{v}} \\ | \\ {\\bf{v}} \\notin VO^{\\tau}\\_{A|B} \\oplus V\\_B \\ \\\\}\\oplus$$\n\nVO********\n\np.s. VO{% post_link paper-rvo Reciprocal Velocity Obstacles for Real-Time Multi-Agent Navigation %}\n\n## ORCA\n\nORCAOptimal Reciprocal Collision Avoidance$CA^{\\tau}\\_{A|B}(V\\_B)$\n\n**$v^{opt}$**$V\\_A$$V\\_B$\n\n- **Reciprocally collision avoiding**$CA$\n$$V\\_A \\subseteq CA^{\\tau}\\_{A|B}(V\\_B) \\land V\\_B \\subseteq CA^{\\tau}\\_{B|A}(V\\_A)$$\n- **Reciprocally maximal**$V\\_A$$V\\_B$\n$$V\\_A = CA^{\\tau}\\_{A|B}(V\\_B) \\land V\\_B = CA^{\\tau}\\_{B|A}(V\\_A)$$\n- **$v^{opt}$**$v^{opt}$\n\t+ $v^{opt}$\n- **$v^{opt}$**$A$$B$$v^{opt}\\_A$$v^{opt}\\_B$\n\t+ $A$$v^{opt}\\_A$$n\\_A$\n\t+ $B$$v^{opt}\\_B$$n\\_B$\n\t+ $n\\_A = n\\_B$\n\n\n$$| ORCA^{\\tau}\\_{A|B} \\cap D({\\bf{v^{opt}\\_A}}, r) | = | ORCA^{\\tau}\\_{B|A} \\cap D({\\bf{v^{opt}\\_B}}, r) | \\ge min(|V\\_A \\cap D({\\bf{v^{opt}\\_A}}, r)|, |V\\_B \\cap D({\\bf{v^{opt}\\_B}}, r)|)$$\n\n\n\n- $ORCA^{\\tau}\\_{A|B}$$ORCA^{\\tau}\\_{B|A}$reciprocally maximal\n$$ORCA^{\\tau}\\_{A|B} = CA^{\\tau}\\_{A|B}(ORCA^{\\tau}\\_{B|A}) \\land ORCA^{\\tau}\\_{B|A} = CA^{\\tau}\\_{B|A}(ORCA^{\\tau}\\_{A|B})$$\n- $V\\_A$$V\\_B$reciprocally collision avoiding\n$$V\\_A \\subseteq CA^{\\tau}\\_{A|B}(V\\_B) \\land V\\_B \\subseteq CA^{\\tau}\\_{B|A}(V\\_A)$$\n- $r$\n- $D({\\bf{v^{opt}}},r)$$v^{opt}$\n\n## ORCA\n\nORCA\n\n$A$$A$$\\bf{v^{opt}\\_B}$\n\n1. ****${\\bf{v^{opt}\\_A}}-{\\bf{v^{opt}\\_B}}$\n2. $VO^{\\tau}\\_{A|B}$****${\\bf{v^{opt}\\_A}}-{\\bf{v^{opt}\\_B}}$****$\\bf{x}$\n3. ${\\bf{v^{opt}\\_A}}-{\\bf{v^{opt}\\_B}}$$\\bf{x}$$\\bf{u}$\n4. ${\\bf{v^{opt}\\_A}} + \\frac{1}{2}{\\bf{u}}$\n5. ${\\bf{v^{opt}\\_A}} + \\frac{1}{2}{\\bf{u}}$$ORCA^{\\tau}\\_{A|B}$\n\n<div style=\"width:600px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img orca_sol.png ORCA %}\n</div>\n\n\n\n- **Reciprocally collision avoiding**\n\t+ ${\\bf{v^{opt}\\_A}}-{\\bf{v^{opt}\\_B}}+{\\bf{u}}$$VO^{\\tau}\\_{A|B}$\n\t+ $A$${\\bf{v^{opt}\\_A}} + \\frac{1}{2}{\\bf{u}}$\n\t+ $B$${\\bf{v^{opt}\\_B}} - \\frac{1}{2}{\\bf{u}}$\n\t+ ${\\bf{v^{opt}\\_A}} + \\frac{1}{2}{\\bf{u}} - ({\\bf{v^{opt}\\_B}} - \\frac{1}{2}{\\bf{u}}) = {\\bf{v^{opt}\\_A}}-{\\bf{v^{opt}\\_B}}+{\\bf{u}}$$VO^{\\tau}\\_{A|B}$\n- **Reciprocally maximal**\n\t+ $ORCA^{\\tau}\\_{A|B} = CA^{\\tau}\\_{A|B}(ORCA^{\\tau}\\_{B|A})$\n\t+ $CA^{\\tau}\\_{A|B}(ORCA^{\\tau}\\_{B|A})$\n\t\t* $\\tau$$CA^{\\tau}\\_{A|B}(ORCA^{\\tau}\\_{B|A})$\n\t\t\t1. ${\\bf{v^{opt}\\_B}}-\\frac{1}{2}{\\bf{u}}$\n\t\t\t2. $ORCA^{\\tau}\\_{B|A}$\n\t\t* $\\bf{v^{opt}\\_B}$${\\bf{v^{opt}\\_A}}-{\\bf{v^{opt}\\_B}}$$\\bf{v^{opt}\\_A}$$\\bf{x}$$\\bf{v^{opt}\\_A}$$ORCA^{\\tau}\\_{A|B}$\n\t\t* $-{\\frac{1}{2}\\bf{u}}$$\\bf{x}$$ORCA^{\\tau}\\_{A|B}$\n\t\t* $ORCA^{\\tau}\\_{B|A}$$CA^{\\tau}\\_{A|B}(ORCA^{\\tau}\\_{B|A})$\n\t+ $CA^{\\tau}\\_{A|B}(ORCA^{\\tau}\\_{B|A})$$ORCA^{\\tau}\\_{A|B}$\n- **$v^{opt}$**\n\t+ $\\bf{x}$\n\t+ p.s. \n- **$v^{opt}$**\n\t+ $\\bf{v^{opt}\\_A}$$ORCA^{\\tau}\\_{A|B}$$\\bf{v^{opt}\\_B}$$ORCA^{\\tau}\\_{B|A}$\n\t+ \n\nORCA\n\n$$ORCA^{\\tau}\\_{A|B} = \\\\{ \\ {\\bf{v}} \\ | \\ ({\\bf{v}} - ({\\bf{v^{opt}\\_A}} + \\frac{1}{2}{\\bf{u}})) \\cdot {\\bf{n}} \\ge 0 \\  \\\\}$$\n\n\n\n- ${\\bf{u}}$\n$${\\bf{u}} = (\\mathop{argmin}\\_{ {\\bf{v}} \\in \\partial VO^{\\tau}\\_{A|B}}{\\\\| {\\bf{v}} - ( {\\bf{v^{opt}\\_A}} - {\\bf{v^{opt}\\_B}} )  \\\\|}) - ({\\bf{v^{opt}\\_A}} - {\\bf{v^{opt}\\_B}})$$\n- ${\\bf{n}}$${\\bf{u}}$\n- ${\\bf{v}} \\cdot {\\bf{n}} \\ge 0$\n\n## ORCA\n\n1. agents$ORCA$$ORCA^{\\tau}\\_{A}$\n$$ORCA^{\\tau}\\_{A}=D({\\bf{0}}, {\\bf{v^{max}\\_A}}) \\cap \\mathop{\\bigcap}\\_{B \\ne A}{ORCA^{\\tau}\\_{A|B}}$$\n2. ${\\bf{v^{new}\\_A}}$\n$${\\bf{v^{new}\\_A}} = \\mathop{argmin}\\_{ {\\bf{v}} \\in ORCA^{\\tau}\\_A}{\\\\| {\\bf{v}} - {\\bf{v^{opt}\\_A}} \\\\|}$$\n\n<div style=\"width:600px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img orca_app.png ORCA %}\n</div>\n\nORCA$ORCA^{\\tau}\\_{A}$$\\\\| {\\bf{v}} - {\\bf{v^{opt}\\_A}} \\\\|$\n\n## ${\\bf{v^{opt}}}$\n\n${\\bf{v\\_A}} = {\\bf{0}}$$ORCA^{\\tau}\\_{A|B}$$\\frac{1}{2}{\\bf{u}}$\n\n${\\bf{v^{opt}}}$$ORCA^{\\tau}\\_{A}$\n\n- ${\\bf{0}}$\n\t+ (c)\n\t+ \n- ${\\bf{v^{pref}}}$\n\t+ (b)${\\bf{v^{pref}}}$\n\t+ ${\\bf{v^{pref}}}$\n- ${\\bf{v\\_{curr}}}$\n\t+ \n\n<div style=\"width:800px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img opt.png opt %}\n</div>\n\n## \n\n\n\n$$ {\\bf{v^{new}\\_{A}}} = \\mathop{argmin}\\_{ {\\bf{v}} \\in D({\\bf{0}}, {\\bf{v^{max}\\_A}})} {\\mathop{max}\\_{B \\ne A}{\\ d\\_{A|B}({\\bf{v}})}} $$\n\n\n\n1. $d\\_{A|B}({\\bf{v}})$${\\bf{v}}$${\\bf{v}}$ORCA${\\bf{v}}$ORCA\n2. ${\\mathop{max}\\_{B \\ne A}{\\ d\\_{A|B}({\\bf{v}})}}$${\\bf{v}}$\n3. $\\mathop{argmin}\\_{ {\\bf{v}} \\in D({\\bf{0}}, {\\bf{v^{max}\\_A}})} {\\mathop{max}\\_{B \\ne A}{\\ d\\_{A|B}({\\bf{v}})}}$\n\n## \n- \n\t+ ****\n\t+ ****\n\n## References\n\n- [Reciprocal n-body Collision Avoidance](http://gamma.cs.unc.edu/ORCA/publications/ORCA.pdf)\n","slug":"paper-orca","published":1,"updated":"2024-08-13T16:03:47.864Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clzvf19270016eqwolnapvyjd","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>ORCAA</p>\n<ul>\n<li><strong></strong>AB$r_A$$r_B$$p_A$$p_B$$v_A$$v_B$A$v_A^{pref}$$v_A^{max}$</li>\n<li><strong></strong>$v_A^{\\prime}$</li>\n<li><strong></strong>ORCA<strong></strong><strong></strong>$v_A^{\\prime}$$v_B^{\\prime}$</li>\n</ul>\n<p>RVOORCAVO</p>\n<ul>\n<li><strong></strong><strong></strong>VORVO</li>\n<li><strong></strong><strong></strong>VORVO</li>\n</ul>\n<h2 id=\"-tau\"><a href=\"#-tau\" class=\"headerlink\" title=\"$\\tau$\"></a>$\\tau$</h2><ol>\n<li>(a)<strong></strong><ul>\n<li>$\\bf{p_B}$$r_B$$B$</li>\n<li>$\\bf{p_A}$$r_A$$A$</li>\n</ul>\n</li>\n<li>(b)$\\tau$<strong></strong><strong></strong><ol>\n<li><strong></strong>(a)$A$$A$</li>\n<li><strong></strong>$B$$v_A * \\tau$$A$$B$VO$\\frac{p_{}}{\\tau}$</li>\n<li>$VO^{\\tau}_{A|B}$</li>\n</ol>\n</li>\n<li>(c)<strong>$B$$V_B$</strong>$B$$VO^{\\tau}_{A|B}$$CA^{\\tau}_{A|B}(V_B)$</li>\n</ol>\n<div style=\"width:800px; margin-left:auto; margin-right:auto;\"><br>  <img src=\"/2017/01/14/paper-orca/time_interval.png\" alt=\"\" title=\"\"><br></div>\n\n<p></p>\n<ul>\n<li><p>$D({\\bf{p}},r)$$p$$r$<br>$$D({\\bf{p}},r)=\\{  {\\bf{q}}  |  \\| {\\bf{q}} - {\\bf{p}} \\| &lt; r  \\}$$</p>\n</li>\n<li><p>$VO^{\\tau}_{A|B}$<br>$$VO^{\\tau}_{A|B} = \\{  {\\bf{v}}  |  \\exists t \\in [0, \\tau], t {\\bf{v}} \\in D({\\bf{p_B}} -{\\bf{p_A}}, r_A+r_B)   \\}$$</p>\n</li>\n<li><p>$CA^{\\tau}_{A|B}(V_B)$$B$$V_B$<br>$$CA^{\\tau}_{A|B}(V_B)=\\{  {\\bf{v}}  |  {\\bf{v}} \\notin VO^{\\tau}_{A|B} \\oplus V_B  \\}\\oplus$$</p>\n</li>\n</ul>\n<p>VO<strong></strong><strong></strong></p>\n<p>p.s. VO<a href=\"/2017/01/13/paper-rvo/\" title=\"Reciprocal Velocity Obstacles for Real-Time Multi-Agent Navigation\">Reciprocal Velocity Obstacles for Real-Time Multi-Agent Navigation</a></p>\n<h2 id=\"ORCA\"><a href=\"#ORCA\" class=\"headerlink\" title=\"ORCA\"></a>ORCA</h2><p>ORCAOptimal Reciprocal Collision Avoidance$CA^{\\tau}_{A|B}(V_B)$</p>\n<p><strong>$v^{opt}$</strong>$V_A$$V_B$</p>\n<ul>\n<li><strong>Reciprocally collision avoiding</strong>$CA$<br>$$V_A \\subseteq CA^{\\tau}_{A|B}(V_B) \\land V_B \\subseteq CA^{\\tau}_{B|A}(V_A)$$</li>\n<li><strong>Reciprocally maximal</strong>$V_A$$V_B$<br>$$V_A = CA^{\\tau}_{A|B}(V_B) \\land V_B = CA^{\\tau}_{B|A}(V_A)$$</li>\n<li><strong>$v^{opt}$</strong>$v^{opt}$<ul>\n<li>$v^{opt}$</li>\n</ul>\n</li>\n<li><strong>$v^{opt}$</strong>$A$$B$$v^{opt}_A$$v^{opt}_B$<ul>\n<li>$A$$v^{opt}_A$$n_A$</li>\n<li>$B$$v^{opt}_B$$n_B$</li>\n<li>$n_A = n_B$</li>\n</ul>\n</li>\n</ul>\n<p><br>$$| ORCA^{\\tau}_{A|B} \\cap D({\\bf{v^{opt}_A}}, r) | = | ORCA^{\\tau}_{B|A} \\cap D({\\bf{v^{opt}_B}}, r) | \\ge min(|V_A \\cap D({\\bf{v^{opt}_A}}, r)|, |V_B \\cap D({\\bf{v^{opt}_B}}, r)|)$$</p>\n<p></p>\n<ul>\n<li>$ORCA^{\\tau}_{A|B}$$ORCA^{\\tau}_{B|A}$reciprocally maximal<br>$$ORCA^{\\tau}_{A|B} = CA^{\\tau}_{A|B}(ORCA^{\\tau}_{B|A}) \\land ORCA^{\\tau}_{B|A} = CA^{\\tau}_{B|A}(ORCA^{\\tau}_{A|B})$$</li>\n<li>$V_A$$V_B$reciprocally collision avoiding<br>$$V_A \\subseteq CA^{\\tau}_{A|B}(V_B) \\land V_B \\subseteq CA^{\\tau}_{B|A}(V_A)$$</li>\n<li>$r$</li>\n<li>$D({\\bf{v^{opt}}},r)$$v^{opt}$</li>\n</ul>\n<h2 id=\"ORCA\"><a href=\"#ORCA\" class=\"headerlink\" title=\"ORCA\"></a>ORCA</h2><p>ORCA</p>\n<p>$A$$A$$\\bf{v^{opt}_B}$</p>\n<ol>\n<li><strong></strong>${\\bf{v^{opt}_A}}-{\\bf{v^{opt}_B}}$</li>\n<li>$VO^{\\tau}_{A|B}$<strong></strong>${\\bf{v^{opt}_A}}-{\\bf{v^{opt}_B}}$<strong></strong>$\\bf{x}$</li>\n<li>${\\bf{v^{opt}_A}}-{\\bf{v^{opt}_B}}$$\\bf{x}$$\\bf{u}$</li>\n<li>${\\bf{v^{opt}_A}} + \\frac{1}{2}{\\bf{u}}$</li>\n<li>${\\bf{v^{opt}_A}} + \\frac{1}{2}{\\bf{u}}$$ORCA^{\\tau}_{A|B}$</li>\n</ol>\n<div style=\"width:600px; margin-left:auto; margin-right:auto;\"><br>  <img src=\"/2017/01/14/paper-orca/orca_sol.png\" alt=\"ORCA\" title=\"ORCA\"><br></div>\n\n<p></p>\n<ul>\n<li><strong>Reciprocally collision avoiding</strong><ul>\n<li>${\\bf{v^{opt}_A}}-{\\bf{v^{opt}_B}}+{\\bf{u}}$$VO^{\\tau}_{A|B}$</li>\n<li>$A$${\\bf{v^{opt}_A}} + \\frac{1}{2}{\\bf{u}}$</li>\n<li>$B$${\\bf{v^{opt}_B}} - \\frac{1}{2}{\\bf{u}}$</li>\n<li>${\\bf{v^{opt}_A}} + \\frac{1}{2}{\\bf{u}} - ({\\bf{v^{opt}_B}} - \\frac{1}{2}{\\bf{u}}) = {\\bf{v^{opt}_A}}-{\\bf{v^{opt}_B}}+{\\bf{u}}$$VO^{\\tau}_{A|B}$</li>\n</ul>\n</li>\n<li><strong>Reciprocally maximal</strong><ul>\n<li>$ORCA^{\\tau}_{A|B} = CA^{\\tau}_{A|B}(ORCA^{\\tau}_{B|A})$</li>\n<li>$CA^{\\tau}_{A|B}(ORCA^{\\tau}_{B|A})$<ul>\n<li>$\\tau$$CA^{\\tau}_{A|B}(ORCA^{\\tau}_{B|A})$<ol>\n<li>${\\bf{v^{opt}_B}}-\\frac{1}{2}{\\bf{u}}$</li>\n<li>$ORCA^{\\tau}_{B|A}$</li>\n</ol>\n</li>\n<li>$\\bf{v^{opt}_B}$${\\bf{v^{opt}_A}}-{\\bf{v^{opt}_B}}$$\\bf{v^{opt}_A}$$\\bf{x}$$\\bf{v^{opt}_A}$$ORCA^{\\tau}_{A|B}$</li>\n<li>$-{\\frac{1}{2}\\bf{u}}$$\\bf{x}$$ORCA^{\\tau}_{A|B}$</li>\n<li>$ORCA^{\\tau}_{B|A}$$CA^{\\tau}_{A|B}(ORCA^{\\tau}_{B|A})$</li>\n</ul>\n</li>\n<li>$CA^{\\tau}_{A|B}(ORCA^{\\tau}_{B|A})$$ORCA^{\\tau}_{A|B}$</li>\n</ul>\n</li>\n<li><strong>$v^{opt}$</strong><ul>\n<li>$\\bf{x}$</li>\n<li>p.s. </li>\n</ul>\n</li>\n<li><strong>$v^{opt}$</strong><ul>\n<li>$\\bf{v^{opt}_A}$$ORCA^{\\tau}_{A|B}$$\\bf{v^{opt}_B}$$ORCA^{\\tau}_{B|A}$</li>\n<li></li>\n</ul>\n</li>\n</ul>\n<p>ORCA</p>\n<p>$$ORCA^{\\tau}_{A|B} = \\{  {\\bf{v}}  |  ({\\bf{v}} - ({\\bf{v^{opt}_A}} + \\frac{1}{2}{\\bf{u}})) \\cdot {\\bf{n}} \\ge 0   \\}$$</p>\n<p></p>\n<ul>\n<li>${\\bf{u}}$<br>$${\\bf{u}} = (\\mathop{argmin}_{ {\\bf{v}} \\in \\partial VO^{\\tau}_{A|B}}{\\| {\\bf{v}} - ( {\\bf{v^{opt}_A}} - {\\bf{v^{opt}_B}} )  \\|}) - ({\\bf{v^{opt}_A}} - {\\bf{v^{opt}_B}})$$</li>\n<li>${\\bf{n}}$${\\bf{u}}$</li>\n<li>${\\bf{v}} \\cdot {\\bf{n}} \\ge 0$</li>\n</ul>\n<h2 id=\"ORCA\"><a href=\"#ORCA\" class=\"headerlink\" title=\"ORCA\"></a>ORCA</h2><ol>\n<li>agents$ORCA$$ORCA^{\\tau}_{A}$<br>$$ORCA^{\\tau}_{A}=D({\\bf{0}}, {\\bf{v^{max}_A}}) \\cap \\mathop{\\bigcap}_{B \\ne A}{ORCA^{\\tau}_{A|B}}$$</li>\n<li>${\\bf{v^{new}_A}}$<br>$${\\bf{v^{new}_A}} = \\mathop{argmin}_{ {\\bf{v}} \\in ORCA^{\\tau}_A}{\\| {\\bf{v}} - {\\bf{v^{opt}_A}} \\|}$$</li>\n</ol>\n<div style=\"width:600px; margin-left:auto; margin-right:auto;\"><br>  <img src=\"/2017/01/14/paper-orca/orca_app.png\" alt=\"ORCA\" title=\"ORCA\"><br></div>\n\n<p>ORCA$ORCA^{\\tau}_{A}$$\\| {\\bf{v}} - {\\bf{v^{opt}_A}} \\|$</p>\n<h2 id=\"-bf-v-opt-\"><a href=\"#-bf-v-opt-\" class=\"headerlink\" title=\"${\\bf{v^{opt}}}$\"></a>${\\bf{v^{opt}}}$</h2><p>${\\bf{v_A}} = {\\bf{0}}$$ORCA^{\\tau}_{A|B}$$\\frac{1}{2}{\\bf{u}}$</p>\n<p>${\\bf{v^{opt}}}$$ORCA^{\\tau}_{A}$</p>\n<ul>\n<li>${\\bf{0}}$<ul>\n<li>(c)</li>\n<li></li>\n</ul>\n</li>\n<li>${\\bf{v^{pref}}}$<ul>\n<li>(b)${\\bf{v^{pref}}}$</li>\n<li>${\\bf{v^{pref}}}$</li>\n</ul>\n</li>\n<li>${\\bf{v_{curr}}}$<ul>\n<li></li>\n</ul>\n</li>\n</ul>\n<div style=\"width:800px; margin-left:auto; margin-right:auto;\"><br>  <img src=\"/2017/01/14/paper-orca/opt.png\" alt=\"opt\" title=\"opt\"><br></div>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p>$$ {\\bf{v^{new}_{A}}} = \\mathop{argmin}_{ {\\bf{v}} \\in D({\\bf{0}}, {\\bf{v^{max}_A}})} {\\mathop{max}_{B \\ne A}{ d_{A|B}({\\bf{v}})}} $$</p>\n<p></p>\n<ol>\n<li>$d_{A|B}({\\bf{v}})$${\\bf{v}}$${\\bf{v}}$ORCA${\\bf{v}}$ORCA</li>\n<li>${\\mathop{max}_{B \\ne A}{ d_{A|B}({\\bf{v}})}}$${\\bf{v}}$</li>\n<li>$\\mathop{argmin}_{ {\\bf{v}} \\in D({\\bf{0}}, {\\bf{v^{max}_A}})} {\\mathop{max}_{B \\ne A}{ d_{A|B}({\\bf{v}})}}$</li>\n</ol>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><ul>\n<li><strong></strong></li>\n<li><strong></strong></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"References\"><a href=\"#References\" class=\"headerlink\" title=\"References\"></a>References</h2><ul>\n<li><a href=\"http://gamma.cs.unc.edu/ORCA/publications/ORCA.pdf\" target=\"_blank\" rel=\"external\">Reciprocal n-body Collision Avoidance</a></li>\n</ul>\n","excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>ORCAA</p>\n<ul>\n<li><strong></strong>AB$r_A$$r_B$$p_A$$p_B$$v_A$$v_B$A$v_A^{pref}$$v_A^{max}$</li>\n<li><strong></strong>$v_A^{\\prime}$</li>\n<li><strong></strong>ORCA<strong></strong><strong></strong>$v_A^{\\prime}$$v_B^{\\prime}$</li>\n</ul>\n<p>RVOORCAVO</p>\n<ul>\n<li><strong></strong><strong></strong>VORVO</li>\n<li><strong></strong><strong></strong>VORVO</li>\n</ul>\n<h2 id=\"-tau\"><a href=\"#-tau\" class=\"headerlink\" title=\"$\\tau$\"></a>$\\tau$</h2><ol>\n<li>(a)<strong></strong><ul>\n<li>$\\bf{p_B}$$r_B$$B$</li>\n<li>$\\bf{p_A}$$r_A$$A$</li>\n</ul>\n</li>\n<li>(b)$\\tau$<strong></strong><strong></strong><ol>\n<li><strong></strong>(a)$A$$A$</li>\n<li><strong></strong>$B$$v_A * \\tau$$A$$B$VO$\\frac{p_{}}{\\tau}$</li>\n<li>$VO^{\\tau}_{A|B}$</li>\n</ol>\n</li>\n<li>(c)<strong>$B$$V_B$</strong>$B$$VO^{\\tau}_{A|B}$$CA^{\\tau}_{A|B}(V_B)$</li>\n</ol>\n<div style=\"width:800px; margin-left:auto; margin-right:auto;\" ><br>  <img src=\"/2017/01/14/paper-orca/time_interval.png\" alt=\"\" title=\"\"><br></div>\n\n<p></p>\n<ul>\n<li><p>$D({\\bf{p}},r)$$p$$r$<br>$$D({\\bf{p}},r)=\\{  {\\bf{q}}  |  \\| {\\bf{q}} - {\\bf{p}} \\| &lt; r  \\}$$</p>\n</li>\n<li><p>$VO^{\\tau}_{A|B}$<br>$$VO^{\\tau}_{A|B} = \\{  {\\bf{v}}  |  \\exists t \\in [0, \\tau], t {\\bf{v}} \\in D({\\bf{p_B}} -{\\bf{p_A}}, r_A+r_B)   \\}$$</p>\n</li>\n<li><p>$CA^{\\tau}_{A|B}(V_B)$$B$$V_B$<br>$$CA^{\\tau}_{A|B}(V_B)=\\{  {\\bf{v}}  |  {\\bf{v}} \\notin VO^{\\tau}_{A|B} \\oplus V_B  \\}\\oplus$$</p>\n</li>\n</ul>\n<p>VO<strong></strong><strong></strong></p>\n<p>p.s. VO<a href=\"/2017/01/13/paper-rvo/\" title=\"Reciprocal Velocity Obstacles for Real-Time Multi-Agent Navigation\">Reciprocal Velocity Obstacles for Real-Time Multi-Agent Navigation</a></p>\n<h2 id=\"ORCA\"><a href=\"#ORCA\" class=\"headerlink\" title=\"ORCA\"></a>ORCA</h2><p>ORCAOptimal Reciprocal Collision Avoidance$CA^{\\tau}_{A|B}(V_B)$</p>\n<p><strong>$v^{opt}$</strong>$V_A$$V_B$</p>\n<ul>\n<li><strong>Reciprocally collision avoiding</strong>$CA$<br>$$V_A \\subseteq CA^{\\tau}_{A|B}(V_B) \\land V_B \\subseteq CA^{\\tau}_{B|A}(V_A)$$</li>\n<li><strong>Reciprocally maximal</strong>$V_A$$V_B$<br>$$V_A = CA^{\\tau}_{A|B}(V_B) \\land V_B = CA^{\\tau}_{B|A}(V_A)$$</li>\n<li><strong>$v^{opt}$</strong>$v^{opt}$<ul>\n<li>$v^{opt}$</li>\n</ul>\n</li>\n<li><strong>$v^{opt}$</strong>$A$$B$$v^{opt}_A$$v^{opt}_B$<ul>\n<li>$A$$v^{opt}_A$$n_A$</li>\n<li>$B$$v^{opt}_B$$n_B$</li>\n<li>$n_A = n_B$</li>\n</ul>\n</li>\n</ul>\n<p><br>$$| ORCA^{\\tau}_{A|B} \\cap D({\\bf{v^{opt}_A}}, r) | = | ORCA^{\\tau}_{B|A} \\cap D({\\bf{v^{opt}_B}}, r) | \\ge min(|V_A \\cap D({\\bf{v^{opt}_A}}, r)|, |V_B \\cap D({\\bf{v^{opt}_B}}, r)|)$$</p>\n<p></p>\n<ul>\n<li>$ORCA^{\\tau}_{A|B}$$ORCA^{\\tau}_{B|A}$reciprocally maximal<br>$$ORCA^{\\tau}_{A|B} = CA^{\\tau}_{A|B}(ORCA^{\\tau}_{B|A}) \\land ORCA^{\\tau}_{B|A} = CA^{\\tau}_{B|A}(ORCA^{\\tau}_{A|B})$$</li>\n<li>$V_A$$V_B$reciprocally collision avoiding<br>$$V_A \\subseteq CA^{\\tau}_{A|B}(V_B) \\land V_B \\subseteq CA^{\\tau}_{B|A}(V_A)$$</li>\n<li>$r$</li>\n<li>$D({\\bf{v^{opt}}},r)$$v^{opt}$</li>\n</ul>\n<h2 id=\"ORCA\"><a href=\"#ORCA\" class=\"headerlink\" title=\"ORCA\"></a>ORCA</h2><p>ORCA</p>\n<p>$A$$A$$\\bf{v^{opt}_B}$</p>\n<ol>\n<li><strong></strong>${\\bf{v^{opt}_A}}-{\\bf{v^{opt}_B}}$</li>\n<li>$VO^{\\tau}_{A|B}$<strong></strong>${\\bf{v^{opt}_A}}-{\\bf{v^{opt}_B}}$<strong></strong>$\\bf{x}$</li>\n<li>${\\bf{v^{opt}_A}}-{\\bf{v^{opt}_B}}$$\\bf{x}$$\\bf{u}$</li>\n<li>${\\bf{v^{opt}_A}} + \\frac{1}{2}{\\bf{u}}$</li>\n<li>${\\bf{v^{opt}_A}} + \\frac{1}{2}{\\bf{u}}$$ORCA^{\\tau}_{A|B}$</li>\n</ol>\n<div style=\"width:600px; margin-left:auto; margin-right:auto;\" ><br>  <img src=\"/2017/01/14/paper-orca/orca_sol.png\" alt=\"ORCA\" title=\"ORCA\"><br></div>\n\n<p></p>\n<ul>\n<li><strong>Reciprocally collision avoiding</strong><ul>\n<li>${\\bf{v^{opt}_A}}-{\\bf{v^{opt}_B}}+{\\bf{u}}$$VO^{\\tau}_{A|B}$</li>\n<li>$A$${\\bf{v^{opt}_A}} + \\frac{1}{2}{\\bf{u}}$</li>\n<li>$B$${\\bf{v^{opt}_B}} - \\frac{1}{2}{\\bf{u}}$</li>\n<li>${\\bf{v^{opt}_A}} + \\frac{1}{2}{\\bf{u}} - ({\\bf{v^{opt}_B}} - \\frac{1}{2}{\\bf{u}}) = {\\bf{v^{opt}_A}}-{\\bf{v^{opt}_B}}+{\\bf{u}}$$VO^{\\tau}_{A|B}$</li>\n</ul>\n</li>\n<li><strong>Reciprocally maximal</strong><ul>\n<li>$ORCA^{\\tau}_{A|B} = CA^{\\tau}_{A|B}(ORCA^{\\tau}_{B|A})$</li>\n<li>$CA^{\\tau}_{A|B}(ORCA^{\\tau}_{B|A})$<ul>\n<li>$\\tau$$CA^{\\tau}_{A|B}(ORCA^{\\tau}_{B|A})$<ol>\n<li>${\\bf{v^{opt}_B}}-\\frac{1}{2}{\\bf{u}}$</li>\n<li>$ORCA^{\\tau}_{B|A}$</li>\n</ol>\n</li>\n<li>$\\bf{v^{opt}_B}$${\\bf{v^{opt}_A}}-{\\bf{v^{opt}_B}}$$\\bf{v^{opt}_A}$$\\bf{x}$$\\bf{v^{opt}_A}$$ORCA^{\\tau}_{A|B}$</li>\n<li>$-{\\frac{1}{2}\\bf{u}}$$\\bf{x}$$ORCA^{\\tau}_{A|B}$</li>\n<li>$ORCA^{\\tau}_{B|A}$$CA^{\\tau}_{A|B}(ORCA^{\\tau}_{B|A})$</li>\n</ul>\n</li>\n<li>$CA^{\\tau}_{A|B}(ORCA^{\\tau}_{B|A})$$ORCA^{\\tau}_{A|B}$</li>\n</ul>\n</li>\n<li><strong>$v^{opt}$</strong><ul>\n<li>$\\bf{x}$</li>\n<li>p.s. </li>\n</ul>\n</li>\n<li><strong>$v^{opt}$</strong><ul>\n<li>$\\bf{v^{opt}_A}$$ORCA^{\\tau}_{A|B}$$\\bf{v^{opt}_B}$$ORCA^{\\tau}_{B|A}$</li>\n<li></li>\n</ul>\n</li>\n</ul>\n<p>ORCA</p>\n<p>$$ORCA^{\\tau}_{A|B} = \\{  {\\bf{v}}  |  ({\\bf{v}} - ({\\bf{v^{opt}_A}} + \\frac{1}{2}{\\bf{u}})) \\cdot {\\bf{n}} \\ge 0   \\}$$</p>\n<p></p>\n<ul>\n<li>${\\bf{u}}$<br>$${\\bf{u}} = (\\mathop{argmin}_{ {\\bf{v}} \\in \\partial VO^{\\tau}_{A|B}}{\\| {\\bf{v}} - ( {\\bf{v^{opt}_A}} - {\\bf{v^{opt}_B}} )  \\|}) - ({\\bf{v^{opt}_A}} - {\\bf{v^{opt}_B}})$$</li>\n<li>${\\bf{n}}$${\\bf{u}}$</li>\n<li>${\\bf{v}} \\cdot {\\bf{n}} \\ge 0$</li>\n</ul>\n<h2 id=\"ORCA\"><a href=\"#ORCA\" class=\"headerlink\" title=\"ORCA\"></a>ORCA</h2><ol>\n<li>agents$ORCA$$ORCA^{\\tau}_{A}$<br>$$ORCA^{\\tau}_{A}=D({\\bf{0}}, {\\bf{v^{max}_A}}) \\cap \\mathop{\\bigcap}_{B \\ne A}{ORCA^{\\tau}_{A|B}}$$</li>\n<li>${\\bf{v^{new}_A}}$<br>$${\\bf{v^{new}_A}} = \\mathop{argmin}_{ {\\bf{v}} \\in ORCA^{\\tau}_A}{\\| {\\bf{v}} - {\\bf{v^{opt}_A}} \\|}$$</li>\n</ol>\n<div style=\"width:600px; margin-left:auto; margin-right:auto;\" ><br>  <img src=\"/2017/01/14/paper-orca/orca_app.png\" alt=\"ORCA\" title=\"ORCA\"><br></div>\n\n<p>ORCA$ORCA^{\\tau}_{A}$$\\| {\\bf{v}} - {\\bf{v^{opt}_A}} \\|$</p>\n<h2 id=\"-bf-v-opt-\"><a href=\"#-bf-v-opt-\" class=\"headerlink\" title=\"${\\bf{v^{opt}}}$\"></a>${\\bf{v^{opt}}}$</h2><p>${\\bf{v_A}} = {\\bf{0}}$$ORCA^{\\tau}_{A|B}$$\\frac{1}{2}{\\bf{u}}$</p>\n<p>${\\bf{v^{opt}}}$$ORCA^{\\tau}_{A}$</p>\n<ul>\n<li>${\\bf{0}}$<ul>\n<li>(c)</li>\n<li></li>\n</ul>\n</li>\n<li>${\\bf{v^{pref}}}$<ul>\n<li>(b)${\\bf{v^{pref}}}$</li>\n<li>${\\bf{v^{pref}}}$</li>\n</ul>\n</li>\n<li>${\\bf{v_{curr}}}$<ul>\n<li></li>\n</ul>\n</li>\n</ul>\n<div style=\"width:800px; margin-left:auto; margin-right:auto;\" ><br>  <img src=\"/2017/01/14/paper-orca/opt.png\" alt=\"opt\" title=\"opt\"><br></div>\n\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<p>$$ {\\bf{v^{new}_{A}}} = \\mathop{argmin}_{ {\\bf{v}} \\in D({\\bf{0}}, {\\bf{v^{max}_A}})} {\\mathop{max}_{B \\ne A}{ d_{A|B}({\\bf{v}})}} $$</p>\n<p></p>\n<ol>\n<li>$d_{A|B}({\\bf{v}})$${\\bf{v}}$${\\bf{v}}$ORCA${\\bf{v}}$ORCA</li>\n<li>${\\mathop{max}_{B \\ne A}{ d_{A|B}({\\bf{v}})}}$${\\bf{v}}$</li>\n<li>$\\mathop{argmin}_{ {\\bf{v}} \\in D({\\bf{0}}, {\\bf{v^{max}_A}})} {\\mathop{max}_{B \\ne A}{ d_{A|B}({\\bf{v}})}}$</li>\n</ol>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><ul>\n<li><strong></strong></li>\n<li><strong></strong></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"References\"><a href=\"#References\" class=\"headerlink\" title=\"References\"></a>References</h2><ul>\n<li><a href=\"http://gamma.cs.unc.edu/ORCA/publications/ORCA.pdf\">Reciprocal n-body Collision Avoidance</a></li>\n</ul>\n"},{"title":"Prioritized Experience Replay","date":"2018-03-18T03:46:52.000Z","description":["experience replay"],"_content":"\n## motivation\n\nexperience replayDQNtransition******e.g., SGDi.e., i.i.d.**\n\nnaiveexperience replaytransitiontransition**transition**transitiontransition\n\nenvironment$n$$2$$1$$1$rewardreward$0$$n$reward$0$$1/2^n$transitiontransition$1/2^n$\n\n<div style=\"width:800px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img env.png environment %}\n</div>\n\ntransitionexperience replaytransition\n\n<div style=\"width:800px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img fig.png transition %}\n</div>\n\n**transition**\n\n## idea\n\n- ****TD-error\n- transition****\n\t+ critictransitionTD-errortransitionTD-error**transitionTD-errorcriticcritic**transitioncriticcritictransitionTD-errorcriticcriticTD-errorcritictransition\n\t+ **overfitting******empirical resulttransitionTD-errorcritictransitiontransitionoverfitting\n\t+ stochastic prioritizationtransition\n- ****$x$$A$$x$$B$$\\mathbb{E}_{x \\sim A}[f(x)]$$\\mathbb{E}_{x \\sim B}[ \\bullet ]$$B$$A$importance sampling\n\n## detail\n\n- stochastic prioritization\n\t+ softmax\n\t$$\n\tP(i) = \\frac{p_i^\\alpha}{\\sum_k p_k^\\alpha},\n\t$$$p_i$$i$transitionpriority$\\alpha$$\\alpha = 0$**priority**\n\t- proportional prioritization\n\t\t+ $p_i = \\vert \\delta_i \\vert + \\epsilon$$\\delta_i$TD-erroe$\\epsilon$$0$\n\t\t+ **outlier**\n\t\t+ sum tree\n\t- rank-based prioritization\n\t\t+ $p_i = 1/\\text{rank}(i)$\n\t\t+ ****prioritypriority\n\t\t+ experience replay100batch size31003e.g., A:1-20B:21-50, C:51-100ABC3transition\n- importance sampling\n\t+ \n\t$$\\mathbb{E}_{x \\sim A}[f(x)] = \\sum_x P_A(x)f(x) = \\sum_x P_B(x) \\frac{P_A(x)}{P_B(x)}f(x) = \\mathbb{E}_{x \\sim B}[\\frac{P_A(x)}{P_B(x)}f(x)].$$\n\t+ $P_A(x)=1/N$$P_B(x)=P(i)$importance-sampling weight\n\t$$\n\tw_i = (\\frac{1}{N} \\cdot \\frac{1}{P(i)})^\\beta,\n\t$$$\\beta$biasarguebiasbias\n\t+ importance sampling$\\text{max}_i w_i$$i$minibatchexperience replayproportional prioritizationupdatescale downwardstep size\n\n## more\n\n- **stochastic prioritization**\n- priority**supervised learning**\n- transitiontransition**feedback signalexploration**\n- **experience replay**\n","source":"_posts/paper-prioritized-experience-replay.md","raw":"---\ntitle: Prioritized Experience Replay\ndate: 2018-03-18 11:46:52\ntags:\n\t- Prioritized Experience Replay\ncategories:\n\t- \ndescription:\n\t- experience replay\n---\n\n## motivation\n\nexperience replayDQNtransition******e.g., SGDi.e., i.i.d.**\n\nnaiveexperience replaytransitiontransition**transition**transitiontransition\n\nenvironment$n$$2$$1$$1$rewardreward$0$$n$reward$0$$1/2^n$transitiontransition$1/2^n$\n\n<div style=\"width:800px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img env.png environment %}\n</div>\n\ntransitionexperience replaytransition\n\n<div style=\"width:800px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img fig.png transition %}\n</div>\n\n**transition**\n\n## idea\n\n- ****TD-error\n- transition****\n\t+ critictransitionTD-errortransitionTD-error**transitionTD-errorcriticcritic**transitioncriticcritictransitionTD-errorcriticcriticTD-errorcritictransition\n\t+ **overfitting******empirical resulttransitionTD-errorcritictransitiontransitionoverfitting\n\t+ stochastic prioritizationtransition\n- ****$x$$A$$x$$B$$\\mathbb{E}_{x \\sim A}[f(x)]$$\\mathbb{E}_{x \\sim B}[ \\bullet ]$$B$$A$importance sampling\n\n## detail\n\n- stochastic prioritization\n\t+ softmax\n\t$$\n\tP(i) = \\frac{p_i^\\alpha}{\\sum_k p_k^\\alpha},\n\t$$$p_i$$i$transitionpriority$\\alpha$$\\alpha = 0$**priority**\n\t- proportional prioritization\n\t\t+ $p_i = \\vert \\delta_i \\vert + \\epsilon$$\\delta_i$TD-erroe$\\epsilon$$0$\n\t\t+ **outlier**\n\t\t+ sum tree\n\t- rank-based prioritization\n\t\t+ $p_i = 1/\\text{rank}(i)$\n\t\t+ ****prioritypriority\n\t\t+ experience replay100batch size31003e.g., A:1-20B:21-50, C:51-100ABC3transition\n- importance sampling\n\t+ \n\t$$\\mathbb{E}_{x \\sim A}[f(x)] = \\sum_x P_A(x)f(x) = \\sum_x P_B(x) \\frac{P_A(x)}{P_B(x)}f(x) = \\mathbb{E}_{x \\sim B}[\\frac{P_A(x)}{P_B(x)}f(x)].$$\n\t+ $P_A(x)=1/N$$P_B(x)=P(i)$importance-sampling weight\n\t$$\n\tw_i = (\\frac{1}{N} \\cdot \\frac{1}{P(i)})^\\beta,\n\t$$$\\beta$biasarguebiasbias\n\t+ importance sampling$\\text{max}_i w_i$$i$minibatchexperience replayproportional prioritizationupdatescale downwardstep size\n\n## more\n\n- **stochastic prioritization**\n- priority**supervised learning**\n- transitiontransition**feedback signalexploration**\n- **experience replay**\n","slug":"paper-prioritized-experience-replay","published":1,"updated":"2024-08-13T16:03:47.864Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clzvf1929001aeqwoerh2iq55","content":"<h2 id=\"motivation\"><a href=\"#motivation\" class=\"headerlink\" title=\"motivation\"></a>motivation</h2><p>experience replayDQNtransition<strong></strong><strong>e.g., SGDi.e., i.i.d.</strong></p>\n<p>naiveexperience replaytransitiontransition<strong>transition</strong>transitiontransition</p>\n<p>environment$n$$2$$1$$1$rewardreward$0$$n$reward$0$$1/2^n$transitiontransition$1/2^n$</p>\n<div style=\"width:800px; margin-left:auto; margin-right:auto;\"><br>  <img src=\"/2018/03/18/paper-prioritized-experience-replay/env.png\" alt=\"environment\" title=\"environment\"><br></div>\n\n<p>transitionexperience replaytransition</p>\n<div style=\"width:800px; margin-left:auto; margin-right:auto;\"><br>  <img src=\"/2018/03/18/paper-prioritized-experience-replay/fig.png\" alt=\"transition\" title=\"transition\"><br></div>\n\n<p><strong>transition</strong></p>\n<h2 id=\"idea\"><a href=\"#idea\" class=\"headerlink\" title=\"idea\"></a>idea</h2><ul>\n<li><strong></strong>TD-error</li>\n<li>transition<strong></strong><ul>\n<li>critictransitionTD-errortransitionTD-error<strong>transitionTD-errorcriticcritic</strong>transitioncriticcritictransitionTD-errorcriticcriticTD-errorcritictransition</li>\n<li><strong>overfitting</strong><strong></strong>empirical resulttransitionTD-errorcritictransitiontransitionoverfitting</li>\n<li>stochastic prioritizationtransition</li>\n</ul>\n</li>\n<li><strong></strong>$x$$A$$x$$B$$\\mathbb{E}_{x \\sim A}[f(x)]$$\\mathbb{E}_{x \\sim B}[ \\bullet ]$$B$$A$importance sampling</li>\n</ul>\n<h2 id=\"detail\"><a href=\"#detail\" class=\"headerlink\" title=\"detail\"></a>detail</h2><ul>\n<li>stochastic prioritization<ul>\n<li>softmax<br>$$<br>P(i) = \\frac{p_i^\\alpha}{\\sum_k p_k^\\alpha},<br>$$$p_i$$i$transitionpriority$\\alpha$$\\alpha = 0$<strong>priority</strong></li>\n</ul>\n<ul>\n<li>proportional prioritization<ul>\n<li>$p_i = \\vert \\delta_i \\vert + \\epsilon$$\\delta_i$TD-erroe$\\epsilon$$0$</li>\n<li><strong>outlier</strong></li>\n<li>sum tree</li>\n</ul>\n</li>\n<li>rank-based prioritization<ul>\n<li>$p_i = 1/\\text{rank}(i)$</li>\n<li><strong></strong>prioritypriority</li>\n<li>experience replay100batch size31003e.g., A:1-20B:21-50, C:51-100ABC3transition</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>importance sampling<ul>\n<li><br>$$\\mathbb{E}_{x \\sim A}[f(x)] = \\sum_x P_A(x)f(x) = \\sum_x P_B(x) \\frac{P_A(x)}{P_B(x)}f(x) = \\mathbb{E}_{x \\sim B}[\\frac{P_A(x)}{P_B(x)}f(x)].$$</li>\n<li>$P_A(x)=1/N$$P_B(x)=P(i)$importance-sampling weight<br>$$<br>w_i = (\\frac{1}{N} \\cdot \\frac{1}{P(i)})^\\beta,<br>$$$\\beta$biasarguebiasbias</li>\n<li>importance sampling$\\text{max}_i w_i$$i$minibatchexperience replayproportional prioritizationupdatescale downwardstep size</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"more\"><a href=\"#more\" class=\"headerlink\" title=\"more\"></a>more</h2><ul>\n<li><strong>stochastic prioritization</strong></li>\n<li>priority<strong>supervised learning</strong></li>\n<li>transitiontransition<strong>feedback signalexploration</strong></li>\n<li><strong>experience replay</strong></li>\n</ul>\n","excerpt":"","more":"<h2 id=\"motivation\"><a href=\"#motivation\" class=\"headerlink\" title=\"motivation\"></a>motivation</h2><p>experience replayDQNtransition<strong></strong><strong>e.g., SGDi.e., i.i.d.</strong></p>\n<p>naiveexperience replaytransitiontransition<strong>transition</strong>transitiontransition</p>\n<p>environment$n$$2$$1$$1$rewardreward$0$$n$reward$0$$1/2^n$transitiontransition$1/2^n$</p>\n<div style=\"width:800px; margin-left:auto; margin-right:auto;\" ><br>  <img src=\"/2018/03/18/paper-prioritized-experience-replay/env.png\" alt=\"environment\" title=\"environment\"><br></div>\n\n<p>transitionexperience replaytransition</p>\n<div style=\"width:800px; margin-left:auto; margin-right:auto;\" ><br>  <img src=\"/2018/03/18/paper-prioritized-experience-replay/fig.png\" alt=\"transition\" title=\"transition\"><br></div>\n\n<p><strong>transition</strong></p>\n<h2 id=\"idea\"><a href=\"#idea\" class=\"headerlink\" title=\"idea\"></a>idea</h2><ul>\n<li><strong></strong>TD-error</li>\n<li>transition<strong></strong><ul>\n<li>critictransitionTD-errortransitionTD-error<strong>transitionTD-errorcriticcritic</strong>transitioncriticcritictransitionTD-errorcriticcriticTD-errorcritictransition</li>\n<li><strong>overfitting</strong><strong></strong>empirical resulttransitionTD-errorcritictransitiontransitionoverfitting</li>\n<li>stochastic prioritizationtransition</li>\n</ul>\n</li>\n<li><strong></strong>$x$$A$$x$$B$$\\mathbb{E}_{x \\sim A}[f(x)]$$\\mathbb{E}_{x \\sim B}[ \\bullet ]$$B$$A$importance sampling</li>\n</ul>\n<h2 id=\"detail\"><a href=\"#detail\" class=\"headerlink\" title=\"detail\"></a>detail</h2><ul>\n<li>stochastic prioritization<ul>\n<li>softmax<br>$$<br>P(i) = \\frac{p_i^\\alpha}{\\sum_k p_k^\\alpha},<br>$$$p_i$$i$transitionpriority$\\alpha$$\\alpha = 0$<strong>priority</strong></li>\n</ul>\n<ul>\n<li>proportional prioritization<ul>\n<li>$p_i = \\vert \\delta_i \\vert + \\epsilon$$\\delta_i$TD-erroe$\\epsilon$$0$</li>\n<li><strong>outlier</strong></li>\n<li>sum tree</li>\n</ul>\n</li>\n<li>rank-based prioritization<ul>\n<li>$p_i = 1/\\text{rank}(i)$</li>\n<li><strong></strong>prioritypriority</li>\n<li>experience replay100batch size31003e.g., A:1-20B:21-50, C:51-100ABC3transition</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>importance sampling<ul>\n<li><br>$$\\mathbb{E}_{x \\sim A}[f(x)] = \\sum_x P_A(x)f(x) = \\sum_x P_B(x) \\frac{P_A(x)}{P_B(x)}f(x) = \\mathbb{E}_{x \\sim B}[\\frac{P_A(x)}{P_B(x)}f(x)].$$</li>\n<li>$P_A(x)=1/N$$P_B(x)=P(i)$importance-sampling weight<br>$$<br>w_i = (\\frac{1}{N} \\cdot \\frac{1}{P(i)})^\\beta,<br>$$$\\beta$biasarguebiasbias</li>\n<li>importance sampling$\\text{max}_i w_i$$i$minibatchexperience replayproportional prioritizationupdatescale downwardstep size</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"more\"><a href=\"#more\" class=\"headerlink\" title=\"more\"></a>more</h2><ul>\n<li><strong>stochastic prioritization</strong></li>\n<li>priority<strong>supervised learning</strong></li>\n<li>transitiontransition<strong>feedback signalexploration</strong></li>\n<li><strong>experience replay</strong></li>\n</ul>\n"},{"title":"Reciprocal Velocity Obstacles for Real-Time Multi-Agent Navigation","description":[""],"date":"2017-01-13T13:08:51.000Z","_content":"\n\n\n## \n\nVORVO\n\nAgent****AgentA****B\n\n- **High level**: dijkstra\n- **Low level**: VO, RVO, ORCA\n\n\n\n- **High level**: dijkstra: \n- **Low level**: VORVOORCAe.g. \n\nVORVOVORVOVOVO\n\n## VO(Velocity Obstacle)\n\n****VO\n\n********\n\n## VO\n\n<div style=\"width:400px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img prob_disc.png  %}\n</div>\n\n> Q: BAB\n\n> A: **A****$\\bar{B}$(B)**VO\n\n<div style=\"width:400px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img prob_sol.png  %}\n</div>\n\nVO\n\n- VO$\\bar{B}$****\n- VO****\n- ****($v\\_{A}^{\\prime}$)\n\n## VO\n\nVO\n\n\n\n- **A(B)**$\\bf{p\\_{A}}$$r\\_{A}$**$A$**\n- **B**AB**$\\bf{v\\_{A}}-v\\_{B}$**\n- **A**$B$$-A$Minkowski sum**$B\\oplus-A$**\n\t+ $A \\oplus B = \\\\{    {\\bf{a}} + {\\bf{b}}\\ |\\ {\\bf{a}} \\in A, {\\bf{b}} \\in B \\\\} $\n\t+ $-A = \\\\{ -{\\bf{a}}\\ |\\ {\\bf{a}} \\in A \\\\}$\n\t+ [Minkowski sum](http://twistedoakstudios.com/blog/Post554\\_minkowski-sums-and-differences)\n\n\n\n<div style=\"width:500px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img vo.png VO %}\n</div>\n\n$\\bf{v\\_{A}}$VO$\\bf{v\\_{A}}-v\\_{B}$VOVO$\\bf{v\\_{B}}$\n\n## VO\n\n\n\n- ****$\\lambda({\\bf{p}},{\\bf{v}})$$\\bf{p}$$\\bf{v}$\n$$\\lambda({\\bf{p}}, {\\bf{v}}) = \\\\{ {\\bf{p}} +t{\\bf{v}} | t\\ge 0\\\\}$$\n- **VO**$VO^{A}\\_{B}({\\bf{v\\_{B}}})$$\\bf{v\\_{B}}$$B$$A$VO \n$$VO^{A}\\_{B}({\\bf{v\\_{B}}}) = \\\\{ {\\bf{v\\_A}} | \\lambda({\\bf{p\\_{A}}}, {\\bf{v\\_{A} - v\\_{B}}}) \\cap B \\oplus -A \\ne \\emptyset \\\\}$$\n\n## RVO(Reciprocal Velocity Obstacle)\n\nVOVORVO\n\nRVOVO\n\n- ****$A$$\\bf{v\\_{A}}$$\\bf{v\\_{A}^{\\prime}}$\n- **RVO**$\\bf{v\\_{A}}$\n\n<div style=\"width:700px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img oscillation.png  %}\n</div>\n\n## VO\n\nVO\n\n- **Symmetry**$\\bf{v\\_A}$$A$$\\bf{v\\_B}$$B$$\\bf{v\\_B}$$B$$\\bf{v\\_A}$$A$\n$${\\bf{v\\_A}} \\in VO^{A}\\_{B}({\\bf{v\\_{B}}}) \\Leftrightarrow {\\bf{v\\_B}} \\in VO^{B}\\_{A}({\\bf{v\\_{A}}})$$\n- **Translation Invariance**$\\bf{v\\_A}$$A$$\\bf{v\\_B}$$B$$\\bf{v\\_A+u}$$A$$\\bf{v\\_B+u}$$B$\n$${\\bf{v\\_A}} \\in VO^{A}\\_{B}({\\bf{v\\_{B}}}) \\Leftrightarrow {\\bf{v\\_A+u}} \\in VO^{A}\\_{B}({\\bf{v\\_{B}+u}})$$\n- **Convexity**$VO^{A}\\_{B}({\\bf{v\\_{B}}})$$VO^{A}\\_{B}({\\bf{v\\_{B}}})$VO\n$${\\bf{v\\_A}} \\overrightarrow{\\notin} VO^{A}\\_{B}({\\bf{v\\_{B}}}) \\land  {\\bf{v\\_A^{\\prime}}} \\overrightarrow{\\notin} VO^{A}\\_{B}({\\bf{v\\_{B}}}) \\Rightarrow (1-\\alpha){\\bf{v\\_A}} + \\alpha{\\bf{v\\_{A}^{\\prime}}} \\overrightarrow{\\notin} VO^{A}\\_{B}({\\bf{v\\_{B}}}),\\ for\\ 0\\le \\alpha \\le 1$$\n\n<div style=\"width:300px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img left_right.png VO %}\n</div>\n\n\n\n1. ${\\bf{v\\_A}} \\in VO^{A}\\_{B}({\\bf{v\\_{B}}}),\\ {\\bf{v\\_B}} \\in VO^{B}\\_{A}({\\bf{v\\_{A}}})$\n2. VO${\\bf{v\\_A^{\\prime}}} \\notin VO^{A}\\_{B}({\\bf{v\\_{B}}}),\\ {\\bf{v\\_B^{\\prime}}} \\notin VO^{B}\\_{A}({\\bf{v\\_{A}}})$\n3. VOSymmetry**VO**${\\bf{v\\_B}} \\notin VO^{B}\\_{A}({\\bf{v\\_{A}^{\\prime}}}),\\ {\\bf{v\\_A}} \\notin VO^{A}\\_{B}({\\bf{v\\_{B}^{\\prime}}})$\n4. **prefer**$\\bf{v\\_A}$$\\bf{v\\_B}$\n5. **14**\n\n## RVOInsight\n\n\n\n> \n\nRVO\n\n- VO\"VO\"RVO\n\t+ p.s. ReciprocalVO****RVO********VO****\n- VO$\\bf{v\\_A^{\\prime}}$average$\\bf{v\\_A}$VO$\\bf{v\\_A^{\\prime}}$\n\n## RVO\n\n- $\\bf{v\\_{B}}$$B$$\\bf{v\\_A}$$A$RVO\n\n$$ RVO\\_{B}^{A}({\\bf{v\\_B}}, {\\bf{v\\_A}}) = \\\\{ {\\bf{v\\_{A}^{\\prime}}}\\ |\\ 2{\\bf{v\\_{A}^{\\prime}}} - {\\bf{v\\_A}} \\in VO^{A}\\_{B}({\\bf{v\\_{B}}})\\\\}$$\n\n- \n\n<div style=\"width:500px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img rvo.png RVO %}\n</div>\n\n- \n\t+ $2{\\bf{v\\_{A}^{\\prime}}} - {\\bf{v\\_A}}$${\\bf{v\\_A}}$$\\bf{v\\_A^{\\prime}}$\n\t+ ****VORVO\n\t+ **RVO**$\\bf{v_A}$VO\n\n## RVO\n\n\n\n- ****\n- \n- ****\n\n## \n\n- ****\n- ****\n- ****RVO\n\n## References\n\n- [Reciprocal Velocity Obstacles for Real-Time Multi-Agent Navigation](http://gamma.cs.unc.edu/RVO/)\n- [Minkowski Sums](http://twistedoakstudios.com/blog/Post554\\_minkowski-sums-and-differences)\n","source":"_posts/paper-rvo.md","raw":"---\ntitle: Reciprocal Velocity Obstacles for Real-Time Multi-Agent Navigation\ntags:\n  - VO(Velocity Obstacle)\n  - RVO(Reciprocal Velocity Obstacle)\ndescription:\n  - \ncategories:\n  - \ndate: 2017-01-13 21:08:51\n---\n\n\n\n## \n\nVORVO\n\nAgent****AgentA****B\n\n- **High level**: dijkstra\n- **Low level**: VO, RVO, ORCA\n\n\n\n- **High level**: dijkstra: \n- **Low level**: VORVOORCAe.g. \n\nVORVOVORVOVOVO\n\n## VO(Velocity Obstacle)\n\n****VO\n\n********\n\n## VO\n\n<div style=\"width:400px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img prob_disc.png  %}\n</div>\n\n> Q: BAB\n\n> A: **A****$\\bar{B}$(B)**VO\n\n<div style=\"width:400px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img prob_sol.png  %}\n</div>\n\nVO\n\n- VO$\\bar{B}$****\n- VO****\n- ****($v\\_{A}^{\\prime}$)\n\n## VO\n\nVO\n\n\n\n- **A(B)**$\\bf{p\\_{A}}$$r\\_{A}$**$A$**\n- **B**AB**$\\bf{v\\_{A}}-v\\_{B}$**\n- **A**$B$$-A$Minkowski sum**$B\\oplus-A$**\n\t+ $A \\oplus B = \\\\{    {\\bf{a}} + {\\bf{b}}\\ |\\ {\\bf{a}} \\in A, {\\bf{b}} \\in B \\\\} $\n\t+ $-A = \\\\{ -{\\bf{a}}\\ |\\ {\\bf{a}} \\in A \\\\}$\n\t+ [Minkowski sum](http://twistedoakstudios.com/blog/Post554\\_minkowski-sums-and-differences)\n\n\n\n<div style=\"width:500px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img vo.png VO %}\n</div>\n\n$\\bf{v\\_{A}}$VO$\\bf{v\\_{A}}-v\\_{B}$VOVO$\\bf{v\\_{B}}$\n\n## VO\n\n\n\n- ****$\\lambda({\\bf{p}},{\\bf{v}})$$\\bf{p}$$\\bf{v}$\n$$\\lambda({\\bf{p}}, {\\bf{v}}) = \\\\{ {\\bf{p}} +t{\\bf{v}} | t\\ge 0\\\\}$$\n- **VO**$VO^{A}\\_{B}({\\bf{v\\_{B}}})$$\\bf{v\\_{B}}$$B$$A$VO \n$$VO^{A}\\_{B}({\\bf{v\\_{B}}}) = \\\\{ {\\bf{v\\_A}} | \\lambda({\\bf{p\\_{A}}}, {\\bf{v\\_{A} - v\\_{B}}}) \\cap B \\oplus -A \\ne \\emptyset \\\\}$$\n\n## RVO(Reciprocal Velocity Obstacle)\n\nVOVORVO\n\nRVOVO\n\n- ****$A$$\\bf{v\\_{A}}$$\\bf{v\\_{A}^{\\prime}}$\n- **RVO**$\\bf{v\\_{A}}$\n\n<div style=\"width:700px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img oscillation.png  %}\n</div>\n\n## VO\n\nVO\n\n- **Symmetry**$\\bf{v\\_A}$$A$$\\bf{v\\_B}$$B$$\\bf{v\\_B}$$B$$\\bf{v\\_A}$$A$\n$${\\bf{v\\_A}} \\in VO^{A}\\_{B}({\\bf{v\\_{B}}}) \\Leftrightarrow {\\bf{v\\_B}} \\in VO^{B}\\_{A}({\\bf{v\\_{A}}})$$\n- **Translation Invariance**$\\bf{v\\_A}$$A$$\\bf{v\\_B}$$B$$\\bf{v\\_A+u}$$A$$\\bf{v\\_B+u}$$B$\n$${\\bf{v\\_A}} \\in VO^{A}\\_{B}({\\bf{v\\_{B}}}) \\Leftrightarrow {\\bf{v\\_A+u}} \\in VO^{A}\\_{B}({\\bf{v\\_{B}+u}})$$\n- **Convexity**$VO^{A}\\_{B}({\\bf{v\\_{B}}})$$VO^{A}\\_{B}({\\bf{v\\_{B}}})$VO\n$${\\bf{v\\_A}} \\overrightarrow{\\notin} VO^{A}\\_{B}({\\bf{v\\_{B}}}) \\land  {\\bf{v\\_A^{\\prime}}} \\overrightarrow{\\notin} VO^{A}\\_{B}({\\bf{v\\_{B}}}) \\Rightarrow (1-\\alpha){\\bf{v\\_A}} + \\alpha{\\bf{v\\_{A}^{\\prime}}} \\overrightarrow{\\notin} VO^{A}\\_{B}({\\bf{v\\_{B}}}),\\ for\\ 0\\le \\alpha \\le 1$$\n\n<div style=\"width:300px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img left_right.png VO %}\n</div>\n\n\n\n1. ${\\bf{v\\_A}} \\in VO^{A}\\_{B}({\\bf{v\\_{B}}}),\\ {\\bf{v\\_B}} \\in VO^{B}\\_{A}({\\bf{v\\_{A}}})$\n2. VO${\\bf{v\\_A^{\\prime}}} \\notin VO^{A}\\_{B}({\\bf{v\\_{B}}}),\\ {\\bf{v\\_B^{\\prime}}} \\notin VO^{B}\\_{A}({\\bf{v\\_{A}}})$\n3. VOSymmetry**VO**${\\bf{v\\_B}} \\notin VO^{B}\\_{A}({\\bf{v\\_{A}^{\\prime}}}),\\ {\\bf{v\\_A}} \\notin VO^{A}\\_{B}({\\bf{v\\_{B}^{\\prime}}})$\n4. **prefer**$\\bf{v\\_A}$$\\bf{v\\_B}$\n5. **14**\n\n## RVOInsight\n\n\n\n> \n\nRVO\n\n- VO\"VO\"RVO\n\t+ p.s. ReciprocalVO****RVO********VO****\n- VO$\\bf{v\\_A^{\\prime}}$average$\\bf{v\\_A}$VO$\\bf{v\\_A^{\\prime}}$\n\n## RVO\n\n- $\\bf{v\\_{B}}$$B$$\\bf{v\\_A}$$A$RVO\n\n$$ RVO\\_{B}^{A}({\\bf{v\\_B}}, {\\bf{v\\_A}}) = \\\\{ {\\bf{v\\_{A}^{\\prime}}}\\ |\\ 2{\\bf{v\\_{A}^{\\prime}}} - {\\bf{v\\_A}} \\in VO^{A}\\_{B}({\\bf{v\\_{B}}})\\\\}$$\n\n- \n\n<div style=\"width:500px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img rvo.png RVO %}\n</div>\n\n- \n\t+ $2{\\bf{v\\_{A}^{\\prime}}} - {\\bf{v\\_A}}$${\\bf{v\\_A}}$$\\bf{v\\_A^{\\prime}}$\n\t+ ****VORVO\n\t+ **RVO**$\\bf{v_A}$VO\n\n## RVO\n\n\n\n- ****\n- \n- ****\n\n## \n\n- ****\n- ****\n- ****RVO\n\n## References\n\n- [Reciprocal Velocity Obstacles for Real-Time Multi-Agent Navigation](http://gamma.cs.unc.edu/RVO/)\n- [Minkowski Sums](http://twistedoakstudios.com/blog/Post554\\_minkowski-sums-and-differences)\n","slug":"paper-rvo","published":1,"updated":"2024-08-13T16:03:47.868Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clzvf192b001deqwo96q5li2c","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>VORVO</p>\n<p>Agent<strong></strong>AgentA<strong></strong>B</p>\n<ul>\n<li><strong>High level</strong>: dijkstra</li>\n<li><strong>Low level</strong>: VO, RVO, ORCA</li>\n</ul>\n<p></p>\n<ul>\n<li><strong>High level</strong>: dijkstra: </li>\n<li><strong>Low level</strong>: VORVOORCAe.g. </li>\n</ul>\n<p>VORVOVORVOVOVO</p>\n<h2 id=\"VO-Velocity-Obstacle\"><a href=\"#VO-Velocity-Obstacle\" class=\"headerlink\" title=\"VO(Velocity Obstacle)\"></a>VO(Velocity Obstacle)</h2><p><strong></strong>VO</p>\n<p><strong></strong><strong></strong></p>\n<h2 id=\"VO\"><a href=\"#VO\" class=\"headerlink\" title=\"VO\"></a>VO</h2><div style=\"width:400px; margin-left:auto; margin-right:auto;\"><br>  <img src=\"/2017/01/13/paper-rvo/prob_disc.png\" alt=\"\" title=\"\"><br></div>\n\n<blockquote>\n<p>Q: BAB</p>\n<p>A: <strong>A</strong><strong>$\\bar{B}$(B)</strong>VO</p>\n</blockquote>\n<div style=\"width:400px; margin-left:auto; margin-right:auto;\"><br>  <img src=\"/2017/01/13/paper-rvo/prob_sol.png\" alt=\"\" title=\"\"><br></div>\n\n<p>VO</p>\n<ul>\n<li>VO$\\bar{B}$<strong></strong></li>\n<li>VO<strong></strong></li>\n<li><strong></strong>($v_{A}^{\\prime}$)</li>\n</ul>\n<h2 id=\"VO\"><a href=\"#VO\" class=\"headerlink\" title=\"VO\"></a>VO</h2><p>VO</p>\n<p></p>\n<ul>\n<li><strong>A(B)</strong>$\\bf{p_{A}}$$r_{A}$<strong>$A$</strong></li>\n<li><strong>B</strong>AB<strong>$\\bf{v_{A}}-v_{B}$</strong></li>\n<li><strong>A</strong>$B$$-A$Minkowski sum<strong>$B\\oplus-A$</strong><ul>\n<li>$A \\oplus B = \\{    {\\bf{a}} + {\\bf{b}} | {\\bf{a}} \\in A, {\\bf{b}} \\in B \\} $</li>\n<li>$-A = \\{ -{\\bf{a}} | {\\bf{a}} \\in A \\}$</li>\n<li><a href=\"http://twistedoakstudios.com/blog/Post554\\_minkowski-sums-and-differences\" target=\"_blank\" rel=\"external\">Minkowski sum</a></li>\n</ul>\n</li>\n</ul>\n<p></p>\n<div style=\"width:500px; margin-left:auto; margin-right:auto;\"><br>  <img src=\"/2017/01/13/paper-rvo/vo.png\" alt=\"VO\" title=\"VO\"><br></div>\n\n<p>$\\bf{v_{A}}$VO$\\bf{v_{A}}-v_{B}$VOVO$\\bf{v_{B}}$</p>\n<h2 id=\"VO\"><a href=\"#VO\" class=\"headerlink\" title=\"VO\"></a>VO</h2><p></p>\n<ul>\n<li><strong></strong>$\\lambda({\\bf{p}},{\\bf{v}})$$\\bf{p}$$\\bf{v}$<br>$$\\lambda({\\bf{p}}, {\\bf{v}}) = \\{ {\\bf{p}} +t{\\bf{v}} | t\\ge 0\\}$$</li>\n<li><strong>VO</strong>$VO^{A}_{B}({\\bf{v_{B}}})$$\\bf{v_{B}}$$B$$A$VO<br>$$VO^{A}_{B}({\\bf{v_{B}}}) = \\{ {\\bf{v_A}} | \\lambda({\\bf{p_{A}}}, {\\bf{v_{A} - v_{B}}}) \\cap B \\oplus -A \\ne \\emptyset \\}$$</li>\n</ul>\n<h2 id=\"RVO-Reciprocal-Velocity-Obstacle\"><a href=\"#RVO-Reciprocal-Velocity-Obstacle\" class=\"headerlink\" title=\"RVO(Reciprocal Velocity Obstacle)\"></a>RVO(Reciprocal Velocity Obstacle)</h2><p>VOVORVO</p>\n<p>RVOVO</p>\n<ul>\n<li><strong></strong>$A$$\\bf{v_{A}}$$\\bf{v_{A}^{\\prime}}$</li>\n<li><strong>RVO</strong>$\\bf{v_{A}}$</li>\n</ul>\n<div style=\"width:700px; margin-left:auto; margin-right:auto;\"><br>  <img src=\"/2017/01/13/paper-rvo/oscillation.png\" alt=\"\" title=\"\"><br></div>\n\n<h2 id=\"VO\"><a href=\"#VO\" class=\"headerlink\" title=\"VO\"></a>VO</h2><p>VO</p>\n<ul>\n<li><strong>Symmetry</strong>$\\bf{v_A}$$A$$\\bf{v_B}$$B$$\\bf{v_B}$$B$$\\bf{v_A}$$A$<br>$${\\bf{v_A}} \\in VO^{A}_{B}({\\bf{v_{B}}}) \\Leftrightarrow {\\bf{v_B}} \\in VO^{B}_{A}({\\bf{v_{A}}})$$</li>\n<li><strong>Translation Invariance</strong>$\\bf{v_A}$$A$$\\bf{v_B}$$B$$\\bf{v_A+u}$$A$$\\bf{v_B+u}$$B$<br>$${\\bf{v_A}} \\in VO^{A}_{B}({\\bf{v_{B}}}) \\Leftrightarrow {\\bf{v_A+u}} \\in VO^{A}_{B}({\\bf{v_{B}+u}})$$</li>\n<li><strong>Convexity</strong>$VO^{A}_{B}({\\bf{v_{B}}})$$VO^{A}_{B}({\\bf{v_{B}}})$VO<br>$${\\bf{v_A}} \\overrightarrow{\\notin} VO^{A}_{B}({\\bf{v_{B}}}) \\land  {\\bf{v_A^{\\prime}}} \\overrightarrow{\\notin} VO^{A}_{B}({\\bf{v_{B}}}) \\Rightarrow (1-\\alpha){\\bf{v_A}} + \\alpha{\\bf{v_{A}^{\\prime}}} \\overrightarrow{\\notin} VO^{A}_{B}({\\bf{v_{B}}}), for 0\\le \\alpha \\le 1$$</li>\n</ul>\n<div style=\"width:300px; margin-left:auto; margin-right:auto;\"><br>  <img src=\"/2017/01/13/paper-rvo/left_right.png\" alt=\"VO\" title=\"VO\"><br></div>\n\n<p></p>\n<ol>\n<li>${\\bf{v_A}} \\in VO^{A}_{B}({\\bf{v_{B}}}), {\\bf{v_B}} \\in VO^{B}_{A}({\\bf{v_{A}}})$</li>\n<li>VO${\\bf{v_A^{\\prime}}} \\notin VO^{A}_{B}({\\bf{v_{B}}}), {\\bf{v_B^{\\prime}}} \\notin VO^{B}_{A}({\\bf{v_{A}}})$</li>\n<li>VOSymmetry<strong>VO</strong>${\\bf{v_B}} \\notin VO^{B}_{A}({\\bf{v_{A}^{\\prime}}}), {\\bf{v_A}} \\notin VO^{A}_{B}({\\bf{v_{B}^{\\prime}}})$</li>\n<li><strong>prefer</strong>$\\bf{v_A}$$\\bf{v_B}$</li>\n<li><strong>14</strong></li>\n</ol>\n<h2 id=\"RVOInsight\"><a href=\"#RVOInsight\" class=\"headerlink\" title=\"RVOInsight\"></a>RVOInsight</h2><p></p>\n<blockquote>\n<p></p>\n</blockquote>\n<p>RVO</p>\n<ul>\n<li>VOVORVO<ul>\n<li>p.s. ReciprocalVO<strong></strong>RVO<strong></strong><strong></strong>VO<strong></strong></li>\n</ul>\n</li>\n<li>VO$\\bf{v_A^{\\prime}}$average$\\bf{v_A}$VO$\\bf{v_A^{\\prime}}$</li>\n</ul>\n<h2 id=\"RVO\"><a href=\"#RVO\" class=\"headerlink\" title=\"RVO\"></a>RVO</h2><ul>\n<li>$\\bf{v_{B}}$$B$$\\bf{v_A}$$A$RVO</li>\n</ul>\n<p>$$ RVO_{B}^{A}({\\bf{v_B}}, {\\bf{v_A}}) = \\{ {\\bf{v_{A}^{\\prime}}} | 2{\\bf{v_{A}^{\\prime}}} - {\\bf{v_A}} \\in VO^{A}_{B}({\\bf{v_{B}}})\\}$$</p>\n<ul>\n<li></li>\n</ul>\n<div style=\"width:500px; margin-left:auto; margin-right:auto;\"><br>  <img src=\"/2017/01/13/paper-rvo/rvo.png\" alt=\"RVO\" title=\"RVO\"><br></div>\n\n<ul>\n<li><ul>\n<li>$2{\\bf{v_{A}^{\\prime}}} - {\\bf{v_A}}$${\\bf{v_A}}$$\\bf{v_A^{\\prime}}$</li>\n<li><strong></strong>VORVO</li>\n<li><strong>RVO</strong>$\\bf{v_A}$VO</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"RVO\"><a href=\"#RVO\" class=\"headerlink\" title=\"RVO\"></a>RVO</h2><p></p>\n<ul>\n<li><strong></strong></li>\n<li></li>\n<li><strong></strong></li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><strong></strong></li>\n<li><strong></strong></li>\n<li><strong></strong>RVO</li>\n</ul>\n<h2 id=\"References\"><a href=\"#References\" class=\"headerlink\" title=\"References\"></a>References</h2><ul>\n<li><a href=\"http://gamma.cs.unc.edu/RVO/\" target=\"_blank\" rel=\"external\">Reciprocal Velocity Obstacles for Real-Time Multi-Agent Navigation</a></li>\n<li><a href=\"http://twistedoakstudios.com/blog/Post554\\_minkowski-sums-and-differences\" target=\"_blank\" rel=\"external\">Minkowski Sums</a></li>\n</ul>\n","excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>VORVO</p>\n<p>Agent<strong></strong>AgentA<strong></strong>B</p>\n<ul>\n<li><strong>High level</strong>: dijkstra</li>\n<li><strong>Low level</strong>: VO, RVO, ORCA</li>\n</ul>\n<p></p>\n<ul>\n<li><strong>High level</strong>: dijkstra: </li>\n<li><strong>Low level</strong>: VORVOORCAe.g. </li>\n</ul>\n<p>VORVOVORVOVOVO</p>\n<h2 id=\"VO-Velocity-Obstacle\"><a href=\"#VO-Velocity-Obstacle\" class=\"headerlink\" title=\"VO(Velocity Obstacle)\"></a>VO(Velocity Obstacle)</h2><p><strong></strong>VO</p>\n<p><strong></strong><strong></strong></p>\n<h2 id=\"VO\"><a href=\"#VO\" class=\"headerlink\" title=\"VO\"></a>VO</h2><div style=\"width:400px; margin-left:auto; margin-right:auto;\" ><br>  <img src=\"/2017/01/13/paper-rvo/prob_disc.png\" alt=\"\" title=\"\"><br></div>\n\n<blockquote>\n<p>Q: BAB</p>\n<p>A: <strong>A</strong><strong>$\\bar{B}$(B)</strong>VO</p>\n</blockquote>\n<div style=\"width:400px; margin-left:auto; margin-right:auto;\" ><br>  <img src=\"/2017/01/13/paper-rvo/prob_sol.png\" alt=\"\" title=\"\"><br></div>\n\n<p>VO</p>\n<ul>\n<li>VO$\\bar{B}$<strong></strong></li>\n<li>VO<strong></strong></li>\n<li><strong></strong>($v_{A}^{\\prime}$)</li>\n</ul>\n<h2 id=\"VO\"><a href=\"#VO\" class=\"headerlink\" title=\"VO\"></a>VO</h2><p>VO</p>\n<p></p>\n<ul>\n<li><strong>A(B)</strong>$\\bf{p_{A}}$$r_{A}$<strong>$A$</strong></li>\n<li><strong>B</strong>AB<strong>$\\bf{v_{A}}-v_{B}$</strong></li>\n<li><strong>A</strong>$B$$-A$Minkowski sum<strong>$B\\oplus-A$</strong><ul>\n<li>$A \\oplus B = \\{    {\\bf{a}} + {\\bf{b}} | {\\bf{a}} \\in A, {\\bf{b}} \\in B \\} $</li>\n<li>$-A = \\{ -{\\bf{a}} | {\\bf{a}} \\in A \\}$</li>\n<li><a href=\"http://twistedoakstudios.com/blog/Post554\\_minkowski-sums-and-differences\">Minkowski sum</a></li>\n</ul>\n</li>\n</ul>\n<p></p>\n<div style=\"width:500px; margin-left:auto; margin-right:auto;\" ><br>  <img src=\"/2017/01/13/paper-rvo/vo.png\" alt=\"VO\" title=\"VO\"><br></div>\n\n<p>$\\bf{v_{A}}$VO$\\bf{v_{A}}-v_{B}$VOVO$\\bf{v_{B}}$</p>\n<h2 id=\"VO\"><a href=\"#VO\" class=\"headerlink\" title=\"VO\"></a>VO</h2><p></p>\n<ul>\n<li><strong></strong>$\\lambda({\\bf{p}},{\\bf{v}})$$\\bf{p}$$\\bf{v}$<br>$$\\lambda({\\bf{p}}, {\\bf{v}}) = \\{ {\\bf{p}} +t{\\bf{v}} | t\\ge 0\\}$$</li>\n<li><strong>VO</strong>$VO^{A}_{B}({\\bf{v_{B}}})$$\\bf{v_{B}}$$B$$A$VO<br>$$VO^{A}_{B}({\\bf{v_{B}}}) = \\{ {\\bf{v_A}} | \\lambda({\\bf{p_{A}}}, {\\bf{v_{A} - v_{B}}}) \\cap B \\oplus -A \\ne \\emptyset \\}$$</li>\n</ul>\n<h2 id=\"RVO-Reciprocal-Velocity-Obstacle\"><a href=\"#RVO-Reciprocal-Velocity-Obstacle\" class=\"headerlink\" title=\"RVO(Reciprocal Velocity Obstacle)\"></a>RVO(Reciprocal Velocity Obstacle)</h2><p>VOVORVO</p>\n<p>RVOVO</p>\n<ul>\n<li><strong></strong>$A$$\\bf{v_{A}}$$\\bf{v_{A}^{\\prime}}$</li>\n<li><strong>RVO</strong>$\\bf{v_{A}}$</li>\n</ul>\n<div style=\"width:700px; margin-left:auto; margin-right:auto;\" ><br>  <img src=\"/2017/01/13/paper-rvo/oscillation.png\" alt=\"\" title=\"\"><br></div>\n\n<h2 id=\"VO\"><a href=\"#VO\" class=\"headerlink\" title=\"VO\"></a>VO</h2><p>VO</p>\n<ul>\n<li><strong>Symmetry</strong>$\\bf{v_A}$$A$$\\bf{v_B}$$B$$\\bf{v_B}$$B$$\\bf{v_A}$$A$<br>$${\\bf{v_A}} \\in VO^{A}_{B}({\\bf{v_{B}}}) \\Leftrightarrow {\\bf{v_B}} \\in VO^{B}_{A}({\\bf{v_{A}}})$$</li>\n<li><strong>Translation Invariance</strong>$\\bf{v_A}$$A$$\\bf{v_B}$$B$$\\bf{v_A+u}$$A$$\\bf{v_B+u}$$B$<br>$${\\bf{v_A}} \\in VO^{A}_{B}({\\bf{v_{B}}}) \\Leftrightarrow {\\bf{v_A+u}} \\in VO^{A}_{B}({\\bf{v_{B}+u}})$$</li>\n<li><strong>Convexity</strong>$VO^{A}_{B}({\\bf{v_{B}}})$$VO^{A}_{B}({\\bf{v_{B}}})$VO<br>$${\\bf{v_A}} \\overrightarrow{\\notin} VO^{A}_{B}({\\bf{v_{B}}}) \\land  {\\bf{v_A^{\\prime}}} \\overrightarrow{\\notin} VO^{A}_{B}({\\bf{v_{B}}}) \\Rightarrow (1-\\alpha){\\bf{v_A}} + \\alpha{\\bf{v_{A}^{\\prime}}} \\overrightarrow{\\notin} VO^{A}_{B}({\\bf{v_{B}}}), for 0\\le \\alpha \\le 1$$</li>\n</ul>\n<div style=\"width:300px; margin-left:auto; margin-right:auto;\" ><br>  <img src=\"/2017/01/13/paper-rvo/left_right.png\" alt=\"VO\" title=\"VO\"><br></div>\n\n<p></p>\n<ol>\n<li>${\\bf{v_A}} \\in VO^{A}_{B}({\\bf{v_{B}}}), {\\bf{v_B}} \\in VO^{B}_{A}({\\bf{v_{A}}})$</li>\n<li>VO${\\bf{v_A^{\\prime}}} \\notin VO^{A}_{B}({\\bf{v_{B}}}), {\\bf{v_B^{\\prime}}} \\notin VO^{B}_{A}({\\bf{v_{A}}})$</li>\n<li>VOSymmetry<strong>VO</strong>${\\bf{v_B}} \\notin VO^{B}_{A}({\\bf{v_{A}^{\\prime}}}), {\\bf{v_A}} \\notin VO^{A}_{B}({\\bf{v_{B}^{\\prime}}})$</li>\n<li><strong>prefer</strong>$\\bf{v_A}$$\\bf{v_B}$</li>\n<li><strong>14</strong></li>\n</ol>\n<h2 id=\"RVOInsight\"><a href=\"#RVOInsight\" class=\"headerlink\" title=\"RVOInsight\"></a>RVOInsight</h2><p></p>\n<blockquote>\n<p></p>\n</blockquote>\n<p>RVO</p>\n<ul>\n<li>VOVORVO<ul>\n<li>p.s. ReciprocalVO<strong></strong>RVO<strong></strong><strong></strong>VO<strong></strong></li>\n</ul>\n</li>\n<li>VO$\\bf{v_A^{\\prime}}$average$\\bf{v_A}$VO$\\bf{v_A^{\\prime}}$</li>\n</ul>\n<h2 id=\"RVO\"><a href=\"#RVO\" class=\"headerlink\" title=\"RVO\"></a>RVO</h2><ul>\n<li>$\\bf{v_{B}}$$B$$\\bf{v_A}$$A$RVO</li>\n</ul>\n<p>$$ RVO_{B}^{A}({\\bf{v_B}}, {\\bf{v_A}}) = \\{ {\\bf{v_{A}^{\\prime}}} | 2{\\bf{v_{A}^{\\prime}}} - {\\bf{v_A}} \\in VO^{A}_{B}({\\bf{v_{B}}})\\}$$</p>\n<ul>\n<li></li>\n</ul>\n<div style=\"width:500px; margin-left:auto; margin-right:auto;\" ><br>  <img src=\"/2017/01/13/paper-rvo/rvo.png\" alt=\"RVO\" title=\"RVO\"><br></div>\n\n<ul>\n<li><ul>\n<li>$2{\\bf{v_{A}^{\\prime}}} - {\\bf{v_A}}$${\\bf{v_A}}$$\\bf{v_A^{\\prime}}$</li>\n<li><strong></strong>VORVO</li>\n<li><strong>RVO</strong>$\\bf{v_A}$VO</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"RVO\"><a href=\"#RVO\" class=\"headerlink\" title=\"RVO\"></a>RVO</h2><p></p>\n<ul>\n<li><strong></strong></li>\n<li></li>\n<li><strong></strong></li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><strong></strong></li>\n<li><strong></strong></li>\n<li><strong></strong>RVO</li>\n</ul>\n<h2 id=\"References\"><a href=\"#References\" class=\"headerlink\" title=\"References\"></a>References</h2><ul>\n<li><a href=\"http://gamma.cs.unc.edu/RVO/\">Reciprocal Velocity Obstacles for Real-Time Multi-Agent Navigation</a></li>\n<li><a href=\"http://twistedoakstudios.com/blog/Post554\\_minkowski-sums-and-differences\">Minkowski Sums</a></li>\n</ul>\n"},{"title":"Rich feature hierarchies for accurate object detection and semantic segmentation","date":"2016-07-08T07:45:08.000Z","description":["object detectionRCNN"],"_content":"\n## \n- ****object detection\n- ****\n- ********\n\n## \n1. ****\n\t* localization \n\t* classification\n2. **localization**\n3. **classification**CNN\n4. ****\n\n## \n1. **localization**selective searchregion proposals\n2. **warped region**CNNregion proposals\n3. **feature extraction**CNN\n4. **classification**SVM\n5. ****NMS(non-maximum suppression)\n\n## \n- **pre-training**ILSVRC 2012CNN\n- **fine-tuning**pre-trainingCNNwarped region1000-way to 21-way\n\t* ****warped regionlabelGT(Ground Truth)IoU(Intersection-over-Union/)threshold0.5\n- **classifier**fine-tuningSVM\n\t* ****fine-tuningthreshold0.3\n\n## Visualization\n- ****unit**unitinput**inputunitinput\\_0unitinput\\_0unit\n\n## Ablation studies\n- **ablation**\n- ****\n\t* fine-tuningCNN\n\t* fine-tuning\n\n## Detection error analysis\n- ****percentage of each type - total false positivesFP\n\t* \n\t* \n\t* \n\t* \n- ****RCNN**bottom-up region proposals****positional invariance learned from pre-training CNN**\n- ******BB(Bounding box regression)**\n\n## \n- object detection\n- RCNN\n- \n\t* visualization\n\t* Ablation, detection error\n\t","source":"_posts/paper_rcnn.md","raw":"---\ntitle: Rich feature hierarchies for accurate object detection and semantic segmentation\ndate: 2016-07-08 15:45:08\ntags:\n\t- rcnn\ncategories:\n\t- \ndescription:\n\t- object detectionRCNN\n---\n\n## \n- ****object detection\n- ****\n- ********\n\n## \n1. ****\n\t* localization \n\t* classification\n2. **localization**\n3. **classification**CNN\n4. ****\n\n## \n1. **localization**selective searchregion proposals\n2. **warped region**CNNregion proposals\n3. **feature extraction**CNN\n4. **classification**SVM\n5. ****NMS(non-maximum suppression)\n\n## \n- **pre-training**ILSVRC 2012CNN\n- **fine-tuning**pre-trainingCNNwarped region1000-way to 21-way\n\t* ****warped regionlabelGT(Ground Truth)IoU(Intersection-over-Union/)threshold0.5\n- **classifier**fine-tuningSVM\n\t* ****fine-tuningthreshold0.3\n\n## Visualization\n- ****unit**unitinput**inputunitinput\\_0unitinput\\_0unit\n\n## Ablation studies\n- **ablation**\n- ****\n\t* fine-tuningCNN\n\t* fine-tuning\n\n## Detection error analysis\n- ****percentage of each type - total false positivesFP\n\t* \n\t* \n\t* \n\t* \n- ****RCNN**bottom-up region proposals****positional invariance learned from pre-training CNN**\n- ******BB(Bounding box regression)**\n\n## \n- object detection\n- RCNN\n- \n\t* visualization\n\t* Ablation, detection error\n\t","slug":"paper_rcnn","published":1,"updated":"2024-08-13T16:03:47.872Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clzvf192d001heqwo26yc4qn3","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><strong></strong>object detection</li>\n<li><strong></strong></li>\n<li><strong></strong><strong></strong></li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ol>\n<li><strong></strong><ul>\n<li>localization </li>\n<li>classification</li>\n</ul>\n</li>\n<li><strong>localization</strong></li>\n<li><strong>classification</strong>CNN</li>\n<li><strong></strong></li>\n</ol>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ol>\n<li><strong>localization</strong>selective searchregion proposals</li>\n<li><strong>warped region</strong>CNNregion proposals</li>\n<li><strong>feature extraction</strong>CNN</li>\n<li><strong>classification</strong>SVM</li>\n<li><strong></strong>NMS(non-maximum suppression)</li>\n</ol>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><strong>pre-training</strong>ILSVRC 2012CNN</li>\n<li><strong>fine-tuning</strong>pre-trainingCNNwarped region1000-way to 21-way<ul>\n<li><strong></strong>warped regionlabelGT(Ground Truth)IoU(Intersection-over-Union/)threshold0.5</li>\n</ul>\n</li>\n<li><strong>classifier</strong>fine-tuningSVM<ul>\n<li><strong></strong>fine-tuningthreshold0.3</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"Visualization\"><a href=\"#Visualization\" class=\"headerlink\" title=\"Visualization\"></a>Visualization</h2><ul>\n<li><strong></strong>unit<strong>unitinput</strong>inputunitinput_0unitinput_0unit</li>\n</ul>\n<h2 id=\"Ablation-studies\"><a href=\"#Ablation-studies\" class=\"headerlink\" title=\"Ablation studies\"></a>Ablation studies</h2><ul>\n<li><strong>ablation</strong></li>\n<li><strong></strong><ul>\n<li>fine-tuningCNN</li>\n<li>fine-tuning</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"Detection-error-analysis\"><a href=\"#Detection-error-analysis\" class=\"headerlink\" title=\"Detection error analysis\"></a>Detection error analysis</h2><ul>\n<li><strong></strong>percentage of each type - total false positivesFP<ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n</li>\n<li><strong></strong>RCNN<strong>bottom-up region proposals</strong><strong>positional invariance learned from pre-training CNN</strong></li>\n<li><strong></strong><strong>BB(Bounding box regression)</strong></li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li>object detection</li>\n<li>RCNN</li>\n<li><ul>\n<li>visualization</li>\n<li>Ablation, detection error</li>\n</ul>\n</li>\n</ul>\n","excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><strong></strong>object detection</li>\n<li><strong></strong></li>\n<li><strong></strong><strong></strong></li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ol>\n<li><strong></strong><ul>\n<li>localization </li>\n<li>classification</li>\n</ul>\n</li>\n<li><strong>localization</strong></li>\n<li><strong>classification</strong>CNN</li>\n<li><strong></strong></li>\n</ol>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ol>\n<li><strong>localization</strong>selective searchregion proposals</li>\n<li><strong>warped region</strong>CNNregion proposals</li>\n<li><strong>feature extraction</strong>CNN</li>\n<li><strong>classification</strong>SVM</li>\n<li><strong></strong>NMS(non-maximum suppression)</li>\n</ol>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><strong>pre-training</strong>ILSVRC 2012CNN</li>\n<li><strong>fine-tuning</strong>pre-trainingCNNwarped region1000-way to 21-way<ul>\n<li><strong></strong>warped regionlabelGT(Ground Truth)IoU(Intersection-over-Union/)threshold0.5</li>\n</ul>\n</li>\n<li><strong>classifier</strong>fine-tuningSVM<ul>\n<li><strong></strong>fine-tuningthreshold0.3</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"Visualization\"><a href=\"#Visualization\" class=\"headerlink\" title=\"Visualization\"></a>Visualization</h2><ul>\n<li><strong></strong>unit<strong>unitinput</strong>inputunitinput_0unitinput_0unit</li>\n</ul>\n<h2 id=\"Ablation-studies\"><a href=\"#Ablation-studies\" class=\"headerlink\" title=\"Ablation studies\"></a>Ablation studies</h2><ul>\n<li><strong>ablation</strong></li>\n<li><strong></strong><ul>\n<li>fine-tuningCNN</li>\n<li>fine-tuning</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"Detection-error-analysis\"><a href=\"#Detection-error-analysis\" class=\"headerlink\" title=\"Detection error analysis\"></a>Detection error analysis</h2><ul>\n<li><strong></strong>percentage of each type - total false positivesFP<ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n</li>\n<li><strong></strong>RCNN<strong>bottom-up region proposals</strong><strong>positional invariance learned from pre-training CNN</strong></li>\n<li><strong></strong><strong>BB(Bounding box regression)</strong></li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li>object detection</li>\n<li>RCNN</li>\n<li><ul>\n<li>visualization</li>\n<li>Ablation, detection error</li>\n</ul>\n</li>\n</ul>\n"},{"title":"CarlaUE5","date":"2024-08-13T14:36:17.000Z","description":["CarlaUE5"],"_content":"\n# \n\nCarlaUE5\n\n- repo: https://github.com/carla-simulator/carla.git\n- branch: `ue5-dev`\n- commit: `141a8a2`\n\n# \n\n<!-- <div style=\"width:400px; margin-left:auto; margin-right:auto;\" > -->\n<div style=\"max-width: 100%; margin: 0 auto;\">\n  {% asset_img carla.png  %}\n</div>\n\n# Server\n\n<!-- <div style=\"width:auto; margin-left:auto; margin-right:auto;\" > -->\n<div style=\"max-width: 100%; margin: 0 auto;\">\n  {% asset_img server.png Server %}\n</div>\n\n# Client\n\n<!-- <div style=\"width:400px; margin-left:auto; margin-right:auto;\" > -->\n<div style=\"max-width: 100%; margin: 0 auto;\">\n  {% asset_img client.png Client %}\n</div>\n\n# PythonAPI\n\n<!-- <div style=\"width:400px; margin-left:auto; margin-right:auto;\" > -->\n<div style=\"max-width: 100%; margin: 0 auto;\">\n  {% asset_img pythonapi.png PythonAPI %}\n</div>\n\n# C++\n\n## `weak_ptr`\n\n- motivation`shared_ptr`\n- `weak_ptr`\n- `weak_ptr``.lock()``shared_ptr`\n- [blog](https://blog.csdn.net/qq_38410730/article/details/105903979)[blog](https://blog.csdn.net/Xiejingfa/article/details/50772571)\n\n## `atomic`\n\n- motivation\n- `lock`, `mutex``atomic`\n- `atomic<int> ai;``ai.load()``ai.store(1)`\n- `atomic`[blog](https://www.cnblogs.com/kekec/p/14470150.html)\n\n## `enable_shared_from_this`\n\n- motivation`shared_ptr<T>(this)``shared_ptr<T>(this)``this`\n- `shared_ptr`\n    - `esft``weak_ptr``shared_ptr``shared_from_this``weak_ptr.lock()`\n    - `make_shared``dynamic_cast``esft``weak_ptr``shared_ptr`\n- [blog](https://blog.csdn.net/caoshangpa/article/details/79392878)\n\n## `mutable`\n\n- motivation`const`\n\n## `pImpl`\n\n- motivation\n    - \n    - \n- \n    - `private``Impl`\n    - `Impl``unique_ptr`\n\n## `compare_exchange`\n\n- motivation`store`\n- `self``expected``self``target`\n- CAS(Compare and Swap)\n- [blog](https://mk.woa.com/q/295415/answer/123484?kmref=vkm_push)\n\n<!-- ```mermaid\n---\ntitle: Carla Architecture\n---\nflowchart LR\n    PY[Python API]\n    C_CPP[C++ Carla Client]\n    C_RPC[C++ RPC Client]\n    S_RPC[C++ RPC Server]\n    S_PLUGIN[C++ Carla UE5 Plugin]\n    UE[UE]\n    PY --- |boost python| C_CPP\n    subgraph \"Client (LibCarla)\"\n    C_CPP --- C_RPC\n    end\n\n    C_RPC <--RPC--> S_RPC\n\n    subgraph Server\n    S_RPC --- S_PLUGIN\n    S_PLUGIN --- UE\n    end\n```\n\n```mermaid\n---\ntitle: Server Architecture\n---\nsequenceDiagram\n    autonumber\n    participant UE as UE\n    participant GM as CarlaGameModeBase.cpp\n    participant GI as CarlaGameInstance.cpp\n    participant NGN as CarlaEngine.cpp <br> (Define tick logic)\n    participant OBS as WorldObserver.cpp <br> (Hold actor states)\n    participant EPI as CarlaEpisode.cpp <br> (Hold UE APIs)\n    participant SVR as CarlaServer.cpp <br> (RPC Server)\n    participant CLIENT as RPC Client\n\n    UE ->> GM : DefaultEngine.ini\n    UE ->> GI : DefaultEngine.ini\n    UE ->> GM : InitGame\n    GM ->> GI : NotifyInitGame\n    GI ->> NGN : NotifyInitGame\n    NGN ->> UE : Register OnPreTick and OnPostTick\n    NGN ->> SVR : Start RPC Server\n    Note over SVR: Initialize RPC Server <br> FCarlaServer::FPimpl::BindActions()\n    SVR -->> NGN : return BroadcastStream\n    NGN ->> OBS : Bind stream <br> WorldObserver.SetStream(BroadcastStream);\n\n    UE ->> GM : BeginPlay\n    GM ->> EPI : Episode->InitializeAtBeginPlay()\n    GM ->> GI : NotifyBeginEpisode(UCarlaEpisode &)\n    GI ->> NGN : NotifyBeginEpisode\n    NGN ->> SVR : NotifyBeginEpisode\n    SVR ->> EPI : Bind <br> Pimpl->Episode = &Episode\n\n    loop UE Tick\n        rect rgb(191, 223, 255)\n            note over UE, GM : Client to Server communication\n            UE ->> NGN : Call registered OnPreTick\n            NGN ->> SVR : Server.RunSome(1u)\n            CLIENT ->> SVR : RPC requests\n            SVR ->> EPI : Call Episode's methods\n        end\n\n        rect rgb(191, 223, 255)\n            note over UE, GM : Server to Client communication\n            UE ->> NGN : Call registered OnPostTick\n            NGN ->> OBS : WorldObserver.BroadcastTick\n            OBS ->> SVR : SerializeAndSend\n            SVR ->> CLIENT : Broadcast\n        end\n    end\n```\n\n```mermaid\n---\ntitle: Client Architecture\n---\nsequenceDiagram\n    autonumber\n    participant CLIENT as Client.h <br> (High-level Carla Client)\n    participant WORLD as World.cpp <br> (Core API for user)\n    participant SIM as detail/Simulator.cpp\n    participant EPI as detail/Episode.cpp\n    participant EPI_PXY as detail/EpisodeProxy.cpp <br> (Util Class to wrap detail/Simulator.cpp, help handling different pointer types)\n    participant RPC_CLIENT as detail/Client.cpp <br> (RPC Client)\n    participant SVR as RPC Server in UE\n\n    CLIENT ->> SIM : Client():_simulator(new detail::Simulator(host, port, worker_threads)\n    SIM ->> RPC_CLIENT : Simulator():_client(host, port, worker_threads)\n\n    rect rgb(191, 223, 255)\n        note right of CLIENT: Client::GetWorld() {return World(_simulator->GetCurrentEpisode())}\n\n        CLIENT ->> SIM : _simulator->GetCurrentEpisode()\n        rect rgb(200, 150, 255)\n            note right of CLIENT: Simulator::GetCurrentEpisode()\n            SIM ->> EPI : _episode = std::make_shared<Episode>(_client, std::weak_ptr<Simulator>(shared_from_this()));\n            SIM ->> EPI : _episode->Listen();\n            EPI ->> RPC_CLIENT : Register callback to update EpisodeState(snapshot): _client.SubscribeToStream\n            note over RPC_CLIENT :     _pimpl->streaming_client.Subscribe\n            SIM ->> EPI_PXY : epi_pxy = EpisodeProxy{shared_from_this()}\n            note over EPI_PXY: EpisodeProxy():_simulator(std::move(simulator))\n            SIM -->> CLIENT : return epi_pxy\n        end\n\n        CLIENT ->> WORLD : World(_simulator->GetCurrentEpisode())\n        note over WORLD: World():_episode(std::move(episode))\n    end\n\n    rect rgb(191, 223, 255)   \n        note over WORLD: Client to Server communication \n        note right of WORLD: e.g., World::SpawnActor() {_episode.Lock()->SpawnActor}\n        WORLD ->> EPI_PXY : _episode.Lock()\n        EPI_PXY -->> WORLD : return Load(_simulator) <br> Load(ptr) {return ptr.load() / ptr.lock()}\n        WORLD ->> SIM : _episode.Lock().SpawnActor\n        SIM ->> RPC_CLIENT : _client.SpawnActor\n        RPC_CLIENT ->> SVR: _pimpl->CallAndWait<rpc::Actor>(\"spawn_actor\", description, transform);\n    end\n\n    rect rgb(191, 223, 255)\n    note over EPI: Server to Client communication\n    loop\n    SVR ->> RPC_CLIENT : Stream broadcast\n    RPC_CLIENT ->> EPI : Call registered callback\n    end\n    end\n```\n\n```mermaid\n---\ntitle: Python API\n---\nflowchart LR\n    LIBCARLA[LibCarla]\n    H[PythonAPI.h]\n    CPP[PythonAPI.cpp]\n    CLIENT[PythonAPI\\carla\\src\\Client.cpp]\n    WORLD[PythonAPI\\carla\\src\\World.cpp]\n\n    LIBCARLA ---|include| H\n\n    subgraph \"Main of boost python\"\n    H --- CPP \n    end\n\n    subgraph Exporter\n    CPP --- CLIENT \n    CPP --- WORLD\n    CPP --- ...\n    end\n``` -->","source":"_posts/source-carlaue5-architecture.md","raw":"---\ntitle: CarlaUE5\ndate: 2024-08-13 22:36:17\ntags: \n  - CarlaUE5\ndescription:\n  - CarlaUE5\ncategories:\n  - \n---\n\n# \n\nCarlaUE5\n\n- repo: https://github.com/carla-simulator/carla.git\n- branch: `ue5-dev`\n- commit: `141a8a2`\n\n# \n\n<!-- <div style=\"width:400px; margin-left:auto; margin-right:auto;\" > -->\n<div style=\"max-width: 100%; margin: 0 auto;\">\n  {% asset_img carla.png  %}\n</div>\n\n# Server\n\n<!-- <div style=\"width:auto; margin-left:auto; margin-right:auto;\" > -->\n<div style=\"max-width: 100%; margin: 0 auto;\">\n  {% asset_img server.png Server %}\n</div>\n\n# Client\n\n<!-- <div style=\"width:400px; margin-left:auto; margin-right:auto;\" > -->\n<div style=\"max-width: 100%; margin: 0 auto;\">\n  {% asset_img client.png Client %}\n</div>\n\n# PythonAPI\n\n<!-- <div style=\"width:400px; margin-left:auto; margin-right:auto;\" > -->\n<div style=\"max-width: 100%; margin: 0 auto;\">\n  {% asset_img pythonapi.png PythonAPI %}\n</div>\n\n# C++\n\n## `weak_ptr`\n\n- motivation`shared_ptr`\n- `weak_ptr`\n- `weak_ptr``.lock()``shared_ptr`\n- [blog](https://blog.csdn.net/qq_38410730/article/details/105903979)[blog](https://blog.csdn.net/Xiejingfa/article/details/50772571)\n\n## `atomic`\n\n- motivation\n- `lock`, `mutex``atomic`\n- `atomic<int> ai;``ai.load()``ai.store(1)`\n- `atomic`[blog](https://www.cnblogs.com/kekec/p/14470150.html)\n\n## `enable_shared_from_this`\n\n- motivation`shared_ptr<T>(this)``shared_ptr<T>(this)``this`\n- `shared_ptr`\n    - `esft``weak_ptr``shared_ptr``shared_from_this``weak_ptr.lock()`\n    - `make_shared``dynamic_cast``esft``weak_ptr``shared_ptr`\n- [blog](https://blog.csdn.net/caoshangpa/article/details/79392878)\n\n## `mutable`\n\n- motivation`const`\n\n## `pImpl`\n\n- motivation\n    - \n    - \n- \n    - `private``Impl`\n    - `Impl``unique_ptr`\n\n## `compare_exchange`\n\n- motivation`store`\n- `self``expected``self``target`\n- CAS(Compare and Swap)\n- [blog](https://mk.woa.com/q/295415/answer/123484?kmref=vkm_push)\n\n<!-- ```mermaid\n---\ntitle: Carla Architecture\n---\nflowchart LR\n    PY[Python API]\n    C_CPP[C++ Carla Client]\n    C_RPC[C++ RPC Client]\n    S_RPC[C++ RPC Server]\n    S_PLUGIN[C++ Carla UE5 Plugin]\n    UE[UE]\n    PY --- |boost python| C_CPP\n    subgraph \"Client (LibCarla)\"\n    C_CPP --- C_RPC\n    end\n\n    C_RPC <--RPC--> S_RPC\n\n    subgraph Server\n    S_RPC --- S_PLUGIN\n    S_PLUGIN --- UE\n    end\n```\n\n```mermaid\n---\ntitle: Server Architecture\n---\nsequenceDiagram\n    autonumber\n    participant UE as UE\n    participant GM as CarlaGameModeBase.cpp\n    participant GI as CarlaGameInstance.cpp\n    participant NGN as CarlaEngine.cpp <br> (Define tick logic)\n    participant OBS as WorldObserver.cpp <br> (Hold actor states)\n    participant EPI as CarlaEpisode.cpp <br> (Hold UE APIs)\n    participant SVR as CarlaServer.cpp <br> (RPC Server)\n    participant CLIENT as RPC Client\n\n    UE ->> GM : DefaultEngine.ini\n    UE ->> GI : DefaultEngine.ini\n    UE ->> GM : InitGame\n    GM ->> GI : NotifyInitGame\n    GI ->> NGN : NotifyInitGame\n    NGN ->> UE : Register OnPreTick and OnPostTick\n    NGN ->> SVR : Start RPC Server\n    Note over SVR: Initialize RPC Server <br> FCarlaServer::FPimpl::BindActions()\n    SVR -->> NGN : return BroadcastStream\n    NGN ->> OBS : Bind stream <br> WorldObserver.SetStream(BroadcastStream);\n\n    UE ->> GM : BeginPlay\n    GM ->> EPI : Episode->InitializeAtBeginPlay()\n    GM ->> GI : NotifyBeginEpisode(UCarlaEpisode &)\n    GI ->> NGN : NotifyBeginEpisode\n    NGN ->> SVR : NotifyBeginEpisode\n    SVR ->> EPI : Bind <br> Pimpl->Episode = &Episode\n\n    loop UE Tick\n        rect rgb(191, 223, 255)\n            note over UE, GM : Client to Server communication\n            UE ->> NGN : Call registered OnPreTick\n            NGN ->> SVR : Server.RunSome(1u)\n            CLIENT ->> SVR : RPC requests\n            SVR ->> EPI : Call Episode's methods\n        end\n\n        rect rgb(191, 223, 255)\n            note over UE, GM : Server to Client communication\n            UE ->> NGN : Call registered OnPostTick\n            NGN ->> OBS : WorldObserver.BroadcastTick\n            OBS ->> SVR : SerializeAndSend\n            SVR ->> CLIENT : Broadcast\n        end\n    end\n```\n\n```mermaid\n---\ntitle: Client Architecture\n---\nsequenceDiagram\n    autonumber\n    participant CLIENT as Client.h <br> (High-level Carla Client)\n    participant WORLD as World.cpp <br> (Core API for user)\n    participant SIM as detail/Simulator.cpp\n    participant EPI as detail/Episode.cpp\n    participant EPI_PXY as detail/EpisodeProxy.cpp <br> (Util Class to wrap detail/Simulator.cpp, help handling different pointer types)\n    participant RPC_CLIENT as detail/Client.cpp <br> (RPC Client)\n    participant SVR as RPC Server in UE\n\n    CLIENT ->> SIM : Client():_simulator(new detail::Simulator(host, port, worker_threads)\n    SIM ->> RPC_CLIENT : Simulator():_client(host, port, worker_threads)\n\n    rect rgb(191, 223, 255)\n        note right of CLIENT: Client::GetWorld() {return World(_simulator->GetCurrentEpisode())}\n\n        CLIENT ->> SIM : _simulator->GetCurrentEpisode()\n        rect rgb(200, 150, 255)\n            note right of CLIENT: Simulator::GetCurrentEpisode()\n            SIM ->> EPI : _episode = std::make_shared<Episode>(_client, std::weak_ptr<Simulator>(shared_from_this()));\n            SIM ->> EPI : _episode->Listen();\n            EPI ->> RPC_CLIENT : Register callback to update EpisodeState(snapshot): _client.SubscribeToStream\n            note over RPC_CLIENT :     _pimpl->streaming_client.Subscribe\n            SIM ->> EPI_PXY : epi_pxy = EpisodeProxy{shared_from_this()}\n            note over EPI_PXY: EpisodeProxy():_simulator(std::move(simulator))\n            SIM -->> CLIENT : return epi_pxy\n        end\n\n        CLIENT ->> WORLD : World(_simulator->GetCurrentEpisode())\n        note over WORLD: World():_episode(std::move(episode))\n    end\n\n    rect rgb(191, 223, 255)   \n        note over WORLD: Client to Server communication \n        note right of WORLD: e.g., World::SpawnActor() {_episode.Lock()->SpawnActor}\n        WORLD ->> EPI_PXY : _episode.Lock()\n        EPI_PXY -->> WORLD : return Load(_simulator) <br> Load(ptr) {return ptr.load() / ptr.lock()}\n        WORLD ->> SIM : _episode.Lock().SpawnActor\n        SIM ->> RPC_CLIENT : _client.SpawnActor\n        RPC_CLIENT ->> SVR: _pimpl->CallAndWait<rpc::Actor>(\"spawn_actor\", description, transform);\n    end\n\n    rect rgb(191, 223, 255)\n    note over EPI: Server to Client communication\n    loop\n    SVR ->> RPC_CLIENT : Stream broadcast\n    RPC_CLIENT ->> EPI : Call registered callback\n    end\n    end\n```\n\n```mermaid\n---\ntitle: Python API\n---\nflowchart LR\n    LIBCARLA[LibCarla]\n    H[PythonAPI.h]\n    CPP[PythonAPI.cpp]\n    CLIENT[PythonAPI\\carla\\src\\Client.cpp]\n    WORLD[PythonAPI\\carla\\src\\World.cpp]\n\n    LIBCARLA ---|include| H\n\n    subgraph \"Main of boost python\"\n    H --- CPP \n    end\n\n    subgraph Exporter\n    CPP --- CLIENT \n    CPP --- WORLD\n    CPP --- ...\n    end\n``` -->","slug":"source-carlaue5-architecture","published":1,"updated":"2024-08-14T13:37:58.881Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clzvf192e001keqwonw4xqcj0","content":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p>CarlaUE5</p>\n<ul>\n<li>repo: <a href=\"https://github.com/carla-simulator/carla.git\" target=\"_blank\" rel=\"external\">https://github.com/carla-simulator/carla.git</a></li>\n<li>branch: <code>ue5-dev</code></li>\n<li>commit: <code>141a8a2</code></li>\n</ul>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><!-- <div style=\"width:400px; margin-left:auto; margin-right:auto;\" > -->\n<div style=\"max-width: 100%; margin: 0 auto;\"><br>  <img src=\"/2024/08/13/source-carlaue5-architecture/carla.png\" alt=\"\" title=\"\"><br></div>\n\n<h1 id=\"Server\"><a href=\"#Server\" class=\"headerlink\" title=\"Server\"></a>Server</h1><!-- <div style=\"width:auto; margin-left:auto; margin-right:auto;\" > -->\n<div style=\"max-width: 100%; margin: 0 auto;\"><br>  <img src=\"/2024/08/13/source-carlaue5-architecture/server.png\" alt=\"Server\" title=\"Server\"><br></div>\n\n<h1 id=\"Client\"><a href=\"#Client\" class=\"headerlink\" title=\"Client\"></a>Client</h1><!-- <div style=\"width:400px; margin-left:auto; margin-right:auto;\" > -->\n<div style=\"max-width: 100%; margin: 0 auto;\"><br>  <img src=\"/2024/08/13/source-carlaue5-architecture/client.png\" alt=\"Client\" title=\"Client\"><br></div>\n\n<h1 id=\"PythonAPI\"><a href=\"#PythonAPI\" class=\"headerlink\" title=\"PythonAPI\"></a>PythonAPI</h1><!-- <div style=\"width:400px; margin-left:auto; margin-right:auto;\" > -->\n<div style=\"max-width: 100%; margin: 0 auto;\"><br>  <img src=\"/2024/08/13/source-carlaue5-architecture/pythonapi.png\" alt=\"PythonAPI\" title=\"PythonAPI\"><br></div>\n\n<h1 id=\"C-\"><a href=\"#C-\" class=\"headerlink\" title=\"C++\"></a>C++</h1><h2 id=\"weak-ptr\"><a href=\"#weak-ptr\" class=\"headerlink\" title=\"weak_ptr\"></a><code>weak_ptr</code></h2><ul>\n<li>motivation<code>shared_ptr</code></li>\n<li><code>weak_ptr</code></li>\n<li><code>weak_ptr</code><code>.lock()</code><code>shared_ptr</code></li>\n<li><a href=\"https://blog.csdn.net/qq_38410730/article/details/105903979\" target=\"_blank\" rel=\"external\">blog</a><a href=\"https://blog.csdn.net/Xiejingfa/article/details/50772571\" target=\"_blank\" rel=\"external\">blog</a></li>\n</ul>\n<h2 id=\"atomic\"><a href=\"#atomic\" class=\"headerlink\" title=\"atomic\"></a><code>atomic</code></h2><ul>\n<li>motivation</li>\n<li><code>lock</code>, <code>mutex</code><code>atomic</code></li>\n<li><code>atomic&lt;int&gt; ai;</code><code>ai.load()</code><code>ai.store(1)</code></li>\n<li><code>atomic</code><a href=\"https://www.cnblogs.com/kekec/p/14470150.html\" target=\"_blank\" rel=\"external\">blog</a></li>\n</ul>\n<h2 id=\"enable-shared-from-this\"><a href=\"#enable-shared-from-this\" class=\"headerlink\" title=\"enable_shared_from_this\"></a><code>enable_shared_from_this</code></h2><ul>\n<li>motivation<code>shared_ptr&lt;T&gt;(this)</code><code>shared_ptr&lt;T&gt;(this)</code><code>this</code></li>\n<li><code>shared_ptr</code><ul>\n<li><code>esft</code><code>weak_ptr</code><code>shared_ptr</code><code>shared_from_this</code><code>weak_ptr.lock()</code></li>\n<li><code>make_shared</code><code>dynamic_cast</code><code>esft</code><code>weak_ptr</code><code>shared_ptr</code></li>\n</ul>\n</li>\n<li><a href=\"https://blog.csdn.net/caoshangpa/article/details/79392878\" target=\"_blank\" rel=\"external\">blog</a></li>\n</ul>\n<h2 id=\"mutable\"><a href=\"#mutable\" class=\"headerlink\" title=\"mutable\"></a><code>mutable</code></h2><ul>\n<li>motivation<code>const</code></li>\n</ul>\n<h2 id=\"pImpl\"><a href=\"#pImpl\" class=\"headerlink\" title=\"pImpl\"></a><code>pImpl</code></h2><ul>\n<li>motivation<ul>\n<li></li>\n<li></li>\n</ul>\n</li>\n<li><ul>\n<li><code>private</code><code>Impl</code></li>\n<li><code>Impl</code><code>unique_ptr</code></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"compare-exchange\"><a href=\"#compare-exchange\" class=\"headerlink\" title=\"compare_exchange\"></a><code>compare_exchange</code></h2><ul>\n<li>motivation<code>store</code></li>\n<li><code>self</code><code>expected</code><code>self</code><code>target</code></li>\n<li>CAS(Compare and Swap)</li>\n<li><a href=\"https://mk.woa.com/q/295415/answer/123484?kmref=vkm_push\" target=\"_blank\" rel=\"external\">blog</a></li>\n</ul>\n<!-- <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\">---</div><div class=\"line\">title: Carla Architecture</div><div class=\"line\">---</div><div class=\"line\">flowchart LR</div><div class=\"line\">    PY[Python API]</div><div class=\"line\">    C_CPP[C++ Carla Client]</div><div class=\"line\">    C_RPC[C++ RPC Client]</div><div class=\"line\">    S_RPC[C++ RPC Server]</div><div class=\"line\">    S_PLUGIN[C++ Carla UE5 Plugin]</div><div class=\"line\">    UE[UE]</div><div class=\"line\">    PY --- |boost python| C_CPP</div><div class=\"line\">    subgraph &quot;Client (LibCarla)&quot;</div><div class=\"line\">    C_CPP --- C_RPC</div><div class=\"line\">    end</div><div class=\"line\"></div><div class=\"line\">    C_RPC &lt;--RPC--&gt; S_RPC</div><div class=\"line\"></div><div class=\"line\">    subgraph Server</div><div class=\"line\">    S_RPC --- S_PLUGIN</div><div class=\"line\">    S_PLUGIN --- UE</div><div class=\"line\">    end</div></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div></pre></td><td class=\"code\"><pre><div class=\"line\">---</div><div class=\"line\">title: Server Architecture</div><div class=\"line\">---</div><div class=\"line\">sequenceDiagram</div><div class=\"line\">    autonumber</div><div class=\"line\">    participant UE as UE</div><div class=\"line\">    participant GM as CarlaGameModeBase.cpp</div><div class=\"line\">    participant GI as CarlaGameInstance.cpp</div><div class=\"line\">    participant NGN as CarlaEngine.cpp &lt;br&gt; (Define tick logic)</div><div class=\"line\">    participant OBS as WorldObserver.cpp &lt;br&gt; (Hold actor states)</div><div class=\"line\">    participant EPI as CarlaEpisode.cpp &lt;br&gt; (Hold UE APIs)</div><div class=\"line\">    participant SVR as CarlaServer.cpp &lt;br&gt; (RPC Server)</div><div class=\"line\">    participant CLIENT as RPC Client</div><div class=\"line\"></div><div class=\"line\">    UE -&gt;&gt; GM : DefaultEngine.ini</div><div class=\"line\">    UE -&gt;&gt; GI : DefaultEngine.ini</div><div class=\"line\">    UE -&gt;&gt; GM : InitGame</div><div class=\"line\">    GM -&gt;&gt; GI : NotifyInitGame</div><div class=\"line\">    GI -&gt;&gt; NGN : NotifyInitGame</div><div class=\"line\">    NGN -&gt;&gt; UE : Register OnPreTick and OnPostTick</div><div class=\"line\">    NGN -&gt;&gt; SVR : Start RPC Server</div><div class=\"line\">    Note over SVR: Initialize RPC Server &lt;br&gt; FCarlaServer::FPimpl::BindActions()</div><div class=\"line\">    SVR --&gt;&gt; NGN : return BroadcastStream</div><div class=\"line\">    NGN -&gt;&gt; OBS : Bind stream &lt;br&gt; WorldObserver.SetStream(BroadcastStream);</div><div class=\"line\"></div><div class=\"line\">    UE -&gt;&gt; GM : BeginPlay</div><div class=\"line\">    GM -&gt;&gt; EPI : Episode-&gt;InitializeAtBeginPlay()</div><div class=\"line\">    GM -&gt;&gt; GI : NotifyBeginEpisode(UCarlaEpisode &amp;)</div><div class=\"line\">    GI -&gt;&gt; NGN : NotifyBeginEpisode</div><div class=\"line\">    NGN -&gt;&gt; SVR : NotifyBeginEpisode</div><div class=\"line\">    SVR -&gt;&gt; EPI : Bind &lt;br&gt; Pimpl-&gt;Episode = &amp;Episode</div><div class=\"line\"></div><div class=\"line\">    loop UE Tick</div><div class=\"line\">        rect rgb(191, 223, 255)</div><div class=\"line\">            note over UE, GM : Client to Server communication</div><div class=\"line\">            UE -&gt;&gt; NGN : Call registered OnPreTick</div><div class=\"line\">            NGN -&gt;&gt; SVR : Server.RunSome(1u)</div><div class=\"line\">            CLIENT -&gt;&gt; SVR : RPC requests</div><div class=\"line\">            SVR -&gt;&gt; EPI : Call Episode&apos;s methods</div><div class=\"line\">        end</div><div class=\"line\"></div><div class=\"line\">        rect rgb(191, 223, 255)</div><div class=\"line\">            note over UE, GM : Server to Client communication</div><div class=\"line\">            UE -&gt;&gt; NGN : Call registered OnPostTick</div><div class=\"line\">            NGN -&gt;&gt; OBS : WorldObserver.BroadcastTick</div><div class=\"line\">            OBS -&gt;&gt; SVR : SerializeAndSend</div><div class=\"line\">            SVR -&gt;&gt; CLIENT : Broadcast</div><div class=\"line\">        end</div><div class=\"line\">    end</div></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div></pre></td><td class=\"code\"><pre><div class=\"line\">---</div><div class=\"line\">title: Client Architecture</div><div class=\"line\">---</div><div class=\"line\">sequenceDiagram</div><div class=\"line\">    autonumber</div><div class=\"line\">    participant CLIENT as Client.h &lt;br&gt; (High-level Carla Client)</div><div class=\"line\">    participant WORLD as World.cpp &lt;br&gt; (Core API for user)</div><div class=\"line\">    participant SIM as detail/Simulator.cpp</div><div class=\"line\">    participant EPI as detail/Episode.cpp</div><div class=\"line\">    participant EPI_PXY as detail/EpisodeProxy.cpp &lt;br&gt; (Util Class to wrap detail/Simulator.cpp, help handling different pointer types)</div><div class=\"line\">    participant RPC_CLIENT as detail/Client.cpp &lt;br&gt; (RPC Client)</div><div class=\"line\">    participant SVR as RPC Server in UE</div><div class=\"line\"></div><div class=\"line\">    CLIENT -&gt;&gt; SIM : Client():_simulator(new detail::Simulator(host, port, worker_threads)</div><div class=\"line\">    SIM -&gt;&gt; RPC_CLIENT : Simulator():_client(host, port, worker_threads)</div><div class=\"line\"></div><div class=\"line\">    rect rgb(191, 223, 255)</div><div class=\"line\">        note right of CLIENT: Client::GetWorld() &#123;return World(_simulator-&gt;GetCurrentEpisode())&#125;</div><div class=\"line\"></div><div class=\"line\">        CLIENT -&gt;&gt; SIM : _simulator-&gt;GetCurrentEpisode()</div><div class=\"line\">        rect rgb(200, 150, 255)</div><div class=\"line\">            note right of CLIENT: Simulator::GetCurrentEpisode()</div><div class=\"line\">            SIM -&gt;&gt; EPI : _episode = std::make_shared&lt;Episode&gt;(_client, std::weak_ptr&lt;Simulator&gt;(shared_from_this()));</div><div class=\"line\">            SIM -&gt;&gt; EPI : _episode-&gt;Listen();</div><div class=\"line\">            EPI -&gt;&gt; RPC_CLIENT : Register callback to update EpisodeState(snapshot): _client.SubscribeToStream</div><div class=\"line\">            note over RPC_CLIENT :     _pimpl-&gt;streaming_client.Subscribe</div><div class=\"line\">            SIM -&gt;&gt; EPI_PXY : epi_pxy = EpisodeProxy&#123;shared_from_this()&#125;</div><div class=\"line\">            note over EPI_PXY: EpisodeProxy():_simulator(std::move(simulator))</div><div class=\"line\">            SIM --&gt;&gt; CLIENT : return epi_pxy</div><div class=\"line\">        end</div><div class=\"line\"></div><div class=\"line\">        CLIENT -&gt;&gt; WORLD : World(_simulator-&gt;GetCurrentEpisode())</div><div class=\"line\">        note over WORLD: World():_episode(std::move(episode))</div><div class=\"line\">    end</div><div class=\"line\"></div><div class=\"line\">    rect rgb(191, 223, 255)   </div><div class=\"line\">        note over WORLD: Client to Server communication </div><div class=\"line\">        note right of WORLD: e.g., World::SpawnActor() &#123;_episode.Lock()-&gt;SpawnActor&#125;</div><div class=\"line\">        WORLD -&gt;&gt; EPI_PXY : _episode.Lock()</div><div class=\"line\">        EPI_PXY --&gt;&gt; WORLD : return Load(_simulator) &lt;br&gt; Load(ptr) &#123;return ptr.load() / ptr.lock()&#125;</div><div class=\"line\">        WORLD -&gt;&gt; SIM : _episode.Lock().SpawnActor</div><div class=\"line\">        SIM -&gt;&gt; RPC_CLIENT : _client.SpawnActor</div><div class=\"line\">        RPC_CLIENT -&gt;&gt; SVR: _pimpl-&gt;CallAndWait&lt;rpc::Actor&gt;(&quot;spawn_actor&quot;, description, transform);</div><div class=\"line\">    end</div><div class=\"line\"></div><div class=\"line\">    rect rgb(191, 223, 255)</div><div class=\"line\">    note over EPI: Server to Client communication</div><div class=\"line\">    loop</div><div class=\"line\">    SVR -&gt;&gt; RPC_CLIENT : Stream broadcast</div><div class=\"line\">    RPC_CLIENT -&gt;&gt; EPI : Call registered callback</div><div class=\"line\">    end</div><div class=\"line\">    end</div></pre></td></tr></table></figure>\n<h2 id=\"mermaid\"><a href=\"#mermaid\" class=\"headerlink\" title=\"```mermaid\"></a>```mermaid</h2><h2 id=\"title-Python-API\"><a href=\"#title-Python-API\" class=\"headerlink\" title=\"title: Python API\"></a>title: Python API</h2><p>flowchart LR<br>    LIBCARLA[LibCarla]<br>    H[PythonAPI.h]<br>    CPP[PythonAPI.cpp]<br>    CLIENT[PythonAPI\\carla\\src\\Client.cpp]<br>    WORLD[PythonAPI\\carla\\src\\World.cpp]</p>\n<pre><code>LIBCARLA ---|include| H\n\nsubgraph &quot;Main of boost python&quot;\nH --- CPP \nend\n\nsubgraph Exporter\nCPP --- CLIENT \nCPP --- WORLD\nCPP --- ...\nend\n</code></pre><p>``` &gt;</p>\n-->","excerpt":"","more":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p>CarlaUE5</p>\n<ul>\n<li>repo: <a href=\"https://github.com/carla-simulator/carla.git\">https://github.com/carla-simulator/carla.git</a></li>\n<li>branch: <code>ue5-dev</code></li>\n<li>commit: <code>141a8a2</code></li>\n</ul>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><!-- <div style=\"width:400px; margin-left:auto; margin-right:auto;\" > -->\n<div style=\"max-width: 100%; margin: 0 auto;\"><br>  <img src=\"/2024/08/13/source-carlaue5-architecture/carla.png\" alt=\"\" title=\"\"><br></div>\n\n<h1 id=\"Server\"><a href=\"#Server\" class=\"headerlink\" title=\"Server\"></a>Server</h1><!-- <div style=\"width:auto; margin-left:auto; margin-right:auto;\" > -->\n<div style=\"max-width: 100%; margin: 0 auto;\"><br>  <img src=\"/2024/08/13/source-carlaue5-architecture/server.png\" alt=\"Server\" title=\"Server\"><br></div>\n\n<h1 id=\"Client\"><a href=\"#Client\" class=\"headerlink\" title=\"Client\"></a>Client</h1><!-- <div style=\"width:400px; margin-left:auto; margin-right:auto;\" > -->\n<div style=\"max-width: 100%; margin: 0 auto;\"><br>  <img src=\"/2024/08/13/source-carlaue5-architecture/client.png\" alt=\"Client\" title=\"Client\"><br></div>\n\n<h1 id=\"PythonAPI\"><a href=\"#PythonAPI\" class=\"headerlink\" title=\"PythonAPI\"></a>PythonAPI</h1><!-- <div style=\"width:400px; margin-left:auto; margin-right:auto;\" > -->\n<div style=\"max-width: 100%; margin: 0 auto;\"><br>  <img src=\"/2024/08/13/source-carlaue5-architecture/pythonapi.png\" alt=\"PythonAPI\" title=\"PythonAPI\"><br></div>\n\n<h1 id=\"C-\"><a href=\"#C-\" class=\"headerlink\" title=\"C++\"></a>C++</h1><h2 id=\"weak-ptr\"><a href=\"#weak-ptr\" class=\"headerlink\" title=\"weak_ptr\"></a><code>weak_ptr</code></h2><ul>\n<li>motivation<code>shared_ptr</code></li>\n<li><code>weak_ptr</code></li>\n<li><code>weak_ptr</code><code>.lock()</code><code>shared_ptr</code></li>\n<li><a href=\"https://blog.csdn.net/qq_38410730/article/details/105903979\">blog</a><a href=\"https://blog.csdn.net/Xiejingfa/article/details/50772571\">blog</a></li>\n</ul>\n<h2 id=\"atomic\"><a href=\"#atomic\" class=\"headerlink\" title=\"atomic\"></a><code>atomic</code></h2><ul>\n<li>motivation</li>\n<li><code>lock</code>, <code>mutex</code><code>atomic</code></li>\n<li><code>atomic&lt;int&gt; ai;</code><code>ai.load()</code><code>ai.store(1)</code></li>\n<li><code>atomic</code><a href=\"https://www.cnblogs.com/kekec/p/14470150.html\">blog</a></li>\n</ul>\n<h2 id=\"enable-shared-from-this\"><a href=\"#enable-shared-from-this\" class=\"headerlink\" title=\"enable_shared_from_this\"></a><code>enable_shared_from_this</code></h2><ul>\n<li>motivation<code>shared_ptr&lt;T&gt;(this)</code><code>shared_ptr&lt;T&gt;(this)</code><code>this</code></li>\n<li><code>shared_ptr</code><ul>\n<li><code>esft</code><code>weak_ptr</code><code>shared_ptr</code><code>shared_from_this</code><code>weak_ptr.lock()</code></li>\n<li><code>make_shared</code><code>dynamic_cast</code><code>esft</code><code>weak_ptr</code><code>shared_ptr</code></li>\n</ul>\n</li>\n<li><a href=\"https://blog.csdn.net/caoshangpa/article/details/79392878\">blog</a></li>\n</ul>\n<h2 id=\"mutable\"><a href=\"#mutable\" class=\"headerlink\" title=\"mutable\"></a><code>mutable</code></h2><ul>\n<li>motivation<code>const</code></li>\n</ul>\n<h2 id=\"pImpl\"><a href=\"#pImpl\" class=\"headerlink\" title=\"pImpl\"></a><code>pImpl</code></h2><ul>\n<li>motivation<ul>\n<li></li>\n<li></li>\n</ul>\n</li>\n<li><ul>\n<li><code>private</code><code>Impl</code></li>\n<li><code>Impl</code><code>unique_ptr</code></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"compare-exchange\"><a href=\"#compare-exchange\" class=\"headerlink\" title=\"compare_exchange\"></a><code>compare_exchange</code></h2><ul>\n<li>motivation<code>store</code></li>\n<li><code>self</code><code>expected</code><code>self</code><code>target</code></li>\n<li>CAS(Compare and Swap)</li>\n<li><a href=\"https://mk.woa.com/q/295415/answer/123484?kmref=vkm_push\">blog</a></li>\n</ul>\n<!-- <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\">---</div><div class=\"line\">title: Carla Architecture</div><div class=\"line\">---</div><div class=\"line\">flowchart LR</div><div class=\"line\">    PY[Python API]</div><div class=\"line\">    C_CPP[C++ Carla Client]</div><div class=\"line\">    C_RPC[C++ RPC Client]</div><div class=\"line\">    S_RPC[C++ RPC Server]</div><div class=\"line\">    S_PLUGIN[C++ Carla UE5 Plugin]</div><div class=\"line\">    UE[UE]</div><div class=\"line\">    PY --- |boost python| C_CPP</div><div class=\"line\">    subgraph &quot;Client (LibCarla)&quot;</div><div class=\"line\">    C_CPP --- C_RPC</div><div class=\"line\">    end</div><div class=\"line\"></div><div class=\"line\">    C_RPC &lt;--RPC--&gt; S_RPC</div><div class=\"line\"></div><div class=\"line\">    subgraph Server</div><div class=\"line\">    S_RPC --- S_PLUGIN</div><div class=\"line\">    S_PLUGIN --- UE</div><div class=\"line\">    end</div></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div></pre></td><td class=\"code\"><pre><div class=\"line\">---</div><div class=\"line\">title: Server Architecture</div><div class=\"line\">---</div><div class=\"line\">sequenceDiagram</div><div class=\"line\">    autonumber</div><div class=\"line\">    participant UE as UE</div><div class=\"line\">    participant GM as CarlaGameModeBase.cpp</div><div class=\"line\">    participant GI as CarlaGameInstance.cpp</div><div class=\"line\">    participant NGN as CarlaEngine.cpp &lt;br&gt; (Define tick logic)</div><div class=\"line\">    participant OBS as WorldObserver.cpp &lt;br&gt; (Hold actor states)</div><div class=\"line\">    participant EPI as CarlaEpisode.cpp &lt;br&gt; (Hold UE APIs)</div><div class=\"line\">    participant SVR as CarlaServer.cpp &lt;br&gt; (RPC Server)</div><div class=\"line\">    participant CLIENT as RPC Client</div><div class=\"line\"></div><div class=\"line\">    UE -&gt;&gt; GM : DefaultEngine.ini</div><div class=\"line\">    UE -&gt;&gt; GI : DefaultEngine.ini</div><div class=\"line\">    UE -&gt;&gt; GM : InitGame</div><div class=\"line\">    GM -&gt;&gt; GI : NotifyInitGame</div><div class=\"line\">    GI -&gt;&gt; NGN : NotifyInitGame</div><div class=\"line\">    NGN -&gt;&gt; UE : Register OnPreTick and OnPostTick</div><div class=\"line\">    NGN -&gt;&gt; SVR : Start RPC Server</div><div class=\"line\">    Note over SVR: Initialize RPC Server &lt;br&gt; FCarlaServer::FPimpl::BindActions()</div><div class=\"line\">    SVR --&gt;&gt; NGN : return BroadcastStream</div><div class=\"line\">    NGN -&gt;&gt; OBS : Bind stream &lt;br&gt; WorldObserver.SetStream(BroadcastStream);</div><div class=\"line\"></div><div class=\"line\">    UE -&gt;&gt; GM : BeginPlay</div><div class=\"line\">    GM -&gt;&gt; EPI : Episode-&gt;InitializeAtBeginPlay()</div><div class=\"line\">    GM -&gt;&gt; GI : NotifyBeginEpisode(UCarlaEpisode &amp;)</div><div class=\"line\">    GI -&gt;&gt; NGN : NotifyBeginEpisode</div><div class=\"line\">    NGN -&gt;&gt; SVR : NotifyBeginEpisode</div><div class=\"line\">    SVR -&gt;&gt; EPI : Bind &lt;br&gt; Pimpl-&gt;Episode = &amp;Episode</div><div class=\"line\"></div><div class=\"line\">    loop UE Tick</div><div class=\"line\">        rect rgb(191, 223, 255)</div><div class=\"line\">            note over UE, GM : Client to Server communication</div><div class=\"line\">            UE -&gt;&gt; NGN : Call registered OnPreTick</div><div class=\"line\">            NGN -&gt;&gt; SVR : Server.RunSome(1u)</div><div class=\"line\">            CLIENT -&gt;&gt; SVR : RPC requests</div><div class=\"line\">            SVR -&gt;&gt; EPI : Call Episode&apos;s methods</div><div class=\"line\">        end</div><div class=\"line\"></div><div class=\"line\">        rect rgb(191, 223, 255)</div><div class=\"line\">            note over UE, GM : Server to Client communication</div><div class=\"line\">            UE -&gt;&gt; NGN : Call registered OnPostTick</div><div class=\"line\">            NGN -&gt;&gt; OBS : WorldObserver.BroadcastTick</div><div class=\"line\">            OBS -&gt;&gt; SVR : SerializeAndSend</div><div class=\"line\">            SVR -&gt;&gt; CLIENT : Broadcast</div><div class=\"line\">        end</div><div class=\"line\">    end</div></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div></pre></td><td class=\"code\"><pre><div class=\"line\">---</div><div class=\"line\">title: Client Architecture</div><div class=\"line\">---</div><div class=\"line\">sequenceDiagram</div><div class=\"line\">    autonumber</div><div class=\"line\">    participant CLIENT as Client.h &lt;br&gt; (High-level Carla Client)</div><div class=\"line\">    participant WORLD as World.cpp &lt;br&gt; (Core API for user)</div><div class=\"line\">    participant SIM as detail/Simulator.cpp</div><div class=\"line\">    participant EPI as detail/Episode.cpp</div><div class=\"line\">    participant EPI_PXY as detail/EpisodeProxy.cpp &lt;br&gt; (Util Class to wrap detail/Simulator.cpp, help handling different pointer types)</div><div class=\"line\">    participant RPC_CLIENT as detail/Client.cpp &lt;br&gt; (RPC Client)</div><div class=\"line\">    participant SVR as RPC Server in UE</div><div class=\"line\"></div><div class=\"line\">    CLIENT -&gt;&gt; SIM : Client():_simulator(new detail::Simulator(host, port, worker_threads)</div><div class=\"line\">    SIM -&gt;&gt; RPC_CLIENT : Simulator():_client(host, port, worker_threads)</div><div class=\"line\"></div><div class=\"line\">    rect rgb(191, 223, 255)</div><div class=\"line\">        note right of CLIENT: Client::GetWorld() &#123;return World(_simulator-&gt;GetCurrentEpisode())&#125;</div><div class=\"line\"></div><div class=\"line\">        CLIENT -&gt;&gt; SIM : _simulator-&gt;GetCurrentEpisode()</div><div class=\"line\">        rect rgb(200, 150, 255)</div><div class=\"line\">            note right of CLIENT: Simulator::GetCurrentEpisode()</div><div class=\"line\">            SIM -&gt;&gt; EPI : _episode = std::make_shared&lt;Episode&gt;(_client, std::weak_ptr&lt;Simulator&gt;(shared_from_this()));</div><div class=\"line\">            SIM -&gt;&gt; EPI : _episode-&gt;Listen();</div><div class=\"line\">            EPI -&gt;&gt; RPC_CLIENT : Register callback to update EpisodeState(snapshot): _client.SubscribeToStream</div><div class=\"line\">            note over RPC_CLIENT :     _pimpl-&gt;streaming_client.Subscribe</div><div class=\"line\">            SIM -&gt;&gt; EPI_PXY : epi_pxy = EpisodeProxy&#123;shared_from_this()&#125;</div><div class=\"line\">            note over EPI_PXY: EpisodeProxy():_simulator(std::move(simulator))</div><div class=\"line\">            SIM --&gt;&gt; CLIENT : return epi_pxy</div><div class=\"line\">        end</div><div class=\"line\"></div><div class=\"line\">        CLIENT -&gt;&gt; WORLD : World(_simulator-&gt;GetCurrentEpisode())</div><div class=\"line\">        note over WORLD: World():_episode(std::move(episode))</div><div class=\"line\">    end</div><div class=\"line\"></div><div class=\"line\">    rect rgb(191, 223, 255)   </div><div class=\"line\">        note over WORLD: Client to Server communication </div><div class=\"line\">        note right of WORLD: e.g., World::SpawnActor() &#123;_episode.Lock()-&gt;SpawnActor&#125;</div><div class=\"line\">        WORLD -&gt;&gt; EPI_PXY : _episode.Lock()</div><div class=\"line\">        EPI_PXY --&gt;&gt; WORLD : return Load(_simulator) &lt;br&gt; Load(ptr) &#123;return ptr.load() / ptr.lock()&#125;</div><div class=\"line\">        WORLD -&gt;&gt; SIM : _episode.Lock().SpawnActor</div><div class=\"line\">        SIM -&gt;&gt; RPC_CLIENT : _client.SpawnActor</div><div class=\"line\">        RPC_CLIENT -&gt;&gt; SVR: _pimpl-&gt;CallAndWait&lt;rpc::Actor&gt;(&quot;spawn_actor&quot;, description, transform);</div><div class=\"line\">    end</div><div class=\"line\"></div><div class=\"line\">    rect rgb(191, 223, 255)</div><div class=\"line\">    note over EPI: Server to Client communication</div><div class=\"line\">    loop</div><div class=\"line\">    SVR -&gt;&gt; RPC_CLIENT : Stream broadcast</div><div class=\"line\">    RPC_CLIENT -&gt;&gt; EPI : Call registered callback</div><div class=\"line\">    end</div><div class=\"line\">    end</div></pre></td></tr></table></figure>\n<h2 id=\"mermaid\"><a href=\"#mermaid\" class=\"headerlink\" title=\"```mermaid\"></a>```mermaid</h2><h2 id=\"title-Python-API\"><a href=\"#title-Python-API\" class=\"headerlink\" title=\"title: Python API\"></a>title: Python API</h2><p>flowchart LR<br>    LIBCARLA[LibCarla]<br>    H[PythonAPI.h]<br>    CPP[PythonAPI.cpp]<br>    CLIENT[PythonAPI\\carla\\src\\Client.cpp]<br>    WORLD[PythonAPI\\carla\\src\\World.cpp]</p>\n<pre><code>LIBCARLA ---|include| H\n\nsubgraph &quot;Main of boost python&quot;\nH --- CPP \nend\n\nsubgraph Exporter\nCPP --- CLIENT \nCPP --- WORLD\nCPP --- ...\nend\n</code></pre><p>``` &gt;</p>\n"},{"title":"PyTorch PPO","date":"2018-10-09T03:56:11.000Z","description":["PyTorchPPO"],"_content":"\n## Introduction\n\nProximal Policy Optimization (PPO)PyTorchGithub[](https://github.com/ikostrikov/pytorch-a2c-ppo-acktr)PPOA2CACKTRPPO\n\nPPO[OpenAI baselines](https://github.com/openai/baselines)wrapperPPOOpenAI baselines**commit id**\n\n- PPO3aea397\n- OpenAI baselinesf272969\n\n************\n\n## Logical framework\n\nRLenvironmentrobotagentenvironment`envs`OpenAI baselineswrapperrobotparametric policy`actor_critic`trajectory`rollouts`RL algorithm`agent`****:\n\n- environment\n\t- multiprocess wrapper: `envs`\n- robot\n\t- parametric policy: `actor_critic`\n    - trajectory: `rollouts`\n\t- RL algorithm: `agent`\n\n****robot`envs`observation`actor_critic``rollouts``agent``rollouts``actor_critic`\n\n## Source code\n\n### main\n\n```py\n# PPO_ROOT/main.py\n\ndef main():\n    ...\n    \n    # envs\n    envs = [make_env(args.env_name, args.seed, i, args.log_dir, args.add_timestep)\n                for i in range(args.num_processes)]\n    \n    if args.num_processes > 1:\n        envs = SubprocVecEnv(envs)\n    else:\n        ...\n    \n    if len(envs.observation_space.shape) == 1:\n        envs = VecNormalize(envs, gamma=args.gamma)\n    \n    ...\n    \n    for j in range(num_updates):\n        for step in range(args.num_steps):\n            # rolloutste.g., o_tactor_critic(i.e., policy)a_t\n            with torch.no_grad():\n                value, action, action_log_prob, states = actor_critic.act(\n                        rollouts.observations[step],\n                        rollouts.states[step],\n                        rollouts.masks[step])\n    \n            ...\n    \n            # a_tenvs(i.e., environment)\n            obs, reward, done, info = envs.step(cpu_actions)\n            \n            ...\n    \n            # rollouts\n            rollouts.insert(current_obs, states, action, action_log_prob, value, reward, masks)\n    \n        ...\n        \n        # rolloutsRL algorithmi.e., PPOactor_critic(i.e., policy)\n        value_loss, action_loss, dist_entropy = agent.update(rollouts)\n    \n        ...\n```\n\n`main``main`****\n\n1. `envs`\n2. `actor_critic`\n3. `rollouts`\n4. `agent`\n\n\n\n---\n\n### envs\n\n`main``envs``make_env``SubprocVecEnv``VecNormalize`\n\n#### make_env\n\n```py\n# PPO_ROOT/envs.py\n\ndef make_env(env_id, seed, rank, log_dir, add_timestep):\n    def _thunk():\n    \t# gym env\n        if env_id.startswith(\"dm\"):\n        \t...\n        else:\n            env = gym.make(env_id)\n        \n        ...\n\n        # Monitor wrapperMonitorgym.Wrappers.Monitor/tmp/gym/\n        if log_dir is not None:\n            env = bench.Monitor(env, os.path.join(log_dir, str(rank)))\n\n        ...\n\n        return env\n\n    # env\n    return _thunk\n```\n\n`make_env``_thunk`gym env`make_env`gym env****`SubprocVecEnv``make_env``worker`\n\n#### SubprocVecEnv\n\n```py\n# BASELINE_ROOT/common/vec_env/subproc_vec_env.py\n\ndef worker(remote, parent_remote, env_fn_wrapper):\n    parent_remote.close()\n    # env_thunk().x()CloudpickleWrapper\n    env = env_fn_wrapper.x()\n    # env\n    while True:\n        cmd, data = remote.recv()\n        if cmd == 'step':\n            ob, reward, done, info = env.step(data)\n            if done:\n                ob = env.reset()\n            remote.send((ob, reward, done, info))\n        elif cmd == 'reset':\n            ob = env.reset()\n            remote.send(ob)\n        elif cmd == 'render':\n            remote.send(env.render(mode='rgb_array'))\n        elif cmd == 'close':\n            remote.close()\n            break\n        elif cmd == 'get_spaces':\n            remote.send((env.observation_space, env.action_space))\n        else:\n            raise NotImplementedError\n```\n\n`SubprocVecEnv`subprocess`worker``worker`**env**env`worker``env_fn_wrapper``_thunk``CloudpickleWrapper``wrapper`\n\n```py\n# BASELINE_ROOT/common/vec_env/subproc_vec_env.py\n\nclass SubprocVecEnv(VecEnv):\n    ...\n\n    # subprocessstep\n    def step_async(self, actions):\n        for remote, action in zip(self.remotes, actions):\n            remote.send(('step', action))\n        self.waiting = True\n\n\n    # subprocess\n    def step_wait(self):\n        results = [remote.recv() for remote in self.remotes]\n        self.waiting = False\n        obs, rews, dones, infos = zip(*results)\n        return np.stack(obs), np.stack(rews), np.stack(dones), infos\n\n    ...\n\n    # VecEnv\n    def step(self, actions):\n        self.step_async(actions)\n        return self.step_wait()\n```\n\nsubprocee`SubprocVecEnv`****`step`, `reset`subprocess\n\n#### VecNormalize\n\n```py\n# BASELINE_ROOT/common/vec_env/vec_normalize.py\n\nclass VecNormalize(VecEnvWrapper):\n    def __init__(self, venv, ob=True, ret=True, clipob=10., cliprew=10., gamma=0.99, epsilon=1e-8):\n        VecEnvWrapper.__init__(self, venv)\n        # mean, std\n        self.ob_rms = RunningMeanStd(shape=self.observation_space.shape) if ob else None\n        self.ret_rms = RunningMeanStd(shape=()) if ret else None\n\n    ...\n\n    def step_wait(self):\n        obs, rews, news, infos = self.venv.step_wait()\n        self.ret = self.ret * self.gamma + rews\n\n        # obsnormalizationmean, std\n        obs = self._obfilt(obs)\n        # rewardnormalizationmeanstdreturnstd\n        if self.ret_rms:\n            self.ret_rms.update(self.ret)\n            rews = np.clip(rews / np.sqrt(self.ret_rms.var + self.epsilon), -self.cliprew, self.cliprew)\n        return obs, rews, news, infos\n\n    def _obfilt(self, obs):\n        if self.ob_rms:\n            self.ob_rms.update(obs)\n            obs = np.clip((obs - self.ob_rms.mean) / np.sqrt(self.ob_rms.var + self.epsilon), -self.clipob, self.clipob)\n            return obs\n        else:\n            return obs\n\n    ...\n```\n\n`VecNormalize`wrapper**observationrewardnormalization**\n\n---\n\n### actor_critic\n\n```py\n# PPO_ROOT/model.py\n\nclass Policy(nn.Module):\n    ...\n\n    def act(self, inputs, states, masks, deterministic=False):\n    \t# self.baseactorcritic\n    \t# valueV(o_t)\n    \t# actor_featuresactor\n    \t# statesRNNhidden states\n        value, actor_features, states = self.base(inputs, states, masks)\n        # distaction\\pi(A_t | o_t)\n        dist = self.dist(actor_features)\n\n       \t...\n\n    ...\n\n    def evaluate_actions(self, inputs, states, masks, action):\n        ...\n\n        # value: V(o_t)\n        # action_log_probs: \\log(\\pi(a_t | o_t))\n        # dist_entropy: Entropy(\\pi(A_t | o_t))\n        # statesRNNhidden states\n        return value, action_log_probs, dist_entropy, states\n```\n\nparametric policy`actor_critic``Policy`actorcritic`act``evaluate_actions`**action******e.g., $V(o_t), \\log\\pi(a_t \\vert o_t)$\n\n---\n\n### rollouts\n\n```py\n# PPO_ROOT/storage.py\n\nclass RolloutStorage(object):\n    ...\n\n    # \n    # current_obs: o_{t+1}\n    # state: RNNhidden state\n    # action: a_t\n    # action_log_prob: \\pi(a_t | o_t)\n    # value_pred: V(o_t)\n    # reward: r_t\n    # mask: o_{t+1}gym.reset()01\n    def insert(self, current_obs, state, action, action_log_prob, value_pred, reward, mask):\n        ...\n\n    ...\n\n    # return\n    # GAEGAE+VMCreturn\n    def compute_returns(self, next_value, use_gae, gamma, tau):\n        if use_gae:\n            ...\n        else:\n            ...\n\n    # num_steps * num_processestransitionsnum_mini_batchmini_batchmini_batch\n    def feed_forward_generator(self, advantages, num_mini_batch):\n        ...\n\n    # RNNprocessnum_steps * num_processestransitionsnum_mini_batchmini_batchmini_batch\n    def recurrent_generator(self, advantages, num_mini_batch):\n        ...\n```\n\ntrajectory`rollouts``RolloutStorage`****`insert``xxx_generator``compute_returns`return\n\n---\n\n### agent\n\n```py\n# PPO_ROOT/algo/ppo.py\n\nclass PPO(object):\n    ...\n\n    def update(self, rollouts):\n    \t# \\hat{A)_t in PPO paperreturnGAEMC\n        # advantagenormalization\n        advantages = rollouts.returns[:-1] - rollouts.value_preds[:-1]\n        advantages = (advantages - advantages.mean()) / (\n            advantages.std() + 1e-5)\n\n        ...\n\n        for e in range(self.ppo_epoch):\n            ...\n\n            for sample in data_generator:\n                ...\n\n                # r_t(\\theta) in the PPO paper\n                ratio = torch.exp(action_log_probs - old_action_log_probs_batch)\n                surr1 = ratio * adv_targ\n                surr2 = torch.clamp(ratio, 1.0 - self.clip_param,\n                                           1.0 + self.clip_param) * adv_targ\n                # -L_t^{CLIP}(\\theta) in the PPO paper\n                action_loss = -torch.min(surr1, surr2).mean()\n\n               \t# L_t^{VF}(\\theta) in the PPO paper\n                value_loss = F.mse_loss(return_batch, values)\n\n                self.optimizer.zero_grad()\n                # -L_t^{CLIP+VF+S}(\\theta) in the PPO paperminizationlr\n                (value_loss * self.value_loss_coef + action_loss -\n                 dist_entropy * self.entropy_coef).backward()\n                nn.utils.clip_grad_norm_(self.actor_critic.parameters(),\n                                         self.max_grad_norm)\n                self.optimizer.step()\n\n                ...\n\n        ...\n```\n\nRL algorithm`agent``PPO``rollouts``actor_critic`PPO\n\n## Summary\n\nPPO****observationrewardnormalizationreturnadvantagenormalizationgradientclip","source":"_posts/source-ppo.md","raw":"---\ntitle: PyTorch PPO\ndate: 2018-10-09 11:56:11\ntags: \n  - pytorch-ppo\ndescription:\n  - PyTorchPPO\ncategories:\n  - \n---\n\n## Introduction\n\nProximal Policy Optimization (PPO)PyTorchGithub[](https://github.com/ikostrikov/pytorch-a2c-ppo-acktr)PPOA2CACKTRPPO\n\nPPO[OpenAI baselines](https://github.com/openai/baselines)wrapperPPOOpenAI baselines**commit id**\n\n- PPO3aea397\n- OpenAI baselinesf272969\n\n************\n\n## Logical framework\n\nRLenvironmentrobotagentenvironment`envs`OpenAI baselineswrapperrobotparametric policy`actor_critic`trajectory`rollouts`RL algorithm`agent`****:\n\n- environment\n\t- multiprocess wrapper: `envs`\n- robot\n\t- parametric policy: `actor_critic`\n    - trajectory: `rollouts`\n\t- RL algorithm: `agent`\n\n****robot`envs`observation`actor_critic``rollouts``agent``rollouts``actor_critic`\n\n## Source code\n\n### main\n\n```py\n# PPO_ROOT/main.py\n\ndef main():\n    ...\n    \n    # envs\n    envs = [make_env(args.env_name, args.seed, i, args.log_dir, args.add_timestep)\n                for i in range(args.num_processes)]\n    \n    if args.num_processes > 1:\n        envs = SubprocVecEnv(envs)\n    else:\n        ...\n    \n    if len(envs.observation_space.shape) == 1:\n        envs = VecNormalize(envs, gamma=args.gamma)\n    \n    ...\n    \n    for j in range(num_updates):\n        for step in range(args.num_steps):\n            # rolloutste.g., o_tactor_critic(i.e., policy)a_t\n            with torch.no_grad():\n                value, action, action_log_prob, states = actor_critic.act(\n                        rollouts.observations[step],\n                        rollouts.states[step],\n                        rollouts.masks[step])\n    \n            ...\n    \n            # a_tenvs(i.e., environment)\n            obs, reward, done, info = envs.step(cpu_actions)\n            \n            ...\n    \n            # rollouts\n            rollouts.insert(current_obs, states, action, action_log_prob, value, reward, masks)\n    \n        ...\n        \n        # rolloutsRL algorithmi.e., PPOactor_critic(i.e., policy)\n        value_loss, action_loss, dist_entropy = agent.update(rollouts)\n    \n        ...\n```\n\n`main``main`****\n\n1. `envs`\n2. `actor_critic`\n3. `rollouts`\n4. `agent`\n\n\n\n---\n\n### envs\n\n`main``envs``make_env``SubprocVecEnv``VecNormalize`\n\n#### make_env\n\n```py\n# PPO_ROOT/envs.py\n\ndef make_env(env_id, seed, rank, log_dir, add_timestep):\n    def _thunk():\n    \t# gym env\n        if env_id.startswith(\"dm\"):\n        \t...\n        else:\n            env = gym.make(env_id)\n        \n        ...\n\n        # Monitor wrapperMonitorgym.Wrappers.Monitor/tmp/gym/\n        if log_dir is not None:\n            env = bench.Monitor(env, os.path.join(log_dir, str(rank)))\n\n        ...\n\n        return env\n\n    # env\n    return _thunk\n```\n\n`make_env``_thunk`gym env`make_env`gym env****`SubprocVecEnv``make_env``worker`\n\n#### SubprocVecEnv\n\n```py\n# BASELINE_ROOT/common/vec_env/subproc_vec_env.py\n\ndef worker(remote, parent_remote, env_fn_wrapper):\n    parent_remote.close()\n    # env_thunk().x()CloudpickleWrapper\n    env = env_fn_wrapper.x()\n    # env\n    while True:\n        cmd, data = remote.recv()\n        if cmd == 'step':\n            ob, reward, done, info = env.step(data)\n            if done:\n                ob = env.reset()\n            remote.send((ob, reward, done, info))\n        elif cmd == 'reset':\n            ob = env.reset()\n            remote.send(ob)\n        elif cmd == 'render':\n            remote.send(env.render(mode='rgb_array'))\n        elif cmd == 'close':\n            remote.close()\n            break\n        elif cmd == 'get_spaces':\n            remote.send((env.observation_space, env.action_space))\n        else:\n            raise NotImplementedError\n```\n\n`SubprocVecEnv`subprocess`worker``worker`**env**env`worker``env_fn_wrapper``_thunk``CloudpickleWrapper``wrapper`\n\n```py\n# BASELINE_ROOT/common/vec_env/subproc_vec_env.py\n\nclass SubprocVecEnv(VecEnv):\n    ...\n\n    # subprocessstep\n    def step_async(self, actions):\n        for remote, action in zip(self.remotes, actions):\n            remote.send(('step', action))\n        self.waiting = True\n\n\n    # subprocess\n    def step_wait(self):\n        results = [remote.recv() for remote in self.remotes]\n        self.waiting = False\n        obs, rews, dones, infos = zip(*results)\n        return np.stack(obs), np.stack(rews), np.stack(dones), infos\n\n    ...\n\n    # VecEnv\n    def step(self, actions):\n        self.step_async(actions)\n        return self.step_wait()\n```\n\nsubprocee`SubprocVecEnv`****`step`, `reset`subprocess\n\n#### VecNormalize\n\n```py\n# BASELINE_ROOT/common/vec_env/vec_normalize.py\n\nclass VecNormalize(VecEnvWrapper):\n    def __init__(self, venv, ob=True, ret=True, clipob=10., cliprew=10., gamma=0.99, epsilon=1e-8):\n        VecEnvWrapper.__init__(self, venv)\n        # mean, std\n        self.ob_rms = RunningMeanStd(shape=self.observation_space.shape) if ob else None\n        self.ret_rms = RunningMeanStd(shape=()) if ret else None\n\n    ...\n\n    def step_wait(self):\n        obs, rews, news, infos = self.venv.step_wait()\n        self.ret = self.ret * self.gamma + rews\n\n        # obsnormalizationmean, std\n        obs = self._obfilt(obs)\n        # rewardnormalizationmeanstdreturnstd\n        if self.ret_rms:\n            self.ret_rms.update(self.ret)\n            rews = np.clip(rews / np.sqrt(self.ret_rms.var + self.epsilon), -self.cliprew, self.cliprew)\n        return obs, rews, news, infos\n\n    def _obfilt(self, obs):\n        if self.ob_rms:\n            self.ob_rms.update(obs)\n            obs = np.clip((obs - self.ob_rms.mean) / np.sqrt(self.ob_rms.var + self.epsilon), -self.clipob, self.clipob)\n            return obs\n        else:\n            return obs\n\n    ...\n```\n\n`VecNormalize`wrapper**observationrewardnormalization**\n\n---\n\n### actor_critic\n\n```py\n# PPO_ROOT/model.py\n\nclass Policy(nn.Module):\n    ...\n\n    def act(self, inputs, states, masks, deterministic=False):\n    \t# self.baseactorcritic\n    \t# valueV(o_t)\n    \t# actor_featuresactor\n    \t# statesRNNhidden states\n        value, actor_features, states = self.base(inputs, states, masks)\n        # distaction\\pi(A_t | o_t)\n        dist = self.dist(actor_features)\n\n       \t...\n\n    ...\n\n    def evaluate_actions(self, inputs, states, masks, action):\n        ...\n\n        # value: V(o_t)\n        # action_log_probs: \\log(\\pi(a_t | o_t))\n        # dist_entropy: Entropy(\\pi(A_t | o_t))\n        # statesRNNhidden states\n        return value, action_log_probs, dist_entropy, states\n```\n\nparametric policy`actor_critic``Policy`actorcritic`act``evaluate_actions`**action******e.g., $V(o_t), \\log\\pi(a_t \\vert o_t)$\n\n---\n\n### rollouts\n\n```py\n# PPO_ROOT/storage.py\n\nclass RolloutStorage(object):\n    ...\n\n    # \n    # current_obs: o_{t+1}\n    # state: RNNhidden state\n    # action: a_t\n    # action_log_prob: \\pi(a_t | o_t)\n    # value_pred: V(o_t)\n    # reward: r_t\n    # mask: o_{t+1}gym.reset()01\n    def insert(self, current_obs, state, action, action_log_prob, value_pred, reward, mask):\n        ...\n\n    ...\n\n    # return\n    # GAEGAE+VMCreturn\n    def compute_returns(self, next_value, use_gae, gamma, tau):\n        if use_gae:\n            ...\n        else:\n            ...\n\n    # num_steps * num_processestransitionsnum_mini_batchmini_batchmini_batch\n    def feed_forward_generator(self, advantages, num_mini_batch):\n        ...\n\n    # RNNprocessnum_steps * num_processestransitionsnum_mini_batchmini_batchmini_batch\n    def recurrent_generator(self, advantages, num_mini_batch):\n        ...\n```\n\ntrajectory`rollouts``RolloutStorage`****`insert``xxx_generator``compute_returns`return\n\n---\n\n### agent\n\n```py\n# PPO_ROOT/algo/ppo.py\n\nclass PPO(object):\n    ...\n\n    def update(self, rollouts):\n    \t# \\hat{A)_t in PPO paperreturnGAEMC\n        # advantagenormalization\n        advantages = rollouts.returns[:-1] - rollouts.value_preds[:-1]\n        advantages = (advantages - advantages.mean()) / (\n            advantages.std() + 1e-5)\n\n        ...\n\n        for e in range(self.ppo_epoch):\n            ...\n\n            for sample in data_generator:\n                ...\n\n                # r_t(\\theta) in the PPO paper\n                ratio = torch.exp(action_log_probs - old_action_log_probs_batch)\n                surr1 = ratio * adv_targ\n                surr2 = torch.clamp(ratio, 1.0 - self.clip_param,\n                                           1.0 + self.clip_param) * adv_targ\n                # -L_t^{CLIP}(\\theta) in the PPO paper\n                action_loss = -torch.min(surr1, surr2).mean()\n\n               \t# L_t^{VF}(\\theta) in the PPO paper\n                value_loss = F.mse_loss(return_batch, values)\n\n                self.optimizer.zero_grad()\n                # -L_t^{CLIP+VF+S}(\\theta) in the PPO paperminizationlr\n                (value_loss * self.value_loss_coef + action_loss -\n                 dist_entropy * self.entropy_coef).backward()\n                nn.utils.clip_grad_norm_(self.actor_critic.parameters(),\n                                         self.max_grad_norm)\n                self.optimizer.step()\n\n                ...\n\n        ...\n```\n\nRL algorithm`agent``PPO``rollouts``actor_critic`PPO\n\n## Summary\n\nPPO****observationrewardnormalizationreturnadvantagenormalizationgradientclip","slug":"source-ppo","published":1,"updated":"2024-08-13T16:03:47.872Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clzvf192g001oeqwojmkhperx","content":"<h2 id=\"Introduction\"><a href=\"#Introduction\" class=\"headerlink\" title=\"Introduction\"></a>Introduction</h2><p>Proximal Policy Optimization (PPO)PyTorchGithub<a href=\"https://github.com/ikostrikov/pytorch-a2c-ppo-acktr\" target=\"_blank\" rel=\"external\"></a>PPOA2CACKTRPPO</p>\n<p>PPO<a href=\"https://github.com/openai/baselines\" target=\"_blank\" rel=\"external\">OpenAI baselines</a>wrapperPPOOpenAI baselines<strong>commit id</strong></p>\n<ul>\n<li>PPO3aea397</li>\n<li>OpenAI baselinesf272969</li>\n</ul>\n<p><strong></strong><strong></strong><strong></strong></p>\n<h2 id=\"Logical-framework\"><a href=\"#Logical-framework\" class=\"headerlink\" title=\"Logical framework\"></a>Logical framework</h2><p>RLenvironmentrobotagentenvironment<code>envs</code>OpenAI baselineswrapperrobotparametric policy<code>actor_critic</code>trajectory<code>rollouts</code>RL algorithm<code>agent</code><strong></strong>:</p>\n<ul>\n<li>environment<ul>\n<li>multiprocess wrapper: <code>envs</code></li>\n</ul>\n</li>\n<li>robot<ul>\n<li>parametric policy: <code>actor_critic</code></li>\n<li>trajectory: <code>rollouts</code></li>\n<li>RL algorithm: <code>agent</code></li>\n</ul>\n</li>\n</ul>\n<p><strong></strong>robot<code>envs</code>observation<code>actor_critic</code><code>rollouts</code><code>agent</code><code>rollouts</code><code>actor_critic</code></p>\n<h2 id=\"Source-code\"><a href=\"#Source-code\" class=\"headerlink\" title=\"Source code\"></a>Source code</h2><h3 id=\"main\"><a href=\"#main\" class=\"headerlink\" title=\"main\"></a>main</h3><figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># PPO_ROOT/main.py</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">main</span><span class=\"params\">()</span>:</span></div><div class=\"line\">    ...</div><div class=\"line\">    </div><div class=\"line\">    <span class=\"comment\"># envs</span></div><div class=\"line\">    envs = [make_env(args.env_name, args.seed, i, args.log_dir, args.add_timestep)</div><div class=\"line\">                <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(args.num_processes)]</div><div class=\"line\">    </div><div class=\"line\">    <span class=\"keyword\">if</span> args.num_processes &gt; <span class=\"number\">1</span>:</div><div class=\"line\">        envs = SubprocVecEnv(envs)</div><div class=\"line\">    <span class=\"keyword\">else</span>:</div><div class=\"line\">        ...</div><div class=\"line\">    </div><div class=\"line\">    <span class=\"keyword\">if</span> len(envs.observation_space.shape) == <span class=\"number\">1</span>:</div><div class=\"line\">        envs = VecNormalize(envs, gamma=args.gamma)</div><div class=\"line\">    </div><div class=\"line\">    ...</div><div class=\"line\">    </div><div class=\"line\">    <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> range(num_updates):</div><div class=\"line\">        <span class=\"keyword\">for</span> step <span class=\"keyword\">in</span> range(args.num_steps):</div><div class=\"line\">            <span class=\"comment\"># rolloutste.g., o_tactor_critic(i.e., policy)a_t</span></div><div class=\"line\">            <span class=\"keyword\">with</span> torch.no_grad():</div><div class=\"line\">                value, action, action_log_prob, states = actor_critic.act(</div><div class=\"line\">                        rollouts.observations[step],</div><div class=\"line\">                        rollouts.states[step],</div><div class=\"line\">                        rollouts.masks[step])</div><div class=\"line\">    </div><div class=\"line\">            ...</div><div class=\"line\">    </div><div class=\"line\">            <span class=\"comment\"># a_tenvs(i.e., environment)</span></div><div class=\"line\">            obs, reward, done, info = envs.step(cpu_actions)</div><div class=\"line\">            </div><div class=\"line\">            ...</div><div class=\"line\">    </div><div class=\"line\">            <span class=\"comment\"># rollouts</span></div><div class=\"line\">            rollouts.insert(current_obs, states, action, action_log_prob, value, reward, masks)</div><div class=\"line\">    </div><div class=\"line\">        ...</div><div class=\"line\">        </div><div class=\"line\">        <span class=\"comment\"># rolloutsRL algorithmi.e., PPOactor_critic(i.e., policy)</span></div><div class=\"line\">        value_loss, action_loss, dist_entropy = agent.update(rollouts)</div><div class=\"line\">    </div><div class=\"line\">        ...</div></pre></td></tr></table></figure>\n<p><code>main</code><code>main</code><strong></strong></p>\n<ol>\n<li><code>envs</code></li>\n<li><code>actor_critic</code></li>\n<li><code>rollouts</code></li>\n<li><code>agent</code></li>\n</ol>\n<p></p>\n<hr>\n<h3 id=\"envs\"><a href=\"#envs\" class=\"headerlink\" title=\"envs\"></a>envs</h3><p><code>main</code><code>envs</code><code>make_env</code><code>SubprocVecEnv</code><code>VecNormalize</code></p>\n<h4 id=\"make-env\"><a href=\"#make-env\" class=\"headerlink\" title=\"make_env\"></a>make_env</h4><figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># PPO_ROOT/envs.py</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">make_env</span><span class=\"params\">(env_id, seed, rank, log_dir, add_timestep)</span>:</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">_thunk</span><span class=\"params\">()</span>:</span></div><div class=\"line\">    \t<span class=\"comment\"># gym env</span></div><div class=\"line\">        <span class=\"keyword\">if</span> env_id.startswith(<span class=\"string\">\"dm\"</span>):</div><div class=\"line\">        \t...</div><div class=\"line\">        <span class=\"keyword\">else</span>:</div><div class=\"line\">            env = gym.make(env_id)</div><div class=\"line\">        </div><div class=\"line\">        ...</div><div class=\"line\"></div><div class=\"line\">        <span class=\"comment\"># Monitor wrapperMonitorgym.Wrappers.Monitor/tmp/gym/</span></div><div class=\"line\">        <span class=\"keyword\">if</span> log_dir <span class=\"keyword\">is</span> <span class=\"keyword\">not</span> <span class=\"keyword\">None</span>:</div><div class=\"line\">            env = bench.Monitor(env, os.path.join(log_dir, str(rank)))</div><div class=\"line\"></div><div class=\"line\">        ...</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">return</span> env</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\"># env</span></div><div class=\"line\">    <span class=\"keyword\">return</span> _thunk</div></pre></td></tr></table></figure>\n<p><code>make_env</code><code>_thunk</code>gym env<code>make_env</code>gym env<strong></strong><code>SubprocVecEnv</code><code>make_env</code><code>worker</code></p>\n<h4 id=\"SubprocVecEnv\"><a href=\"#SubprocVecEnv\" class=\"headerlink\" title=\"SubprocVecEnv\"></a>SubprocVecEnv</h4><figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># BASELINE_ROOT/common/vec_env/subproc_vec_env.py</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">worker</span><span class=\"params\">(remote, parent_remote, env_fn_wrapper)</span>:</span></div><div class=\"line\">    parent_remote.close()</div><div class=\"line\">    <span class=\"comment\"># env_thunk().x()CloudpickleWrapper</span></div><div class=\"line\">    env = env_fn_wrapper.x()</div><div class=\"line\">    <span class=\"comment\"># env</span></div><div class=\"line\">    <span class=\"keyword\">while</span> <span class=\"keyword\">True</span>:</div><div class=\"line\">        cmd, data = remote.recv()</div><div class=\"line\">        <span class=\"keyword\">if</span> cmd == <span class=\"string\">'step'</span>:</div><div class=\"line\">            ob, reward, done, info = env.step(data)</div><div class=\"line\">            <span class=\"keyword\">if</span> done:</div><div class=\"line\">                ob = env.reset()</div><div class=\"line\">            remote.send((ob, reward, done, info))</div><div class=\"line\">        <span class=\"keyword\">elif</span> cmd == <span class=\"string\">'reset'</span>:</div><div class=\"line\">            ob = env.reset()</div><div class=\"line\">            remote.send(ob)</div><div class=\"line\">        <span class=\"keyword\">elif</span> cmd == <span class=\"string\">'render'</span>:</div><div class=\"line\">            remote.send(env.render(mode=<span class=\"string\">'rgb_array'</span>))</div><div class=\"line\">        <span class=\"keyword\">elif</span> cmd == <span class=\"string\">'close'</span>:</div><div class=\"line\">            remote.close()</div><div class=\"line\">            <span class=\"keyword\">break</span></div><div class=\"line\">        <span class=\"keyword\">elif</span> cmd == <span class=\"string\">'get_spaces'</span>:</div><div class=\"line\">            remote.send((env.observation_space, env.action_space))</div><div class=\"line\">        <span class=\"keyword\">else</span>:</div><div class=\"line\">            <span class=\"keyword\">raise</span> NotImplementedError</div></pre></td></tr></table></figure>\n<p><code>SubprocVecEnv</code>subprocess<code>worker</code><code>worker</code><strong>env</strong>env<code>worker</code><code>env_fn_wrapper</code><code>_thunk</code><code>CloudpickleWrapper</code><code>wrapper</code></p>\n<figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># BASELINE_ROOT/common/vec_env/subproc_vec_env.py</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SubprocVecEnv</span><span class=\"params\">(VecEnv)</span>:</span></div><div class=\"line\">    ...</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\"># subprocessstep</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">step_async</span><span class=\"params\">(self, actions)</span>:</span></div><div class=\"line\">        <span class=\"keyword\">for</span> remote, action <span class=\"keyword\">in</span> zip(self.remotes, actions):</div><div class=\"line\">            remote.send((<span class=\"string\">'step'</span>, action))</div><div class=\"line\">        self.waiting = <span class=\"keyword\">True</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\"># subprocess</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">step_wait</span><span class=\"params\">(self)</span>:</span></div><div class=\"line\">        results = [remote.recv() <span class=\"keyword\">for</span> remote <span class=\"keyword\">in</span> self.remotes]</div><div class=\"line\">        self.waiting = <span class=\"keyword\">False</span></div><div class=\"line\">        obs, rews, dones, infos = zip(*results)</div><div class=\"line\">        <span class=\"keyword\">return</span> np.stack(obs), np.stack(rews), np.stack(dones), infos</div><div class=\"line\"></div><div class=\"line\">    ...</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\"># VecEnv</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">step</span><span class=\"params\">(self, actions)</span>:</span></div><div class=\"line\">        self.step_async(actions)</div><div class=\"line\">        <span class=\"keyword\">return</span> self.step_wait()</div></pre></td></tr></table></figure>\n<p>subprocee<code>SubprocVecEnv</code><strong></strong><code>step</code>, <code>reset</code>subprocess</p>\n<h4 id=\"VecNormalize\"><a href=\"#VecNormalize\" class=\"headerlink\" title=\"VecNormalize\"></a>VecNormalize</h4><figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># BASELINE_ROOT/common/vec_env/vec_normalize.py</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">VecNormalize</span><span class=\"params\">(VecEnvWrapper)</span>:</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, venv, ob=True, ret=True, clipob=<span class=\"number\">10.</span>, cliprew=<span class=\"number\">10.</span>, gamma=<span class=\"number\">0.99</span>, epsilon=<span class=\"number\">1e-8</span>)</span>:</span></div><div class=\"line\">        VecEnvWrapper.__init__(self, venv)</div><div class=\"line\">        <span class=\"comment\"># mean, std</span></div><div class=\"line\">        self.ob_rms = RunningMeanStd(shape=self.observation_space.shape) <span class=\"keyword\">if</span> ob <span class=\"keyword\">else</span> <span class=\"keyword\">None</span></div><div class=\"line\">        self.ret_rms = RunningMeanStd(shape=()) <span class=\"keyword\">if</span> ret <span class=\"keyword\">else</span> <span class=\"keyword\">None</span></div><div class=\"line\"></div><div class=\"line\">    ...</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">step_wait</span><span class=\"params\">(self)</span>:</span></div><div class=\"line\">        obs, rews, news, infos = self.venv.step_wait()</div><div class=\"line\">        self.ret = self.ret * self.gamma + rews</div><div class=\"line\"></div><div class=\"line\">        <span class=\"comment\"># obsnormalizationmean, std</span></div><div class=\"line\">        obs = self._obfilt(obs)</div><div class=\"line\">        <span class=\"comment\"># rewardnormalizationmeanstdreturnstd</span></div><div class=\"line\">        <span class=\"keyword\">if</span> self.ret_rms:</div><div class=\"line\">            self.ret_rms.update(self.ret)</div><div class=\"line\">            rews = np.clip(rews / np.sqrt(self.ret_rms.var + self.epsilon), -self.cliprew, self.cliprew)</div><div class=\"line\">        <span class=\"keyword\">return</span> obs, rews, news, infos</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">_obfilt</span><span class=\"params\">(self, obs)</span>:</span></div><div class=\"line\">        <span class=\"keyword\">if</span> self.ob_rms:</div><div class=\"line\">            self.ob_rms.update(obs)</div><div class=\"line\">            obs = np.clip((obs - self.ob_rms.mean) / np.sqrt(self.ob_rms.var + self.epsilon), -self.clipob, self.clipob)</div><div class=\"line\">            <span class=\"keyword\">return</span> obs</div><div class=\"line\">        <span class=\"keyword\">else</span>:</div><div class=\"line\">            <span class=\"keyword\">return</span> obs</div><div class=\"line\"></div><div class=\"line\">    ...</div></pre></td></tr></table></figure>\n<p><code>VecNormalize</code>wrapper<strong>observationrewardnormalization</strong></p>\n<hr>\n<h3 id=\"actor-critic\"><a href=\"#actor-critic\" class=\"headerlink\" title=\"actor_critic\"></a>actor_critic</h3><figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># PPO_ROOT/model.py</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Policy</span><span class=\"params\">(nn.Module)</span>:</span></div><div class=\"line\">    ...</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">act</span><span class=\"params\">(self, inputs, states, masks, deterministic=False)</span>:</span></div><div class=\"line\">    \t<span class=\"comment\"># self.baseactorcritic</span></div><div class=\"line\">    \t<span class=\"comment\"># valueV(o_t)</span></div><div class=\"line\">    \t<span class=\"comment\"># actor_featuresactor</span></div><div class=\"line\">    \t<span class=\"comment\"># statesRNNhidden states</span></div><div class=\"line\">        value, actor_features, states = self.base(inputs, states, masks)</div><div class=\"line\">        <span class=\"comment\"># distaction\\pi(A_t | o_t)</span></div><div class=\"line\">        dist = self.dist(actor_features)</div><div class=\"line\"></div><div class=\"line\">       \t...</div><div class=\"line\"></div><div class=\"line\">    ...</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">evaluate_actions</span><span class=\"params\">(self, inputs, states, masks, action)</span>:</span></div><div class=\"line\">        ...</div><div class=\"line\"></div><div class=\"line\">        <span class=\"comment\"># value: V(o_t)</span></div><div class=\"line\">        <span class=\"comment\"># action_log_probs: \\log(\\pi(a_t | o_t))</span></div><div class=\"line\">        <span class=\"comment\"># dist_entropy: Entropy(\\pi(A_t | o_t))</span></div><div class=\"line\">        <span class=\"comment\"># statesRNNhidden states</span></div><div class=\"line\">        <span class=\"keyword\">return</span> value, action_log_probs, dist_entropy, states</div></pre></td></tr></table></figure>\n<p>parametric policy<code>actor_critic</code><code>Policy</code>actorcritic<code>act</code><code>evaluate_actions</code><strong>action</strong><strong></strong>e.g., $V(o_t), \\log\\pi(a_t \\vert o_t)$</p>\n<hr>\n<h3 id=\"rollouts\"><a href=\"#rollouts\" class=\"headerlink\" title=\"rollouts\"></a>rollouts</h3><figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># PPO_ROOT/storage.py</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">RolloutStorage</span><span class=\"params\">(object)</span>:</span></div><div class=\"line\">    ...</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\"># </span></div><div class=\"line\">    <span class=\"comment\"># current_obs: o_&#123;t+1&#125;</span></div><div class=\"line\">    <span class=\"comment\"># state: RNNhidden state</span></div><div class=\"line\">    <span class=\"comment\"># action: a_t</span></div><div class=\"line\">    <span class=\"comment\"># action_log_prob: \\pi(a_t | o_t)</span></div><div class=\"line\">    <span class=\"comment\"># value_pred: V(o_t)</span></div><div class=\"line\">    <span class=\"comment\"># reward: r_t</span></div><div class=\"line\">    <span class=\"comment\"># mask: o_&#123;t+1&#125;gym.reset()01</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">insert</span><span class=\"params\">(self, current_obs, state, action, action_log_prob, value_pred, reward, mask)</span>:</span></div><div class=\"line\">        ...</div><div class=\"line\"></div><div class=\"line\">    ...</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\"># return</span></div><div class=\"line\">    <span class=\"comment\"># GAEGAE+VMCreturn</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">compute_returns</span><span class=\"params\">(self, next_value, use_gae, gamma, tau)</span>:</span></div><div class=\"line\">        <span class=\"keyword\">if</span> use_gae:</div><div class=\"line\">            ...</div><div class=\"line\">        <span class=\"keyword\">else</span>:</div><div class=\"line\">            ...</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\"># num_steps * num_processestransitionsnum_mini_batchmini_batchmini_batch</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">feed_forward_generator</span><span class=\"params\">(self, advantages, num_mini_batch)</span>:</span></div><div class=\"line\">        ...</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\"># RNNprocessnum_steps * num_processestransitionsnum_mini_batchmini_batchmini_batch</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">recurrent_generator</span><span class=\"params\">(self, advantages, num_mini_batch)</span>:</span></div><div class=\"line\">        ...</div></pre></td></tr></table></figure>\n<p>trajectory<code>rollouts</code><code>RolloutStorage</code><strong></strong><code>insert</code><code>xxx_generator</code><code>compute_returns</code>return</p>\n<hr>\n<h3 id=\"agent\"><a href=\"#agent\" class=\"headerlink\" title=\"agent\"></a>agent</h3><figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># PPO_ROOT/algo/ppo.py</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PPO</span><span class=\"params\">(object)</span>:</span></div><div class=\"line\">    ...</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">update</span><span class=\"params\">(self, rollouts)</span>:</span></div><div class=\"line\">    \t<span class=\"comment\"># \\hat&#123;A)_t in PPO paperreturnGAEMC</span></div><div class=\"line\">        <span class=\"comment\"># advantagenormalization</span></div><div class=\"line\">        advantages = rollouts.returns[:<span class=\"number\">-1</span>] - rollouts.value_preds[:<span class=\"number\">-1</span>]</div><div class=\"line\">        advantages = (advantages - advantages.mean()) / (</div><div class=\"line\">            advantages.std() + <span class=\"number\">1e-5</span>)</div><div class=\"line\"></div><div class=\"line\">        ...</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">for</span> e <span class=\"keyword\">in</span> range(self.ppo_epoch):</div><div class=\"line\">            ...</div><div class=\"line\"></div><div class=\"line\">            <span class=\"keyword\">for</span> sample <span class=\"keyword\">in</span> data_generator:</div><div class=\"line\">                ...</div><div class=\"line\"></div><div class=\"line\">                <span class=\"comment\"># r_t(\\theta) in the PPO paper</span></div><div class=\"line\">                ratio = torch.exp(action_log_probs - old_action_log_probs_batch)</div><div class=\"line\">                surr1 = ratio * adv_targ</div><div class=\"line\">                surr2 = torch.clamp(ratio, <span class=\"number\">1.0</span> - self.clip_param,</div><div class=\"line\">                                           <span class=\"number\">1.0</span> + self.clip_param) * adv_targ</div><div class=\"line\">                <span class=\"comment\"># -L_t^&#123;CLIP&#125;(\\theta) in the PPO paper</span></div><div class=\"line\">                action_loss = -torch.min(surr1, surr2).mean()</div><div class=\"line\"></div><div class=\"line\">               \t<span class=\"comment\"># L_t^&#123;VF&#125;(\\theta) in the PPO paper</span></div><div class=\"line\">                value_loss = F.mse_loss(return_batch, values)</div><div class=\"line\"></div><div class=\"line\">                self.optimizer.zero_grad()</div><div class=\"line\">                <span class=\"comment\"># -L_t^&#123;CLIP+VF+S&#125;(\\theta) in the PPO paperminizationlr</span></div><div class=\"line\">                (value_loss * self.value_loss_coef + action_loss -</div><div class=\"line\">                 dist_entropy * self.entropy_coef).backward()</div><div class=\"line\">                nn.utils.clip_grad_norm_(self.actor_critic.parameters(),</div><div class=\"line\">                                         self.max_grad_norm)</div><div class=\"line\">                self.optimizer.step()</div><div class=\"line\"></div><div class=\"line\">                ...</div><div class=\"line\"></div><div class=\"line\">        ...</div></pre></td></tr></table></figure>\n<p>RL algorithm<code>agent</code><code>PPO</code><code>rollouts</code><code>actor_critic</code>PPO</p>\n<h2 id=\"Summary\"><a href=\"#Summary\" class=\"headerlink\" title=\"Summary\"></a>Summary</h2><p>PPO<strong></strong>observationrewardnormalizationreturnadvantagenormalizationgradientclip</p>\n","excerpt":"","more":"<h2 id=\"Introduction\"><a href=\"#Introduction\" class=\"headerlink\" title=\"Introduction\"></a>Introduction</h2><p>Proximal Policy Optimization (PPO)PyTorchGithub<a href=\"https://github.com/ikostrikov/pytorch-a2c-ppo-acktr\"></a>PPOA2CACKTRPPO</p>\n<p>PPO<a href=\"https://github.com/openai/baselines\">OpenAI baselines</a>wrapperPPOOpenAI baselines<strong>commit id</strong></p>\n<ul>\n<li>PPO3aea397</li>\n<li>OpenAI baselinesf272969</li>\n</ul>\n<p><strong></strong><strong></strong><strong></strong></p>\n<h2 id=\"Logical-framework\"><a href=\"#Logical-framework\" class=\"headerlink\" title=\"Logical framework\"></a>Logical framework</h2><p>RLenvironmentrobotagentenvironment<code>envs</code>OpenAI baselineswrapperrobotparametric policy<code>actor_critic</code>trajectory<code>rollouts</code>RL algorithm<code>agent</code><strong></strong>:</p>\n<ul>\n<li>environment<ul>\n<li>multiprocess wrapper: <code>envs</code></li>\n</ul>\n</li>\n<li>robot<ul>\n<li>parametric policy: <code>actor_critic</code></li>\n<li>trajectory: <code>rollouts</code></li>\n<li>RL algorithm: <code>agent</code></li>\n</ul>\n</li>\n</ul>\n<p><strong></strong>robot<code>envs</code>observation<code>actor_critic</code><code>rollouts</code><code>agent</code><code>rollouts</code><code>actor_critic</code></p>\n<h2 id=\"Source-code\"><a href=\"#Source-code\" class=\"headerlink\" title=\"Source code\"></a>Source code</h2><h3 id=\"main\"><a href=\"#main\" class=\"headerlink\" title=\"main\"></a>main</h3><figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># PPO_ROOT/main.py</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">main</span><span class=\"params\">()</span>:</span></div><div class=\"line\">    ...</div><div class=\"line\">    </div><div class=\"line\">    <span class=\"comment\"># envs</span></div><div class=\"line\">    envs = [make_env(args.env_name, args.seed, i, args.log_dir, args.add_timestep)</div><div class=\"line\">                <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(args.num_processes)]</div><div class=\"line\">    </div><div class=\"line\">    <span class=\"keyword\">if</span> args.num_processes &gt; <span class=\"number\">1</span>:</div><div class=\"line\">        envs = SubprocVecEnv(envs)</div><div class=\"line\">    <span class=\"keyword\">else</span>:</div><div class=\"line\">        ...</div><div class=\"line\">    </div><div class=\"line\">    <span class=\"keyword\">if</span> len(envs.observation_space.shape) == <span class=\"number\">1</span>:</div><div class=\"line\">        envs = VecNormalize(envs, gamma=args.gamma)</div><div class=\"line\">    </div><div class=\"line\">    ...</div><div class=\"line\">    </div><div class=\"line\">    <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> range(num_updates):</div><div class=\"line\">        <span class=\"keyword\">for</span> step <span class=\"keyword\">in</span> range(args.num_steps):</div><div class=\"line\">            <span class=\"comment\"># rolloutste.g., o_tactor_critic(i.e., policy)a_t</span></div><div class=\"line\">            <span class=\"keyword\">with</span> torch.no_grad():</div><div class=\"line\">                value, action, action_log_prob, states = actor_critic.act(</div><div class=\"line\">                        rollouts.observations[step],</div><div class=\"line\">                        rollouts.states[step],</div><div class=\"line\">                        rollouts.masks[step])</div><div class=\"line\">    </div><div class=\"line\">            ...</div><div class=\"line\">    </div><div class=\"line\">            <span class=\"comment\"># a_tenvs(i.e., environment)</span></div><div class=\"line\">            obs, reward, done, info = envs.step(cpu_actions)</div><div class=\"line\">            </div><div class=\"line\">            ...</div><div class=\"line\">    </div><div class=\"line\">            <span class=\"comment\"># rollouts</span></div><div class=\"line\">            rollouts.insert(current_obs, states, action, action_log_prob, value, reward, masks)</div><div class=\"line\">    </div><div class=\"line\">        ...</div><div class=\"line\">        </div><div class=\"line\">        <span class=\"comment\"># rolloutsRL algorithmi.e., PPOactor_critic(i.e., policy)</span></div><div class=\"line\">        value_loss, action_loss, dist_entropy = agent.update(rollouts)</div><div class=\"line\">    </div><div class=\"line\">        ...</div></pre></td></tr></table></figure>\n<p><code>main</code><code>main</code><strong></strong></p>\n<ol>\n<li><code>envs</code></li>\n<li><code>actor_critic</code></li>\n<li><code>rollouts</code></li>\n<li><code>agent</code></li>\n</ol>\n<p></p>\n<hr>\n<h3 id=\"envs\"><a href=\"#envs\" class=\"headerlink\" title=\"envs\"></a>envs</h3><p><code>main</code><code>envs</code><code>make_env</code><code>SubprocVecEnv</code><code>VecNormalize</code></p>\n<h4 id=\"make-env\"><a href=\"#make-env\" class=\"headerlink\" title=\"make_env\"></a>make_env</h4><figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># PPO_ROOT/envs.py</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">make_env</span><span class=\"params\">(env_id, seed, rank, log_dir, add_timestep)</span>:</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">_thunk</span><span class=\"params\">()</span>:</span></div><div class=\"line\">    \t<span class=\"comment\"># gym env</span></div><div class=\"line\">        <span class=\"keyword\">if</span> env_id.startswith(<span class=\"string\">\"dm\"</span>):</div><div class=\"line\">        \t...</div><div class=\"line\">        <span class=\"keyword\">else</span>:</div><div class=\"line\">            env = gym.make(env_id)</div><div class=\"line\">        </div><div class=\"line\">        ...</div><div class=\"line\"></div><div class=\"line\">        <span class=\"comment\"># Monitor wrapperMonitorgym.Wrappers.Monitor/tmp/gym/</span></div><div class=\"line\">        <span class=\"keyword\">if</span> log_dir <span class=\"keyword\">is</span> <span class=\"keyword\">not</span> <span class=\"keyword\">None</span>:</div><div class=\"line\">            env = bench.Monitor(env, os.path.join(log_dir, str(rank)))</div><div class=\"line\"></div><div class=\"line\">        ...</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">return</span> env</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\"># env</span></div><div class=\"line\">    <span class=\"keyword\">return</span> _thunk</div></pre></td></tr></table></figure>\n<p><code>make_env</code><code>_thunk</code>gym env<code>make_env</code>gym env<strong></strong><code>SubprocVecEnv</code><code>make_env</code><code>worker</code></p>\n<h4 id=\"SubprocVecEnv\"><a href=\"#SubprocVecEnv\" class=\"headerlink\" title=\"SubprocVecEnv\"></a>SubprocVecEnv</h4><figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># BASELINE_ROOT/common/vec_env/subproc_vec_env.py</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">worker</span><span class=\"params\">(remote, parent_remote, env_fn_wrapper)</span>:</span></div><div class=\"line\">    parent_remote.close()</div><div class=\"line\">    <span class=\"comment\"># env_thunk().x()CloudpickleWrapper</span></div><div class=\"line\">    env = env_fn_wrapper.x()</div><div class=\"line\">    <span class=\"comment\"># env</span></div><div class=\"line\">    <span class=\"keyword\">while</span> <span class=\"keyword\">True</span>:</div><div class=\"line\">        cmd, data = remote.recv()</div><div class=\"line\">        <span class=\"keyword\">if</span> cmd == <span class=\"string\">'step'</span>:</div><div class=\"line\">            ob, reward, done, info = env.step(data)</div><div class=\"line\">            <span class=\"keyword\">if</span> done:</div><div class=\"line\">                ob = env.reset()</div><div class=\"line\">            remote.send((ob, reward, done, info))</div><div class=\"line\">        <span class=\"keyword\">elif</span> cmd == <span class=\"string\">'reset'</span>:</div><div class=\"line\">            ob = env.reset()</div><div class=\"line\">            remote.send(ob)</div><div class=\"line\">        <span class=\"keyword\">elif</span> cmd == <span class=\"string\">'render'</span>:</div><div class=\"line\">            remote.send(env.render(mode=<span class=\"string\">'rgb_array'</span>))</div><div class=\"line\">        <span class=\"keyword\">elif</span> cmd == <span class=\"string\">'close'</span>:</div><div class=\"line\">            remote.close()</div><div class=\"line\">            <span class=\"keyword\">break</span></div><div class=\"line\">        <span class=\"keyword\">elif</span> cmd == <span class=\"string\">'get_spaces'</span>:</div><div class=\"line\">            remote.send((env.observation_space, env.action_space))</div><div class=\"line\">        <span class=\"keyword\">else</span>:</div><div class=\"line\">            <span class=\"keyword\">raise</span> NotImplementedError</div></pre></td></tr></table></figure>\n<p><code>SubprocVecEnv</code>subprocess<code>worker</code><code>worker</code><strong>env</strong>env<code>worker</code><code>env_fn_wrapper</code><code>_thunk</code><code>CloudpickleWrapper</code><code>wrapper</code></p>\n<figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># BASELINE_ROOT/common/vec_env/subproc_vec_env.py</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SubprocVecEnv</span><span class=\"params\">(VecEnv)</span>:</span></div><div class=\"line\">    ...</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\"># subprocessstep</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">step_async</span><span class=\"params\">(self, actions)</span>:</span></div><div class=\"line\">        <span class=\"keyword\">for</span> remote, action <span class=\"keyword\">in</span> zip(self.remotes, actions):</div><div class=\"line\">            remote.send((<span class=\"string\">'step'</span>, action))</div><div class=\"line\">        self.waiting = <span class=\"keyword\">True</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\"># subprocess</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">step_wait</span><span class=\"params\">(self)</span>:</span></div><div class=\"line\">        results = [remote.recv() <span class=\"keyword\">for</span> remote <span class=\"keyword\">in</span> self.remotes]</div><div class=\"line\">        self.waiting = <span class=\"keyword\">False</span></div><div class=\"line\">        obs, rews, dones, infos = zip(*results)</div><div class=\"line\">        <span class=\"keyword\">return</span> np.stack(obs), np.stack(rews), np.stack(dones), infos</div><div class=\"line\"></div><div class=\"line\">    ...</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\"># VecEnv</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">step</span><span class=\"params\">(self, actions)</span>:</span></div><div class=\"line\">        self.step_async(actions)</div><div class=\"line\">        <span class=\"keyword\">return</span> self.step_wait()</div></pre></td></tr></table></figure>\n<p>subprocee<code>SubprocVecEnv</code><strong></strong><code>step</code>, <code>reset</code>subprocess</p>\n<h4 id=\"VecNormalize\"><a href=\"#VecNormalize\" class=\"headerlink\" title=\"VecNormalize\"></a>VecNormalize</h4><figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># BASELINE_ROOT/common/vec_env/vec_normalize.py</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">VecNormalize</span><span class=\"params\">(VecEnvWrapper)</span>:</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, venv, ob=True, ret=True, clipob=<span class=\"number\">10.</span>, cliprew=<span class=\"number\">10.</span>, gamma=<span class=\"number\">0.99</span>, epsilon=<span class=\"number\">1e-8</span>)</span>:</span></div><div class=\"line\">        VecEnvWrapper.__init__(self, venv)</div><div class=\"line\">        <span class=\"comment\"># mean, std</span></div><div class=\"line\">        self.ob_rms = RunningMeanStd(shape=self.observation_space.shape) <span class=\"keyword\">if</span> ob <span class=\"keyword\">else</span> <span class=\"keyword\">None</span></div><div class=\"line\">        self.ret_rms = RunningMeanStd(shape=()) <span class=\"keyword\">if</span> ret <span class=\"keyword\">else</span> <span class=\"keyword\">None</span></div><div class=\"line\"></div><div class=\"line\">    ...</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">step_wait</span><span class=\"params\">(self)</span>:</span></div><div class=\"line\">        obs, rews, news, infos = self.venv.step_wait()</div><div class=\"line\">        self.ret = self.ret * self.gamma + rews</div><div class=\"line\"></div><div class=\"line\">        <span class=\"comment\"># obsnormalizationmean, std</span></div><div class=\"line\">        obs = self._obfilt(obs)</div><div class=\"line\">        <span class=\"comment\"># rewardnormalizationmeanstdreturnstd</span></div><div class=\"line\">        <span class=\"keyword\">if</span> self.ret_rms:</div><div class=\"line\">            self.ret_rms.update(self.ret)</div><div class=\"line\">            rews = np.clip(rews / np.sqrt(self.ret_rms.var + self.epsilon), -self.cliprew, self.cliprew)</div><div class=\"line\">        <span class=\"keyword\">return</span> obs, rews, news, infos</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">_obfilt</span><span class=\"params\">(self, obs)</span>:</span></div><div class=\"line\">        <span class=\"keyword\">if</span> self.ob_rms:</div><div class=\"line\">            self.ob_rms.update(obs)</div><div class=\"line\">            obs = np.clip((obs - self.ob_rms.mean) / np.sqrt(self.ob_rms.var + self.epsilon), -self.clipob, self.clipob)</div><div class=\"line\">            <span class=\"keyword\">return</span> obs</div><div class=\"line\">        <span class=\"keyword\">else</span>:</div><div class=\"line\">            <span class=\"keyword\">return</span> obs</div><div class=\"line\"></div><div class=\"line\">    ...</div></pre></td></tr></table></figure>\n<p><code>VecNormalize</code>wrapper<strong>observationrewardnormalization</strong></p>\n<hr>\n<h3 id=\"actor-critic\"><a href=\"#actor-critic\" class=\"headerlink\" title=\"actor_critic\"></a>actor_critic</h3><figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># PPO_ROOT/model.py</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Policy</span><span class=\"params\">(nn.Module)</span>:</span></div><div class=\"line\">    ...</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">act</span><span class=\"params\">(self, inputs, states, masks, deterministic=False)</span>:</span></div><div class=\"line\">    \t<span class=\"comment\"># self.baseactorcritic</span></div><div class=\"line\">    \t<span class=\"comment\"># valueV(o_t)</span></div><div class=\"line\">    \t<span class=\"comment\"># actor_featuresactor</span></div><div class=\"line\">    \t<span class=\"comment\"># statesRNNhidden states</span></div><div class=\"line\">        value, actor_features, states = self.base(inputs, states, masks)</div><div class=\"line\">        <span class=\"comment\"># distaction\\pi(A_t | o_t)</span></div><div class=\"line\">        dist = self.dist(actor_features)</div><div class=\"line\"></div><div class=\"line\">       \t...</div><div class=\"line\"></div><div class=\"line\">    ...</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">evaluate_actions</span><span class=\"params\">(self, inputs, states, masks, action)</span>:</span></div><div class=\"line\">        ...</div><div class=\"line\"></div><div class=\"line\">        <span class=\"comment\"># value: V(o_t)</span></div><div class=\"line\">        <span class=\"comment\"># action_log_probs: \\log(\\pi(a_t | o_t))</span></div><div class=\"line\">        <span class=\"comment\"># dist_entropy: Entropy(\\pi(A_t | o_t))</span></div><div class=\"line\">        <span class=\"comment\"># statesRNNhidden states</span></div><div class=\"line\">        <span class=\"keyword\">return</span> value, action_log_probs, dist_entropy, states</div></pre></td></tr></table></figure>\n<p>parametric policy<code>actor_critic</code><code>Policy</code>actorcritic<code>act</code><code>evaluate_actions</code><strong>action</strong><strong></strong>e.g., $V(o_t), \\log\\pi(a_t \\vert o_t)$</p>\n<hr>\n<h3 id=\"rollouts\"><a href=\"#rollouts\" class=\"headerlink\" title=\"rollouts\"></a>rollouts</h3><figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># PPO_ROOT/storage.py</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">RolloutStorage</span><span class=\"params\">(object)</span>:</span></div><div class=\"line\">    ...</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\"># </span></div><div class=\"line\">    <span class=\"comment\"># current_obs: o_&#123;t+1&#125;</span></div><div class=\"line\">    <span class=\"comment\"># state: RNNhidden state</span></div><div class=\"line\">    <span class=\"comment\"># action: a_t</span></div><div class=\"line\">    <span class=\"comment\"># action_log_prob: \\pi(a_t | o_t)</span></div><div class=\"line\">    <span class=\"comment\"># value_pred: V(o_t)</span></div><div class=\"line\">    <span class=\"comment\"># reward: r_t</span></div><div class=\"line\">    <span class=\"comment\"># mask: o_&#123;t+1&#125;gym.reset()01</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">insert</span><span class=\"params\">(self, current_obs, state, action, action_log_prob, value_pred, reward, mask)</span>:</span></div><div class=\"line\">        ...</div><div class=\"line\"></div><div class=\"line\">    ...</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\"># return</span></div><div class=\"line\">    <span class=\"comment\"># GAEGAE+VMCreturn</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">compute_returns</span><span class=\"params\">(self, next_value, use_gae, gamma, tau)</span>:</span></div><div class=\"line\">        <span class=\"keyword\">if</span> use_gae:</div><div class=\"line\">            ...</div><div class=\"line\">        <span class=\"keyword\">else</span>:</div><div class=\"line\">            ...</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\"># num_steps * num_processestransitionsnum_mini_batchmini_batchmini_batch</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">feed_forward_generator</span><span class=\"params\">(self, advantages, num_mini_batch)</span>:</span></div><div class=\"line\">        ...</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\"># RNNprocessnum_steps * num_processestransitionsnum_mini_batchmini_batchmini_batch</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">recurrent_generator</span><span class=\"params\">(self, advantages, num_mini_batch)</span>:</span></div><div class=\"line\">        ...</div></pre></td></tr></table></figure>\n<p>trajectory<code>rollouts</code><code>RolloutStorage</code><strong></strong><code>insert</code><code>xxx_generator</code><code>compute_returns</code>return</p>\n<hr>\n<h3 id=\"agent\"><a href=\"#agent\" class=\"headerlink\" title=\"agent\"></a>agent</h3><figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># PPO_ROOT/algo/ppo.py</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PPO</span><span class=\"params\">(object)</span>:</span></div><div class=\"line\">    ...</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">update</span><span class=\"params\">(self, rollouts)</span>:</span></div><div class=\"line\">    \t<span class=\"comment\"># \\hat&#123;A)_t in PPO paperreturnGAEMC</span></div><div class=\"line\">        <span class=\"comment\"># advantagenormalization</span></div><div class=\"line\">        advantages = rollouts.returns[:<span class=\"number\">-1</span>] - rollouts.value_preds[:<span class=\"number\">-1</span>]</div><div class=\"line\">        advantages = (advantages - advantages.mean()) / (</div><div class=\"line\">            advantages.std() + <span class=\"number\">1e-5</span>)</div><div class=\"line\"></div><div class=\"line\">        ...</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">for</span> e <span class=\"keyword\">in</span> range(self.ppo_epoch):</div><div class=\"line\">            ...</div><div class=\"line\"></div><div class=\"line\">            <span class=\"keyword\">for</span> sample <span class=\"keyword\">in</span> data_generator:</div><div class=\"line\">                ...</div><div class=\"line\"></div><div class=\"line\">                <span class=\"comment\"># r_t(\\theta) in the PPO paper</span></div><div class=\"line\">                ratio = torch.exp(action_log_probs - old_action_log_probs_batch)</div><div class=\"line\">                surr1 = ratio * adv_targ</div><div class=\"line\">                surr2 = torch.clamp(ratio, <span class=\"number\">1.0</span> - self.clip_param,</div><div class=\"line\">                                           <span class=\"number\">1.0</span> + self.clip_param) * adv_targ</div><div class=\"line\">                <span class=\"comment\"># -L_t^&#123;CLIP&#125;(\\theta) in the PPO paper</span></div><div class=\"line\">                action_loss = -torch.min(surr1, surr2).mean()</div><div class=\"line\"></div><div class=\"line\">               \t<span class=\"comment\"># L_t^&#123;VF&#125;(\\theta) in the PPO paper</span></div><div class=\"line\">                value_loss = F.mse_loss(return_batch, values)</div><div class=\"line\"></div><div class=\"line\">                self.optimizer.zero_grad()</div><div class=\"line\">                <span class=\"comment\"># -L_t^&#123;CLIP+VF+S&#125;(\\theta) in the PPO paperminizationlr</span></div><div class=\"line\">                (value_loss * self.value_loss_coef + action_loss -</div><div class=\"line\">                 dist_entropy * self.entropy_coef).backward()</div><div class=\"line\">                nn.utils.clip_grad_norm_(self.actor_critic.parameters(),</div><div class=\"line\">                                         self.max_grad_norm)</div><div class=\"line\">                self.optimizer.step()</div><div class=\"line\"></div><div class=\"line\">                ...</div><div class=\"line\"></div><div class=\"line\">        ...</div></pre></td></tr></table></figure>\n<p>RL algorithm<code>agent</code><code>PPO</code><code>rollouts</code><code>actor_critic</code>PPO</p>\n<h2 id=\"Summary\"><a href=\"#Summary\" class=\"headerlink\" title=\"Summary\"></a>Summary</h2><p>PPO<strong></strong>observationrewardnormalizationreturnadvantagenormalizationgradientclip</p>\n"},{"title":"","date":"2018-03-31T11:18:11.000Z","description":[""],"_content":"\n## derivative of softmax\n\n### derivative of softmax\n\nsoftmax$3$softmax$y_i$$x$$i$\n\n<div style=\"width:600px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img softmax.png  %}\n</div>\n\n$\\\\{ (x_1, c_1), \\dots, (x_m, c_m) \\\\}$****$L(\\theta)$\n\n$$\n\\mathop{\\text{maximize}}_\\theta \\sum_{j=1}^m \\ln  P(c_j \\ \\vert \\ x_j ; \\theta).\n$$**gradient based**e.g., SGD$\\frac{\\partial L(\\theta)}{\\partial \\theta}$$\\frac{\\partial L(\\theta)}{\\partial z_i}$$\\frac{\\partial L(\\theta)}{\\partial \\theta}$$\\frac{\\partial L(\\theta)}{\\partial z_i}$\n\n$$\n\\begin{aligned}\n\\frac{\\partial L(\\theta)}{\\partial z_i} &= \\frac{\\partial}{\\partial z_i}\\sum_{j=1}^m \\ln  P(c_j \\ \\vert \\ x_j ; \\theta) \\\\\n&= \\sum_{j=1}^m\\frac{\\partial}{\\partial z_i} \\ln  P(c_j \\ \\vert \\ x_j ; \\theta).\n\\end{aligned}\n$$$j$$\\frac{\\partial}{\\partial z_i} \\ln  P(c_j \\ \\vert \\ x_j ; \\theta)$$\\frac{\\partial L(\\theta)}{\\partial z_i}$$\\frac{\\partial L(\\theta)}{\\partial \\theta}$**$j$$(x, c)$**\n\n$x$\n\n- ****i.e., $c=3$$x$$3$$P(c \\ \\vert \\ x ; \\theta)=\\prod_n {y_n}^{\\mathbb{1}(c=n)}$$\\mathbb{1}(\\bullet)$\n- **one-hot**i.e., $c= [0 \\quad 0 \\quad 1]^T$$x$$P(c \\ \\vert \\ x ; \\theta)=\\prod_n {y_n}^{c_n}$$c_n$$c$$n$\n- p.s., one-hot****one-hot$\\mathbb{1}(c=n)$\n\n**one-hot**\n\n$$\n\\begin{aligned}\n\\frac{\\partial}{\\partial z_i} \\ln  P(c \\ \\vert \\ x ; \\theta) &= \\frac{\\partial}{\\partial z_i} \\ln \\prod_n {y_n}^{c_n} \\\\\n&= \\frac{\\partial}{\\partial z_i} \\sum_n \\ln {y_n}^{c_n} \\\\\n&= \\frac{\\partial}{\\partial z_i} \\sum_n {c_n} \\ln \\frac{e^{z_n}}{\\sum_j e^{z_j}} \\\\\n&= \\sum_n {c_n} \\frac{\\partial}{\\partial z_i} (\\ln {e^{z_n}} - \\ln{\\sum_j e^{z_j}}) \\\\\n&= \\sum_n {c_n} \\frac{\\partial}{\\partial z_i} ({z_n} - \\ln{\\sum_j e^{z_j}}) \\\\\n&= \\sum_n {c_n} (\\frac{\\partial z_n}{\\partial z_i}  - \\frac{\\partial}{\\partial z_i} \\ln{\\sum_j e^{z_j}}) \\\\\n&= \\sum_n {c_n} (\\frac{\\partial z_n}{\\partial z_i}  - \\frac{e^{z_i}}{\\sum_j e^{z_j}} ) \\\\\n&= \\sum_n {c_n} (\\frac{\\partial z_n}{\\partial z_i}  - y_i ) \\\\\n&= \\sum_n {c_n} \\frac{\\partial z_n}{\\partial z_i}  - \\sum_n {c_n} y_i  \\\\\n&= c_i  - y_i . \\\\\n\\end{aligned}\n$$\n\n### softmax & sigmoid\n\n**softmaxsigmoid**sigmoid function$x$$1$\n$$\nP(1 \\ \\vert \\ x ; \\theta) = \\frac{1}{1+e^{-z}}. \n$$$1$$x$$2$\n\n$$\nP(2 \\ \\vert \\ x ; \\theta) = 1 - P(1 \\ \\vert \\ x ; \\theta).\n$$sigmoidsoftmax\n\n- softmax**output**sigmoidoutput\n- softmax****sigmoid\n\n**sigmoidsoftmax**sigmoidoutputsoftmax\n\n$$\n\\begin{aligned}\nP(1 \\ \\vert \\ x ; \\theta) &= \\frac{1}{1+e^{-z}} \\\\\n&= \\frac{e^{z}}{e^{z}+e^{0}} \\\\\nP(2 \\ \\vert \\ x ; \\theta) &= \\frac{e^{-z}}{1+e^{-z}} \\\\\n&= \\frac{e^{0}}{e^{z}+e^{0}}. \\\\\n\\end{aligned}\n$$sigmoidsoftmaxsigmoidinput$0$i.e., intput$[z \\quad 0]^T$softmaxinput$[z_1 \\quad z_2]^T$mappingi.e., $[z_1 \\quad z_2]^T$$[z \\quad 0]^T$softmax$[z \\quad 0]^T$$[z_1 \\quad z_2]^T$\n\n$$\n\\begin{aligned}\nP(1 \\ \\vert \\ x ; \\theta) &= \\frac{e^{z_1}}{e^{z_1}+e^{z_2}} \\\\\n&= \\frac{e^{z_1-z_2}}{e^{z_1-z_2}+e^{z_2-z_2}} \\\\\n&= \\frac{e^{z}}{e^{z}+e^{0}}. \\\\\n\\end{aligned}\n$$sigmoidsoftmax\n\n## backpropagation\n\ntraini.e., loss functiongradient*backpropagation*gradient\n\n<div style=\"width:600px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img bp1.png  %}\n</div>\n\n$C$$w_1$gradient\n\n$$\n\\frac{\\partial C}{\\partial w_1} = \\frac{\\partial C}{\\partial z}\\frac{\\partial z}{\\partial w_1}.\n$$$z = x_1 w_1 + x_2 w_2 +b$\n\n$$\n\\frac{\\partial z}{\\partial w_1} = x_1,\n$$$x_1$\n\n---\n\n\n\n$$\n\\frac{\\partial C}{\\partial z} = \\frac{\\partial C}{\\partial a}\\frac{\\partial a}{\\partial z}.\n$$$a=\\sigma(z)$$\\sigma$e.g., sigmoid function\n\n$$\n\\frac{\\partial a}{\\partial z} = \\sigma^\\prime(z)\n$$$z$\n\n---\n\n<div style=\"width:600px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img bp2.png  %}\n</div>\n\n$$\n\\frac{\\partial C}{\\partial a} = \\frac{\\partial C}{\\partial z^\\prime}\\frac{\\partial z^\\prime}{\\partial a} + \\frac{\\partial C}{\\partial z^{\\prime\\prime}}\\frac{\\partial z^{\\prime\\prime}}{\\partial a}.\n$$$z^\\prime = aw_3 + \\dots$$$\n\\begin{aligned}\n\\frac{\\partial z^\\prime}{\\partial a} &= w_3 \\\\\n\\frac{\\partial z^{\\prime\\prime}}{\\partial a} &= w_4.\n\\end{aligned}\n$$$w_3$$w_4$$\\frac{\\partial C}{\\partial a}$$\\frac{\\partial C}{\\partial z^\\prime}$$\\frac{\\partial C}{\\partial z^{\\prime\\prime}}$****$\\frac{\\partial C}{\\partial z^\\prime}$$\\frac{\\partial C}{\\partial z^{\\prime\\prime}}$graidentgradientsoftmaxgradientgradient\n\n$\\frac{\\partial C}{\\partial z}$****\n\n<div style=\"width:300px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img bp3.png  %}\n</div>\n\n---\n\n$x_1$$z$$\\frac{\\partial z}{\\partial w_1}$$\\frac{\\partial a}{\\partial z}$$\\frac{\\partial C}{\\partial z^\\prime}$$\\frac{\\partial C}{\\partial z^{\\prime\\prime}}$$\\frac{\\partial C}{\\partial a}$$\\frac{\\partial C}{\\partial w_1}$*backpropagation**forward pass**backward pass*\n\n## derivative of CNN\n\n\n\n- $w$$0$\n- $w$\n\n$w$$0$\n\n<div style=\"width:600px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img cnn1.png  %}\n</div>\n\n$w$\n\n<div style=\"width:600px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img cnn2.png  %}\n</div>\n\n**loss function$C(z_1, z_2, \\dots)$**$w$gradient\n\n$$\n\\frac{\\partial C}{\\partial w} = \\sum_i \\frac{\\partial C}{\\partial z_i}\\frac{\\partial z_i}{\\partial w}.\n$$$\\frac{\\partial C}{\\partial z_i}\\frac{\\partial z_i}{\\partial w}$$w$backpropagation\n\n## derivative of RNN\n\nRNNgradient\n\n<div style=\"width:600px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img rnn.png  %}\n</div>\n\n**loss function$L(s_0, s_1, \\dots)$**$w$gradient\n\n$$\n\\frac{\\partial L}{\\partial w} = \\sum_i\\frac{\\partial L}{\\partial s_i}\\frac{\\partial s_i}{\\partial w}.\n$$RNNgradient*Backpropagation Through Time(BPTT)*\n\n## derivative of max pooling\n\n$max(x, y, \\dots)$****e.g., $y$$y$$1$$0$\n\ntrain*forward pass**backward pass*max poolinggradient\n\n## references\n\n- [Hung-yi Lee Machine Learning](http://speech.ee.ntu.edu.tw/~tlkagk/courses_ML17_2.html)\n- [RNN Tutorial](http://www.wildml.com/2015/10/recurrent-neural-networks-tutorial-part-3-backpropagation-through-time-and-vanishing-gradients/)","source":"_posts/summary-derivative.md","raw":"---\ntitle: \ndate: 2018-03-31 19:18:11\ntags:\n\t- derivative\n\t- softmax\n\t- backpropagation\n\t- cnn\n\t- bptt\n\t- max pooling\ncategories:\n\t- \ndescription:\n\t- \n---\n\n## derivative of softmax\n\n### derivative of softmax\n\nsoftmax$3$softmax$y_i$$x$$i$\n\n<div style=\"width:600px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img softmax.png  %}\n</div>\n\n$\\\\{ (x_1, c_1), \\dots, (x_m, c_m) \\\\}$****$L(\\theta)$\n\n$$\n\\mathop{\\text{maximize}}_\\theta \\sum_{j=1}^m \\ln  P(c_j \\ \\vert \\ x_j ; \\theta).\n$$**gradient based**e.g., SGD$\\frac{\\partial L(\\theta)}{\\partial \\theta}$$\\frac{\\partial L(\\theta)}{\\partial z_i}$$\\frac{\\partial L(\\theta)}{\\partial \\theta}$$\\frac{\\partial L(\\theta)}{\\partial z_i}$\n\n$$\n\\begin{aligned}\n\\frac{\\partial L(\\theta)}{\\partial z_i} &= \\frac{\\partial}{\\partial z_i}\\sum_{j=1}^m \\ln  P(c_j \\ \\vert \\ x_j ; \\theta) \\\\\n&= \\sum_{j=1}^m\\frac{\\partial}{\\partial z_i} \\ln  P(c_j \\ \\vert \\ x_j ; \\theta).\n\\end{aligned}\n$$$j$$\\frac{\\partial}{\\partial z_i} \\ln  P(c_j \\ \\vert \\ x_j ; \\theta)$$\\frac{\\partial L(\\theta)}{\\partial z_i}$$\\frac{\\partial L(\\theta)}{\\partial \\theta}$**$j$$(x, c)$**\n\n$x$\n\n- ****i.e., $c=3$$x$$3$$P(c \\ \\vert \\ x ; \\theta)=\\prod_n {y_n}^{\\mathbb{1}(c=n)}$$\\mathbb{1}(\\bullet)$\n- **one-hot**i.e., $c= [0 \\quad 0 \\quad 1]^T$$x$$P(c \\ \\vert \\ x ; \\theta)=\\prod_n {y_n}^{c_n}$$c_n$$c$$n$\n- p.s., one-hot****one-hot$\\mathbb{1}(c=n)$\n\n**one-hot**\n\n$$\n\\begin{aligned}\n\\frac{\\partial}{\\partial z_i} \\ln  P(c \\ \\vert \\ x ; \\theta) &= \\frac{\\partial}{\\partial z_i} \\ln \\prod_n {y_n}^{c_n} \\\\\n&= \\frac{\\partial}{\\partial z_i} \\sum_n \\ln {y_n}^{c_n} \\\\\n&= \\frac{\\partial}{\\partial z_i} \\sum_n {c_n} \\ln \\frac{e^{z_n}}{\\sum_j e^{z_j}} \\\\\n&= \\sum_n {c_n} \\frac{\\partial}{\\partial z_i} (\\ln {e^{z_n}} - \\ln{\\sum_j e^{z_j}}) \\\\\n&= \\sum_n {c_n} \\frac{\\partial}{\\partial z_i} ({z_n} - \\ln{\\sum_j e^{z_j}}) \\\\\n&= \\sum_n {c_n} (\\frac{\\partial z_n}{\\partial z_i}  - \\frac{\\partial}{\\partial z_i} \\ln{\\sum_j e^{z_j}}) \\\\\n&= \\sum_n {c_n} (\\frac{\\partial z_n}{\\partial z_i}  - \\frac{e^{z_i}}{\\sum_j e^{z_j}} ) \\\\\n&= \\sum_n {c_n} (\\frac{\\partial z_n}{\\partial z_i}  - y_i ) \\\\\n&= \\sum_n {c_n} \\frac{\\partial z_n}{\\partial z_i}  - \\sum_n {c_n} y_i  \\\\\n&= c_i  - y_i . \\\\\n\\end{aligned}\n$$\n\n### softmax & sigmoid\n\n**softmaxsigmoid**sigmoid function$x$$1$\n$$\nP(1 \\ \\vert \\ x ; \\theta) = \\frac{1}{1+e^{-z}}. \n$$$1$$x$$2$\n\n$$\nP(2 \\ \\vert \\ x ; \\theta) = 1 - P(1 \\ \\vert \\ x ; \\theta).\n$$sigmoidsoftmax\n\n- softmax**output**sigmoidoutput\n- softmax****sigmoid\n\n**sigmoidsoftmax**sigmoidoutputsoftmax\n\n$$\n\\begin{aligned}\nP(1 \\ \\vert \\ x ; \\theta) &= \\frac{1}{1+e^{-z}} \\\\\n&= \\frac{e^{z}}{e^{z}+e^{0}} \\\\\nP(2 \\ \\vert \\ x ; \\theta) &= \\frac{e^{-z}}{1+e^{-z}} \\\\\n&= \\frac{e^{0}}{e^{z}+e^{0}}. \\\\\n\\end{aligned}\n$$sigmoidsoftmaxsigmoidinput$0$i.e., intput$[z \\quad 0]^T$softmaxinput$[z_1 \\quad z_2]^T$mappingi.e., $[z_1 \\quad z_2]^T$$[z \\quad 0]^T$softmax$[z \\quad 0]^T$$[z_1 \\quad z_2]^T$\n\n$$\n\\begin{aligned}\nP(1 \\ \\vert \\ x ; \\theta) &= \\frac{e^{z_1}}{e^{z_1}+e^{z_2}} \\\\\n&= \\frac{e^{z_1-z_2}}{e^{z_1-z_2}+e^{z_2-z_2}} \\\\\n&= \\frac{e^{z}}{e^{z}+e^{0}}. \\\\\n\\end{aligned}\n$$sigmoidsoftmax\n\n## backpropagation\n\ntraini.e., loss functiongradient*backpropagation*gradient\n\n<div style=\"width:600px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img bp1.png  %}\n</div>\n\n$C$$w_1$gradient\n\n$$\n\\frac{\\partial C}{\\partial w_1} = \\frac{\\partial C}{\\partial z}\\frac{\\partial z}{\\partial w_1}.\n$$$z = x_1 w_1 + x_2 w_2 +b$\n\n$$\n\\frac{\\partial z}{\\partial w_1} = x_1,\n$$$x_1$\n\n---\n\n\n\n$$\n\\frac{\\partial C}{\\partial z} = \\frac{\\partial C}{\\partial a}\\frac{\\partial a}{\\partial z}.\n$$$a=\\sigma(z)$$\\sigma$e.g., sigmoid function\n\n$$\n\\frac{\\partial a}{\\partial z} = \\sigma^\\prime(z)\n$$$z$\n\n---\n\n<div style=\"width:600px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img bp2.png  %}\n</div>\n\n$$\n\\frac{\\partial C}{\\partial a} = \\frac{\\partial C}{\\partial z^\\prime}\\frac{\\partial z^\\prime}{\\partial a} + \\frac{\\partial C}{\\partial z^{\\prime\\prime}}\\frac{\\partial z^{\\prime\\prime}}{\\partial a}.\n$$$z^\\prime = aw_3 + \\dots$$$\n\\begin{aligned}\n\\frac{\\partial z^\\prime}{\\partial a} &= w_3 \\\\\n\\frac{\\partial z^{\\prime\\prime}}{\\partial a} &= w_4.\n\\end{aligned}\n$$$w_3$$w_4$$\\frac{\\partial C}{\\partial a}$$\\frac{\\partial C}{\\partial z^\\prime}$$\\frac{\\partial C}{\\partial z^{\\prime\\prime}}$****$\\frac{\\partial C}{\\partial z^\\prime}$$\\frac{\\partial C}{\\partial z^{\\prime\\prime}}$graidentgradientsoftmaxgradientgradient\n\n$\\frac{\\partial C}{\\partial z}$****\n\n<div style=\"width:300px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img bp3.png  %}\n</div>\n\n---\n\n$x_1$$z$$\\frac{\\partial z}{\\partial w_1}$$\\frac{\\partial a}{\\partial z}$$\\frac{\\partial C}{\\partial z^\\prime}$$\\frac{\\partial C}{\\partial z^{\\prime\\prime}}$$\\frac{\\partial C}{\\partial a}$$\\frac{\\partial C}{\\partial w_1}$*backpropagation**forward pass**backward pass*\n\n## derivative of CNN\n\n\n\n- $w$$0$\n- $w$\n\n$w$$0$\n\n<div style=\"width:600px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img cnn1.png  %}\n</div>\n\n$w$\n\n<div style=\"width:600px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img cnn2.png  %}\n</div>\n\n**loss function$C(z_1, z_2, \\dots)$**$w$gradient\n\n$$\n\\frac{\\partial C}{\\partial w} = \\sum_i \\frac{\\partial C}{\\partial z_i}\\frac{\\partial z_i}{\\partial w}.\n$$$\\frac{\\partial C}{\\partial z_i}\\frac{\\partial z_i}{\\partial w}$$w$backpropagation\n\n## derivative of RNN\n\nRNNgradient\n\n<div style=\"width:600px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img rnn.png  %}\n</div>\n\n**loss function$L(s_0, s_1, \\dots)$**$w$gradient\n\n$$\n\\frac{\\partial L}{\\partial w} = \\sum_i\\frac{\\partial L}{\\partial s_i}\\frac{\\partial s_i}{\\partial w}.\n$$RNNgradient*Backpropagation Through Time(BPTT)*\n\n## derivative of max pooling\n\n$max(x, y, \\dots)$****e.g., $y$$y$$1$$0$\n\ntrain*forward pass**backward pass*max poolinggradient\n\n## references\n\n- [Hung-yi Lee Machine Learning](http://speech.ee.ntu.edu.tw/~tlkagk/courses_ML17_2.html)\n- [RNN Tutorial](http://www.wildml.com/2015/10/recurrent-neural-networks-tutorial-part-3-backpropagation-through-time-and-vanishing-gradients/)","slug":"summary-derivative","published":1,"updated":"2024-08-13T16:03:47.872Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clzvf192h001qeqwoz7se07e4","content":"<h2 id=\"derivative-of-softmax\"><a href=\"#derivative-of-softmax\" class=\"headerlink\" title=\"derivative of softmax\"></a>derivative of softmax</h2><h3 id=\"derivative-of-softmax-1\"><a href=\"#derivative-of-softmax-1\" class=\"headerlink\" title=\"derivative of softmax\"></a>derivative of softmax</h3><p>softmax$3$softmax$y_i$$x$$i$</p>\n<div style=\"width:600px; margin-left:auto; margin-right:auto;\"><br>  <img src=\"/2018/03/31/summary-derivative/softmax.png\" alt=\"softmax.png\" title=\"\"><br></div>\n\n<p>$\\{ (x_1, c_1), \\dots, (x_m, c_m) \\}$<strong></strong>$L(\\theta)$</p>\n<p>$$<br>\\mathop{\\text{maximize}}_\\theta \\sum_{j=1}^m \\ln  P(c_j  \\vert  x_j ; \\theta).<br>$$<strong>gradient based</strong>e.g., SGD$\\frac{\\partial L(\\theta)}{\\partial \\theta}$$\\frac{\\partial L(\\theta)}{\\partial z_i}$$\\frac{\\partial L(\\theta)}{\\partial \\theta}$$\\frac{\\partial L(\\theta)}{\\partial z_i}$</p>\n<p>$$<br>\\begin{aligned}<br>\\frac{\\partial L(\\theta)}{\\partial z_i} &amp;= \\frac{\\partial}{\\partial z_i}\\sum_{j=1}^m \\ln  P(c_j  \\vert  x_j ; \\theta) \\\\<br>&amp;= \\sum_{j=1}^m\\frac{\\partial}{\\partial z_i} \\ln  P(c_j  \\vert  x_j ; \\theta).<br>\\end{aligned}<br>$$$j$$\\frac{\\partial}{\\partial z_i} \\ln  P(c_j  \\vert  x_j ; \\theta)$$\\frac{\\partial L(\\theta)}{\\partial z_i}$$\\frac{\\partial L(\\theta)}{\\partial \\theta}$<strong>$j$$(x, c)$</strong></p>\n<p>$x$</p>\n<ul>\n<li><strong></strong>i.e., $c=3$$x$$3$$P(c  \\vert  x ; \\theta)=\\prod_n {y_n}^{\\mathbb{1}(c=n)}$$\\mathbb{1}(\\bullet)$</li>\n<li><strong>one-hot</strong>i.e., $c= [0 \\quad 0 \\quad 1]^T$$x$$P(c  \\vert  x ; \\theta)=\\prod_n {y_n}^{c_n}$$c_n$$c$$n$</li>\n<li>p.s., one-hot<strong></strong>one-hot$\\mathbb{1}(c=n)$</li>\n</ul>\n<p><strong>one-hot</strong></p>\n<p>$$<br>\\begin{aligned}<br>\\frac{\\partial}{\\partial z_i} \\ln  P(c  \\vert  x ; \\theta) &amp;= \\frac{\\partial}{\\partial z_i} \\ln \\prod_n {y_n}^{c_n} \\\\<br>&amp;= \\frac{\\partial}{\\partial z_i} \\sum_n \\ln {y_n}^{c_n} \\\\<br>&amp;= \\frac{\\partial}{\\partial z_i} \\sum_n {c_n} \\ln \\frac{e^{z_n}}{\\sum_j e^{z_j}} \\\\<br>&amp;= \\sum_n {c_n} \\frac{\\partial}{\\partial z_i} (\\ln {e^{z_n}} - \\ln{\\sum_j e^{z_j}}) \\\\<br>&amp;= \\sum_n {c_n} \\frac{\\partial}{\\partial z_i} ({z_n} - \\ln{\\sum_j e^{z_j}}) \\\\<br>&amp;= \\sum_n {c_n} (\\frac{\\partial z_n}{\\partial z_i}  - \\frac{\\partial}{\\partial z_i} \\ln{\\sum_j e^{z_j}}) \\\\<br>&amp;= \\sum_n {c_n} (\\frac{\\partial z_n}{\\partial z_i}  - \\frac{e^{z_i}}{\\sum_j e^{z_j}} ) \\\\<br>&amp;= \\sum_n {c_n} (\\frac{\\partial z_n}{\\partial z_i}  - y_i ) \\\\<br>&amp;= \\sum_n {c_n} \\frac{\\partial z_n}{\\partial z_i}  - \\sum_n {c_n} y_i  \\\\<br>&amp;= c_i  - y_i . \\\\<br>\\end{aligned}<br>$$</p>\n<h3 id=\"softmax-amp-sigmoid\"><a href=\"#softmax-amp-sigmoid\" class=\"headerlink\" title=\"softmax &amp; sigmoid\"></a>softmax &amp; sigmoid</h3><p><strong>softmaxsigmoid</strong>sigmoid function$x$$1$<br>$$<br>P(1  \\vert  x ; \\theta) = \\frac{1}{1+e^{-z}}.<br>$$$1$$x$$2$</p>\n<p>$$<br>P(2  \\vert  x ; \\theta) = 1 - P(1  \\vert  x ; \\theta).<br>$$sigmoidsoftmax</p>\n<ul>\n<li>softmax<strong>output</strong>sigmoidoutput</li>\n<li>softmax<strong></strong>sigmoid</li>\n</ul>\n<p><strong>sigmoidsoftmax</strong>sigmoidoutputsoftmax</p>\n<p>$$<br>\\begin{aligned}<br>P(1  \\vert  x ; \\theta) &amp;= \\frac{1}{1+e^{-z}} \\\\<br>&amp;= \\frac{e^{z}}{e^{z}+e^{0}} \\\\<br>P(2  \\vert  x ; \\theta) &amp;= \\frac{e^{-z}}{1+e^{-z}} \\\\<br>&amp;= \\frac{e^{0}}{e^{z}+e^{0}}. \\\\<br>\\end{aligned}<br>$$sigmoidsoftmaxsigmoidinput$0$i.e., intput$[z \\quad 0]^T$softmaxinput$[z_1 \\quad z_2]^T$mappingi.e., $[z_1 \\quad z_2]^T$$[z \\quad 0]^T$softmax$[z \\quad 0]^T$$[z_1 \\quad z_2]^T$</p>\n<p>$$<br>\\begin{aligned}<br>P(1  \\vert  x ; \\theta) &amp;= \\frac{e^{z_1}}{e^{z_1}+e^{z_2}} \\\\<br>&amp;= \\frac{e^{z_1-z_2}}{e^{z_1-z_2}+e^{z_2-z_2}} \\\\<br>&amp;= \\frac{e^{z}}{e^{z}+e^{0}}. \\\\<br>\\end{aligned}<br>$$sigmoidsoftmax</p>\n<h2 id=\"backpropagation\"><a href=\"#backpropagation\" class=\"headerlink\" title=\"backpropagation\"></a>backpropagation</h2><p>traini.e., loss functiongradient<em>backpropagation</em>gradient</p>\n<div style=\"width:600px; margin-left:auto; margin-right:auto;\"><br>  <img src=\"/2018/03/31/summary-derivative/bp1.png\" alt=\"bp1.png\" title=\"\"><br></div>\n\n<p>$C$$w_1$gradient</p>\n<p>$$<br>\\frac{\\partial C}{\\partial w_1} = \\frac{\\partial C}{\\partial z}\\frac{\\partial z}{\\partial w_1}.<br>$$$z = x_1 w_1 + x_2 w_2 +b$</p>\n<p>$$<br>\\frac{\\partial z}{\\partial w_1} = x_1,<br>$$$x_1$</p>\n<hr>\n<p></p>\n<p>$$<br>\\frac{\\partial C}{\\partial z} = \\frac{\\partial C}{\\partial a}\\frac{\\partial a}{\\partial z}.<br>$$$a=\\sigma(z)$$\\sigma$e.g., sigmoid function</p>\n<p>$$<br>\\frac{\\partial a}{\\partial z} = \\sigma^\\prime(z)<br>$$$z$</p>\n<hr>\n<div style=\"width:600px; margin-left:auto; margin-right:auto;\"><br>  <img src=\"/2018/03/31/summary-derivative/bp2.png\" alt=\"bp2.png\" title=\"\"><br></div><br><br>$$<br>\\frac{\\partial C}{\\partial a} = \\frac{\\partial C}{\\partial z^\\prime}\\frac{\\partial z^\\prime}{\\partial a} + \\frac{\\partial C}{\\partial z^{\\prime\\prime}}\\frac{\\partial z^{\\prime\\prime}}{\\partial a}.<br>$$$z^\\prime = aw_3 + \\dots$$$<br>\\begin{aligned}<br>\\frac{\\partial z^\\prime}{\\partial a} &amp;= w_3 \\\\<br>\\frac{\\partial z^{\\prime\\prime}}{\\partial a} &amp;= w_4.<br>\\end{aligned}<br>$$$w_3$$w_4$$\\frac{\\partial C}{\\partial a}$$\\frac{\\partial C}{\\partial z^\\prime}$$\\frac{\\partial C}{\\partial z^{\\prime\\prime}}$<strong></strong>$\\frac{\\partial C}{\\partial z^\\prime}$$\\frac{\\partial C}{\\partial z^{\\prime\\prime}}$graidentgradientsoftmaxgradientgradient<br><br>$\\frac{\\partial C}{\\partial z}$<strong></strong><br><br><div style=\"width:300px; margin-left:auto; margin-right:auto;\"><br>  <img src=\"/2018/03/31/summary-derivative/bp3.png\" alt=\"bp3.png\" title=\"\"><br></div>\n\n<hr>\n<p>$x_1$$z$$\\frac{\\partial z}{\\partial w_1}$$\\frac{\\partial a}{\\partial z}$$\\frac{\\partial C}{\\partial z^\\prime}$$\\frac{\\partial C}{\\partial z^{\\prime\\prime}}$$\\frac{\\partial C}{\\partial a}$$\\frac{\\partial C}{\\partial w_1}$<em>backpropagation</em><em>forward pass</em><em>backward pass</em></p>\n<h2 id=\"derivative-of-CNN\"><a href=\"#derivative-of-CNN\" class=\"headerlink\" title=\"derivative of CNN\"></a>derivative of CNN</h2><p></p>\n<ul>\n<li>$w$$0$</li>\n<li>$w$</li>\n</ul>\n<p>$w$$0$</p>\n<div style=\"width:600px; margin-left:auto; margin-right:auto;\"><br>  <img src=\"/2018/03/31/summary-derivative/cnn1.png\" alt=\"cnn1.png\" title=\"\"><br></div>\n\n<p>$w$</p>\n<div style=\"width:600px; margin-left:auto; margin-right:auto;\"><br>  <img src=\"/2018/03/31/summary-derivative/cnn2.png\" alt=\"cnn2.png\" title=\"\"><br></div>\n\n<p><strong>loss function$C(z_1, z_2, \\dots)$</strong>$w$gradient</p>\n<p>$$<br>\\frac{\\partial C}{\\partial w} = \\sum_i \\frac{\\partial C}{\\partial z_i}\\frac{\\partial z_i}{\\partial w}.<br>$$$\\frac{\\partial C}{\\partial z_i}\\frac{\\partial z_i}{\\partial w}$$w$backpropagation</p>\n<h2 id=\"derivative-of-RNN\"><a href=\"#derivative-of-RNN\" class=\"headerlink\" title=\"derivative of RNN\"></a>derivative of RNN</h2><p>RNNgradient</p>\n<div style=\"width:600px; margin-left:auto; margin-right:auto;\"><br>  <img src=\"/2018/03/31/summary-derivative/rnn.png\" alt=\"rnn.png\" title=\"\"><br></div>\n\n<p><strong>loss function$L(s_0, s_1, \\dots)$</strong>$w$gradient</p>\n<p>$$<br>\\frac{\\partial L}{\\partial w} = \\sum_i\\frac{\\partial L}{\\partial s_i}\\frac{\\partial s_i}{\\partial w}.<br>$$RNNgradient<em>Backpropagation Through Time(BPTT)</em></p>\n<h2 id=\"derivative-of-max-pooling\"><a href=\"#derivative-of-max-pooling\" class=\"headerlink\" title=\"derivative of max pooling\"></a>derivative of max pooling</h2><p>$max(x, y, \\dots)$<strong></strong>e.g., $y$$y$$1$$0$</p>\n<p>train<em>forward pass</em><em>backward pass</em>max poolinggradient</p>\n<h2 id=\"references\"><a href=\"#references\" class=\"headerlink\" title=\"references\"></a>references</h2><ul>\n<li><a href=\"http://speech.ee.ntu.edu.tw/~tlkagk/courses_ML17_2.html\" target=\"_blank\" rel=\"external\">Hung-yi Lee Machine Learning</a></li>\n<li><a href=\"http://www.wildml.com/2015/10/recurrent-neural-networks-tutorial-part-3-backpropagation-through-time-and-vanishing-gradients/\" target=\"_blank\" rel=\"external\">RNN Tutorial</a></li>\n</ul>\n","excerpt":"","more":"<h2 id=\"derivative-of-softmax\"><a href=\"#derivative-of-softmax\" class=\"headerlink\" title=\"derivative of softmax\"></a>derivative of softmax</h2><h3 id=\"derivative-of-softmax-1\"><a href=\"#derivative-of-softmax-1\" class=\"headerlink\" title=\"derivative of softmax\"></a>derivative of softmax</h3><p>softmax$3$softmax$y_i$$x$$i$</p>\n<div style=\"width:600px; margin-left:auto; margin-right:auto;\" ><br>  <img src=\"/2018/03/31/summary-derivative/softmax.png\" alt=\"softmax.png\" title=\"\"><br></div>\n\n<p>$\\{ (x_1, c_1), \\dots, (x_m, c_m) \\}$<strong></strong>$L(\\theta)$</p>\n<p>$$<br>\\mathop{\\text{maximize}}_\\theta \\sum_{j=1}^m \\ln  P(c_j  \\vert  x_j ; \\theta).<br>$$<strong>gradient based</strong>e.g., SGD$\\frac{\\partial L(\\theta)}{\\partial \\theta}$$\\frac{\\partial L(\\theta)}{\\partial z_i}$$\\frac{\\partial L(\\theta)}{\\partial \\theta}$$\\frac{\\partial L(\\theta)}{\\partial z_i}$</p>\n<p>$$<br>\\begin{aligned}<br>\\frac{\\partial L(\\theta)}{\\partial z_i} &amp;= \\frac{\\partial}{\\partial z_i}\\sum_{j=1}^m \\ln  P(c_j  \\vert  x_j ; \\theta) \\\\<br>&amp;= \\sum_{j=1}^m\\frac{\\partial}{\\partial z_i} \\ln  P(c_j  \\vert  x_j ; \\theta).<br>\\end{aligned}<br>$$$j$$\\frac{\\partial}{\\partial z_i} \\ln  P(c_j  \\vert  x_j ; \\theta)$$\\frac{\\partial L(\\theta)}{\\partial z_i}$$\\frac{\\partial L(\\theta)}{\\partial \\theta}$<strong>$j$$(x, c)$</strong></p>\n<p>$x$</p>\n<ul>\n<li><strong></strong>i.e., $c=3$$x$$3$$P(c  \\vert  x ; \\theta)=\\prod_n {y_n}^{\\mathbb{1}(c=n)}$$\\mathbb{1}(\\bullet)$</li>\n<li><strong>one-hot</strong>i.e., $c= [0 \\quad 0 \\quad 1]^T$$x$$P(c  \\vert  x ; \\theta)=\\prod_n {y_n}^{c_n}$$c_n$$c$$n$</li>\n<li>p.s., one-hot<strong></strong>one-hot$\\mathbb{1}(c=n)$</li>\n</ul>\n<p><strong>one-hot</strong></p>\n<p>$$<br>\\begin{aligned}<br>\\frac{\\partial}{\\partial z_i} \\ln  P(c  \\vert  x ; \\theta) &amp;= \\frac{\\partial}{\\partial z_i} \\ln \\prod_n {y_n}^{c_n} \\\\<br>&amp;= \\frac{\\partial}{\\partial z_i} \\sum_n \\ln {y_n}^{c_n} \\\\<br>&amp;= \\frac{\\partial}{\\partial z_i} \\sum_n {c_n} \\ln \\frac{e^{z_n}}{\\sum_j e^{z_j}} \\\\<br>&amp;= \\sum_n {c_n} \\frac{\\partial}{\\partial z_i} (\\ln {e^{z_n}} - \\ln{\\sum_j e^{z_j}}) \\\\<br>&amp;= \\sum_n {c_n} \\frac{\\partial}{\\partial z_i} ({z_n} - \\ln{\\sum_j e^{z_j}}) \\\\<br>&amp;= \\sum_n {c_n} (\\frac{\\partial z_n}{\\partial z_i}  - \\frac{\\partial}{\\partial z_i} \\ln{\\sum_j e^{z_j}}) \\\\<br>&amp;= \\sum_n {c_n} (\\frac{\\partial z_n}{\\partial z_i}  - \\frac{e^{z_i}}{\\sum_j e^{z_j}} ) \\\\<br>&amp;= \\sum_n {c_n} (\\frac{\\partial z_n}{\\partial z_i}  - y_i ) \\\\<br>&amp;= \\sum_n {c_n} \\frac{\\partial z_n}{\\partial z_i}  - \\sum_n {c_n} y_i  \\\\<br>&amp;= c_i  - y_i . \\\\<br>\\end{aligned}<br>$$</p>\n<h3 id=\"softmax-amp-sigmoid\"><a href=\"#softmax-amp-sigmoid\" class=\"headerlink\" title=\"softmax &amp; sigmoid\"></a>softmax &amp; sigmoid</h3><p><strong>softmaxsigmoid</strong>sigmoid function$x$$1$<br>$$<br>P(1  \\vert  x ; \\theta) = \\frac{1}{1+e^{-z}}.<br>$$$1$$x$$2$</p>\n<p>$$<br>P(2  \\vert  x ; \\theta) = 1 - P(1  \\vert  x ; \\theta).<br>$$sigmoidsoftmax</p>\n<ul>\n<li>softmax<strong>output</strong>sigmoidoutput</li>\n<li>softmax<strong></strong>sigmoid</li>\n</ul>\n<p><strong>sigmoidsoftmax</strong>sigmoidoutputsoftmax</p>\n<p>$$<br>\\begin{aligned}<br>P(1  \\vert  x ; \\theta) &amp;= \\frac{1}{1+e^{-z}} \\\\<br>&amp;= \\frac{e^{z}}{e^{z}+e^{0}} \\\\<br>P(2  \\vert  x ; \\theta) &amp;= \\frac{e^{-z}}{1+e^{-z}} \\\\<br>&amp;= \\frac{e^{0}}{e^{z}+e^{0}}. \\\\<br>\\end{aligned}<br>$$sigmoidsoftmaxsigmoidinput$0$i.e., intput$[z \\quad 0]^T$softmaxinput$[z_1 \\quad z_2]^T$mappingi.e., $[z_1 \\quad z_2]^T$$[z \\quad 0]^T$softmax$[z \\quad 0]^T$$[z_1 \\quad z_2]^T$</p>\n<p>$$<br>\\begin{aligned}<br>P(1  \\vert  x ; \\theta) &amp;= \\frac{e^{z_1}}{e^{z_1}+e^{z_2}} \\\\<br>&amp;= \\frac{e^{z_1-z_2}}{e^{z_1-z_2}+e^{z_2-z_2}} \\\\<br>&amp;= \\frac{e^{z}}{e^{z}+e^{0}}. \\\\<br>\\end{aligned}<br>$$sigmoidsoftmax</p>\n<h2 id=\"backpropagation\"><a href=\"#backpropagation\" class=\"headerlink\" title=\"backpropagation\"></a>backpropagation</h2><p>traini.e., loss functiongradient<em>backpropagation</em>gradient</p>\n<div style=\"width:600px; margin-left:auto; margin-right:auto;\" ><br>  <img src=\"/2018/03/31/summary-derivative/bp1.png\" alt=\"bp1.png\" title=\"\"><br></div>\n\n<p>$C$$w_1$gradient</p>\n<p>$$<br>\\frac{\\partial C}{\\partial w_1} = \\frac{\\partial C}{\\partial z}\\frac{\\partial z}{\\partial w_1}.<br>$$$z = x_1 w_1 + x_2 w_2 +b$</p>\n<p>$$<br>\\frac{\\partial z}{\\partial w_1} = x_1,<br>$$$x_1$</p>\n<hr>\n<p></p>\n<p>$$<br>\\frac{\\partial C}{\\partial z} = \\frac{\\partial C}{\\partial a}\\frac{\\partial a}{\\partial z}.<br>$$$a=\\sigma(z)$$\\sigma$e.g., sigmoid function</p>\n<p>$$<br>\\frac{\\partial a}{\\partial z} = \\sigma^\\prime(z)<br>$$$z$</p>\n<hr>\n<div style=\"width:600px; margin-left:auto; margin-right:auto;\" ><br>  <img src=\"/2018/03/31/summary-derivative/bp2.png\" alt=\"bp2.png\" title=\"\"><br></div><br><br>$$<br>\\frac{\\partial C}{\\partial a} = \\frac{\\partial C}{\\partial z^\\prime}\\frac{\\partial z^\\prime}{\\partial a} + \\frac{\\partial C}{\\partial z^{\\prime\\prime}}\\frac{\\partial z^{\\prime\\prime}}{\\partial a}.<br>$$$z^\\prime = aw_3 + \\dots$$$<br>\\begin{aligned}<br>\\frac{\\partial z^\\prime}{\\partial a} &amp;= w_3 \\\\<br>\\frac{\\partial z^{\\prime\\prime}}{\\partial a} &amp;= w_4.<br>\\end{aligned}<br>$$$w_3$$w_4$$\\frac{\\partial C}{\\partial a}$$\\frac{\\partial C}{\\partial z^\\prime}$$\\frac{\\partial C}{\\partial z^{\\prime\\prime}}$<strong></strong>$\\frac{\\partial C}{\\partial z^\\prime}$$\\frac{\\partial C}{\\partial z^{\\prime\\prime}}$graidentgradientsoftmaxgradientgradient<br><br>$\\frac{\\partial C}{\\partial z}$<strong></strong><br><br><div style=\"width:300px; margin-left:auto; margin-right:auto;\" ><br>  <img src=\"/2018/03/31/summary-derivative/bp3.png\" alt=\"bp3.png\" title=\"\"><br></div>\n\n<hr>\n<p>$x_1$$z$$\\frac{\\partial z}{\\partial w_1}$$\\frac{\\partial a}{\\partial z}$$\\frac{\\partial C}{\\partial z^\\prime}$$\\frac{\\partial C}{\\partial z^{\\prime\\prime}}$$\\frac{\\partial C}{\\partial a}$$\\frac{\\partial C}{\\partial w_1}$<em>backpropagation</em><em>forward pass</em><em>backward pass</em></p>\n<h2 id=\"derivative-of-CNN\"><a href=\"#derivative-of-CNN\" class=\"headerlink\" title=\"derivative of CNN\"></a>derivative of CNN</h2><p></p>\n<ul>\n<li>$w$$0$</li>\n<li>$w$</li>\n</ul>\n<p>$w$$0$</p>\n<div style=\"width:600px; margin-left:auto; margin-right:auto;\" ><br>  <img src=\"/2018/03/31/summary-derivative/cnn1.png\" alt=\"cnn1.png\" title=\"\"><br></div>\n\n<p>$w$</p>\n<div style=\"width:600px; margin-left:auto; margin-right:auto;\" ><br>  <img src=\"/2018/03/31/summary-derivative/cnn2.png\" alt=\"cnn2.png\" title=\"\"><br></div>\n\n<p><strong>loss function$C(z_1, z_2, \\dots)$</strong>$w$gradient</p>\n<p>$$<br>\\frac{\\partial C}{\\partial w} = \\sum_i \\frac{\\partial C}{\\partial z_i}\\frac{\\partial z_i}{\\partial w}.<br>$$$\\frac{\\partial C}{\\partial z_i}\\frac{\\partial z_i}{\\partial w}$$w$backpropagation</p>\n<h2 id=\"derivative-of-RNN\"><a href=\"#derivative-of-RNN\" class=\"headerlink\" title=\"derivative of RNN\"></a>derivative of RNN</h2><p>RNNgradient</p>\n<div style=\"width:600px; margin-left:auto; margin-right:auto;\" ><br>  <img src=\"/2018/03/31/summary-derivative/rnn.png\" alt=\"rnn.png\" title=\"\"><br></div>\n\n<p><strong>loss function$L(s_0, s_1, \\dots)$</strong>$w$gradient</p>\n<p>$$<br>\\frac{\\partial L}{\\partial w} = \\sum_i\\frac{\\partial L}{\\partial s_i}\\frac{\\partial s_i}{\\partial w}.<br>$$RNNgradient<em>Backpropagation Through Time(BPTT)</em></p>\n<h2 id=\"derivative-of-max-pooling\"><a href=\"#derivative-of-max-pooling\" class=\"headerlink\" title=\"derivative of max pooling\"></a>derivative of max pooling</h2><p>$max(x, y, \\dots)$<strong></strong>e.g., $y$$y$$1$$0$</p>\n<p>train<em>forward pass</em><em>backward pass</em>max poolinggradient</p>\n<h2 id=\"references\"><a href=\"#references\" class=\"headerlink\" title=\"references\"></a>references</h2><ul>\n<li><a href=\"http://speech.ee.ntu.edu.tw/~tlkagk/courses_ML17_2.html\">Hung-yi Lee Machine Learning</a></li>\n<li><a href=\"http://www.wildml.com/2015/10/recurrent-neural-networks-tutorial-part-3-backpropagation-through-time-and-vanishing-gradients/\">RNN Tutorial</a></li>\n</ul>\n"},{"title":"Guided Policy Search","date":"2018-05-17T10:49:29.000Z","description":["Model-Based"],"_content":"\n# Overivew\n\n*Guided Policy Search(GPS)*Model-Based\n\n1. Motivation*GPS*****\n2. Problem formulation*GPS*****\n3. Framework*GPS*****\n4. Deterministic policy casedeterministic policy case*GPS*****\n5. Stochastic policy casedeterministic policy casestochastic policy case*****GPS*\n\n---\n\n# Motivation\n\n*GPS**GPS*\n\n- Model-Free*GPS*i.e., model/dynamicsq value**sample efficiency**\n- Model-BasedtestModel-Basedonline optimizationi.e., action*GPS*parametric policye.g., **test**online optimizationforward pass\n- Imitation LearningILteacherstudenti.e., supervised learningstudent*GPS***teacherstudentstudentteacher**teacherstudenttrain\n\n---\n\n# Problem Formulation\n\n\n\n- setting\n\t- **fixed time length** taske.g, 20s20Hz$T$400\n- assumption\n\t- deterministic dynamics$x_t = f(x_{t-1}, u_{t-1})$\n- input\n\t- environment\n\t- immediate cost(reward) function$c(x_t, u_t)$\n- output\n\t- parametric policy\n\t\t- deterministic case$u_t = \\pi_\\theta(x_t)$\n\t\t- stochastic case$\\pi_\\theta(u_t \\vert x_t) \\sim \\mathcal{N}(\\mu_t, \\Sigma_t)$\n\n---\n\n# Framework\n\n*GPS*\n\n1. collect datacontrollerenvironment\n<div style=\"width:300px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img 1.png  %}\n</div>\n2. fit dynamicsdynamics\n<div style=\"width:300px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img 2.png  %}\n</div>\n3. optimizationcontrollerpolicyparametric policy\n<div style=\"width:400px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img 3.png  %}\n</div>\n4. next iteration\n<div style=\"width:500px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img 4.png  %}\n</div>\n\n---\n\n# Deterministic policy case\n\nDeterministic policy case*GPS*\n\n## Collect data\n\ncontrollerenvironment$\\mathcal{D} = \\{ \\tau_i \\}$$\\tau_i = \\{ x_{1i}, u_{1i}, \\dots , x_{1T}, u_{1T} \\}$\n\n## Fit dynamics\n\ntime-varying linear model$x_{t+1} = f(x_t, u_t) = A_tx_t + B_tu_t + c_t$model**$t$inputlinear model**\n\n$t$$\\tau_i$$\\{ (x_{t1}, u_{t1}, x_{t+1,1}), \\dots , (x_{ti}, u_{ti}, x_{t+1,i}) \\}$linear regression\n\n## Optimization\n\n### Controller\n\n- big picture\n\n<div style=\"width:250px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img 3_1.png  %}\n</div>\n\n- optimization problem\n\t- dynamicscost\n$$\n\\begin{aligned}\n\\mathop{\\text{min }}_{x_1, u_1, \\dots, x_T, u_T} &\\sum_{t=1}^T c(x_t, u_t) \\\\\n\\text{s.t. } &x_t = f(x_{t-1}, u_{t-1}) \\quad t=1, \\dots, T.\n\\end{aligned}\n$$\n- solution\n\t- $f(x_t, u_t) = F_t \\begin{bmatrix} x_t \\\\\\\\ u_t \\end{bmatrix} + f_t$ $c(x_t, u_t) = \\frac{1}{2} \\begin{bmatrix} x_t \\\\\\\\ u_t \\end{bmatrix}^T C_t \\begin{bmatrix} x_t \\\\\\\\ u_t \\end{bmatrix} + \\begin{bmatrix} x_t \\\\\\\\ u_t \\end{bmatrix}^T c_t$*Linear Quadratic Regulator(LQR)*\n\t- *LQR*\n\t\t- input\n\t\t\t- linear model$F_t, f_t$\n\t\t\t- quadratic cost$C_t, c_t$\n\t\t- output$K_t, k_t$\n\t\t- optimal control$u_t=K_tx_t+k_t$$x_{t+1}=f(x_t, u_t)$\n<div style=\"width:500px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img lqr.png  %}\n</div>\n\t- fit dynamicslinear modelcost functionquadratic*LQR*\n\t- cost functionquadratic*iterative LQR(iLQR)**iLQR*nonlinear dynamicsnonquadratic costdynamicscostlinearquadratic*LQR*\n\n### Policy\n\n- big picture\n\n<div style=\"width:400px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img 3.png  %}\n</div>\n\n- optimization problem\n\t- *GPS*policy$\\theta$$u_t = \\pi_\\theta(x_t)$policyoptimal control\n\t$$\n\t\\begin{aligned}\n\t\\mathop{\\text{min }}_{x_1, u_1, \\dots, x_T, u_T, \\theta} &\\sum_{t=1}^T c(x_t, u_t) \\\\\n\t\\text{s.t. } &u_t = \\pi_\\theta(x_t) \\quad t=1, \\dots, T\\\\\n\t&x_t = f(x_{t-1}, u_{t-1}) \\quad t=1, \\dots, T.\n\t\\end{aligned}\n\t$$\n- solution\n\t- *Dual Gradient Descent(DGD)**DGD*\n\t$$\n\t\\begin{aligned}\n\t\\mathop{\\text{min }}_x &f(x) \\\\\n\t\\text{s.t. } & C(x)=0.\n\t\\end{aligned}\n\t$$\n\t\t1. Lagrangian$\\mathcal{L}(x, \\lambda) = f(x) + \\lambda C(x)$\n\t\t2. Lagrangian$x$$x^\\* = \\mathop{\\text{argmin }}_x \\mathcal{L}(x, \\lambda)$\n\t\t3. $x^\\*$$\\mathcal{L}(x, \\lambda)$$g(\\lambda) = \\mathcal{L}(x^\\*, \\lambda)$\n\t\t4. $\\lambda$$\\lambda$gradient ascent$\\lambda = \\lambda + \\alpha \\frac{\\partial g}{\\partial \\lambda}$\n\t\t5. $\\lambda$$x^\\*$\n\t- **dynamics******dynamicsi.e., policycostdynamicspolicyi.e., cost\n\t$$\n\t\\begin{aligned}\n\t\\mathop{\\text{min }}_{x_1, u_1, \\dots, x_T, u_T, \\theta} &\\sum_{t=1}^T c(x_t, u_t) \\\\\n\t\\text{s.t. } &u_t = \\pi_\\theta(x_t) \\quad t=1, \\dots, T\\\\\n\t\\\\\n\t\\text{s.t. } x_t = f&(x_{t-1}, u_{t-1}) \\quad t=1, \\dots, T.\n\t\\end{aligned}\n\t$$\n\t- ***DGD***i.e., *DGD*\n\t\t1. policyLagrangian\n\t\t$$\n\t\t\\begin{aligned}\n\t\t\\mathcal{L}(\\tau, \\theta, \\lambda) \n\t\t&= \\mathcal{L}(x_1, u_1, \\dots, x_T, u_T, \\theta, \\lambda_1, \\dots, \\lambda_T) \\\\\n\t\t&=  \\sum_{t=1}^T c(x_t, u_t) + \\sum_{t=1}^T\\lambda_t [u_t - \\pi_\\theta(x_t)] \\\\\n\t\t&= \\sum_{t=1}^T \\{ c(x_t, u_t) + \\lambda_t [u_t - \\pi_\\theta(x_t)] \\}.\n\t\t\\end{aligned}\n\t\t$$\n\t\t2. $\\begin{bmatrix}\\tau \\\\\\\\ \\theta\\end{bmatrix}$*DGD*$x$$\\begin{bmatrix}\\tau \\\\\\\\ \\theta\\end{bmatrix}^\\*$*DGD*$x^\\*$**$\\tau$$\\theta$**$\\tau$$\\theta$$\\tau^\\*$$\\theta^\\*$$\\begin{bmatrix}\\tau^\\* \\\\\\\\ \\theta^\\*\\end{bmatrix}$$\\begin{bmatrix}\\tau \\\\\\\\ \\theta\\end{bmatrix}^\\*$\n\t\t3. $\\tau^\\*$\n\t\t$$\n\t\t\\begin{aligned}\n\t\t\\mathop{\\text{min }}_\\tau &\\sum_{t=1}^T \\{ c(x_t, u_t) + \\lambda_t [u_t - \\pi_\\theta(x_t)] \\} \\\\\n\t\t\\text{s.t. } &x_t = f(x_{t-1}, u_{t-1}) \\quad t=1, \\dots, T.\n\t\t\\end{aligned}\n\t\t$$$\\tilde{c}(x_t, u_t)=c(x_t, u_t) + \\lambda_t [u_t - \\pi_\\theta(x_t)]$\n\t\t$$\n\t\t\\begin{aligned}\n\t\t\\mathop{\\text{min }}_\\tau &\\sum_{t=1}^T \\tilde{c}(x_t, u_t)\\\\\n\t\t\\text{s.t. } &x_t = f(x_{t-1}, u_{t-1}) \\quad t=1, \\dots, T.\n\t\t\\end{aligned}\n\t\t$$***iLQR***$\\tau^\\*$\n\t\t4. $\\theta^\\*$\n\t\t$$\n\t\t\\begin{aligned}\n\t\t\\mathop{\\text{min }}_\\theta &\\sum_{t=1}^T \\{ c(x_t, u_t) + \\lambda_t [u_t - \\pi_\\theta(x_t)] \\} \\\\\n\t\t\\text{s.t. } &x_t = f(x_{t-1}, u_{t-1}) \\quad t=1, \\dots, T.\n\t\t\\end{aligned}\n\t\t$$$\\theta$\n\t\t$$\n\t\t\\begin{aligned}\n\t\t\\mathop{\\text{min }}_\\theta &\\sum_{t=1}^T \\lambda_t [u_t - \\pi_\\theta(x_t)].\n\t\t\\end{aligned}\n\t\t$$*SGD*$\\theta^\\*$\n\t\t5. $\\tau^\\*$$\\theta^\\*$Lagrangian$g(\\lambda) = \\mathcal{L}(\\tau^\\*, \\theta^\\*, \\lambda)$\n\t\t6. $\\lambda$gradient ascent$\\theta^\\*$$\\lambda$\n\n## Next iteration\n\ncollect datacontrollerenvironment\n\n## Summary\n\ndeterministic policy case*GPS*\n\n- *GPS*guided$u_t = \\pi_\\theta(x_t)$teachercontrollerpolicy\n- collect datacontrollerpolicycontrollerpolicy$(x_t, u_t)$controller$x_t$\n- train policy$\\tau_i$$\\theta^\\*$$\\tau^\\*$LagrangianLagrangian$\\tau$$\\tau^\\*$\n\n---\n\n# Stochastic policy case\n\ndeterministic controller**robustdynamics**stochasticcontrollerstochastic controllersupervised learningstochastic policy\n\nstochastic policy casedeterministic policy case**optimization**stochastic policy caseoptimization\n\n<div style=\"width:400px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img 3.png  %}\n</div>\n\n## Using stochastic controller\n\nstochastic controller\n\n- policycontroller$p(u_t \\vert x_t) \\sim \\mathcal{N}(\\mu_t, \\Sigma_t)$\n$$\n\\begin{aligned}\n\\mathop{\\text{min }}_{\\tau, p} &\\mathbb{E}_\\tau[\\sum_{t=1}^T c(x_t, u_t)] \\\\\n\\text{s.t. } &x_t = f(x_{t-1}, u_{t-1}) \\quad t=1, \\dots, T,\n\\end{aligned}\n$$$p = \\mu_1, \\Sigma_1, \\dots, \\mu_T, \\Sigma_T$work**determinisitc controller**\n- controllerlinear-gaussian\n$$\np(u_t \\vert x_t) = \\mathcal{N}(K_t(x_t - \\hat{x}_t) + k_t + \\hat{u}_t, Q^{-1}_{u_t,u_t}),\n$$gaussian*iLQR**iLQR**iLQR*\n- controller\n$$\n\\begin{aligned}\n\\mathop{\\text{min }}_{\\tau, p} &\\sum_{t=1}^T\\mathbb{E}_{p(x_t, u_t)}[ c(x_t, u_t) - \\mathcal{H}(p(u_t \\vert x_t))] \\\\\n\\text{s.t. } &x_t = f(x_{t-1}, u_{t-1}) \\quad t=1, \\dots, T.\n\\end{aligned}\n$$\n- ****\n\n## Constrain controller in trust region\n\n- motivation\n\t- *GPS*fitdynamicslocal dynamics**controller**\n\t- controllerlocal dynamics\n\t- **controllercontroller**\n\t- contoller//\n- solution\n\t- controllercontroller\n\t$$\n\tD_{KL}(p(\\tau) \\Vert \\bar{p}(\\tau) ) \\leq \\epsilon,\n\t$$$p(\\tau)$$\\tau$controller$\\bar{p}(\\tau)$$\\tau$controller$D_{KL}$KL-divergenceKL-divergence\n\t\t- **controllercontroller**$p(\\tau) = p(x_1)\\prod_{t=1}^{T-1} p(u_t \\vert x_t)f(x_{t+1} \\vert x_t, u_t)$controller$p(x_1)$$f(x_{t+1} \\vert x_t, u_t)$$p(u_t \\vert x_t)$$p(\\tau)$$\\bar{p}(\\tau)$controller$p(\\tau)$$\\bar{p}(\\tau)$controller\n\t- new optimization problem\n\t$$\n\t\\begin{aligned}\n\t\\mathop{\\text{min }}_{\\tau, p} &\\mathbb{E}_\\tau[\\sum_{t=1}^T c(x_t, u_t)] \\\\\n\t\\text{s.t. } &D_{KL}(p(\\tau) \\Vert \\bar{p}(\\tau) ) \\leq \\epsilon \\\\\n\t&x_t = f(x_{t-1}, u_{t-1}) \\quad t=1, \\dots, T.\n\t\\end{aligned}\n\t$$\n\t- *DGD**DGD*$\\lambda \\geq 0$$g(\\lambda)$\n\t\t1. $D_{KL}$Lagrangian\n\t\t$$\n\t\t\\begin{aligned}\n\t\t\\mathcal{L}(\\tau, p, \\lambda) &= \\mathbb{E}_\\tau[\\sum_{t=1}^T c(x_t, u_t)] + \\lambda (D_{KL}(p(\\tau) \\Vert \\bar{p}(\\tau) ) - \\epsilon) \\\\\n\t\t&// D_{KL}(p(\\tau) \\Vert \\bar{p}(\\tau) ) = \\sum_{t=1}^T \\mathbb{E}_{p(x_t, u_t)} [- \\log \\bar{p}(u_t \\vert x_t) - \\mathcal{H}(p(u_t \\vert x_t))]  \\\\\n\t\t&= \\sum_{t=1}^T \\mathbb{E}_{p(x_t, u_t)}[c(x_t, u_t) - \\lambda \\log \\bar{p}(u_t \\vert x_t) - \\lambda \\mathcal{H}(p(u_t \\vert x_t))] - \\lambda \\epsilon \\\\\n\t\t&//\\lambda \\\\\n\t\t&= \\lambda \\sum_{t=1}^T \\mathbb{E}_{p(x_t, u_t)}[\\frac{1}{\\lambda} c(x_t, u_t) - \\log \\bar{p}(u_t \\vert x_t) - \\mathcal{H}(p(u_t \\vert x_t))] - \\epsilon\n\t\t\\end{aligned}\n\t\t$$\n\t\t2. $\\begin{bmatrix} \\tau \\\\\\\\ p \\end{bmatrix}^\\*$\n\t\t$$\n\t\t\\begin{aligned}\n\t\t\\mathop{\\text{min }}_{\\tau, p} &\\sum_{t=1}^T \\mathbb{E}_{p(x_t, u_t)}[\\frac{1}{\\lambda} c(x_t, u_t) - \\log \\bar{p}(u_t \\vert x_t) - \\mathcal{H}(p(u_t \\vert x_t))] \\\\\n\t\t\\text{s.t. } &x_t = f(x_{t-1}, u_{t-1}) \\quad t=1, \\dots, T.\n\t\t\\end{aligned}\n\t\t$$$\\tilde{c}(x_t, u_t) = \\frac{1}{\\lambda} c(x_t, u_t) - \\log \\bar{p}(u_t \\vert x_t)$\n\t\t$$\n\t\t\\begin{aligned}\n\t\t\\mathop{\\text{min }}_{\\tau, p} &\\sum_{t=1}^T \\mathbb{E}_{p(x_t, u_t)}[\\tilde{c}(x_t, u_t) - \\mathcal{H}(p(u_t \\vert x_t))] \\\\\n\t\t\\text{s.t. } &x_t = f(x_{t-1}, u_{t-1}) \\quad t=1, \\dots, T.\n\t\t\\end{aligned}\n\t\t$$****Using stochastic controller*iLQR*$\\begin{bmatrix} \\tau \\\\\\\\ p \\end{bmatrix}^\\*$\n\t\t3. $\\lambda$gradient ascent\n\n## Introduce stochastic policy\n\n- statement\n\t- ****\n- motivation\n\t- parametric policydeterministic policy casepolicy\n- solution\n\t- optimization problem\n\t$$\n\t\\begin{aligned}\n\t\\mathop{\\text{min }}_{\\tau, p} &\\mathbb{E}_\\tau[\\sum_{t=1}^T c(x_t, u_t)] \\\\\n\t\\text{s.t. } &p(u_t \\vert x_t) = \\pi_\\theta(u_t \\vert x_t) \\quad t=1, \\dots, T \\\\\n\t&D_{KL}(p(\\tau) \\Vert \\bar{p}(\\tau) ) \\leq \\epsilon \\\\\n\t&x_t = f(x_{t-1}, u_{t-1}) \\quad t=1, \\dots, T.\n\t\\end{aligned}\n\t$$\n\t- *DGD*\n\t\t1. policy$D_{KL}$Lagrangian\n\t\t$$\n\t\t\\begin{aligned}\n\t\t\\mathcal{L}(\\tau, p, \\theta, \\lambda, \\eta) &= \\mathbb{E}_\\tau[\\sum_{t=1}^T c(x_t, u_t)] + \\sum_{t=1}^T \\lambda_t [p(u_t \\vert x_t) - \\pi_\\theta(u_t \\vert x_t)] + \\eta (D_{KL}(p(\\tau) \\Vert \\bar{p}(\\tau) ) - \\epsilon) \\\\\n\t\t&// \\sum_{t=1}^T \\lambda_t [p(u_t \\vert x_t) - \\pi_\\theta(u_t \\vert x_t)] \\overset{?}{\\approx} \\sum_{t=1}^T \\mathbb{E}_{p(x_t, u_t)}[u_t^T\\lambda_t + \\rho_t D_{KL}(p(u_t \\vert x_t) \\Vert \\pi_\\theta(u_t \\vert x_t))]\\\\\n\t\t&\\approx \\sum_{t=1}^T \\mathbb{E}_{p(x_t, u_t)}[c(x_t, u_t) + u_t^T\\lambda_t + \\rho_t D_{KL}(p(u_t \\vert x_t) \\Vert \\pi_\\theta(u_t \\vert x_t))] + \\eta (D_{KL}(p(\\tau) \\Vert \\bar{p}(\\tau) ) - \\epsilon) \\\\\n\t\t&// \\sum_{t=1}^T \\mathbb{E}_{p(x_t, u_t)}[D_{KL}(p(u_t \\vert x_t) \\Vert \\pi_\\theta(u_t \\vert x_t))] = \\sum_{t=1}^T \\mathbb{E}_{p(x_t, u_t)}[- \\log \\pi_\\theta(u_t \\vert x_t) - \\mathcal{H}(p(u_t \\vert x_t))] \\\\\n\t\t&// D_{KL}(p(\\tau) \\Vert \\bar{p}(\\tau) ) = \\sum_{t=1}^T \\mathbb{E}_{p(x_t, u_t)} [- \\log \\bar{p}(u_t \\vert x_t) - \\mathcal{H}(p(u_t \\vert x_t))]  \\\\\n\t\t&= \\sum_{t=1}^T \\mathbb{E}_{p(x_t, u_t)}[c(x_t, u_t) + u_t^T\\lambda_t - \\rho_t \\log\\pi_\\theta(u_t \\vert x_t) - \\eta \\log \\bar{p}(u_t \\vert x_t) - ( \\rho_t + \\eta) \\mathcal{H}(p(u_t \\vert x_t))] - \\eta \\epsilon \n\t\t\\end{aligned}\n\t\t$$\n\t\t2. $\\begin{bmatrix} \\tau \\\\\\\\ p \\end{bmatrix}^\\*$\n\t\t$$\n\t\t\\begin{aligned}\n\t\t\\mathop{\\text{min }}_{\\tau, p} &\\sum_{t=1}^T \\mathbb{E}_{p(x_t, u_t)}[c(x_t, u_t) + u_t^T\\lambda_t - \\rho_t \\log\\pi_\\theta(u_t \\vert x_t) - \\eta \\log \\bar{p}(u_t \\vert x_t) - ( \\rho_t + \\eta) \\mathcal{H}(p(u_t \\vert x_t))] \\\\\n\t\t\\text{s.t. } &x_t = f(x_{t-1}, u_{t-1}) \\quad t=1, \\dots, T.\n\t\t\\end{aligned}\n\t\t$$$\\tilde{c}(x_t, u_t) = c(x_t, u_t) + u_t^T\\lambda_t - \\rho_t \\log\\pi_\\theta(u_t \\vert x_t) - \\eta \\log \\bar{p}(u_t \\vert x_t)$$\\nu_t = \\rho_t + \\eta$\n\t\t$$\n\t\t\\begin{aligned}\n\t\t\\mathop{\\text{min }}_{\\tau, p} &\\sum_{t=1}^T \\mathbb{E}_{p(x_t, u_t)}[\\tilde{c}(x_t, u_t) - \\nu_t \\mathcal{H}(p(u_t \\vert x_t))] \\\\\n\t\t\\text{s.t. } &x_t = f(x_{t-1}, u_{t-1}) \\quad t=1, \\dots, T.\n\t\t\\end{aligned}\n\t\t$$****Using stochastic controllerConstrain controller in trust region$\\begin{bmatrix} \\tau \\\\\\\\ p \\end{bmatrix}^\\*$\n\t\t2. $\\theta^\\*$deterministic policy caseLagrangian$\\theta^\\*$LagrangianLagrangian\n\t\t$$\n\t\t\\begin{aligned}\n\t\t\\mathcal{L}(\\tau, p, \\theta, \\lambda, \\eta) &= \\mathbb{E}_\\tau[\\sum_{t=1}^T c(x_t, u_t)] + \\sum_{t=1}^T \\lambda_t [p(u_t \\vert x_t) - \\pi_\\theta(u_t \\vert x_t)] + \\eta (D_{KL}(p(\\tau) \\Vert \\bar{p}(\\tau) ) - \\epsilon) \\\\\n\t\t&// \\sum_{t=1}^T \\lambda_t [p(u_t \\vert x_t) - \\pi_\\theta(u_t \\vert x_t)] \\overset{?}{=} \\sum_{t=1}^T \\mathbb{E}_{p(x_t)}[\\mathbb{E}_{\\pi_\\theta(u_t \\vert x_t)}[u_t]^T\\lambda_t + \\rho_t D_{KL}(p(u_t \\vert x_t) \\Vert \\pi_\\theta(u_t \\vert x_t))]\\\\\n\t\t&= \\mathbb{E}_\\tau[\\sum_{t=1}^T c(x_t, u_t)] + \\sum_{t=1}^T \\mathbb{E}_{p(x_t)}[\\mathbb{E}_{\\pi_\\theta(u_t \\vert x_t)}[u_t]^T\\lambda_t + \\rho_t D_{KL}(p(u_t \\vert x_t) \\Vert \\pi_\\theta(u_t \\vert x_t))] \\\\\n\t\t&+ \\eta (D_{KL}(p(\\tau) \\Vert \\bar{p}(\\tau) ) - \\epsilon) \\\\\n\t\t\\end{aligned}.\n\t\t$$$\\theta$\n\t\t$$\n\t\t\\mathop{\\text{min }}_{\\theta}\\sum_{t=1}^T \\mathbb{E}_{p(x_t)}[\\mathbb{E}_{\\pi_\\theta(u_t \\vert x_t)}[u_t]^T\\lambda_t + \\rho_t D_{KL}(p(u_t \\vert x_t) \\Vert \\pi_\\theta(u_t \\vert x_t))].\n\t\t$$*SGD*$\\theta^\\*$\n\t\t3. $\\begin{bmatrix} \\lambda \\\\\\\\ \\eta \\end{bmatrix}$gradient ascent\n\n---\n\n# Conclusion\n\n*GPS*****\n\n---\n\n# References\n\n- [CS294 Fall 2017 lecture 8-10](http://rll.berkeley.edu/deeprlcourse/)\n- [CS287 Guest Lecture Sergey Levine Slide](https://people.eecs.berkeley.edu/~pabbeel/cs287-fa15/slides/lecture20-guided-policy-search.pdf)\n- [Sergey Levine UCB Talk](https://www.youtube.com/watch?v=CW1s6psByxk)\n- [Sergey Levine UW Talk](https://www.youtube.com/watch?v=EtMyH_--vnU&feature=youtu.be)\n- [Learning neural network policies with guided policy search under unknown dynamics](https://people.eecs.berkeley.edu/~svlevine/papers/mfcgps.pdf)\n- [End-to-end training of deep visuomotor policies](http://www.jmlr.org/papers/volume17/15-522/15-522.pdf)","source":"_posts/summary-gps.md","raw":"---\ntitle: Guided Policy Search\ndate: 2018-05-17 18:49:29\ntags:\n\t- Guided Policy Search\n\t- GPS\ncategories:\n\t- \ndescription:\n\t- Model-Based\n---\n\n# Overivew\n\n*Guided Policy Search(GPS)*Model-Based\n\n1. Motivation*GPS*****\n2. Problem formulation*GPS*****\n3. Framework*GPS*****\n4. Deterministic policy casedeterministic policy case*GPS*****\n5. Stochastic policy casedeterministic policy casestochastic policy case*****GPS*\n\n---\n\n# Motivation\n\n*GPS**GPS*\n\n- Model-Free*GPS*i.e., model/dynamicsq value**sample efficiency**\n- Model-BasedtestModel-Basedonline optimizationi.e., action*GPS*parametric policye.g., **test**online optimizationforward pass\n- Imitation LearningILteacherstudenti.e., supervised learningstudent*GPS***teacherstudentstudentteacher**teacherstudenttrain\n\n---\n\n# Problem Formulation\n\n\n\n- setting\n\t- **fixed time length** taske.g, 20s20Hz$T$400\n- assumption\n\t- deterministic dynamics$x_t = f(x_{t-1}, u_{t-1})$\n- input\n\t- environment\n\t- immediate cost(reward) function$c(x_t, u_t)$\n- output\n\t- parametric policy\n\t\t- deterministic case$u_t = \\pi_\\theta(x_t)$\n\t\t- stochastic case$\\pi_\\theta(u_t \\vert x_t) \\sim \\mathcal{N}(\\mu_t, \\Sigma_t)$\n\n---\n\n# Framework\n\n*GPS*\n\n1. collect datacontrollerenvironment\n<div style=\"width:300px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img 1.png  %}\n</div>\n2. fit dynamicsdynamics\n<div style=\"width:300px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img 2.png  %}\n</div>\n3. optimizationcontrollerpolicyparametric policy\n<div style=\"width:400px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img 3.png  %}\n</div>\n4. next iteration\n<div style=\"width:500px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img 4.png  %}\n</div>\n\n---\n\n# Deterministic policy case\n\nDeterministic policy case*GPS*\n\n## Collect data\n\ncontrollerenvironment$\\mathcal{D} = \\{ \\tau_i \\}$$\\tau_i = \\{ x_{1i}, u_{1i}, \\dots , x_{1T}, u_{1T} \\}$\n\n## Fit dynamics\n\ntime-varying linear model$x_{t+1} = f(x_t, u_t) = A_tx_t + B_tu_t + c_t$model**$t$inputlinear model**\n\n$t$$\\tau_i$$\\{ (x_{t1}, u_{t1}, x_{t+1,1}), \\dots , (x_{ti}, u_{ti}, x_{t+1,i}) \\}$linear regression\n\n## Optimization\n\n### Controller\n\n- big picture\n\n<div style=\"width:250px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img 3_1.png  %}\n</div>\n\n- optimization problem\n\t- dynamicscost\n$$\n\\begin{aligned}\n\\mathop{\\text{min }}_{x_1, u_1, \\dots, x_T, u_T} &\\sum_{t=1}^T c(x_t, u_t) \\\\\n\\text{s.t. } &x_t = f(x_{t-1}, u_{t-1}) \\quad t=1, \\dots, T.\n\\end{aligned}\n$$\n- solution\n\t- $f(x_t, u_t) = F_t \\begin{bmatrix} x_t \\\\\\\\ u_t \\end{bmatrix} + f_t$ $c(x_t, u_t) = \\frac{1}{2} \\begin{bmatrix} x_t \\\\\\\\ u_t \\end{bmatrix}^T C_t \\begin{bmatrix} x_t \\\\\\\\ u_t \\end{bmatrix} + \\begin{bmatrix} x_t \\\\\\\\ u_t \\end{bmatrix}^T c_t$*Linear Quadratic Regulator(LQR)*\n\t- *LQR*\n\t\t- input\n\t\t\t- linear model$F_t, f_t$\n\t\t\t- quadratic cost$C_t, c_t$\n\t\t- output$K_t, k_t$\n\t\t- optimal control$u_t=K_tx_t+k_t$$x_{t+1}=f(x_t, u_t)$\n<div style=\"width:500px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img lqr.png  %}\n</div>\n\t- fit dynamicslinear modelcost functionquadratic*LQR*\n\t- cost functionquadratic*iterative LQR(iLQR)**iLQR*nonlinear dynamicsnonquadratic costdynamicscostlinearquadratic*LQR*\n\n### Policy\n\n- big picture\n\n<div style=\"width:400px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img 3.png  %}\n</div>\n\n- optimization problem\n\t- *GPS*policy$\\theta$$u_t = \\pi_\\theta(x_t)$policyoptimal control\n\t$$\n\t\\begin{aligned}\n\t\\mathop{\\text{min }}_{x_1, u_1, \\dots, x_T, u_T, \\theta} &\\sum_{t=1}^T c(x_t, u_t) \\\\\n\t\\text{s.t. } &u_t = \\pi_\\theta(x_t) \\quad t=1, \\dots, T\\\\\n\t&x_t = f(x_{t-1}, u_{t-1}) \\quad t=1, \\dots, T.\n\t\\end{aligned}\n\t$$\n- solution\n\t- *Dual Gradient Descent(DGD)**DGD*\n\t$$\n\t\\begin{aligned}\n\t\\mathop{\\text{min }}_x &f(x) \\\\\n\t\\text{s.t. } & C(x)=0.\n\t\\end{aligned}\n\t$$\n\t\t1. Lagrangian$\\mathcal{L}(x, \\lambda) = f(x) + \\lambda C(x)$\n\t\t2. Lagrangian$x$$x^\\* = \\mathop{\\text{argmin }}_x \\mathcal{L}(x, \\lambda)$\n\t\t3. $x^\\*$$\\mathcal{L}(x, \\lambda)$$g(\\lambda) = \\mathcal{L}(x^\\*, \\lambda)$\n\t\t4. $\\lambda$$\\lambda$gradient ascent$\\lambda = \\lambda + \\alpha \\frac{\\partial g}{\\partial \\lambda}$\n\t\t5. $\\lambda$$x^\\*$\n\t- **dynamics******dynamicsi.e., policycostdynamicspolicyi.e., cost\n\t$$\n\t\\begin{aligned}\n\t\\mathop{\\text{min }}_{x_1, u_1, \\dots, x_T, u_T, \\theta} &\\sum_{t=1}^T c(x_t, u_t) \\\\\n\t\\text{s.t. } &u_t = \\pi_\\theta(x_t) \\quad t=1, \\dots, T\\\\\n\t\\\\\n\t\\text{s.t. } x_t = f&(x_{t-1}, u_{t-1}) \\quad t=1, \\dots, T.\n\t\\end{aligned}\n\t$$\n\t- ***DGD***i.e., *DGD*\n\t\t1. policyLagrangian\n\t\t$$\n\t\t\\begin{aligned}\n\t\t\\mathcal{L}(\\tau, \\theta, \\lambda) \n\t\t&= \\mathcal{L}(x_1, u_1, \\dots, x_T, u_T, \\theta, \\lambda_1, \\dots, \\lambda_T) \\\\\n\t\t&=  \\sum_{t=1}^T c(x_t, u_t) + \\sum_{t=1}^T\\lambda_t [u_t - \\pi_\\theta(x_t)] \\\\\n\t\t&= \\sum_{t=1}^T \\{ c(x_t, u_t) + \\lambda_t [u_t - \\pi_\\theta(x_t)] \\}.\n\t\t\\end{aligned}\n\t\t$$\n\t\t2. $\\begin{bmatrix}\\tau \\\\\\\\ \\theta\\end{bmatrix}$*DGD*$x$$\\begin{bmatrix}\\tau \\\\\\\\ \\theta\\end{bmatrix}^\\*$*DGD*$x^\\*$**$\\tau$$\\theta$**$\\tau$$\\theta$$\\tau^\\*$$\\theta^\\*$$\\begin{bmatrix}\\tau^\\* \\\\\\\\ \\theta^\\*\\end{bmatrix}$$\\begin{bmatrix}\\tau \\\\\\\\ \\theta\\end{bmatrix}^\\*$\n\t\t3. $\\tau^\\*$\n\t\t$$\n\t\t\\begin{aligned}\n\t\t\\mathop{\\text{min }}_\\tau &\\sum_{t=1}^T \\{ c(x_t, u_t) + \\lambda_t [u_t - \\pi_\\theta(x_t)] \\} \\\\\n\t\t\\text{s.t. } &x_t = f(x_{t-1}, u_{t-1}) \\quad t=1, \\dots, T.\n\t\t\\end{aligned}\n\t\t$$$\\tilde{c}(x_t, u_t)=c(x_t, u_t) + \\lambda_t [u_t - \\pi_\\theta(x_t)]$\n\t\t$$\n\t\t\\begin{aligned}\n\t\t\\mathop{\\text{min }}_\\tau &\\sum_{t=1}^T \\tilde{c}(x_t, u_t)\\\\\n\t\t\\text{s.t. } &x_t = f(x_{t-1}, u_{t-1}) \\quad t=1, \\dots, T.\n\t\t\\end{aligned}\n\t\t$$***iLQR***$\\tau^\\*$\n\t\t4. $\\theta^\\*$\n\t\t$$\n\t\t\\begin{aligned}\n\t\t\\mathop{\\text{min }}_\\theta &\\sum_{t=1}^T \\{ c(x_t, u_t) + \\lambda_t [u_t - \\pi_\\theta(x_t)] \\} \\\\\n\t\t\\text{s.t. } &x_t = f(x_{t-1}, u_{t-1}) \\quad t=1, \\dots, T.\n\t\t\\end{aligned}\n\t\t$$$\\theta$\n\t\t$$\n\t\t\\begin{aligned}\n\t\t\\mathop{\\text{min }}_\\theta &\\sum_{t=1}^T \\lambda_t [u_t - \\pi_\\theta(x_t)].\n\t\t\\end{aligned}\n\t\t$$*SGD*$\\theta^\\*$\n\t\t5. $\\tau^\\*$$\\theta^\\*$Lagrangian$g(\\lambda) = \\mathcal{L}(\\tau^\\*, \\theta^\\*, \\lambda)$\n\t\t6. $\\lambda$gradient ascent$\\theta^\\*$$\\lambda$\n\n## Next iteration\n\ncollect datacontrollerenvironment\n\n## Summary\n\ndeterministic policy case*GPS*\n\n- *GPS*guided$u_t = \\pi_\\theta(x_t)$teachercontrollerpolicy\n- collect datacontrollerpolicycontrollerpolicy$(x_t, u_t)$controller$x_t$\n- train policy$\\tau_i$$\\theta^\\*$$\\tau^\\*$LagrangianLagrangian$\\tau$$\\tau^\\*$\n\n---\n\n# Stochastic policy case\n\ndeterministic controller**robustdynamics**stochasticcontrollerstochastic controllersupervised learningstochastic policy\n\nstochastic policy casedeterministic policy case**optimization**stochastic policy caseoptimization\n\n<div style=\"width:400px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img 3.png  %}\n</div>\n\n## Using stochastic controller\n\nstochastic controller\n\n- policycontroller$p(u_t \\vert x_t) \\sim \\mathcal{N}(\\mu_t, \\Sigma_t)$\n$$\n\\begin{aligned}\n\\mathop{\\text{min }}_{\\tau, p} &\\mathbb{E}_\\tau[\\sum_{t=1}^T c(x_t, u_t)] \\\\\n\\text{s.t. } &x_t = f(x_{t-1}, u_{t-1}) \\quad t=1, \\dots, T,\n\\end{aligned}\n$$$p = \\mu_1, \\Sigma_1, \\dots, \\mu_T, \\Sigma_T$work**determinisitc controller**\n- controllerlinear-gaussian\n$$\np(u_t \\vert x_t) = \\mathcal{N}(K_t(x_t - \\hat{x}_t) + k_t + \\hat{u}_t, Q^{-1}_{u_t,u_t}),\n$$gaussian*iLQR**iLQR**iLQR*\n- controller\n$$\n\\begin{aligned}\n\\mathop{\\text{min }}_{\\tau, p} &\\sum_{t=1}^T\\mathbb{E}_{p(x_t, u_t)}[ c(x_t, u_t) - \\mathcal{H}(p(u_t \\vert x_t))] \\\\\n\\text{s.t. } &x_t = f(x_{t-1}, u_{t-1}) \\quad t=1, \\dots, T.\n\\end{aligned}\n$$\n- ****\n\n## Constrain controller in trust region\n\n- motivation\n\t- *GPS*fitdynamicslocal dynamics**controller**\n\t- controllerlocal dynamics\n\t- **controllercontroller**\n\t- contoller//\n- solution\n\t- controllercontroller\n\t$$\n\tD_{KL}(p(\\tau) \\Vert \\bar{p}(\\tau) ) \\leq \\epsilon,\n\t$$$p(\\tau)$$\\tau$controller$\\bar{p}(\\tau)$$\\tau$controller$D_{KL}$KL-divergenceKL-divergence\n\t\t- **controllercontroller**$p(\\tau) = p(x_1)\\prod_{t=1}^{T-1} p(u_t \\vert x_t)f(x_{t+1} \\vert x_t, u_t)$controller$p(x_1)$$f(x_{t+1} \\vert x_t, u_t)$$p(u_t \\vert x_t)$$p(\\tau)$$\\bar{p}(\\tau)$controller$p(\\tau)$$\\bar{p}(\\tau)$controller\n\t- new optimization problem\n\t$$\n\t\\begin{aligned}\n\t\\mathop{\\text{min }}_{\\tau, p} &\\mathbb{E}_\\tau[\\sum_{t=1}^T c(x_t, u_t)] \\\\\n\t\\text{s.t. } &D_{KL}(p(\\tau) \\Vert \\bar{p}(\\tau) ) \\leq \\epsilon \\\\\n\t&x_t = f(x_{t-1}, u_{t-1}) \\quad t=1, \\dots, T.\n\t\\end{aligned}\n\t$$\n\t- *DGD**DGD*$\\lambda \\geq 0$$g(\\lambda)$\n\t\t1. $D_{KL}$Lagrangian\n\t\t$$\n\t\t\\begin{aligned}\n\t\t\\mathcal{L}(\\tau, p, \\lambda) &= \\mathbb{E}_\\tau[\\sum_{t=1}^T c(x_t, u_t)] + \\lambda (D_{KL}(p(\\tau) \\Vert \\bar{p}(\\tau) ) - \\epsilon) \\\\\n\t\t&// D_{KL}(p(\\tau) \\Vert \\bar{p}(\\tau) ) = \\sum_{t=1}^T \\mathbb{E}_{p(x_t, u_t)} [- \\log \\bar{p}(u_t \\vert x_t) - \\mathcal{H}(p(u_t \\vert x_t))]  \\\\\n\t\t&= \\sum_{t=1}^T \\mathbb{E}_{p(x_t, u_t)}[c(x_t, u_t) - \\lambda \\log \\bar{p}(u_t \\vert x_t) - \\lambda \\mathcal{H}(p(u_t \\vert x_t))] - \\lambda \\epsilon \\\\\n\t\t&//\\lambda \\\\\n\t\t&= \\lambda \\sum_{t=1}^T \\mathbb{E}_{p(x_t, u_t)}[\\frac{1}{\\lambda} c(x_t, u_t) - \\log \\bar{p}(u_t \\vert x_t) - \\mathcal{H}(p(u_t \\vert x_t))] - \\epsilon\n\t\t\\end{aligned}\n\t\t$$\n\t\t2. $\\begin{bmatrix} \\tau \\\\\\\\ p \\end{bmatrix}^\\*$\n\t\t$$\n\t\t\\begin{aligned}\n\t\t\\mathop{\\text{min }}_{\\tau, p} &\\sum_{t=1}^T \\mathbb{E}_{p(x_t, u_t)}[\\frac{1}{\\lambda} c(x_t, u_t) - \\log \\bar{p}(u_t \\vert x_t) - \\mathcal{H}(p(u_t \\vert x_t))] \\\\\n\t\t\\text{s.t. } &x_t = f(x_{t-1}, u_{t-1}) \\quad t=1, \\dots, T.\n\t\t\\end{aligned}\n\t\t$$$\\tilde{c}(x_t, u_t) = \\frac{1}{\\lambda} c(x_t, u_t) - \\log \\bar{p}(u_t \\vert x_t)$\n\t\t$$\n\t\t\\begin{aligned}\n\t\t\\mathop{\\text{min }}_{\\tau, p} &\\sum_{t=1}^T \\mathbb{E}_{p(x_t, u_t)}[\\tilde{c}(x_t, u_t) - \\mathcal{H}(p(u_t \\vert x_t))] \\\\\n\t\t\\text{s.t. } &x_t = f(x_{t-1}, u_{t-1}) \\quad t=1, \\dots, T.\n\t\t\\end{aligned}\n\t\t$$****Using stochastic controller*iLQR*$\\begin{bmatrix} \\tau \\\\\\\\ p \\end{bmatrix}^\\*$\n\t\t3. $\\lambda$gradient ascent\n\n## Introduce stochastic policy\n\n- statement\n\t- ****\n- motivation\n\t- parametric policydeterministic policy casepolicy\n- solution\n\t- optimization problem\n\t$$\n\t\\begin{aligned}\n\t\\mathop{\\text{min }}_{\\tau, p} &\\mathbb{E}_\\tau[\\sum_{t=1}^T c(x_t, u_t)] \\\\\n\t\\text{s.t. } &p(u_t \\vert x_t) = \\pi_\\theta(u_t \\vert x_t) \\quad t=1, \\dots, T \\\\\n\t&D_{KL}(p(\\tau) \\Vert \\bar{p}(\\tau) ) \\leq \\epsilon \\\\\n\t&x_t = f(x_{t-1}, u_{t-1}) \\quad t=1, \\dots, T.\n\t\\end{aligned}\n\t$$\n\t- *DGD*\n\t\t1. policy$D_{KL}$Lagrangian\n\t\t$$\n\t\t\\begin{aligned}\n\t\t\\mathcal{L}(\\tau, p, \\theta, \\lambda, \\eta) &= \\mathbb{E}_\\tau[\\sum_{t=1}^T c(x_t, u_t)] + \\sum_{t=1}^T \\lambda_t [p(u_t \\vert x_t) - \\pi_\\theta(u_t \\vert x_t)] + \\eta (D_{KL}(p(\\tau) \\Vert \\bar{p}(\\tau) ) - \\epsilon) \\\\\n\t\t&// \\sum_{t=1}^T \\lambda_t [p(u_t \\vert x_t) - \\pi_\\theta(u_t \\vert x_t)] \\overset{?}{\\approx} \\sum_{t=1}^T \\mathbb{E}_{p(x_t, u_t)}[u_t^T\\lambda_t + \\rho_t D_{KL}(p(u_t \\vert x_t) \\Vert \\pi_\\theta(u_t \\vert x_t))]\\\\\n\t\t&\\approx \\sum_{t=1}^T \\mathbb{E}_{p(x_t, u_t)}[c(x_t, u_t) + u_t^T\\lambda_t + \\rho_t D_{KL}(p(u_t \\vert x_t) \\Vert \\pi_\\theta(u_t \\vert x_t))] + \\eta (D_{KL}(p(\\tau) \\Vert \\bar{p}(\\tau) ) - \\epsilon) \\\\\n\t\t&// \\sum_{t=1}^T \\mathbb{E}_{p(x_t, u_t)}[D_{KL}(p(u_t \\vert x_t) \\Vert \\pi_\\theta(u_t \\vert x_t))] = \\sum_{t=1}^T \\mathbb{E}_{p(x_t, u_t)}[- \\log \\pi_\\theta(u_t \\vert x_t) - \\mathcal{H}(p(u_t \\vert x_t))] \\\\\n\t\t&// D_{KL}(p(\\tau) \\Vert \\bar{p}(\\tau) ) = \\sum_{t=1}^T \\mathbb{E}_{p(x_t, u_t)} [- \\log \\bar{p}(u_t \\vert x_t) - \\mathcal{H}(p(u_t \\vert x_t))]  \\\\\n\t\t&= \\sum_{t=1}^T \\mathbb{E}_{p(x_t, u_t)}[c(x_t, u_t) + u_t^T\\lambda_t - \\rho_t \\log\\pi_\\theta(u_t \\vert x_t) - \\eta \\log \\bar{p}(u_t \\vert x_t) - ( \\rho_t + \\eta) \\mathcal{H}(p(u_t \\vert x_t))] - \\eta \\epsilon \n\t\t\\end{aligned}\n\t\t$$\n\t\t2. $\\begin{bmatrix} \\tau \\\\\\\\ p \\end{bmatrix}^\\*$\n\t\t$$\n\t\t\\begin{aligned}\n\t\t\\mathop{\\text{min }}_{\\tau, p} &\\sum_{t=1}^T \\mathbb{E}_{p(x_t, u_t)}[c(x_t, u_t) + u_t^T\\lambda_t - \\rho_t \\log\\pi_\\theta(u_t \\vert x_t) - \\eta \\log \\bar{p}(u_t \\vert x_t) - ( \\rho_t + \\eta) \\mathcal{H}(p(u_t \\vert x_t))] \\\\\n\t\t\\text{s.t. } &x_t = f(x_{t-1}, u_{t-1}) \\quad t=1, \\dots, T.\n\t\t\\end{aligned}\n\t\t$$$\\tilde{c}(x_t, u_t) = c(x_t, u_t) + u_t^T\\lambda_t - \\rho_t \\log\\pi_\\theta(u_t \\vert x_t) - \\eta \\log \\bar{p}(u_t \\vert x_t)$$\\nu_t = \\rho_t + \\eta$\n\t\t$$\n\t\t\\begin{aligned}\n\t\t\\mathop{\\text{min }}_{\\tau, p} &\\sum_{t=1}^T \\mathbb{E}_{p(x_t, u_t)}[\\tilde{c}(x_t, u_t) - \\nu_t \\mathcal{H}(p(u_t \\vert x_t))] \\\\\n\t\t\\text{s.t. } &x_t = f(x_{t-1}, u_{t-1}) \\quad t=1, \\dots, T.\n\t\t\\end{aligned}\n\t\t$$****Using stochastic controllerConstrain controller in trust region$\\begin{bmatrix} \\tau \\\\\\\\ p \\end{bmatrix}^\\*$\n\t\t2. $\\theta^\\*$deterministic policy caseLagrangian$\\theta^\\*$LagrangianLagrangian\n\t\t$$\n\t\t\\begin{aligned}\n\t\t\\mathcal{L}(\\tau, p, \\theta, \\lambda, \\eta) &= \\mathbb{E}_\\tau[\\sum_{t=1}^T c(x_t, u_t)] + \\sum_{t=1}^T \\lambda_t [p(u_t \\vert x_t) - \\pi_\\theta(u_t \\vert x_t)] + \\eta (D_{KL}(p(\\tau) \\Vert \\bar{p}(\\tau) ) - \\epsilon) \\\\\n\t\t&// \\sum_{t=1}^T \\lambda_t [p(u_t \\vert x_t) - \\pi_\\theta(u_t \\vert x_t)] \\overset{?}{=} \\sum_{t=1}^T \\mathbb{E}_{p(x_t)}[\\mathbb{E}_{\\pi_\\theta(u_t \\vert x_t)}[u_t]^T\\lambda_t + \\rho_t D_{KL}(p(u_t \\vert x_t) \\Vert \\pi_\\theta(u_t \\vert x_t))]\\\\\n\t\t&= \\mathbb{E}_\\tau[\\sum_{t=1}^T c(x_t, u_t)] + \\sum_{t=1}^T \\mathbb{E}_{p(x_t)}[\\mathbb{E}_{\\pi_\\theta(u_t \\vert x_t)}[u_t]^T\\lambda_t + \\rho_t D_{KL}(p(u_t \\vert x_t) \\Vert \\pi_\\theta(u_t \\vert x_t))] \\\\\n\t\t&+ \\eta (D_{KL}(p(\\tau) \\Vert \\bar{p}(\\tau) ) - \\epsilon) \\\\\n\t\t\\end{aligned}.\n\t\t$$$\\theta$\n\t\t$$\n\t\t\\mathop{\\text{min }}_{\\theta}\\sum_{t=1}^T \\mathbb{E}_{p(x_t)}[\\mathbb{E}_{\\pi_\\theta(u_t \\vert x_t)}[u_t]^T\\lambda_t + \\rho_t D_{KL}(p(u_t \\vert x_t) \\Vert \\pi_\\theta(u_t \\vert x_t))].\n\t\t$$*SGD*$\\theta^\\*$\n\t\t3. $\\begin{bmatrix} \\lambda \\\\\\\\ \\eta \\end{bmatrix}$gradient ascent\n\n---\n\n# Conclusion\n\n*GPS*****\n\n---\n\n# References\n\n- [CS294 Fall 2017 lecture 8-10](http://rll.berkeley.edu/deeprlcourse/)\n- [CS287 Guest Lecture Sergey Levine Slide](https://people.eecs.berkeley.edu/~pabbeel/cs287-fa15/slides/lecture20-guided-policy-search.pdf)\n- [Sergey Levine UCB Talk](https://www.youtube.com/watch?v=CW1s6psByxk)\n- [Sergey Levine UW Talk](https://www.youtube.com/watch?v=EtMyH_--vnU&feature=youtu.be)\n- [Learning neural network policies with guided policy search under unknown dynamics](https://people.eecs.berkeley.edu/~svlevine/papers/mfcgps.pdf)\n- [End-to-end training of deep visuomotor policies](http://www.jmlr.org/papers/volume17/15-522/15-522.pdf)","slug":"summary-gps","published":1,"updated":"2024-08-13T16:03:47.876Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clzvf192j001ueqwo9b0ueoan","content":"<h1 id=\"Overivew\"><a href=\"#Overivew\" class=\"headerlink\" title=\"Overivew\"></a>Overivew</h1><p><em>Guided Policy Search(GPS)</em>Model-Based</p>\n<ol>\n<li>Motivation<em>GPS</em><strong></strong></li>\n<li>Problem formulation<em>GPS</em><strong></strong></li>\n<li>Framework<em>GPS</em><strong></strong></li>\n<li>Deterministic policy casedeterministic policy case<em>GPS</em><strong></strong></li>\n<li>Stochastic policy casedeterministic policy casestochastic policy case<strong></strong><em>GPS</em></li>\n</ol>\n<hr>\n<h1 id=\"Motivation\"><a href=\"#Motivation\" class=\"headerlink\" title=\"Motivation\"></a>Motivation</h1><p><em>GPS</em><em>GPS</em></p>\n<ul>\n<li>Model-Free<em>GPS</em>i.e., model/dynamicsq value<strong>sample efficiency</strong></li>\n<li>Model-BasedtestModel-Basedonline optimizationi.e., action<em>GPS</em>parametric policye.g., <strong>test</strong>online optimizationforward pass</li>\n<li>Imitation LearningILteacherstudenti.e., supervised learningstudent<em>GPS</em><strong>teacherstudentstudentteacher</strong>teacherstudenttrain</li>\n</ul>\n<hr>\n<h1 id=\"Problem-Formulation\"><a href=\"#Problem-Formulation\" class=\"headerlink\" title=\"Problem Formulation\"></a>Problem Formulation</h1><p></p>\n<ul>\n<li>setting<ul>\n<li><strong>fixed time length</strong> taske.g, 20s20Hz$T$400</li>\n</ul>\n</li>\n<li>assumption<ul>\n<li>deterministic dynamics$x_t = f(x_{t-1}, u_{t-1})$</li>\n</ul>\n</li>\n<li>input<ul>\n<li>environment</li>\n<li>immediate cost(reward) function$c(x_t, u_t)$</li>\n</ul>\n</li>\n<li>output<ul>\n<li>parametric policy<ul>\n<li>deterministic case$u_t = \\pi_\\theta(x_t)$</li>\n<li>stochastic case$\\pi_\\theta(u_t \\vert x_t) \\sim \\mathcal{N}(\\mu_t, \\Sigma_t)$</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h1 id=\"Framework\"><a href=\"#Framework\" class=\"headerlink\" title=\"Framework\"></a>Framework</h1><p><em>GPS</em></p>\n<ol>\n<li>collect datacontrollerenvironment<div style=\"width:300px; margin-left:auto; margin-right:auto;\"><br><img src=\"/2018/05/17/summary-gps/1.png\" alt=\"1.png\" title=\"\"><br></div></li>\n<li>fit dynamicsdynamics<div style=\"width:300px; margin-left:auto; margin-right:auto;\"><br><img src=\"/2018/05/17/summary-gps/2.png\" alt=\"2.png\" title=\"\"><br></div></li>\n<li>optimizationcontrollerpolicyparametric policy<div style=\"width:400px; margin-left:auto; margin-right:auto;\"><br><img src=\"/2018/05/17/summary-gps/3.png\" alt=\"3.png\" title=\"\"><br></div></li>\n<li>next iteration<div style=\"width:500px; margin-left:auto; margin-right:auto;\"><br><img src=\"/2018/05/17/summary-gps/4.png\" alt=\"4.png\" title=\"\"><br></div>\n\n</li>\n</ol>\n<hr>\n<h1 id=\"Deterministic-policy-case\"><a href=\"#Deterministic-policy-case\" class=\"headerlink\" title=\"Deterministic policy case\"></a>Deterministic policy case</h1><p>Deterministic policy case<em>GPS</em></p>\n<h2 id=\"Collect-data\"><a href=\"#Collect-data\" class=\"headerlink\" title=\"Collect data\"></a>Collect data</h2><p>controllerenvironment$\\mathcal{D} = { \\tau_i }$$\\tau_i = { x_{1i}, u_{1i}, \\dots , x_{1T}, u_{1T} }$</p>\n<h2 id=\"Fit-dynamics\"><a href=\"#Fit-dynamics\" class=\"headerlink\" title=\"Fit dynamics\"></a>Fit dynamics</h2><p>time-varying linear model$x_{t+1} = f(x_t, u_t) = A_tx_t + B_tu_t + c_t$model<strong>$t$inputlinear model</strong></p>\n<p>$t$$\\tau_i$${ (x_{t1}, u_{t1}, x_{t+1,1}), \\dots , (x_{ti}, u_{ti}, x_{t+1,i}) }$linear regression</p>\n<h2 id=\"Optimization\"><a href=\"#Optimization\" class=\"headerlink\" title=\"Optimization\"></a>Optimization</h2><h3 id=\"Controller\"><a href=\"#Controller\" class=\"headerlink\" title=\"Controller\"></a>Controller</h3><ul>\n<li>big picture</li>\n</ul>\n<div style=\"width:250px; margin-left:auto; margin-right:auto;\"><br>  <img src=\"/2018/05/17/summary-gps/3_1.png\" alt=\"3_1.png\" title=\"\"><br></div>\n\n<ul>\n<li>optimization problem<ul>\n<li>dynamicscost<br>$$<br>\\begin{aligned}<br>\\mathop{\\text{min }}_{x_1, u_1, \\dots, x_T, u_T} &amp;\\sum_{t=1}^T c(x_t, u_t) \\\\<br>\\text{s.t. } &amp;x_t = f(x_{t-1}, u_{t-1}) \\quad t=1, \\dots, T.<br>\\end{aligned}<br>$$</li>\n</ul>\n</li>\n<li>solution<ul>\n<li>$f(x_t, u_t) = F_t \\begin{bmatrix} x_t \\\\\\ u_t \\end{bmatrix} + f_t$ $c(x_t, u_t) = \\frac{1}{2} \\begin{bmatrix} x_t \\\\\\ u_t \\end{bmatrix}^T C_t \\begin{bmatrix} x_t \\\\\\ u_t \\end{bmatrix} + \\begin{bmatrix} x_t \\\\\\ u_t \\end{bmatrix}^T c_t$<em>Linear Quadratic Regulator(LQR)</em></li>\n<li><em>LQR</em><ul>\n<li>input<ul>\n<li>linear model$F_t, f_t$</li>\n<li>quadratic cost$C_t, c_t$</li>\n</ul>\n</li>\n<li>output$K_t, k_t$</li>\n<li>optimal control$u_t=K_tx_t+k_t$$x_{t+1}=f(x_t, u_t)$<div style=\"width:500px; margin-left:auto; margin-right:auto;\"><br><img src=\"/2018/05/17/summary-gps/lqr.png\" alt=\"lqr.png\" title=\"\"><br></div></li>\n</ul>\n</li>\n<li>fit dynamicslinear modelcost functionquadratic<em>LQR</em></li>\n<li>cost functionquadratic<em>iterative LQR(iLQR)</em><em>iLQR</em>nonlinear dynamicsnonquadratic costdynamicscostlinearquadratic<em>LQR</em></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Policy\"><a href=\"#Policy\" class=\"headerlink\" title=\"Policy\"></a>Policy</h3><ul>\n<li>big picture</li>\n</ul>\n<div style=\"width:400px; margin-left:auto; margin-right:auto;\"><br>  <img src=\"/2018/05/17/summary-gps/3.png\" alt=\"3.png\" title=\"\"><br></div>\n\n<ul>\n<li>optimization problem<ul>\n<li><em>GPS</em>policy$\\theta$$u_t = \\pi_\\theta(x_t)$policyoptimal control<br>$$<br>\\begin{aligned}<br>\\mathop{\\text{min }}_{x_1, u_1, \\dots, x_T, u_T, \\theta} &amp;\\sum_{t=1}^T c(x_t, u_t) \\\\<br>\\text{s.t. } &amp;u_t = \\pi_\\theta(x_t) \\quad t=1, \\dots, T\\\\<br>&amp;x_t = f(x_{t-1}, u_{t-1}) \\quad t=1, \\dots, T.<br>\\end{aligned}<br>$$</li>\n</ul>\n</li>\n<li>solution<ul>\n<li><em>Dual Gradient Descent(DGD)</em><em>DGD</em><br>$$<br>\\begin{aligned}<br>\\mathop{\\text{min }}_x &amp;f(x) \\\\<br>\\text{s.t. } &amp; C(x)=0.<br>\\end{aligned}<br>$$<ol>\n<li>Lagrangian$\\mathcal{L}(x, \\lambda) = f(x) + \\lambda C(x)$</li>\n<li>Lagrangian$x$$x^* = \\mathop{\\text{argmin }}_x \\mathcal{L}(x, \\lambda)$</li>\n<li>$x^*$$\\mathcal{L}(x, \\lambda)$$g(\\lambda) = \\mathcal{L}(x^*, \\lambda)$</li>\n<li>$\\lambda$$\\lambda$gradient ascent$\\lambda = \\lambda + \\alpha \\frac{\\partial g}{\\partial \\lambda}$</li>\n<li>$\\lambda$$x^*$</li>\n</ol>\n</li>\n<li><strong>dynamics</strong><strong></strong>dynamicsi.e., policycostdynamicspolicyi.e., cost<br>$$<br>\\begin{aligned}<br>\\mathop{\\text{min }}_{x_1, u_1, \\dots, x_T, u_T, \\theta} &amp;\\sum_{t=1}^T c(x_t, u_t) \\\\<br>\\text{s.t. } &amp;u_t = \\pi_\\theta(x_t) \\quad t=1, \\dots, T\\\\<br>\\\\<br>\\text{s.t. } x_t = f&amp;(x_{t-1}, u_{t-1}) \\quad t=1, \\dots, T.<br>\\end{aligned}<br>$$</li>\n<li><strong><em>DGD</em></strong>i.e., <em>DGD</em><ol>\n<li>policyLagrangian<br>$$<br>\\begin{aligned}<br>\\mathcal{L}(\\tau, \\theta, \\lambda)<br>&amp;= \\mathcal{L}(x_1, u_1, \\dots, x_T, u_T, \\theta, \\lambda_1, \\dots, \\lambda_T) \\\\<br>&amp;=  \\sum_{t=1}^T c(x_t, u_t) + \\sum_{t=1}^T\\lambda_t [u_t - \\pi_\\theta(x_t)] \\\\<br>&amp;= \\sum_{t=1}^T { c(x_t, u_t) + \\lambda_t [u_t - \\pi_\\theta(x_t)] }.<br>\\end{aligned}<br>$$</li>\n<li>$\\begin{bmatrix}\\tau \\\\\\ \\theta\\end{bmatrix}$<em>DGD</em>$x$$\\begin{bmatrix}\\tau \\\\\\ \\theta\\end{bmatrix}^*$<em>DGD</em>$x^*$<strong>$\\tau$$\\theta$</strong>$\\tau$$\\theta$$\\tau^*$$\\theta^*$$\\begin{bmatrix}\\tau^* \\\\\\ \\theta^*\\end{bmatrix}$$\\begin{bmatrix}\\tau \\\\\\ \\theta\\end{bmatrix}^*$</li>\n<li>$\\tau^*$<br>$$<br>\\begin{aligned}<br>\\mathop{\\text{min }}_\\tau &amp;\\sum_{t=1}^T { c(x_t, u_t) + \\lambda_t [u_t - \\pi_\\theta(x_t)] } \\\\<br>\\text{s.t. } &amp;x_t = f(x_{t-1}, u_{t-1}) \\quad t=1, \\dots, T.<br>\\end{aligned}<br>$$$\\tilde{c}(x_t, u_t)=c(x_t, u_t) + \\lambda_t [u_t - \\pi_\\theta(x_t)]$<br>$$<br>\\begin{aligned}<br>\\mathop{\\text{min }}_\\tau &amp;\\sum_{t=1}^T \\tilde{c}(x_t, u_t)\\\\<br>\\text{s.t. } &amp;x_t = f(x_{t-1}, u_{t-1}) \\quad t=1, \\dots, T.<br>\\end{aligned}<br>$$<strong><em>iLQR</em></strong>$\\tau^*$</li>\n<li>$\\theta^*$<br>$$<br>\\begin{aligned}<br>\\mathop{\\text{min }}_\\theta &amp;\\sum_{t=1}^T { c(x_t, u_t) + \\lambda_t [u_t - \\pi_\\theta(x_t)] } \\\\<br>\\text{s.t. } &amp;x_t = f(x_{t-1}, u_{t-1}) \\quad t=1, \\dots, T.<br>\\end{aligned}<br>$$$\\theta$<br>$$<br>\\begin{aligned}<br>\\mathop{\\text{min }}_\\theta &amp;\\sum_{t=1}^T \\lambda_t [u_t - \\pi_\\theta(x_t)].<br>\\end{aligned}<br>$$<em>SGD</em>$\\theta^*$</li>\n<li>$\\tau^*$$\\theta^*$Lagrangian$g(\\lambda) = \\mathcal{L}(\\tau^*, \\theta^*, \\lambda)$</li>\n<li>$\\lambda$gradient ascent$\\theta^*$$\\lambda$</li>\n</ol>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"Next-iteration\"><a href=\"#Next-iteration\" class=\"headerlink\" title=\"Next iteration\"></a>Next iteration</h2><p>collect datacontrollerenvironment</p>\n<h2 id=\"Summary\"><a href=\"#Summary\" class=\"headerlink\" title=\"Summary\"></a>Summary</h2><p>deterministic policy case<em>GPS</em></p>\n<ul>\n<li><em>GPS</em>guided$u_t = \\pi_\\theta(x_t)$teachercontrollerpolicy</li>\n<li>collect datacontrollerpolicycontrollerpolicy$(x_t, u_t)$controller$x_t$</li>\n<li>train policy$\\tau_i$$\\theta^*$$\\tau^*$LagrangianLagrangian$\\tau$$\\tau^*$</li>\n</ul>\n<hr>\n<h1 id=\"Stochastic-policy-case\"><a href=\"#Stochastic-policy-case\" class=\"headerlink\" title=\"Stochastic policy case\"></a>Stochastic policy case</h1><p>deterministic controller<strong>robustdynamics</strong>stochasticcontrollerstochastic controllersupervised learningstochastic policy</p>\n<p>stochastic policy casedeterministic policy case<strong>optimization</strong>stochastic policy caseoptimization</p>\n<div style=\"width:400px; margin-left:auto; margin-right:auto;\"><br>  <img src=\"/2018/05/17/summary-gps/3.png\" alt=\"3.png\" title=\"\"><br></div>\n\n<h2 id=\"Using-stochastic-controller\"><a href=\"#Using-stochastic-controller\" class=\"headerlink\" title=\"Using stochastic controller\"></a>Using stochastic controller</h2><p>stochastic controller</p>\n<ul>\n<li>policycontroller$p(u_t \\vert x_t) \\sim \\mathcal{N}(\\mu_t, \\Sigma_t)$<br>$$<br>\\begin{aligned}<br>\\mathop{\\text{min }}_{\\tau, p} &amp;\\mathbb{E}_\\tau[\\sum_{t=1}^T c(x_t, u_t)] \\\\<br>\\text{s.t. } &amp;x_t = f(x_{t-1}, u_{t-1}) \\quad t=1, \\dots, T,<br>\\end{aligned}<br>$$$p = \\mu_1, \\Sigma_1, \\dots, \\mu_T, \\Sigma_T$work<strong>determinisitc controller</strong></li>\n<li>controllerlinear-gaussian<br>$$<br>p(u_t \\vert x_t) = \\mathcal{N}(K_t(x_t - \\hat{x}_t) + k_t + \\hat{u}_t, Q^{-1}_{u_t,u_t}),<br>$$gaussian<em>iLQR</em><em>iLQR</em><em>iLQR</em></li>\n<li>controller<br>$$<br>\\begin{aligned}<br>\\mathop{\\text{min }}_{\\tau, p} &amp;\\sum_{t=1}^T\\mathbb{E}_{p(x_t, u_t)}[ c(x_t, u_t) - \\mathcal{H}(p(u_t \\vert x_t))] \\\\<br>\\text{s.t. } &amp;x_t = f(x_{t-1}, u_{t-1}) \\quad t=1, \\dots, T.<br>\\end{aligned}<br>$$</li>\n<li><strong></strong></li>\n</ul>\n<h2 id=\"Constrain-controller-in-trust-region\"><a href=\"#Constrain-controller-in-trust-region\" class=\"headerlink\" title=\"Constrain controller in trust region\"></a>Constrain controller in trust region</h2><ul>\n<li>motivation<ul>\n<li><em>GPS</em>fitdynamicslocal dynamics<strong>controller</strong></li>\n<li>controllerlocal dynamics</li>\n<li><strong>controllercontroller</strong></li>\n<li>contoller//</li>\n</ul>\n</li>\n<li>solution<ul>\n<li>controllercontroller<br>$$<br>D_{KL}(p(\\tau) \\Vert \\bar{p}(\\tau) ) \\leq \\epsilon,<br>$$$p(\\tau)$$\\tau$controller$\\bar{p}(\\tau)$$\\tau$controller$D_{KL}$KL-divergenceKL-divergence<ul>\n<li><strong>controllercontroller</strong>$p(\\tau) = p(x_1)\\prod_{t=1}^{T-1} p(u_t \\vert x_t)f(x_{t+1} \\vert x_t, u_t)$controller$p(x_1)$$f(x_{t+1} \\vert x_t, u_t)$$p(u_t \\vert x_t)$$p(\\tau)$$\\bar{p}(\\tau)$controller$p(\\tau)$$\\bar{p}(\\tau)$controller</li>\n</ul>\n</li>\n<li>new optimization problem<br>$$<br>\\begin{aligned}<br>\\mathop{\\text{min }}_{\\tau, p} &amp;\\mathbb{E}_\\tau[\\sum_{t=1}^T c(x_t, u_t)] \\\\<br>\\text{s.t. } &amp;D_{KL}(p(\\tau) \\Vert \\bar{p}(\\tau) ) \\leq \\epsilon \\\\<br>&amp;x_t = f(x_{t-1}, u_{t-1}) \\quad t=1, \\dots, T.<br>\\end{aligned}<br>$$</li>\n<li><em>DGD</em><em>DGD</em>$\\lambda \\geq 0$$g(\\lambda)$<ol>\n<li>$D_{KL}$Lagrangian<br>$$<br>\\begin{aligned}<br>\\mathcal{L}(\\tau, p, \\lambda) &amp;= \\mathbb{E}_\\tau[\\sum_{t=1}^T c(x_t, u_t)] + \\lambda (D_{KL}(p(\\tau) \\Vert \\bar{p}(\\tau) ) - \\epsilon) \\\\<br>&amp;// D_{KL}(p(\\tau) \\Vert \\bar{p}(\\tau) ) = \\sum_{t=1}^T \\mathbb{E}_{p(x_t, u_t)} [- \\log \\bar{p}(u_t \\vert x_t) - \\mathcal{H}(p(u_t \\vert x_t))]  \\\\<br>&amp;= \\sum_{t=1}^T \\mathbb{E}_{p(x_t, u_t)}[c(x_t, u_t) - \\lambda \\log \\bar{p}(u_t \\vert x_t) - \\lambda \\mathcal{H}(p(u_t \\vert x_t))] - \\lambda \\epsilon \\\\<br>&amp;//\\lambda \\\\<br>&amp;= \\lambda \\sum_{t=1}^T \\mathbb{E}_{p(x_t, u_t)}[\\frac{1}{\\lambda} c(x_t, u_t) - \\log \\bar{p}(u_t \\vert x_t) - \\mathcal{H}(p(u_t \\vert x_t))] - \\epsilon<br>\\end{aligned}<br>$$</li>\n<li>$\\begin{bmatrix} \\tau \\\\\\ p \\end{bmatrix}^*$<br>$$<br>\\begin{aligned}<br>\\mathop{\\text{min }}_{\\tau, p} &amp;\\sum_{t=1}^T \\mathbb{E}_{p(x_t, u_t)}[\\frac{1}{\\lambda} c(x_t, u_t) - \\log \\bar{p}(u_t \\vert x_t) - \\mathcal{H}(p(u_t \\vert x_t))] \\\\<br>\\text{s.t. } &amp;x_t = f(x_{t-1}, u_{t-1}) \\quad t=1, \\dots, T.<br>\\end{aligned}<br>$$$\\tilde{c}(x_t, u_t) = \\frac{1}{\\lambda} c(x_t, u_t) - \\log \\bar{p}(u_t \\vert x_t)$<br>$$<br>\\begin{aligned}<br>\\mathop{\\text{min }}_{\\tau, p} &amp;\\sum_{t=1}^T \\mathbb{E}_{p(x_t, u_t)}[\\tilde{c}(x_t, u_t) - \\mathcal{H}(p(u_t \\vert x_t))] \\\\<br>\\text{s.t. } &amp;x_t = f(x_{t-1}, u_{t-1}) \\quad t=1, \\dots, T.<br>\\end{aligned}<br>$$<strong></strong>Using stochastic controller<em>iLQR</em>$\\begin{bmatrix} \\tau \\\\\\ p \\end{bmatrix}^*$</li>\n<li>$\\lambda$gradient ascent</li>\n</ol>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"Introduce-stochastic-policy\"><a href=\"#Introduce-stochastic-policy\" class=\"headerlink\" title=\"Introduce stochastic policy\"></a>Introduce stochastic policy</h2><ul>\n<li>statement<ul>\n<li><strong></strong></li>\n</ul>\n</li>\n<li>motivation<ul>\n<li>parametric policydeterministic policy casepolicy</li>\n</ul>\n</li>\n<li>solution<ul>\n<li>optimization problem<br>$$<br>\\begin{aligned}<br>\\mathop{\\text{min }}_{\\tau, p} &amp;\\mathbb{E}_\\tau[\\sum_{t=1}^T c(x_t, u_t)] \\\\<br>\\text{s.t. } &amp;p(u_t \\vert x_t) = \\pi_\\theta(u_t \\vert x_t) \\quad t=1, \\dots, T \\\\<br>&amp;D_{KL}(p(\\tau) \\Vert \\bar{p}(\\tau) ) \\leq \\epsilon \\\\<br>&amp;x_t = f(x_{t-1}, u_{t-1}) \\quad t=1, \\dots, T.<br>\\end{aligned}<br>$$</li>\n<li><em>DGD</em><ol>\n<li>policy$D_{KL}$Lagrangian<br>$$<br>\\begin{aligned}<br>\\mathcal{L}(\\tau, p, \\theta, \\lambda, \\eta) &amp;= \\mathbb{E}_\\tau[\\sum_{t=1}^T c(x_t, u_t)] + \\sum_{t=1}^T \\lambda_t [p(u_t \\vert x_t) - \\pi_\\theta(u_t \\vert x_t)] + \\eta (D_{KL}(p(\\tau) \\Vert \\bar{p}(\\tau) ) - \\epsilon) \\\\<br>&amp;// \\sum_{t=1}^T \\lambda_t [p(u_t \\vert x_t) - \\pi_\\theta(u_t \\vert x_t)] \\overset{?}{\\approx} \\sum_{t=1}^T \\mathbb{E}_{p(x_t, u_t)}[u_t^T\\lambda_t + \\rho_t D_{KL}(p(u_t \\vert x_t) \\Vert \\pi_\\theta(u_t \\vert x_t))]\\\\<br>&amp;\\approx \\sum_{t=1}^T \\mathbb{E}_{p(x_t, u_t)}[c(x_t, u_t) + u_t^T\\lambda_t + \\rho_t D_{KL}(p(u_t \\vert x_t) \\Vert \\pi_\\theta(u_t \\vert x_t))] + \\eta (D_{KL}(p(\\tau) \\Vert \\bar{p}(\\tau) ) - \\epsilon) \\\\<br>&amp;// \\sum_{t=1}^T \\mathbb{E}_{p(x_t, u_t)}[D_{KL}(p(u_t \\vert x_t) \\Vert \\pi_\\theta(u_t \\vert x_t))] = \\sum_{t=1}^T \\mathbb{E}_{p(x_t, u_t)}[- \\log \\pi_\\theta(u_t \\vert x_t) - \\mathcal{H}(p(u_t \\vert x_t))] \\\\<br>&amp;// D_{KL}(p(\\tau) \\Vert \\bar{p}(\\tau) ) = \\sum_{t=1}^T \\mathbb{E}_{p(x_t, u_t)} [- \\log \\bar{p}(u_t \\vert x_t) - \\mathcal{H}(p(u_t \\vert x_t))]  \\\\<br>&amp;= \\sum_{t=1}^T \\mathbb{E}_{p(x_t, u_t)}[c(x_t, u_t) + u_t^T\\lambda_t - \\rho_t \\log\\pi_\\theta(u_t \\vert x_t) - \\eta \\log \\bar{p}(u_t \\vert x_t) - ( \\rho_t + \\eta) \\mathcal{H}(p(u_t \\vert x_t))] - \\eta \\epsilon<br>\\end{aligned}<br>$$</li>\n<li>$\\begin{bmatrix} \\tau \\\\\\ p \\end{bmatrix}^*$<br>$$<br>\\begin{aligned}<br>\\mathop{\\text{min }}_{\\tau, p} &amp;\\sum_{t=1}^T \\mathbb{E}_{p(x_t, u_t)}[c(x_t, u_t) + u_t^T\\lambda_t - \\rho_t \\log\\pi_\\theta(u_t \\vert x_t) - \\eta \\log \\bar{p}(u_t \\vert x_t) - ( \\rho_t + \\eta) \\mathcal{H}(p(u_t \\vert x_t))] \\\\<br>\\text{s.t. } &amp;x_t = f(x_{t-1}, u_{t-1}) \\quad t=1, \\dots, T.<br>\\end{aligned}<br>$$$\\tilde{c}(x_t, u_t) = c(x_t, u_t) + u_t^T\\lambda_t - \\rho_t \\log\\pi_\\theta(u_t \\vert x_t) - \\eta \\log \\bar{p}(u_t \\vert x_t)$$\\nu_t = \\rho_t + \\eta$<br>$$<br>\\begin{aligned}<br>\\mathop{\\text{min }}_{\\tau, p} &amp;\\sum_{t=1}^T \\mathbb{E}_{p(x_t, u_t)}[\\tilde{c}(x_t, u_t) - \\nu_t \\mathcal{H}(p(u_t \\vert x_t))] \\\\<br>\\text{s.t. } &amp;x_t = f(x_{t-1}, u_{t-1}) \\quad t=1, \\dots, T.<br>\\end{aligned}<br>$$<strong></strong>Using stochastic controllerConstrain controller in trust region$\\begin{bmatrix} \\tau \\\\\\ p \\end{bmatrix}^*$</li>\n<li>$\\theta^*$deterministic policy caseLagrangian$\\theta^*$LagrangianLagrangian<br>$$<br>\\begin{aligned}<br>\\mathcal{L}(\\tau, p, \\theta, \\lambda, \\eta) &amp;= \\mathbb{E}_\\tau[\\sum_{t=1}^T c(x_t, u_t)] + \\sum_{t=1}^T \\lambda_t [p(u_t \\vert x_t) - \\pi_\\theta(u_t \\vert x_t)] + \\eta (D_{KL}(p(\\tau) \\Vert \\bar{p}(\\tau) ) - \\epsilon) \\\\<br>&amp;// \\sum_{t=1}^T \\lambda_t [p(u_t \\vert x_t) - \\pi_\\theta(u_t \\vert x_t)] \\overset{?}{=} \\sum_{t=1}^T \\mathbb{E}_{p(x_t)}[\\mathbb{E}_{\\pi_\\theta(u_t \\vert x_t)}[u_t]^T\\lambda_t + \\rho_t D_{KL}(p(u_t \\vert x_t) \\Vert \\pi_\\theta(u_t \\vert x_t))]\\\\<br>&amp;= \\mathbb{E}_\\tau[\\sum_{t=1}^T c(x_t, u_t)] + \\sum_{t=1}^T \\mathbb{E}_{p(x_t)}[\\mathbb{E}_{\\pi_\\theta(u_t \\vert x_t)}[u_t]^T\\lambda_t + \\rho_t D_{KL}(p(u_t \\vert x_t) \\Vert \\pi_\\theta(u_t \\vert x_t))] \\\\<br>&amp;+ \\eta (D_{KL}(p(\\tau) \\Vert \\bar{p}(\\tau) ) - \\epsilon) \\\\<br>\\end{aligned}.<br>$$$\\theta$<br>$$<br>\\mathop{\\text{min }}_{\\theta}\\sum_{t=1}^T \\mathbb{E}_{p(x_t)}[\\mathbb{E}_{\\pi_\\theta(u_t \\vert x_t)}[u_t]^T\\lambda_t + \\rho_t D_{KL}(p(u_t \\vert x_t) \\Vert \\pi_\\theta(u_t \\vert x_t))].<br>$$<em>SGD</em>$\\theta^*$</li>\n<li>$\\begin{bmatrix} \\lambda \\\\\\ \\eta \\end{bmatrix}$gradient ascent</li>\n</ol>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h1 id=\"Conclusion\"><a href=\"#Conclusion\" class=\"headerlink\" title=\"Conclusion\"></a>Conclusion</h1><p><em>GPS</em><strong></strong></p>\n<hr>\n<h1 id=\"References\"><a href=\"#References\" class=\"headerlink\" title=\"References\"></a>References</h1><ul>\n<li><a href=\"http://rll.berkeley.edu/deeprlcourse/\" target=\"_blank\" rel=\"external\">CS294 Fall 2017 lecture 8-10</a></li>\n<li><a href=\"https://people.eecs.berkeley.edu/~pabbeel/cs287-fa15/slides/lecture20-guided-policy-search.pdf\" target=\"_blank\" rel=\"external\">CS287 Guest Lecture Sergey Levine Slide</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=CW1s6psByxk\" target=\"_blank\" rel=\"external\">Sergey Levine UCB Talk</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=EtMyH_--vnU&amp;feature=youtu.be\" target=\"_blank\" rel=\"external\">Sergey Levine UW Talk</a></li>\n<li><a href=\"https://people.eecs.berkeley.edu/~svlevine/papers/mfcgps.pdf\" target=\"_blank\" rel=\"external\">Learning neural network policies with guided policy search under unknown dynamics</a></li>\n<li><a href=\"http://www.jmlr.org/papers/volume17/15-522/15-522.pdf\" target=\"_blank\" rel=\"external\">End-to-end training of deep visuomotor policies</a></li>\n</ul>\n","excerpt":"","more":"<h1 id=\"Overivew\"><a href=\"#Overivew\" class=\"headerlink\" title=\"Overivew\"></a>Overivew</h1><p><em>Guided Policy Search(GPS)</em>Model-Based</p>\n<ol>\n<li>Motivation<em>GPS</em><strong></strong></li>\n<li>Problem formulation<em>GPS</em><strong></strong></li>\n<li>Framework<em>GPS</em><strong></strong></li>\n<li>Deterministic policy casedeterministic policy case<em>GPS</em><strong></strong></li>\n<li>Stochastic policy casedeterministic policy casestochastic policy case<strong></strong><em>GPS</em></li>\n</ol>\n<hr>\n<h1 id=\"Motivation\"><a href=\"#Motivation\" class=\"headerlink\" title=\"Motivation\"></a>Motivation</h1><p><em>GPS</em><em>GPS</em></p>\n<ul>\n<li>Model-Free<em>GPS</em>i.e., model/dynamicsq value<strong>sample efficiency</strong></li>\n<li>Model-BasedtestModel-Basedonline optimizationi.e., action<em>GPS</em>parametric policye.g., <strong>test</strong>online optimizationforward pass</li>\n<li>Imitation LearningILteacherstudenti.e., supervised learningstudent<em>GPS</em><strong>teacherstudentstudentteacher</strong>teacherstudenttrain</li>\n</ul>\n<hr>\n<h1 id=\"Problem-Formulation\"><a href=\"#Problem-Formulation\" class=\"headerlink\" title=\"Problem Formulation\"></a>Problem Formulation</h1><p></p>\n<ul>\n<li>setting<ul>\n<li><strong>fixed time length</strong> taske.g, 20s20Hz$T$400</li>\n</ul>\n</li>\n<li>assumption<ul>\n<li>deterministic dynamics$x_t = f(x_{t-1}, u_{t-1})$</li>\n</ul>\n</li>\n<li>input<ul>\n<li>environment</li>\n<li>immediate cost(reward) function$c(x_t, u_t)$</li>\n</ul>\n</li>\n<li>output<ul>\n<li>parametric policy<ul>\n<li>deterministic case$u_t = \\pi_\\theta(x_t)$</li>\n<li>stochastic case$\\pi_\\theta(u_t \\vert x_t) \\sim \\mathcal{N}(\\mu_t, \\Sigma_t)$</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h1 id=\"Framework\"><a href=\"#Framework\" class=\"headerlink\" title=\"Framework\"></a>Framework</h1><p><em>GPS</em></p>\n<ol>\n<li>collect datacontrollerenvironment<div style=\"width:300px; margin-left:auto; margin-right:auto;\" ><br><img src=\"/2018/05/17/summary-gps/1.png\" alt=\"1.png\" title=\"\"><br></div></li>\n<li>fit dynamicsdynamics<div style=\"width:300px; margin-left:auto; margin-right:auto;\" ><br><img src=\"/2018/05/17/summary-gps/2.png\" alt=\"2.png\" title=\"\"><br></div></li>\n<li>optimizationcontrollerpolicyparametric policy<div style=\"width:400px; margin-left:auto; margin-right:auto;\" ><br><img src=\"/2018/05/17/summary-gps/3.png\" alt=\"3.png\" title=\"\"><br></div></li>\n<li>next iteration<div style=\"width:500px; margin-left:auto; margin-right:auto;\" ><br><img src=\"/2018/05/17/summary-gps/4.png\" alt=\"4.png\" title=\"\"><br></div>\n\n</li>\n</ol>\n<hr>\n<h1 id=\"Deterministic-policy-case\"><a href=\"#Deterministic-policy-case\" class=\"headerlink\" title=\"Deterministic policy case\"></a>Deterministic policy case</h1><p>Deterministic policy case<em>GPS</em></p>\n<h2 id=\"Collect-data\"><a href=\"#Collect-data\" class=\"headerlink\" title=\"Collect data\"></a>Collect data</h2><p>controllerenvironment$\\mathcal{D} = { \\tau_i }$$\\tau_i = { x_{1i}, u_{1i}, \\dots , x_{1T}, u_{1T} }$</p>\n<h2 id=\"Fit-dynamics\"><a href=\"#Fit-dynamics\" class=\"headerlink\" title=\"Fit dynamics\"></a>Fit dynamics</h2><p>time-varying linear model$x_{t+1} = f(x_t, u_t) = A_tx_t + B_tu_t + c_t$model<strong>$t$inputlinear model</strong></p>\n<p>$t$$\\tau_i$${ (x_{t1}, u_{t1}, x_{t+1,1}), \\dots , (x_{ti}, u_{ti}, x_{t+1,i}) }$linear regression</p>\n<h2 id=\"Optimization\"><a href=\"#Optimization\" class=\"headerlink\" title=\"Optimization\"></a>Optimization</h2><h3 id=\"Controller\"><a href=\"#Controller\" class=\"headerlink\" title=\"Controller\"></a>Controller</h3><ul>\n<li>big picture</li>\n</ul>\n<div style=\"width:250px; margin-left:auto; margin-right:auto;\" ><br>  <img src=\"/2018/05/17/summary-gps/3_1.png\" alt=\"3_1.png\" title=\"\"><br></div>\n\n<ul>\n<li>optimization problem<ul>\n<li>dynamicscost<br>$$<br>\\begin{aligned}<br>\\mathop{\\text{min }}_{x_1, u_1, \\dots, x_T, u_T} &amp;\\sum_{t=1}^T c(x_t, u_t) \\\\<br>\\text{s.t. } &amp;x_t = f(x_{t-1}, u_{t-1}) \\quad t=1, \\dots, T.<br>\\end{aligned}<br>$$</li>\n</ul>\n</li>\n<li>solution<ul>\n<li>$f(x_t, u_t) = F_t \\begin{bmatrix} x_t \\\\\\ u_t \\end{bmatrix} + f_t$ $c(x_t, u_t) = \\frac{1}{2} \\begin{bmatrix} x_t \\\\\\ u_t \\end{bmatrix}^T C_t \\begin{bmatrix} x_t \\\\\\ u_t \\end{bmatrix} + \\begin{bmatrix} x_t \\\\\\ u_t \\end{bmatrix}^T c_t$<em>Linear Quadratic Regulator(LQR)</em></li>\n<li><em>LQR</em><ul>\n<li>input<ul>\n<li>linear model$F_t, f_t$</li>\n<li>quadratic cost$C_t, c_t$</li>\n</ul>\n</li>\n<li>output$K_t, k_t$</li>\n<li>optimal control$u_t=K_tx_t+k_t$$x_{t+1}=f(x_t, u_t)$<div style=\"width:500px; margin-left:auto; margin-right:auto;\" ><br><img src=\"/2018/05/17/summary-gps/lqr.png\" alt=\"lqr.png\" title=\"\"><br></div></li>\n</ul>\n</li>\n<li>fit dynamicslinear modelcost functionquadratic<em>LQR</em></li>\n<li>cost functionquadratic<em>iterative LQR(iLQR)</em><em>iLQR</em>nonlinear dynamicsnonquadratic costdynamicscostlinearquadratic<em>LQR</em></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Policy\"><a href=\"#Policy\" class=\"headerlink\" title=\"Policy\"></a>Policy</h3><ul>\n<li>big picture</li>\n</ul>\n<div style=\"width:400px; margin-left:auto; margin-right:auto;\" ><br>  <img src=\"/2018/05/17/summary-gps/3.png\" alt=\"3.png\" title=\"\"><br></div>\n\n<ul>\n<li>optimization problem<ul>\n<li><em>GPS</em>policy$\\theta$$u_t = \\pi_\\theta(x_t)$policyoptimal control<br>$$<br>\\begin{aligned}<br>\\mathop{\\text{min }}_{x_1, u_1, \\dots, x_T, u_T, \\theta} &amp;\\sum_{t=1}^T c(x_t, u_t) \\\\<br>\\text{s.t. } &amp;u_t = \\pi_\\theta(x_t) \\quad t=1, \\dots, T\\\\<br>&amp;x_t = f(x_{t-1}, u_{t-1}) \\quad t=1, \\dots, T.<br>\\end{aligned}<br>$$</li>\n</ul>\n</li>\n<li>solution<ul>\n<li><em>Dual Gradient Descent(DGD)</em><em>DGD</em><br>$$<br>\\begin{aligned}<br>\\mathop{\\text{min }}_x &amp;f(x) \\\\<br>\\text{s.t. } &amp; C(x)=0.<br>\\end{aligned}<br>$$<ol>\n<li>Lagrangian$\\mathcal{L}(x, \\lambda) = f(x) + \\lambda C(x)$</li>\n<li>Lagrangian$x$$x^* = \\mathop{\\text{argmin }}_x \\mathcal{L}(x, \\lambda)$</li>\n<li>$x^*$$\\mathcal{L}(x, \\lambda)$$g(\\lambda) = \\mathcal{L}(x^*, \\lambda)$</li>\n<li>$\\lambda$$\\lambda$gradient ascent$\\lambda = \\lambda + \\alpha \\frac{\\partial g}{\\partial \\lambda}$</li>\n<li>$\\lambda$$x^*$</li>\n</ol>\n</li>\n<li><strong>dynamics</strong><strong></strong>dynamicsi.e., policycostdynamicspolicyi.e., cost<br>$$<br>\\begin{aligned}<br>\\mathop{\\text{min }}_{x_1, u_1, \\dots, x_T, u_T, \\theta} &amp;\\sum_{t=1}^T c(x_t, u_t) \\\\<br>\\text{s.t. } &amp;u_t = \\pi_\\theta(x_t) \\quad t=1, \\dots, T\\\\<br>\\\\<br>\\text{s.t. } x_t = f&amp;(x_{t-1}, u_{t-1}) \\quad t=1, \\dots, T.<br>\\end{aligned}<br>$$</li>\n<li><strong><em>DGD</em></strong>i.e., <em>DGD</em><ol>\n<li>policyLagrangian<br>$$<br>\\begin{aligned}<br>\\mathcal{L}(\\tau, \\theta, \\lambda)<br>&amp;= \\mathcal{L}(x_1, u_1, \\dots, x_T, u_T, \\theta, \\lambda_1, \\dots, \\lambda_T) \\\\<br>&amp;=  \\sum_{t=1}^T c(x_t, u_t) + \\sum_{t=1}^T\\lambda_t [u_t - \\pi_\\theta(x_t)] \\\\<br>&amp;= \\sum_{t=1}^T { c(x_t, u_t) + \\lambda_t [u_t - \\pi_\\theta(x_t)] }.<br>\\end{aligned}<br>$$</li>\n<li>$\\begin{bmatrix}\\tau \\\\\\ \\theta\\end{bmatrix}$<em>DGD</em>$x$$\\begin{bmatrix}\\tau \\\\\\ \\theta\\end{bmatrix}^*$<em>DGD</em>$x^*$<strong>$\\tau$$\\theta$</strong>$\\tau$$\\theta$$\\tau^*$$\\theta^*$$\\begin{bmatrix}\\tau^* \\\\\\ \\theta^*\\end{bmatrix}$$\\begin{bmatrix}\\tau \\\\\\ \\theta\\end{bmatrix}^*$</li>\n<li>$\\tau^*$<br>$$<br>\\begin{aligned}<br>\\mathop{\\text{min }}_\\tau &amp;\\sum_{t=1}^T { c(x_t, u_t) + \\lambda_t [u_t - \\pi_\\theta(x_t)] } \\\\<br>\\text{s.t. } &amp;x_t = f(x_{t-1}, u_{t-1}) \\quad t=1, \\dots, T.<br>\\end{aligned}<br>$$$\\tilde{c}(x_t, u_t)=c(x_t, u_t) + \\lambda_t [u_t - \\pi_\\theta(x_t)]$<br>$$<br>\\begin{aligned}<br>\\mathop{\\text{min }}_\\tau &amp;\\sum_{t=1}^T \\tilde{c}(x_t, u_t)\\\\<br>\\text{s.t. } &amp;x_t = f(x_{t-1}, u_{t-1}) \\quad t=1, \\dots, T.<br>\\end{aligned}<br>$$<strong><em>iLQR</em></strong>$\\tau^*$</li>\n<li>$\\theta^*$<br>$$<br>\\begin{aligned}<br>\\mathop{\\text{min }}_\\theta &amp;\\sum_{t=1}^T { c(x_t, u_t) + \\lambda_t [u_t - \\pi_\\theta(x_t)] } \\\\<br>\\text{s.t. } &amp;x_t = f(x_{t-1}, u_{t-1}) \\quad t=1, \\dots, T.<br>\\end{aligned}<br>$$$\\theta$<br>$$<br>\\begin{aligned}<br>\\mathop{\\text{min }}_\\theta &amp;\\sum_{t=1}^T \\lambda_t [u_t - \\pi_\\theta(x_t)].<br>\\end{aligned}<br>$$<em>SGD</em>$\\theta^*$</li>\n<li>$\\tau^*$$\\theta^*$Lagrangian$g(\\lambda) = \\mathcal{L}(\\tau^*, \\theta^*, \\lambda)$</li>\n<li>$\\lambda$gradient ascent$\\theta^*$$\\lambda$</li>\n</ol>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"Next-iteration\"><a href=\"#Next-iteration\" class=\"headerlink\" title=\"Next iteration\"></a>Next iteration</h2><p>collect datacontrollerenvironment</p>\n<h2 id=\"Summary\"><a href=\"#Summary\" class=\"headerlink\" title=\"Summary\"></a>Summary</h2><p>deterministic policy case<em>GPS</em></p>\n<ul>\n<li><em>GPS</em>guided$u_t = \\pi_\\theta(x_t)$teachercontrollerpolicy</li>\n<li>collect datacontrollerpolicycontrollerpolicy$(x_t, u_t)$controller$x_t$</li>\n<li>train policy$\\tau_i$$\\theta^*$$\\tau^*$LagrangianLagrangian$\\tau$$\\tau^*$</li>\n</ul>\n<hr>\n<h1 id=\"Stochastic-policy-case\"><a href=\"#Stochastic-policy-case\" class=\"headerlink\" title=\"Stochastic policy case\"></a>Stochastic policy case</h1><p>deterministic controller<strong>robustdynamics</strong>stochasticcontrollerstochastic controllersupervised learningstochastic policy</p>\n<p>stochastic policy casedeterministic policy case<strong>optimization</strong>stochastic policy caseoptimization</p>\n<div style=\"width:400px; margin-left:auto; margin-right:auto;\" ><br>  <img src=\"/2018/05/17/summary-gps/3.png\" alt=\"3.png\" title=\"\"><br></div>\n\n<h2 id=\"Using-stochastic-controller\"><a href=\"#Using-stochastic-controller\" class=\"headerlink\" title=\"Using stochastic controller\"></a>Using stochastic controller</h2><p>stochastic controller</p>\n<ul>\n<li>policycontroller$p(u_t \\vert x_t) \\sim \\mathcal{N}(\\mu_t, \\Sigma_t)$<br>$$<br>\\begin{aligned}<br>\\mathop{\\text{min }}_{\\tau, p} &amp;\\mathbb{E}_\\tau[\\sum_{t=1}^T c(x_t, u_t)] \\\\<br>\\text{s.t. } &amp;x_t = f(x_{t-1}, u_{t-1}) \\quad t=1, \\dots, T,<br>\\end{aligned}<br>$$$p = \\mu_1, \\Sigma_1, \\dots, \\mu_T, \\Sigma_T$work<strong>determinisitc controller</strong></li>\n<li>controllerlinear-gaussian<br>$$<br>p(u_t \\vert x_t) = \\mathcal{N}(K_t(x_t - \\hat{x}_t) + k_t + \\hat{u}_t, Q^{-1}_{u_t,u_t}),<br>$$gaussian<em>iLQR</em><em>iLQR</em><em>iLQR</em></li>\n<li>controller<br>$$<br>\\begin{aligned}<br>\\mathop{\\text{min }}_{\\tau, p} &amp;\\sum_{t=1}^T\\mathbb{E}_{p(x_t, u_t)}[ c(x_t, u_t) - \\mathcal{H}(p(u_t \\vert x_t))] \\\\<br>\\text{s.t. } &amp;x_t = f(x_{t-1}, u_{t-1}) \\quad t=1, \\dots, T.<br>\\end{aligned}<br>$$</li>\n<li><strong></strong></li>\n</ul>\n<h2 id=\"Constrain-controller-in-trust-region\"><a href=\"#Constrain-controller-in-trust-region\" class=\"headerlink\" title=\"Constrain controller in trust region\"></a>Constrain controller in trust region</h2><ul>\n<li>motivation<ul>\n<li><em>GPS</em>fitdynamicslocal dynamics<strong>controller</strong></li>\n<li>controllerlocal dynamics</li>\n<li><strong>controllercontroller</strong></li>\n<li>contoller//</li>\n</ul>\n</li>\n<li>solution<ul>\n<li>controllercontroller<br>$$<br>D_{KL}(p(\\tau) \\Vert \\bar{p}(\\tau) ) \\leq \\epsilon,<br>$$$p(\\tau)$$\\tau$controller$\\bar{p}(\\tau)$$\\tau$controller$D_{KL}$KL-divergenceKL-divergence<ul>\n<li><strong>controllercontroller</strong>$p(\\tau) = p(x_1)\\prod_{t=1}^{T-1} p(u_t \\vert x_t)f(x_{t+1} \\vert x_t, u_t)$controller$p(x_1)$$f(x_{t+1} \\vert x_t, u_t)$$p(u_t \\vert x_t)$$p(\\tau)$$\\bar{p}(\\tau)$controller$p(\\tau)$$\\bar{p}(\\tau)$controller</li>\n</ul>\n</li>\n<li>new optimization problem<br>$$<br>\\begin{aligned}<br>\\mathop{\\text{min }}_{\\tau, p} &amp;\\mathbb{E}_\\tau[\\sum_{t=1}^T c(x_t, u_t)] \\\\<br>\\text{s.t. } &amp;D_{KL}(p(\\tau) \\Vert \\bar{p}(\\tau) ) \\leq \\epsilon \\\\<br>&amp;x_t = f(x_{t-1}, u_{t-1}) \\quad t=1, \\dots, T.<br>\\end{aligned}<br>$$</li>\n<li><em>DGD</em><em>DGD</em>$\\lambda \\geq 0$$g(\\lambda)$<ol>\n<li>$D_{KL}$Lagrangian<br>$$<br>\\begin{aligned}<br>\\mathcal{L}(\\tau, p, \\lambda) &amp;= \\mathbb{E}_\\tau[\\sum_{t=1}^T c(x_t, u_t)] + \\lambda (D_{KL}(p(\\tau) \\Vert \\bar{p}(\\tau) ) - \\epsilon) \\\\<br>&amp;// D_{KL}(p(\\tau) \\Vert \\bar{p}(\\tau) ) = \\sum_{t=1}^T \\mathbb{E}_{p(x_t, u_t)} [- \\log \\bar{p}(u_t \\vert x_t) - \\mathcal{H}(p(u_t \\vert x_t))]  \\\\<br>&amp;= \\sum_{t=1}^T \\mathbb{E}_{p(x_t, u_t)}[c(x_t, u_t) - \\lambda \\log \\bar{p}(u_t \\vert x_t) - \\lambda \\mathcal{H}(p(u_t \\vert x_t))] - \\lambda \\epsilon \\\\<br>&amp;//\\lambda \\\\<br>&amp;= \\lambda \\sum_{t=1}^T \\mathbb{E}_{p(x_t, u_t)}[\\frac{1}{\\lambda} c(x_t, u_t) - \\log \\bar{p}(u_t \\vert x_t) - \\mathcal{H}(p(u_t \\vert x_t))] - \\epsilon<br>\\end{aligned}<br>$$</li>\n<li>$\\begin{bmatrix} \\tau \\\\\\ p \\end{bmatrix}^*$<br>$$<br>\\begin{aligned}<br>\\mathop{\\text{min }}_{\\tau, p} &amp;\\sum_{t=1}^T \\mathbb{E}_{p(x_t, u_t)}[\\frac{1}{\\lambda} c(x_t, u_t) - \\log \\bar{p}(u_t \\vert x_t) - \\mathcal{H}(p(u_t \\vert x_t))] \\\\<br>\\text{s.t. } &amp;x_t = f(x_{t-1}, u_{t-1}) \\quad t=1, \\dots, T.<br>\\end{aligned}<br>$$$\\tilde{c}(x_t, u_t) = \\frac{1}{\\lambda} c(x_t, u_t) - \\log \\bar{p}(u_t \\vert x_t)$<br>$$<br>\\begin{aligned}<br>\\mathop{\\text{min }}_{\\tau, p} &amp;\\sum_{t=1}^T \\mathbb{E}_{p(x_t, u_t)}[\\tilde{c}(x_t, u_t) - \\mathcal{H}(p(u_t \\vert x_t))] \\\\<br>\\text{s.t. } &amp;x_t = f(x_{t-1}, u_{t-1}) \\quad t=1, \\dots, T.<br>\\end{aligned}<br>$$<strong></strong>Using stochastic controller<em>iLQR</em>$\\begin{bmatrix} \\tau \\\\\\ p \\end{bmatrix}^*$</li>\n<li>$\\lambda$gradient ascent</li>\n</ol>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"Introduce-stochastic-policy\"><a href=\"#Introduce-stochastic-policy\" class=\"headerlink\" title=\"Introduce stochastic policy\"></a>Introduce stochastic policy</h2><ul>\n<li>statement<ul>\n<li><strong></strong></li>\n</ul>\n</li>\n<li>motivation<ul>\n<li>parametric policydeterministic policy casepolicy</li>\n</ul>\n</li>\n<li>solution<ul>\n<li>optimization problem<br>$$<br>\\begin{aligned}<br>\\mathop{\\text{min }}_{\\tau, p} &amp;\\mathbb{E}_\\tau[\\sum_{t=1}^T c(x_t, u_t)] \\\\<br>\\text{s.t. } &amp;p(u_t \\vert x_t) = \\pi_\\theta(u_t \\vert x_t) \\quad t=1, \\dots, T \\\\<br>&amp;D_{KL}(p(\\tau) \\Vert \\bar{p}(\\tau) ) \\leq \\epsilon \\\\<br>&amp;x_t = f(x_{t-1}, u_{t-1}) \\quad t=1, \\dots, T.<br>\\end{aligned}<br>$$</li>\n<li><em>DGD</em><ol>\n<li>policy$D_{KL}$Lagrangian<br>$$<br>\\begin{aligned}<br>\\mathcal{L}(\\tau, p, \\theta, \\lambda, \\eta) &amp;= \\mathbb{E}_\\tau[\\sum_{t=1}^T c(x_t, u_t)] + \\sum_{t=1}^T \\lambda_t [p(u_t \\vert x_t) - \\pi_\\theta(u_t \\vert x_t)] + \\eta (D_{KL}(p(\\tau) \\Vert \\bar{p}(\\tau) ) - \\epsilon) \\\\<br>&amp;// \\sum_{t=1}^T \\lambda_t [p(u_t \\vert x_t) - \\pi_\\theta(u_t \\vert x_t)] \\overset{?}{\\approx} \\sum_{t=1}^T \\mathbb{E}_{p(x_t, u_t)}[u_t^T\\lambda_t + \\rho_t D_{KL}(p(u_t \\vert x_t) \\Vert \\pi_\\theta(u_t \\vert x_t))]\\\\<br>&amp;\\approx \\sum_{t=1}^T \\mathbb{E}_{p(x_t, u_t)}[c(x_t, u_t) + u_t^T\\lambda_t + \\rho_t D_{KL}(p(u_t \\vert x_t) \\Vert \\pi_\\theta(u_t \\vert x_t))] + \\eta (D_{KL}(p(\\tau) \\Vert \\bar{p}(\\tau) ) - \\epsilon) \\\\<br>&amp;// \\sum_{t=1}^T \\mathbb{E}_{p(x_t, u_t)}[D_{KL}(p(u_t \\vert x_t) \\Vert \\pi_\\theta(u_t \\vert x_t))] = \\sum_{t=1}^T \\mathbb{E}_{p(x_t, u_t)}[- \\log \\pi_\\theta(u_t \\vert x_t) - \\mathcal{H}(p(u_t \\vert x_t))] \\\\<br>&amp;// D_{KL}(p(\\tau) \\Vert \\bar{p}(\\tau) ) = \\sum_{t=1}^T \\mathbb{E}_{p(x_t, u_t)} [- \\log \\bar{p}(u_t \\vert x_t) - \\mathcal{H}(p(u_t \\vert x_t))]  \\\\<br>&amp;= \\sum_{t=1}^T \\mathbb{E}_{p(x_t, u_t)}[c(x_t, u_t) + u_t^T\\lambda_t - \\rho_t \\log\\pi_\\theta(u_t \\vert x_t) - \\eta \\log \\bar{p}(u_t \\vert x_t) - ( \\rho_t + \\eta) \\mathcal{H}(p(u_t \\vert x_t))] - \\eta \\epsilon<br>\\end{aligned}<br>$$</li>\n<li>$\\begin{bmatrix} \\tau \\\\\\ p \\end{bmatrix}^*$<br>$$<br>\\begin{aligned}<br>\\mathop{\\text{min }}_{\\tau, p} &amp;\\sum_{t=1}^T \\mathbb{E}_{p(x_t, u_t)}[c(x_t, u_t) + u_t^T\\lambda_t - \\rho_t \\log\\pi_\\theta(u_t \\vert x_t) - \\eta \\log \\bar{p}(u_t \\vert x_t) - ( \\rho_t + \\eta) \\mathcal{H}(p(u_t \\vert x_t))] \\\\<br>\\text{s.t. } &amp;x_t = f(x_{t-1}, u_{t-1}) \\quad t=1, \\dots, T.<br>\\end{aligned}<br>$$$\\tilde{c}(x_t, u_t) = c(x_t, u_t) + u_t^T\\lambda_t - \\rho_t \\log\\pi_\\theta(u_t \\vert x_t) - \\eta \\log \\bar{p}(u_t \\vert x_t)$$\\nu_t = \\rho_t + \\eta$<br>$$<br>\\begin{aligned}<br>\\mathop{\\text{min }}_{\\tau, p} &amp;\\sum_{t=1}^T \\mathbb{E}_{p(x_t, u_t)}[\\tilde{c}(x_t, u_t) - \\nu_t \\mathcal{H}(p(u_t \\vert x_t))] \\\\<br>\\text{s.t. } &amp;x_t = f(x_{t-1}, u_{t-1}) \\quad t=1, \\dots, T.<br>\\end{aligned}<br>$$<strong></strong>Using stochastic controllerConstrain controller in trust region$\\begin{bmatrix} \\tau \\\\\\ p \\end{bmatrix}^*$</li>\n<li>$\\theta^*$deterministic policy caseLagrangian$\\theta^*$LagrangianLagrangian<br>$$<br>\\begin{aligned}<br>\\mathcal{L}(\\tau, p, \\theta, \\lambda, \\eta) &amp;= \\mathbb{E}_\\tau[\\sum_{t=1}^T c(x_t, u_t)] + \\sum_{t=1}^T \\lambda_t [p(u_t \\vert x_t) - \\pi_\\theta(u_t \\vert x_t)] + \\eta (D_{KL}(p(\\tau) \\Vert \\bar{p}(\\tau) ) - \\epsilon) \\\\<br>&amp;// \\sum_{t=1}^T \\lambda_t [p(u_t \\vert x_t) - \\pi_\\theta(u_t \\vert x_t)] \\overset{?}{=} \\sum_{t=1}^T \\mathbb{E}_{p(x_t)}[\\mathbb{E}_{\\pi_\\theta(u_t \\vert x_t)}[u_t]^T\\lambda_t + \\rho_t D_{KL}(p(u_t \\vert x_t) \\Vert \\pi_\\theta(u_t \\vert x_t))]\\\\<br>&amp;= \\mathbb{E}_\\tau[\\sum_{t=1}^T c(x_t, u_t)] + \\sum_{t=1}^T \\mathbb{E}_{p(x_t)}[\\mathbb{E}_{\\pi_\\theta(u_t \\vert x_t)}[u_t]^T\\lambda_t + \\rho_t D_{KL}(p(u_t \\vert x_t) \\Vert \\pi_\\theta(u_t \\vert x_t))] \\\\<br>&amp;+ \\eta (D_{KL}(p(\\tau) \\Vert \\bar{p}(\\tau) ) - \\epsilon) \\\\<br>\\end{aligned}.<br>$$$\\theta$<br>$$<br>\\mathop{\\text{min }}_{\\theta}\\sum_{t=1}^T \\mathbb{E}_{p(x_t)}[\\mathbb{E}_{\\pi_\\theta(u_t \\vert x_t)}[u_t]^T\\lambda_t + \\rho_t D_{KL}(p(u_t \\vert x_t) \\Vert \\pi_\\theta(u_t \\vert x_t))].<br>$$<em>SGD</em>$\\theta^*$</li>\n<li>$\\begin{bmatrix} \\lambda \\\\\\ \\eta \\end{bmatrix}$gradient ascent</li>\n</ol>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h1 id=\"Conclusion\"><a href=\"#Conclusion\" class=\"headerlink\" title=\"Conclusion\"></a>Conclusion</h1><p><em>GPS</em><strong></strong></p>\n<hr>\n<h1 id=\"References\"><a href=\"#References\" class=\"headerlink\" title=\"References\"></a>References</h1><ul>\n<li><a href=\"http://rll.berkeley.edu/deeprlcourse/\">CS294 Fall 2017 lecture 8-10</a></li>\n<li><a href=\"https://people.eecs.berkeley.edu/~pabbeel/cs287-fa15/slides/lecture20-guided-policy-search.pdf\">CS287 Guest Lecture Sergey Levine Slide</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=CW1s6psByxk\">Sergey Levine UCB Talk</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=EtMyH_--vnU&amp;feature=youtu.be\">Sergey Levine UW Talk</a></li>\n<li><a href=\"https://people.eecs.berkeley.edu/~svlevine/papers/mfcgps.pdf\">Learning neural network policies with guided policy search under unknown dynamics</a></li>\n<li><a href=\"http://www.jmlr.org/papers/volume17/15-522/15-522.pdf\">End-to-end training of deep visuomotor policies</a></li>\n</ul>\n"},{"title":"","date":"2018-02-03T09:22:34.000Z","description":[""],"_content":"\n## On-Policy vs. Off-Policy\n\n- motivation\n\t+ deterministicpolicydeterministicpolicyq(s, a)$\\pi (s) = \\text{argmax}_a q(s,a)$\n\t+ greedy****\n\t+ evaluatedeterministicpolicyOff-Policy\n- ideasarsaq-learningOn-PolicyOff-Policy\n\t+ sarsaq-learningpolicyi.e., behavior policyq(s, a)$\\epsilon \\text{-greedy}$sarsaq-learningq(s, a)\n\t+ tt+1state, action, reward\n\t$$\n\\begin{array}{c|cc}\n  & t & t+1 \\\\\\ \\hline\nR &   & r'  \\\\\\\nS & s & s'  \\\\\\\nA & a & a'\n\\end{array}\n\t$$q(s, a)sarsaq-learning$s, a, r', s'$$a'$$a'$q(s, a)\n\t\t- sarsaq($s'$, $A$)$\\epsilon \\text{-greedy}$$a'$sarsaq(s, a)$\\epsilon \\text{-greedy}$q-value\n\t\t- q-learning$a'=\\text{argmax}_A q(s', A)$$a'$q-learningq(s, a)greedydeterministicq-value  \n\t+ sarsaq(s, a)behavior policyq-valueq-learningq(s, a)policyq-valueq(s, a)behavior policyOn-PolicyOff-PolicyOn-PolicyOff-Policy**q(s, a)policybehavior policy**$Q^{\\pi}(s, a)$$s, a \\sim \\pi '$On-PolicyOff-Policy$\\pi '$$\\pi$experience replayOff-Policyq(s, a)policysampleexperience replaypolicy\n- more\n\t+ Off-PolicyOn-Policyq-learningq(s, a)q(s, a)\n\t\n\n## Policy Gradient\n\n- motivation\n\t+ value based**continuous action space**q(s, a)sactiondiscretization\n\t\t- discretizationaction spacee.g., \n\t\t- discretizationempirical\n\t+ value based****q(s,a)distributione.g., softmax distributiondistribution\n\t+ policyaction valueapproximate\n- idea\n\t+ policyvalue functionpolicy\n\t+ policypolicypolicy$\\pi(a \\mid s ; \\boldsymbol\\theta)$e.g., $a \\sim \\mathcal{N}(\\phi(s)^T \\boldsymbol\\theta, \\sigma ^2)$policyi.e., $\\boldsymbol\\theta$\n\t$$\n\t\\boldsymbol\\theta = \\mathop{\\text{argmax}}\\limits_{\\boldsymbol\\theta} v_{\\pi_{\\boldsymbol\\theta}}(s_0),\n\t$$$s_0$\n\t+ $\\nabla v_{\\pi_{\\boldsymbol\\theta}}(s_0)$e.g., SGD\n\t+ Policy Gradient Theorem\n\t$$\n\t\\nabla v_{\\pi_{\\boldsymbol\\theta}}(s_0)=\\mathbb{E}_{S_t, A_t \\sim \\pi}\\left[\\gamma ^t G_t \\frac{\\nabla _\\boldsymbol\\theta \\pi (A_t \\mid S_t, \\boldsymbol\\theta)}{\\pi(A_t \\mid S_t, \\boldsymbol\\theta)} \\right],\n\t$$sample$\\nabla v_{\\pi_{\\boldsymbol\\theta}}(s_0)$policy\n- more\n\t+ [Sutton's bookpolicy gradient](https://danieltakeshi.github.io/2017/03/28/going-deeper-into-reinforcement-learning-fundamentals-of-policy-gradients/)\n\t\t- baselinebiasvariance\n\t\t\t+ biasbaselinev(s)variance\n\t\t\t+ sampleindependent\n\t\t- rl/\n\t\t- policy gradientsutton's bookpolicy gradientdiscounted state distribution\n\n## Actor-Critic\n\n- motivation\n\t+ Policy Gradient Theorem$G_t=q_{\\pi}(S_t, A_t)$**$G_t$q(s,a)**Policy GradientMonte Carlo\n\t+ Monte CarlovarianceMonte Carloe.g., non-terminating problem\n\t+ $G_t$\n- idea\n\t+ $G_t$$v_{\\boldsymbol w} \\approx G_t$$v_{\\boldsymbol w}$Policy Gradient$G_t$\n\t+ $v_{\\boldsymbol w}$criticpolicyactor\n\n## High-dimensional Continuous Control Using Generalized Advantage Estimation\n\n- motivation\n\t+ **advantage estimationbiasvariance**\n\t\t+ Policy Gradientbaselinebiasvariancev(s)baselinepolicy gradientq(s, a)-v(s)advantage\n\t\t+ policy gradientadvantageadvantageadvantagePolicy Gradient\n\t\t+ variancereturnbiasvariancetradeoff\n\t\t+ GAE$\\lambda$tradeoff\n- idea\n\t+ TD(lambda)n-step advantageadvantageGAEGeneralized Advantage Estimation\n\t\t- $\\lambda = 1$return-v(s)biasvariance\n\t\t- $\\lambda = 0$v(s)v(s)biasvariance\n- more\n\t+ discounted factorundiscounted returndiscounted factorvariance\n\n## Asynchronous Methods for Deep Reinforcement Learning\n\n- motivation\n\t+ **sample**replay buffer\n\t\t- \n\t\t\t1. \n\t\t\t2. sample\n\t\t\t3. \n\t\t- samplesample\n- idea\n\t+ actortrajectory\n\t\t- minibatchlocaltminibatchsum;\n\t\t- target updateglobalT\n\n## Deterministic Policy Gradient\n\n- motivation\n\t+ Policy Gradientstochastic policycontinuous action space**deterministic policy**e.g., \n- idea\n\t+ \n\t\t- determinisitc policy gradient$q(s, \\pi (s))$$\\mathbb{E}_{s \\sim \\pi}\\left[ \\nabla _ \\theta \\pi(s) \\nabla _a Q^{\\pi}(s, a) \\mid _{a=\\pi(s)} \\right] \\approx \\mathbb{E}_{s \\sim \\pi}\\left[ \\nabla _\\theta Q^{\\pi}(s, \\pi(s))  \\right]$$\\nabla _\\theta Q^{\\pi}(s,a)$\n\t\t- policy gradient$q(s, a)\\text{log} \\pi(s)$$\\mathbb{E}_{s,a \\sim \\pi}\\left[ Q^{\\pi}(s, a) \\nabla _\\theta \\text{log} \\pi(s) \\right] \\approx \\mathbb{E}_{s,a \\sim \\pi}\\left[ \\nabla _\\theta Q^{\\pi}(s, a) \\text{log} \\pi (s) \\right]$$\\nabla _\\theta Q^{\\pi}(s,a)$\n- more\n\t+ Policy GradientDeterminisitc Policy Gradientsampe efficiencygradientactioni.e., $\\mathbb{E}_{s}\\mathbb{E}_{s,a}$explorationOff-Policy\n\t+ Off-Policy Actor-Critic$\\mathbb{E}_{s \\sim \\beta}\\left[ V^{\\pi}(s) \\right]$$\\mathbb{E}_{s \\sim \\pi}\\left[ V^{\\pi}(s) \\right]$statebehavior policy$\\nabla _ \\theta \\mathbb{E}_{s \\sim \\pi}\\left[ V^{\\pi}(s) \\right] = \\mathbb{E}_{s, a \\sim \\beta} \\left[ \\sim \\right]$behavior policyperformancegradientstate$\\rho ^{\\beta}(s)$\n\n## Deep Deterministic Policy Gradient\n\n- motivation\n\t+ DPGdeep learningcriticactor****\n- ideaDQN\n\t+ replay bufferreplay buffer(s, a, r, s')mini batch\n\t+ target networkground truthcriticsupervised learningground truth$Q(s, a)$$\\mu(s)$criticcriticactorDPGcritic\n\t\t- confusingDPGcriticactorreturni.e., $V^{\\pi}$target networkcritictarget actorreturni.e., $V^{\\pi '}$actorcritic$\\pi '$$\\pi$\n- more\n\t+ DDPGDPGcritic\n\n## Trust Region Policy Optimization\n\n- motivation\n\t+ policy gradientperformancegradientgradient ascentperformance\n\t**gradient ascentstep size**step sizestep size\n\t+ gradient ascentperformance\n- idea\n\t+ policyperformance\n\t$$\n\t\\eta(\\pi_{\\theta _{\\text{new}}}) - \\eta(\\pi_{\\theta _{\\text{old}}}) \\geq f(\\theta _{\\text{new}}).\n\t$$\n\t+ ****$\\eta(\\pi_{\\theta _{\\text{new}}})$rhs>0\n- detail\n\t+ $\\theta _{\\text{new}} - \\theta _{\\text{old}}$KL divergencestep sizestep size\n\t+ \n\t+ \n\t\t- $x^T A x = b$\n\t\t- $\\theta _{\\text{new}}$$0$$\\theta _{\\text{new}}-\\theta _{\\text{old}} = \\frac{1}{\\lambda}F^{-1}g$$F$KL divergence$\\theta _{\\text{old}}$Hessian matrix$g$$\\theta _{\\text{old}}$$\\theta _{\\text{new}} - \\theta _{\\text{old}}$\n\t\t- $\\lambda$$0$$(\\theta _{\\text{new}}-\\theta _{\\text{old}})^T F (\\theta _{\\text{new}}-\\theta _{\\text{old}})=\\delta$$\\theta _{\\text{new}} - \\theta _{\\text{old}}$line searchscaling\n\t+ $x=F^{-1}g$$F$conjugate gradientconjugate gradient$F$$F$$p$$Fp$$F$$Fp$auto-differentiation$F$$x=F^{-1}g$\n- references\n\t+ [TRPO](http://www.cs.toronto.edu/~tingwuwang/trpo.pdf)\n\t+ [TRPO](https://people.eecs.berkeley.edu/~pabbeel/nips-tutorial-policy-optimization-Schulman-Abbeel.pdf)\n\t+ [practical TRPOLagrangian](http://rll.berkeley.edu/deeprlcourse/docs/lec5.pdf)\n\t+ [KL divergence](https://www.countbayesie.com/blog/2017/5/9/kullback-leibler-divergence-explained)\n\t+ [Fisher Information MatrixKL divergence Hessian](https://math.stackexchange.com/questions/2239040/show-that-fisher-information-matrix-is-the-second-order-gradient-of-kl-divergenc)\n\t+ [Hessian Free Optimization](http://andrew.gibiansky.com/blog/machine-learning/hessian-free-optimization/)\n\t+ [Directional derivative](http://tutorial.math.lamar.edu/Classes/CalcIII/DirectionalDeriv.aspx)\n\t+ [Hessian Free Optimization](https://roosephu.github.io/2016/11/19/TRPO/)\n\n## Proximal Policy Optimization Algorithms\n\n- motivation\n\t+ **TRPO**\n\t\t- \n\t\t- parameter sharing between critic and actor\n- idea\n\t+ TRPOspolicyKL divergence$\\frac{\\pi _{\\theta _\\text{new}}(a  \\mid s )}{\\pi _{\\theta _\\text{old}}(a  \\mid s )}\\hat{A}(s,a)$$\\theta _{\\text{new}}$$\\hat{A}(s, a)>0$$\\pi _{\\theta _\\text{new}}(a \\mid s)$$\\hat{A}(s, a)<0$$\\pi _{\\theta _\\text{new}}(a \\mid s)$\n\t+ PPOminimizeclip****step sizestep size\n\n<div style=\"width:800px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img ppo_objective.png PPO %}\n</div>\n\n- more\n\t+ \n\t\t- A>0A<0\n\t\t- auto-differentiation\n\t+ parameter sharingobjectivevalue functionobjectivei.e., value function\n\t+ entropy bonusexploration\n\n\n","source":"_posts/summary-rl-drl.md","raw":"---\ntitle: \ndate: 2018-02-03 17:22:34\ncategories:\n  - \ntags:\n  - \n  - \n  - GAE\n  - A3C\n  - DPG\n  - DDPG\n  - TRPO\n  - PPO\ndescription:\n  - \n---\n\n## On-Policy vs. Off-Policy\n\n- motivation\n\t+ deterministicpolicydeterministicpolicyq(s, a)$\\pi (s) = \\text{argmax}_a q(s,a)$\n\t+ greedy****\n\t+ evaluatedeterministicpolicyOff-Policy\n- ideasarsaq-learningOn-PolicyOff-Policy\n\t+ sarsaq-learningpolicyi.e., behavior policyq(s, a)$\\epsilon \\text{-greedy}$sarsaq-learningq(s, a)\n\t+ tt+1state, action, reward\n\t$$\n\\begin{array}{c|cc}\n  & t & t+1 \\\\\\ \\hline\nR &   & r'  \\\\\\\nS & s & s'  \\\\\\\nA & a & a'\n\\end{array}\n\t$$q(s, a)sarsaq-learning$s, a, r', s'$$a'$$a'$q(s, a)\n\t\t- sarsaq($s'$, $A$)$\\epsilon \\text{-greedy}$$a'$sarsaq(s, a)$\\epsilon \\text{-greedy}$q-value\n\t\t- q-learning$a'=\\text{argmax}_A q(s', A)$$a'$q-learningq(s, a)greedydeterministicq-value  \n\t+ sarsaq(s, a)behavior policyq-valueq-learningq(s, a)policyq-valueq(s, a)behavior policyOn-PolicyOff-PolicyOn-PolicyOff-Policy**q(s, a)policybehavior policy**$Q^{\\pi}(s, a)$$s, a \\sim \\pi '$On-PolicyOff-Policy$\\pi '$$\\pi$experience replayOff-Policyq(s, a)policysampleexperience replaypolicy\n- more\n\t+ Off-PolicyOn-Policyq-learningq(s, a)q(s, a)\n\t\n\n## Policy Gradient\n\n- motivation\n\t+ value based**continuous action space**q(s, a)sactiondiscretization\n\t\t- discretizationaction spacee.g., \n\t\t- discretizationempirical\n\t+ value based****q(s,a)distributione.g., softmax distributiondistribution\n\t+ policyaction valueapproximate\n- idea\n\t+ policyvalue functionpolicy\n\t+ policypolicypolicy$\\pi(a \\mid s ; \\boldsymbol\\theta)$e.g., $a \\sim \\mathcal{N}(\\phi(s)^T \\boldsymbol\\theta, \\sigma ^2)$policyi.e., $\\boldsymbol\\theta$\n\t$$\n\t\\boldsymbol\\theta = \\mathop{\\text{argmax}}\\limits_{\\boldsymbol\\theta} v_{\\pi_{\\boldsymbol\\theta}}(s_0),\n\t$$$s_0$\n\t+ $\\nabla v_{\\pi_{\\boldsymbol\\theta}}(s_0)$e.g., SGD\n\t+ Policy Gradient Theorem\n\t$$\n\t\\nabla v_{\\pi_{\\boldsymbol\\theta}}(s_0)=\\mathbb{E}_{S_t, A_t \\sim \\pi}\\left[\\gamma ^t G_t \\frac{\\nabla _\\boldsymbol\\theta \\pi (A_t \\mid S_t, \\boldsymbol\\theta)}{\\pi(A_t \\mid S_t, \\boldsymbol\\theta)} \\right],\n\t$$sample$\\nabla v_{\\pi_{\\boldsymbol\\theta}}(s_0)$policy\n- more\n\t+ [Sutton's bookpolicy gradient](https://danieltakeshi.github.io/2017/03/28/going-deeper-into-reinforcement-learning-fundamentals-of-policy-gradients/)\n\t\t- baselinebiasvariance\n\t\t\t+ biasbaselinev(s)variance\n\t\t\t+ sampleindependent\n\t\t- rl/\n\t\t- policy gradientsutton's bookpolicy gradientdiscounted state distribution\n\n## Actor-Critic\n\n- motivation\n\t+ Policy Gradient Theorem$G_t=q_{\\pi}(S_t, A_t)$**$G_t$q(s,a)**Policy GradientMonte Carlo\n\t+ Monte CarlovarianceMonte Carloe.g., non-terminating problem\n\t+ $G_t$\n- idea\n\t+ $G_t$$v_{\\boldsymbol w} \\approx G_t$$v_{\\boldsymbol w}$Policy Gradient$G_t$\n\t+ $v_{\\boldsymbol w}$criticpolicyactor\n\n## High-dimensional Continuous Control Using Generalized Advantage Estimation\n\n- motivation\n\t+ **advantage estimationbiasvariance**\n\t\t+ Policy Gradientbaselinebiasvariancev(s)baselinepolicy gradientq(s, a)-v(s)advantage\n\t\t+ policy gradientadvantageadvantageadvantagePolicy Gradient\n\t\t+ variancereturnbiasvariancetradeoff\n\t\t+ GAE$\\lambda$tradeoff\n- idea\n\t+ TD(lambda)n-step advantageadvantageGAEGeneralized Advantage Estimation\n\t\t- $\\lambda = 1$return-v(s)biasvariance\n\t\t- $\\lambda = 0$v(s)v(s)biasvariance\n- more\n\t+ discounted factorundiscounted returndiscounted factorvariance\n\n## Asynchronous Methods for Deep Reinforcement Learning\n\n- motivation\n\t+ **sample**replay buffer\n\t\t- \n\t\t\t1. \n\t\t\t2. sample\n\t\t\t3. \n\t\t- samplesample\n- idea\n\t+ actortrajectory\n\t\t- minibatchlocaltminibatchsum;\n\t\t- target updateglobalT\n\n## Deterministic Policy Gradient\n\n- motivation\n\t+ Policy Gradientstochastic policycontinuous action space**deterministic policy**e.g., \n- idea\n\t+ \n\t\t- determinisitc policy gradient$q(s, \\pi (s))$$\\mathbb{E}_{s \\sim \\pi}\\left[ \\nabla _ \\theta \\pi(s) \\nabla _a Q^{\\pi}(s, a) \\mid _{a=\\pi(s)} \\right] \\approx \\mathbb{E}_{s \\sim \\pi}\\left[ \\nabla _\\theta Q^{\\pi}(s, \\pi(s))  \\right]$$\\nabla _\\theta Q^{\\pi}(s,a)$\n\t\t- policy gradient$q(s, a)\\text{log} \\pi(s)$$\\mathbb{E}_{s,a \\sim \\pi}\\left[ Q^{\\pi}(s, a) \\nabla _\\theta \\text{log} \\pi(s) \\right] \\approx \\mathbb{E}_{s,a \\sim \\pi}\\left[ \\nabla _\\theta Q^{\\pi}(s, a) \\text{log} \\pi (s) \\right]$$\\nabla _\\theta Q^{\\pi}(s,a)$\n- more\n\t+ Policy GradientDeterminisitc Policy Gradientsampe efficiencygradientactioni.e., $\\mathbb{E}_{s}\\mathbb{E}_{s,a}$explorationOff-Policy\n\t+ Off-Policy Actor-Critic$\\mathbb{E}_{s \\sim \\beta}\\left[ V^{\\pi}(s) \\right]$$\\mathbb{E}_{s \\sim \\pi}\\left[ V^{\\pi}(s) \\right]$statebehavior policy$\\nabla _ \\theta \\mathbb{E}_{s \\sim \\pi}\\left[ V^{\\pi}(s) \\right] = \\mathbb{E}_{s, a \\sim \\beta} \\left[ \\sim \\right]$behavior policyperformancegradientstate$\\rho ^{\\beta}(s)$\n\n## Deep Deterministic Policy Gradient\n\n- motivation\n\t+ DPGdeep learningcriticactor****\n- ideaDQN\n\t+ replay bufferreplay buffer(s, a, r, s')mini batch\n\t+ target networkground truthcriticsupervised learningground truth$Q(s, a)$$\\mu(s)$criticcriticactorDPGcritic\n\t\t- confusingDPGcriticactorreturni.e., $V^{\\pi}$target networkcritictarget actorreturni.e., $V^{\\pi '}$actorcritic$\\pi '$$\\pi$\n- more\n\t+ DDPGDPGcritic\n\n## Trust Region Policy Optimization\n\n- motivation\n\t+ policy gradientperformancegradientgradient ascentperformance\n\t**gradient ascentstep size**step sizestep size\n\t+ gradient ascentperformance\n- idea\n\t+ policyperformance\n\t$$\n\t\\eta(\\pi_{\\theta _{\\text{new}}}) - \\eta(\\pi_{\\theta _{\\text{old}}}) \\geq f(\\theta _{\\text{new}}).\n\t$$\n\t+ ****$\\eta(\\pi_{\\theta _{\\text{new}}})$rhs>0\n- detail\n\t+ $\\theta _{\\text{new}} - \\theta _{\\text{old}}$KL divergencestep sizestep size\n\t+ \n\t+ \n\t\t- $x^T A x = b$\n\t\t- $\\theta _{\\text{new}}$$0$$\\theta _{\\text{new}}-\\theta _{\\text{old}} = \\frac{1}{\\lambda}F^{-1}g$$F$KL divergence$\\theta _{\\text{old}}$Hessian matrix$g$$\\theta _{\\text{old}}$$\\theta _{\\text{new}} - \\theta _{\\text{old}}$\n\t\t- $\\lambda$$0$$(\\theta _{\\text{new}}-\\theta _{\\text{old}})^T F (\\theta _{\\text{new}}-\\theta _{\\text{old}})=\\delta$$\\theta _{\\text{new}} - \\theta _{\\text{old}}$line searchscaling\n\t+ $x=F^{-1}g$$F$conjugate gradientconjugate gradient$F$$F$$p$$Fp$$F$$Fp$auto-differentiation$F$$x=F^{-1}g$\n- references\n\t+ [TRPO](http://www.cs.toronto.edu/~tingwuwang/trpo.pdf)\n\t+ [TRPO](https://people.eecs.berkeley.edu/~pabbeel/nips-tutorial-policy-optimization-Schulman-Abbeel.pdf)\n\t+ [practical TRPOLagrangian](http://rll.berkeley.edu/deeprlcourse/docs/lec5.pdf)\n\t+ [KL divergence](https://www.countbayesie.com/blog/2017/5/9/kullback-leibler-divergence-explained)\n\t+ [Fisher Information MatrixKL divergence Hessian](https://math.stackexchange.com/questions/2239040/show-that-fisher-information-matrix-is-the-second-order-gradient-of-kl-divergenc)\n\t+ [Hessian Free Optimization](http://andrew.gibiansky.com/blog/machine-learning/hessian-free-optimization/)\n\t+ [Directional derivative](http://tutorial.math.lamar.edu/Classes/CalcIII/DirectionalDeriv.aspx)\n\t+ [Hessian Free Optimization](https://roosephu.github.io/2016/11/19/TRPO/)\n\n## Proximal Policy Optimization Algorithms\n\n- motivation\n\t+ **TRPO**\n\t\t- \n\t\t- parameter sharing between critic and actor\n- idea\n\t+ TRPOspolicyKL divergence$\\frac{\\pi _{\\theta _\\text{new}}(a  \\mid s )}{\\pi _{\\theta _\\text{old}}(a  \\mid s )}\\hat{A}(s,a)$$\\theta _{\\text{new}}$$\\hat{A}(s, a)>0$$\\pi _{\\theta _\\text{new}}(a \\mid s)$$\\hat{A}(s, a)<0$$\\pi _{\\theta _\\text{new}}(a \\mid s)$\n\t+ PPOminimizeclip****step sizestep size\n\n<div style=\"width:800px; margin-left:auto; margin-right:auto;\" >\n  {% asset_img ppo_objective.png PPO %}\n</div>\n\n- more\n\t+ \n\t\t- A>0A<0\n\t\t- auto-differentiation\n\t+ parameter sharingobjectivevalue functionobjectivei.e., value function\n\t+ entropy bonusexploration\n\n\n","slug":"summary-rl-drl","published":1,"updated":"2024-08-13T16:03:47.884Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clzvf192k001xeqwom1gfasnd","content":"<h2 id=\"On-Policy-vs-Off-Policy\"><a href=\"#On-Policy-vs-Off-Policy\" class=\"headerlink\" title=\"On-Policy vs. Off-Policy\"></a>On-Policy vs. Off-Policy</h2><ul>\n<li>motivation<ul>\n<li>deterministicpolicydeterministicpolicyq(s, a)$\\pi (s) = \\text{argmax}_a q(s,a)$</li>\n<li>greedy<strong></strong></li>\n<li>evaluatedeterministicpolicyOff-Policy</li>\n</ul>\n</li>\n<li>ideasarsaq-learningOn-PolicyOff-Policy<ul>\n<li>sarsaq-learningpolicyi.e., behavior policyq(s, a)$\\epsilon \\text{-greedy}$sarsaq-learningq(s, a)</li>\n<li>tt+1state, action, reward<br>$$<br>\\begin{array}{c|cc}<br>&amp; t &amp; t+1 \\\\ \\hline<br>R &amp;   &amp; r  \\\\\\<br>S &amp; s &amp; s  \\\\\\<br>A &amp; a &amp; a<br>\\end{array}<br>$$q(s, a)sarsaq-learning$s, a, r, s$$a$$a$q(s, a)<ul>\n<li>sarsaq($s$, $A$)$\\epsilon \\text{-greedy}$$a$sarsaq(s, a)$\\epsilon \\text{-greedy}$q-value</li>\n<li>q-learning$a=\\text{argmax}_A q(s, A)$$a$q-learningq(s, a)greedydeterministicq-value  </li>\n</ul>\n</li>\n<li>sarsaq(s, a)behavior policyq-valueq-learningq(s, a)policyq-valueq(s, a)behavior policyOn-PolicyOff-PolicyOn-PolicyOff-Policy<strong>q(s, a)policybehavior policy</strong>$Q^{\\pi}(s, a)$$s, a \\sim \\pi $On-PolicyOff-Policy$\\pi $$\\pi$experience replayOff-Policyq(s, a)policysampleexperience replaypolicy</li>\n</ul>\n</li>\n<li>more<ul>\n<li>Off-PolicyOn-Policyq-learningq(s, a)q(s, a)</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"Policy-Gradient\"><a href=\"#Policy-Gradient\" class=\"headerlink\" title=\"Policy Gradient\"></a>Policy Gradient</h2><ul>\n<li>motivation<ul>\n<li>value based<strong>continuous action space</strong>q(s, a)sactiondiscretization<ul>\n<li>discretizationaction spacee.g., </li>\n<li>discretizationempirical</li>\n</ul>\n</li>\n<li>value based<strong></strong>q(s,a)distributione.g., softmax distributiondistribution</li>\n<li>policyaction valueapproximate</li>\n</ul>\n</li>\n<li>idea<ul>\n<li>policyvalue functionpolicy</li>\n<li>policypolicypolicy$\\pi(a \\mid s ; \\boldsymbol\\theta)$e.g., $a \\sim \\mathcal{N}(\\phi(s)^T \\boldsymbol\\theta, \\sigma ^2)$policyi.e., $\\boldsymbol\\theta$<br>$$<br>\\boldsymbol\\theta = \\mathop{\\text{argmax}}\\limits_{\\boldsymbol\\theta} v_{\\pi_{\\boldsymbol\\theta}}(s_0),<br>$$$s_0$</li>\n<li>$\\nabla v_{\\pi_{\\boldsymbol\\theta}}(s_0)$e.g., SGD</li>\n<li>Policy Gradient Theorem<br>$$<br>\\nabla v_{\\pi_{\\boldsymbol\\theta}}(s_0)=\\mathbb{E}_{S_t, A_t \\sim \\pi}\\left[\\gamma ^t G_t \\frac{\\nabla _\\boldsymbol\\theta \\pi (A_t \\mid S_t, \\boldsymbol\\theta)}{\\pi(A_t \\mid S_t, \\boldsymbol\\theta)} \\right],<br>$$sample$\\nabla v_{\\pi_{\\boldsymbol\\theta}}(s_0)$policy</li>\n</ul>\n</li>\n<li>more<ul>\n<li><a href=\"https://danieltakeshi.github.io/2017/03/28/going-deeper-into-reinforcement-learning-fundamentals-of-policy-gradients/\" target=\"_blank\" rel=\"external\">Suttons bookpolicy gradient</a><ul>\n<li>baselinebiasvariance<ul>\n<li>biasbaselinev(s)variance</li>\n<li>sampleindependent</li>\n</ul>\n</li>\n<li>rl/</li>\n<li>policy gradientsuttons bookpolicy gradientdiscounted state distribution</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"Actor-Critic\"><a href=\"#Actor-Critic\" class=\"headerlink\" title=\"Actor-Critic\"></a>Actor-Critic</h2><ul>\n<li>motivation<ul>\n<li>Policy Gradient Theorem$G_t=q_{\\pi}(S_t, A_t)$<strong>$G_t$q(s,a)</strong>Policy GradientMonte Carlo</li>\n<li>Monte CarlovarianceMonte Carloe.g., non-terminating problem</li>\n<li>$G_t$</li>\n</ul>\n</li>\n<li>idea<ul>\n<li>$G_t$$v_{\\boldsymbol w} \\approx G_t$$v_{\\boldsymbol w}$Policy Gradient$G_t$</li>\n<li>$v_{\\boldsymbol w}$criticpolicyactor</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"High-dimensional-Continuous-Control-Using-Generalized-Advantage-Estimation\"><a href=\"#High-dimensional-Continuous-Control-Using-Generalized-Advantage-Estimation\" class=\"headerlink\" title=\"High-dimensional Continuous Control Using Generalized Advantage Estimation\"></a>High-dimensional Continuous Control Using Generalized Advantage Estimation</h2><ul>\n<li>motivation<ul>\n<li><strong>advantage estimationbiasvariance</strong><ul>\n<li>Policy Gradientbaselinebiasvariancev(s)baselinepolicy gradientq(s, a)-v(s)advantage</li>\n<li>policy gradientadvantageadvantageadvantagePolicy Gradient</li>\n<li>variancereturnbiasvariancetradeoff</li>\n<li>GAE$\\lambda$tradeoff</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>idea<ul>\n<li>TD(lambda)n-step advantageadvantageGAEGeneralized Advantage Estimation<ul>\n<li>$\\lambda = 1$return-v(s)biasvariance</li>\n<li>$\\lambda = 0$v(s)v(s)biasvariance</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>more<ul>\n<li>discounted factorundiscounted returndiscounted factorvariance</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"Asynchronous-Methods-for-Deep-Reinforcement-Learning\"><a href=\"#Asynchronous-Methods-for-Deep-Reinforcement-Learning\" class=\"headerlink\" title=\"Asynchronous Methods for Deep Reinforcement Learning\"></a>Asynchronous Methods for Deep Reinforcement Learning</h2><ul>\n<li>motivation<ul>\n<li><strong>sample</strong>replay buffer<ul>\n<li><ol>\n<li></li>\n<li>sample</li>\n<li></li>\n</ol>\n</li>\n<li>samplesample</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>idea<ul>\n<li>actortrajectory<ul>\n<li>minibatchlocaltminibatchsum;</li>\n<li>target updateglobalT</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"Deterministic-Policy-Gradient\"><a href=\"#Deterministic-Policy-Gradient\" class=\"headerlink\" title=\"Deterministic Policy Gradient\"></a>Deterministic Policy Gradient</h2><ul>\n<li>motivation<ul>\n<li>Policy Gradientstochastic policycontinuous action space<strong>deterministic policy</strong>e.g., </li>\n</ul>\n</li>\n<li>idea<ul>\n<li><ul>\n<li>determinisitc policy gradient$q(s, \\pi (s))$$\\mathbb{E}_{s \\sim \\pi}\\left[ \\nabla _ \\theta \\pi(s) \\nabla _a Q^{\\pi}(s, a) \\mid _{a=\\pi(s)} \\right] \\approx \\mathbb{E}_{s \\sim \\pi}\\left[ \\nabla _\\theta Q^{\\pi}(s, \\pi(s))  \\right]$$\\nabla _\\theta Q^{\\pi}(s,a)$</li>\n<li>policy gradient$q(s, a)\\text{log} \\pi(s)$$\\mathbb{E}_{s,a \\sim \\pi}\\left[ Q^{\\pi}(s, a) \\nabla _\\theta \\text{log} \\pi(s) \\right] \\approx \\mathbb{E}_{s,a \\sim \\pi}\\left[ \\nabla _\\theta Q^{\\pi}(s, a) \\text{log} \\pi (s) \\right]$$\\nabla _\\theta Q^{\\pi}(s,a)$</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>more<ul>\n<li>Policy GradientDeterminisitc Policy Gradientsampe efficiencygradientactioni.e., $\\mathbb{E}_{s}\\mathbb{E}_{s,a}$explorationOff-Policy</li>\n<li>Off-Policy Actor-Critic$\\mathbb{E}_{s \\sim \\beta}\\left[ V^{\\pi}(s) \\right]$$\\mathbb{E}_{s \\sim \\pi}\\left[ V^{\\pi}(s) \\right]$statebehavior policy$\\nabla _ \\theta \\mathbb{E}_{s \\sim \\pi}\\left[ V^{\\pi}(s) \\right] = \\mathbb{E}_{s, a \\sim \\beta} \\left[ \\sim \\right]$behavior policyperformancegradientstate$\\rho ^{\\beta}(s)$</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"Deep-Deterministic-Policy-Gradient\"><a href=\"#Deep-Deterministic-Policy-Gradient\" class=\"headerlink\" title=\"Deep Deterministic Policy Gradient\"></a>Deep Deterministic Policy Gradient</h2><ul>\n<li>motivation<ul>\n<li>DPGdeep learningcriticactor<strong></strong></li>\n</ul>\n</li>\n<li>ideaDQN<ul>\n<li>replay bufferreplay buffer(s, a, r, s)mini batch</li>\n<li>target networkground truthcriticsupervised learningground truth$Q(s, a)$$\\mu(s)$criticcriticactorDPGcritic<ul>\n<li>confusingDPGcriticactorreturni.e., $V^{\\pi}$target networkcritictarget actorreturni.e., $V^{\\pi }$actorcritic$\\pi $$\\pi$</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>more<ul>\n<li>DDPGDPGcritic</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"Trust-Region-Policy-Optimization\"><a href=\"#Trust-Region-Policy-Optimization\" class=\"headerlink\" title=\"Trust Region Policy Optimization\"></a>Trust Region Policy Optimization</h2><ul>\n<li>motivation<ul>\n<li>policy gradientperformancegradientgradient ascentperformance<br><strong>gradient ascentstep size</strong>step sizestep size</li>\n<li>gradient ascentperformance</li>\n</ul>\n</li>\n<li>idea<ul>\n<li>policyperformance<br>$$<br>\\eta(\\pi_{\\theta _{\\text{new}}}) - \\eta(\\pi_{\\theta _{\\text{old}}}) \\geq f(\\theta _{\\text{new}}).<br>$$</li>\n<li><strong></strong>$\\eta(\\pi_{\\theta _{\\text{new}}})$rhs&gt;0</li>\n</ul>\n</li>\n<li>detail<ul>\n<li>$\\theta _{\\text{new}} - \\theta _{\\text{old}}$KL divergencestep sizestep size</li>\n<li></li>\n<li><ul>\n<li>$x^T A x = b$</li>\n<li>$\\theta _{\\text{new}}$$0$$\\theta _{\\text{new}}-\\theta _{\\text{old}} = \\frac{1}{\\lambda}F^{-1}g$$F$KL divergence$\\theta _{\\text{old}}$Hessian matrix$g$$\\theta _{\\text{old}}$$\\theta _{\\text{new}} - \\theta _{\\text{old}}$</li>\n<li>$\\lambda$$0$$(\\theta _{\\text{new}}-\\theta _{\\text{old}})^T F (\\theta _{\\text{new}}-\\theta _{\\text{old}})=\\delta$$\\theta _{\\text{new}} - \\theta _{\\text{old}}$line searchscaling</li>\n</ul>\n</li>\n<li>$x=F^{-1}g$$F$conjugate gradientconjugate gradient$F$$F$$p$$Fp$$F$$Fp$auto-differentiation$F$$x=F^{-1}g$</li>\n</ul>\n</li>\n<li>references<ul>\n<li><a href=\"http://www.cs.toronto.edu/~tingwuwang/trpo.pdf\" target=\"_blank\" rel=\"external\">TRPO</a></li>\n<li><a href=\"https://people.eecs.berkeley.edu/~pabbeel/nips-tutorial-policy-optimization-Schulman-Abbeel.pdf\" target=\"_blank\" rel=\"external\">TRPO</a></li>\n<li><a href=\"http://rll.berkeley.edu/deeprlcourse/docs/lec5.pdf\" target=\"_blank\" rel=\"external\">practical TRPOLagrangian</a></li>\n<li><a href=\"https://www.countbayesie.com/blog/2017/5/9/kullback-leibler-divergence-explained\" target=\"_blank\" rel=\"external\">KL divergence</a></li>\n<li><a href=\"https://math.stackexchange.com/questions/2239040/show-that-fisher-information-matrix-is-the-second-order-gradient-of-kl-divergenc\" target=\"_blank\" rel=\"external\">Fisher Information MatrixKL divergence Hessian</a></li>\n<li><a href=\"http://andrew.gibiansky.com/blog/machine-learning/hessian-free-optimization/\" target=\"_blank\" rel=\"external\">Hessian Free Optimization</a></li>\n<li><a href=\"http://tutorial.math.lamar.edu/Classes/CalcIII/DirectionalDeriv.aspx\" target=\"_blank\" rel=\"external\">Directional derivative</a></li>\n<li><a href=\"https://roosephu.github.io/2016/11/19/TRPO/\" target=\"_blank\" rel=\"external\">Hessian Free Optimization</a></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"Proximal-Policy-Optimization-Algorithms\"><a href=\"#Proximal-Policy-Optimization-Algorithms\" class=\"headerlink\" title=\"Proximal Policy Optimization Algorithms\"></a>Proximal Policy Optimization Algorithms</h2><ul>\n<li>motivation<ul>\n<li><strong>TRPO</strong><ul>\n<li></li>\n<li>parameter sharing between critic and actor</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>idea<ul>\n<li>TRPOspolicyKL divergence$\\frac{\\pi _{\\theta _\\text{new}}(a  \\mid s )}{\\pi _{\\theta _\\text{old}}(a  \\mid s )}\\hat{A}(s,a)$$\\theta _{\\text{new}}$$\\hat{A}(s, a)&gt;0$$\\pi _{\\theta _\\text{new}}(a \\mid s)$$\\hat{A}(s, a)&lt;0$$\\pi _{\\theta _\\text{new}}(a \\mid s)$</li>\n<li>PPOminimizeclip<strong></strong>step sizestep size</li>\n</ul>\n</li>\n</ul>\n<div style=\"width:800px; margin-left:auto; margin-right:auto;\"><br>  <img src=\"/2018/02/03/summary-rl-drl/ppo_objective.png\" alt=\"PPO\" title=\"PPO\"><br></div>\n\n<ul>\n<li>more<ul>\n<li><ul>\n<li>A&gt;0A&lt;0</li>\n<li>auto-differentiation</li>\n</ul>\n</li>\n<li>parameter sharingobjectivevalue functionobjectivei.e., value function</li>\n<li>entropy bonusexploration</li>\n</ul>\n</li>\n</ul>\n","excerpt":"","more":"<h2 id=\"On-Policy-vs-Off-Policy\"><a href=\"#On-Policy-vs-Off-Policy\" class=\"headerlink\" title=\"On-Policy vs. Off-Policy\"></a>On-Policy vs. Off-Policy</h2><ul>\n<li>motivation<ul>\n<li>deterministicpolicydeterministicpolicyq(s, a)$\\pi (s) = \\text{argmax}_a q(s,a)$</li>\n<li>greedy<strong></strong></li>\n<li>evaluatedeterministicpolicyOff-Policy</li>\n</ul>\n</li>\n<li>ideasarsaq-learningOn-PolicyOff-Policy<ul>\n<li>sarsaq-learningpolicyi.e., behavior policyq(s, a)$\\epsilon \\text{-greedy}$sarsaq-learningq(s, a)</li>\n<li>tt+1state, action, reward<br>$$<br>\\begin{array}{c|cc}<br>&amp; t &amp; t+1 \\\\ \\hline<br>R &amp;   &amp; r  \\\\\\<br>S &amp; s &amp; s  \\\\\\<br>A &amp; a &amp; a<br>\\end{array}<br>$$q(s, a)sarsaq-learning$s, a, r, s$$a$$a$q(s, a)<ul>\n<li>sarsaq($s$, $A$)$\\epsilon \\text{-greedy}$$a$sarsaq(s, a)$\\epsilon \\text{-greedy}$q-value</li>\n<li>q-learning$a=\\text{argmax}_A q(s, A)$$a$q-learningq(s, a)greedydeterministicq-value  </li>\n</ul>\n</li>\n<li>sarsaq(s, a)behavior policyq-valueq-learningq(s, a)policyq-valueq(s, a)behavior policyOn-PolicyOff-PolicyOn-PolicyOff-Policy<strong>q(s, a)policybehavior policy</strong>$Q^{\\pi}(s, a)$$s, a \\sim \\pi $On-PolicyOff-Policy$\\pi $$\\pi$experience replayOff-Policyq(s, a)policysampleexperience replaypolicy</li>\n</ul>\n</li>\n<li>more<ul>\n<li>Off-PolicyOn-Policyq-learningq(s, a)q(s, a)</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"Policy-Gradient\"><a href=\"#Policy-Gradient\" class=\"headerlink\" title=\"Policy Gradient\"></a>Policy Gradient</h2><ul>\n<li>motivation<ul>\n<li>value based<strong>continuous action space</strong>q(s, a)sactiondiscretization<ul>\n<li>discretizationaction spacee.g., </li>\n<li>discretizationempirical</li>\n</ul>\n</li>\n<li>value based<strong></strong>q(s,a)distributione.g., softmax distributiondistribution</li>\n<li>policyaction valueapproximate</li>\n</ul>\n</li>\n<li>idea<ul>\n<li>policyvalue functionpolicy</li>\n<li>policypolicypolicy$\\pi(a \\mid s ; \\boldsymbol\\theta)$e.g., $a \\sim \\mathcal{N}(\\phi(s)^T \\boldsymbol\\theta, \\sigma ^2)$policyi.e., $\\boldsymbol\\theta$<br>$$<br>\\boldsymbol\\theta = \\mathop{\\text{argmax}}\\limits_{\\boldsymbol\\theta} v_{\\pi_{\\boldsymbol\\theta}}(s_0),<br>$$$s_0$</li>\n<li>$\\nabla v_{\\pi_{\\boldsymbol\\theta}}(s_0)$e.g., SGD</li>\n<li>Policy Gradient Theorem<br>$$<br>\\nabla v_{\\pi_{\\boldsymbol\\theta}}(s_0)=\\mathbb{E}_{S_t, A_t \\sim \\pi}\\left[\\gamma ^t G_t \\frac{\\nabla _\\boldsymbol\\theta \\pi (A_t \\mid S_t, \\boldsymbol\\theta)}{\\pi(A_t \\mid S_t, \\boldsymbol\\theta)} \\right],<br>$$sample$\\nabla v_{\\pi_{\\boldsymbol\\theta}}(s_0)$policy</li>\n</ul>\n</li>\n<li>more<ul>\n<li><a href=\"https://danieltakeshi.github.io/2017/03/28/going-deeper-into-reinforcement-learning-fundamentals-of-policy-gradients/\">Suttons bookpolicy gradient</a><ul>\n<li>baselinebiasvariance<ul>\n<li>biasbaselinev(s)variance</li>\n<li>sampleindependent</li>\n</ul>\n</li>\n<li>rl/</li>\n<li>policy gradientsuttons bookpolicy gradientdiscounted state distribution</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"Actor-Critic\"><a href=\"#Actor-Critic\" class=\"headerlink\" title=\"Actor-Critic\"></a>Actor-Critic</h2><ul>\n<li>motivation<ul>\n<li>Policy Gradient Theorem$G_t=q_{\\pi}(S_t, A_t)$<strong>$G_t$q(s,a)</strong>Policy GradientMonte Carlo</li>\n<li>Monte CarlovarianceMonte Carloe.g., non-terminating problem</li>\n<li>$G_t$</li>\n</ul>\n</li>\n<li>idea<ul>\n<li>$G_t$$v_{\\boldsymbol w} \\approx G_t$$v_{\\boldsymbol w}$Policy Gradient$G_t$</li>\n<li>$v_{\\boldsymbol w}$criticpolicyactor</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"High-dimensional-Continuous-Control-Using-Generalized-Advantage-Estimation\"><a href=\"#High-dimensional-Continuous-Control-Using-Generalized-Advantage-Estimation\" class=\"headerlink\" title=\"High-dimensional Continuous Control Using Generalized Advantage Estimation\"></a>High-dimensional Continuous Control Using Generalized Advantage Estimation</h2><ul>\n<li>motivation<ul>\n<li><strong>advantage estimationbiasvariance</strong><ul>\n<li>Policy Gradientbaselinebiasvariancev(s)baselinepolicy gradientq(s, a)-v(s)advantage</li>\n<li>policy gradientadvantageadvantageadvantagePolicy Gradient</li>\n<li>variancereturnbiasvariancetradeoff</li>\n<li>GAE$\\lambda$tradeoff</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>idea<ul>\n<li>TD(lambda)n-step advantageadvantageGAEGeneralized Advantage Estimation<ul>\n<li>$\\lambda = 1$return-v(s)biasvariance</li>\n<li>$\\lambda = 0$v(s)v(s)biasvariance</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>more<ul>\n<li>discounted factorundiscounted returndiscounted factorvariance</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"Asynchronous-Methods-for-Deep-Reinforcement-Learning\"><a href=\"#Asynchronous-Methods-for-Deep-Reinforcement-Learning\" class=\"headerlink\" title=\"Asynchronous Methods for Deep Reinforcement Learning\"></a>Asynchronous Methods for Deep Reinforcement Learning</h2><ul>\n<li>motivation<ul>\n<li><strong>sample</strong>replay buffer<ul>\n<li><ol>\n<li></li>\n<li>sample</li>\n<li></li>\n</ol>\n</li>\n<li>samplesample</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>idea<ul>\n<li>actortrajectory<ul>\n<li>minibatchlocaltminibatchsum;</li>\n<li>target updateglobalT</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"Deterministic-Policy-Gradient\"><a href=\"#Deterministic-Policy-Gradient\" class=\"headerlink\" title=\"Deterministic Policy Gradient\"></a>Deterministic Policy Gradient</h2><ul>\n<li>motivation<ul>\n<li>Policy Gradientstochastic policycontinuous action space<strong>deterministic policy</strong>e.g., </li>\n</ul>\n</li>\n<li>idea<ul>\n<li><ul>\n<li>determinisitc policy gradient$q(s, \\pi (s))$$\\mathbb{E}_{s \\sim \\pi}\\left[ \\nabla _ \\theta \\pi(s) \\nabla _a Q^{\\pi}(s, a) \\mid _{a=\\pi(s)} \\right] \\approx \\mathbb{E}_{s \\sim \\pi}\\left[ \\nabla _\\theta Q^{\\pi}(s, \\pi(s))  \\right]$$\\nabla _\\theta Q^{\\pi}(s,a)$</li>\n<li>policy gradient$q(s, a)\\text{log} \\pi(s)$$\\mathbb{E}_{s,a \\sim \\pi}\\left[ Q^{\\pi}(s, a) \\nabla _\\theta \\text{log} \\pi(s) \\right] \\approx \\mathbb{E}_{s,a \\sim \\pi}\\left[ \\nabla _\\theta Q^{\\pi}(s, a) \\text{log} \\pi (s) \\right]$$\\nabla _\\theta Q^{\\pi}(s,a)$</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>more<ul>\n<li>Policy GradientDeterminisitc Policy Gradientsampe efficiencygradientactioni.e., $\\mathbb{E}_{s}\\mathbb{E}_{s,a}$explorationOff-Policy</li>\n<li>Off-Policy Actor-Critic$\\mathbb{E}_{s \\sim \\beta}\\left[ V^{\\pi}(s) \\right]$$\\mathbb{E}_{s \\sim \\pi}\\left[ V^{\\pi}(s) \\right]$statebehavior policy$\\nabla _ \\theta \\mathbb{E}_{s \\sim \\pi}\\left[ V^{\\pi}(s) \\right] = \\mathbb{E}_{s, a \\sim \\beta} \\left[ \\sim \\right]$behavior policyperformancegradientstate$\\rho ^{\\beta}(s)$</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"Deep-Deterministic-Policy-Gradient\"><a href=\"#Deep-Deterministic-Policy-Gradient\" class=\"headerlink\" title=\"Deep Deterministic Policy Gradient\"></a>Deep Deterministic Policy Gradient</h2><ul>\n<li>motivation<ul>\n<li>DPGdeep learningcriticactor<strong></strong></li>\n</ul>\n</li>\n<li>ideaDQN<ul>\n<li>replay bufferreplay buffer(s, a, r, s)mini batch</li>\n<li>target networkground truthcriticsupervised learningground truth$Q(s, a)$$\\mu(s)$criticcriticactorDPGcritic<ul>\n<li>confusingDPGcriticactorreturni.e., $V^{\\pi}$target networkcritictarget actorreturni.e., $V^{\\pi }$actorcritic$\\pi $$\\pi$</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>more<ul>\n<li>DDPGDPGcritic</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"Trust-Region-Policy-Optimization\"><a href=\"#Trust-Region-Policy-Optimization\" class=\"headerlink\" title=\"Trust Region Policy Optimization\"></a>Trust Region Policy Optimization</h2><ul>\n<li>motivation<ul>\n<li>policy gradientperformancegradientgradient ascentperformance<br><strong>gradient ascentstep size</strong>step sizestep size</li>\n<li>gradient ascentperformance</li>\n</ul>\n</li>\n<li>idea<ul>\n<li>policyperformance<br>$$<br>\\eta(\\pi_{\\theta _{\\text{new}}}) - \\eta(\\pi_{\\theta _{\\text{old}}}) \\geq f(\\theta _{\\text{new}}).<br>$$</li>\n<li><strong></strong>$\\eta(\\pi_{\\theta _{\\text{new}}})$rhs&gt;0</li>\n</ul>\n</li>\n<li>detail<ul>\n<li>$\\theta _{\\text{new}} - \\theta _{\\text{old}}$KL divergencestep sizestep size</li>\n<li></li>\n<li><ul>\n<li>$x^T A x = b$</li>\n<li>$\\theta _{\\text{new}}$$0$$\\theta _{\\text{new}}-\\theta _{\\text{old}} = \\frac{1}{\\lambda}F^{-1}g$$F$KL divergence$\\theta _{\\text{old}}$Hessian matrix$g$$\\theta _{\\text{old}}$$\\theta _{\\text{new}} - \\theta _{\\text{old}}$</li>\n<li>$\\lambda$$0$$(\\theta _{\\text{new}}-\\theta _{\\text{old}})^T F (\\theta _{\\text{new}}-\\theta _{\\text{old}})=\\delta$$\\theta _{\\text{new}} - \\theta _{\\text{old}}$line searchscaling</li>\n</ul>\n</li>\n<li>$x=F^{-1}g$$F$conjugate gradientconjugate gradient$F$$F$$p$$Fp$$F$$Fp$auto-differentiation$F$$x=F^{-1}g$</li>\n</ul>\n</li>\n<li>references<ul>\n<li><a href=\"http://www.cs.toronto.edu/~tingwuwang/trpo.pdf\">TRPO</a></li>\n<li><a href=\"https://people.eecs.berkeley.edu/~pabbeel/nips-tutorial-policy-optimization-Schulman-Abbeel.pdf\">TRPO</a></li>\n<li><a href=\"http://rll.berkeley.edu/deeprlcourse/docs/lec5.pdf\">practical TRPOLagrangian</a></li>\n<li><a href=\"https://www.countbayesie.com/blog/2017/5/9/kullback-leibler-divergence-explained\">KL divergence</a></li>\n<li><a href=\"https://math.stackexchange.com/questions/2239040/show-that-fisher-information-matrix-is-the-second-order-gradient-of-kl-divergenc\">Fisher Information MatrixKL divergence Hessian</a></li>\n<li><a href=\"http://andrew.gibiansky.com/blog/machine-learning/hessian-free-optimization/\">Hessian Free Optimization</a></li>\n<li><a href=\"http://tutorial.math.lamar.edu/Classes/CalcIII/DirectionalDeriv.aspx\">Directional derivative</a></li>\n<li><a href=\"https://roosephu.github.io/2016/11/19/TRPO/\">Hessian Free Optimization</a></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"Proximal-Policy-Optimization-Algorithms\"><a href=\"#Proximal-Policy-Optimization-Algorithms\" class=\"headerlink\" title=\"Proximal Policy Optimization Algorithms\"></a>Proximal Policy Optimization Algorithms</h2><ul>\n<li>motivation<ul>\n<li><strong>TRPO</strong><ul>\n<li></li>\n<li>parameter sharing between critic and actor</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>idea<ul>\n<li>TRPOspolicyKL divergence$\\frac{\\pi _{\\theta _\\text{new}}(a  \\mid s )}{\\pi _{\\theta _\\text{old}}(a  \\mid s )}\\hat{A}(s,a)$$\\theta _{\\text{new}}$$\\hat{A}(s, a)&gt;0$$\\pi _{\\theta _\\text{new}}(a \\mid s)$$\\hat{A}(s, a)&lt;0$$\\pi _{\\theta _\\text{new}}(a \\mid s)$</li>\n<li>PPOminimizeclip<strong></strong>step sizestep size</li>\n</ul>\n</li>\n</ul>\n<div style=\"width:800px; margin-left:auto; margin-right:auto;\" ><br>  <img src=\"/2018/02/03/summary-rl-drl/ppo_objective.png\" alt=\"PPO\" title=\"PPO\"><br></div>\n\n<ul>\n<li>more<ul>\n<li><ul>\n<li>A&gt;0A&lt;0</li>\n<li>auto-differentiation</li>\n</ul>\n</li>\n<li>parameter sharingobjectivevalue functionobjectivei.e., value function</li>\n<li>entropy bonusexploration</li>\n</ul>\n</li>\n</ul>\n"},{"title":"OpenAI Gym","date":"2018-03-26T04:01:12.000Z","description":["OpenAI Gym"],"_content":"\nGym******Gym**Gym****\n\n## Gym\n\nGym\n\n```python\n# main.py\n\nimport gym\n\ndef choose_action(o):\n\t...\n\nenv = gym.make('CartPole-v0')\no = env.reset()\nwhile True:\n\ta = choose_action(o)\n\to_, r, done, info = env.step(a)\n\to = o_\n\tif done:\n\t\tbreak\n```\n\n\n\n- `env = gym.make('CartPole-v0')`\n- `env.reset()`\n- `env.step(a)`\n\n\n---\n\n`env.reset()``env.step(a)``Env``Env`\n\n```python\n# gym/core.py\n\nclass Env(object):\n\t...\n\n    # Override in ALL subclasses\n    def _step(self, action): raise NotImplementedError\n    def _reset(self): raise NotImplementedError\n\n    ...\n\n    def step(self, action):\n        return self._step(action)\n\n    def reset(self):\n        return self._reset()\n\n    ...\n```\n\n`_reset(self)``_step(self, action)``CartPoleEnv`\n\n```python\n# gym/envs/classic_control/CartPole.py\n\nclass CartPoleEnv(gym.Env):\n\t...\n\n    def _step(self, action):\n        ...\n\n    def _reset(self):\n        ...\n\n    ...\n```\n\n`env.reset()``env.step(a)``_reset(self)``_step(self, action)`\n\n---\n\n`gym.make('CartPole-v0')`\n\n\n```python\n# gym/envs/registration.py\n\n# Have a global registry\nregistry = EnvRegistry()\n\n...\n\ndef make(id):\n    return registry.make(id)\n```\n\n`gym.make``EnvRegistry``make``EnvRegistry`\n\n```python\n# gym/envs/registration.py\n\nclass EnvRegistry(object):\n    def __init__(self):\n    \t# \n    \t# key:\te.g., 'CartPole-v0'\n    \t# value:EnvSpec\n        self.env_specs = {}\n\n    def make(self, id):\n        ...\n\n        # \n        spec = self.spec(id)\n        # \n        env = spec.make()\n\n        ...\n\n        return env\n\n    ...\n\n    def spec(self, id):\n        ...\n\n    ...\n```\n\n`EnvRegistry``make``EnvSpec``make``EnvSpec`\n\n```python\n# gym/envs/registration.py\n\ndef load(name):\n    ...\n\n# EnvSpecEnv\n# \n# \n# EnvEnvSpec\n# EnvRegistry.make(self, id)specspec.make()\n# EnvSpecEnv\nclass EnvSpec(object):\n    def __init__(self, id, entry_point=None, ...):\n    \tself.id = id\n        ...\n        self._entry_point = entry_point\n        ...\n\n    def make(self):\n        ...\n\n        # \n        # \n        # from self._entry_point import classA\n        # cls = classA\n        cls = load(self._entry_point)\n        # \n        env = cls(**self._kwargs)\n\n        ...\n\n        return env\n\n    ...\n```\n\nGym\n\n- `gym.make(id)``EnvRegistry``EnvSpec``EnvSpec``entry_point``import``Env`\n- `env.reset()``env.step(a)``_reset(self)``_step(self, action)`\n\n## \n\nGym\n\n- `Env``FooEnv`\n- `FooEnv`i.e., `FooEnv``registry.env_specs``gym.make(id)``FooEnv`\n\n[](https://github.com/openai/gym/tree/master/gym/envs)\n\n```shell\ngym-foo/\n  README.md\n  setup.py \t\t\t#gym_foopackage\n  gym_foo/ \t\t\t#\n    __init__.py \t#FooEnv\n    envs/\n      __init__.py\n      foo_env.py \t#FooEnv\n```\n\n`FooEnv``_step(self, action)``_reset(self)`\n\n`FooEnv`****Gym**API**APIFooEnv`gym-foo/gym_foo/__init__.py`\n\n\n```python\n# gym-foo/gym_foo/__init__.py\n\nfrom gym.envs.registration import register\n\nregister(\n    id='foo-v0', \t# \n    entry_point='gym_foo.envs:FooEnv', \t# import\n)\n```\n\n`register``register`\n\n```python\n# gym/envs/registration.py\n\n# Have a global registry\nregistry = EnvRegistry()\n\n# GymAPI\ndef register(id, **kwargs):\n    return registry.register(id, **kwargs)\n\ndef make(id):\n    return registry.make(id)\n```\n\n`register``EnvRegistry``register`\n\n```python\n# gym/envs/registration.py\n\nclass EnvRegistry(object):\n\t...\n\n    def register(self, id, **kwargs):\n        ...\n        # FooEnv\n        self.env_specs[id] = EnvSpec(id, **kwargs)\n\n```\n\nAPI`register``FooEnv`\n\n## \n\n### server render\n\nsshserverserveri.e., `python main.py``env.render()`\n```python\n# main.py\n\nimport gym\nfrom gym import wrappers\n\nenv = gym.make('CartPole-v0')\nenv = wrappers.Monitor(env, 'video')\nfor i_episode in range(20):\n    observation = env.reset()\n    for t in range(100):\n        env.render()\n        action = env.action_space.sample()\n        observation, reward, done, info = env.step(action)\n        if done:\n            break\n```\n`pyglet.canvas.xlib.NoSuchDisplayException: Cannot connect to \"None\"`\n\n`env.render()`****sshserver****`xvfb-run`\n\n`xvfb-run -a -s \"-screen 0 1400x900x24 +extension RANDR\" -- python main.py`\n\n`pyglet requires an X server with GLX`**cuda**`--no-opengl`flag[](https://gist.github.com/8enmann/931ec2a9dc45fde871d2139a7d1f2d78)[](https://davidsanwald.github.io/2016/11/13/building-tensorflow-with-gpu-support.html )\n\n### episode\n\n`wrappers.Monitor`episodeepisode\n\n```python\nenv = wrappers.Monitor(env, 'video', video_callable=lambda episode_id: True)\n```\n\n### episodestep\n\n`env._max_episode_steps = xxx`env`TimeLimit`\n\n### wrapper\n\n- wrappere.g., `Monitor``Monitor``Monitor``TimeLimit`double wrapper\n- `FooEnv``max_episode_steps=xxx``Env``TimeLimit`wrapper`FooEnv`\n- `Monitor``recorder``stat_recorder`reward`video_recorder``Monitor``env.reset``env.step``render`\n\n### log\n\n```python\n# main.py\n\nimport logging\n\n# suppress INFO level logging 'Making new env: ...'\nlogging.getLogger('gym.envs.registration').setLevel(logging.WARNING)\n# suppress INFO level logging 'Starting new video recorder writing to ...'\nlogging.getLogger('gym.monitoring.video_recorder').setLevel(logging.WARNING)\n# suppress INFO level logging 'Creating monitor directory ...'\nlogging.getLogger('gym.wrappers.monitoring').setLevel(logging.WARNING)\n\n```","source":"_posts/tech-gym.md","raw":"---\ntitle: OpenAI Gym\ndate: 2018-03-26 12:01:12\ntags:\n\t- Gym\ncategories:\n\t- \ndescription:\n\t- OpenAI Gym\n---\n\nGym******Gym**Gym****\n\n## Gym\n\nGym\n\n```python\n# main.py\n\nimport gym\n\ndef choose_action(o):\n\t...\n\nenv = gym.make('CartPole-v0')\no = env.reset()\nwhile True:\n\ta = choose_action(o)\n\to_, r, done, info = env.step(a)\n\to = o_\n\tif done:\n\t\tbreak\n```\n\n\n\n- `env = gym.make('CartPole-v0')`\n- `env.reset()`\n- `env.step(a)`\n\n\n---\n\n`env.reset()``env.step(a)``Env``Env`\n\n```python\n# gym/core.py\n\nclass Env(object):\n\t...\n\n    # Override in ALL subclasses\n    def _step(self, action): raise NotImplementedError\n    def _reset(self): raise NotImplementedError\n\n    ...\n\n    def step(self, action):\n        return self._step(action)\n\n    def reset(self):\n        return self._reset()\n\n    ...\n```\n\n`_reset(self)``_step(self, action)``CartPoleEnv`\n\n```python\n# gym/envs/classic_control/CartPole.py\n\nclass CartPoleEnv(gym.Env):\n\t...\n\n    def _step(self, action):\n        ...\n\n    def _reset(self):\n        ...\n\n    ...\n```\n\n`env.reset()``env.step(a)``_reset(self)``_step(self, action)`\n\n---\n\n`gym.make('CartPole-v0')`\n\n\n```python\n# gym/envs/registration.py\n\n# Have a global registry\nregistry = EnvRegistry()\n\n...\n\ndef make(id):\n    return registry.make(id)\n```\n\n`gym.make``EnvRegistry``make``EnvRegistry`\n\n```python\n# gym/envs/registration.py\n\nclass EnvRegistry(object):\n    def __init__(self):\n    \t# \n    \t# key:\te.g., 'CartPole-v0'\n    \t# value:EnvSpec\n        self.env_specs = {}\n\n    def make(self, id):\n        ...\n\n        # \n        spec = self.spec(id)\n        # \n        env = spec.make()\n\n        ...\n\n        return env\n\n    ...\n\n    def spec(self, id):\n        ...\n\n    ...\n```\n\n`EnvRegistry``make``EnvSpec``make``EnvSpec`\n\n```python\n# gym/envs/registration.py\n\ndef load(name):\n    ...\n\n# EnvSpecEnv\n# \n# \n# EnvEnvSpec\n# EnvRegistry.make(self, id)specspec.make()\n# EnvSpecEnv\nclass EnvSpec(object):\n    def __init__(self, id, entry_point=None, ...):\n    \tself.id = id\n        ...\n        self._entry_point = entry_point\n        ...\n\n    def make(self):\n        ...\n\n        # \n        # \n        # from self._entry_point import classA\n        # cls = classA\n        cls = load(self._entry_point)\n        # \n        env = cls(**self._kwargs)\n\n        ...\n\n        return env\n\n    ...\n```\n\nGym\n\n- `gym.make(id)``EnvRegistry``EnvSpec``EnvSpec``entry_point``import``Env`\n- `env.reset()``env.step(a)``_reset(self)``_step(self, action)`\n\n## \n\nGym\n\n- `Env``FooEnv`\n- `FooEnv`i.e., `FooEnv``registry.env_specs``gym.make(id)``FooEnv`\n\n[](https://github.com/openai/gym/tree/master/gym/envs)\n\n```shell\ngym-foo/\n  README.md\n  setup.py \t\t\t#gym_foopackage\n  gym_foo/ \t\t\t#\n    __init__.py \t#FooEnv\n    envs/\n      __init__.py\n      foo_env.py \t#FooEnv\n```\n\n`FooEnv``_step(self, action)``_reset(self)`\n\n`FooEnv`****Gym**API**APIFooEnv`gym-foo/gym_foo/__init__.py`\n\n\n```python\n# gym-foo/gym_foo/__init__.py\n\nfrom gym.envs.registration import register\n\nregister(\n    id='foo-v0', \t# \n    entry_point='gym_foo.envs:FooEnv', \t# import\n)\n```\n\n`register``register`\n\n```python\n# gym/envs/registration.py\n\n# Have a global registry\nregistry = EnvRegistry()\n\n# GymAPI\ndef register(id, **kwargs):\n    return registry.register(id, **kwargs)\n\ndef make(id):\n    return registry.make(id)\n```\n\n`register``EnvRegistry``register`\n\n```python\n# gym/envs/registration.py\n\nclass EnvRegistry(object):\n\t...\n\n    def register(self, id, **kwargs):\n        ...\n        # FooEnv\n        self.env_specs[id] = EnvSpec(id, **kwargs)\n\n```\n\nAPI`register``FooEnv`\n\n## \n\n### server render\n\nsshserverserveri.e., `python main.py``env.render()`\n```python\n# main.py\n\nimport gym\nfrom gym import wrappers\n\nenv = gym.make('CartPole-v0')\nenv = wrappers.Monitor(env, 'video')\nfor i_episode in range(20):\n    observation = env.reset()\n    for t in range(100):\n        env.render()\n        action = env.action_space.sample()\n        observation, reward, done, info = env.step(action)\n        if done:\n            break\n```\n`pyglet.canvas.xlib.NoSuchDisplayException: Cannot connect to \"None\"`\n\n`env.render()`****sshserver****`xvfb-run`\n\n`xvfb-run -a -s \"-screen 0 1400x900x24 +extension RANDR\" -- python main.py`\n\n`pyglet requires an X server with GLX`**cuda**`--no-opengl`flag[](https://gist.github.com/8enmann/931ec2a9dc45fde871d2139a7d1f2d78)[](https://davidsanwald.github.io/2016/11/13/building-tensorflow-with-gpu-support.html )\n\n### episode\n\n`wrappers.Monitor`episodeepisode\n\n```python\nenv = wrappers.Monitor(env, 'video', video_callable=lambda episode_id: True)\n```\n\n### episodestep\n\n`env._max_episode_steps = xxx`env`TimeLimit`\n\n### wrapper\n\n- wrappere.g., `Monitor``Monitor``Monitor``TimeLimit`double wrapper\n- `FooEnv``max_episode_steps=xxx``Env``TimeLimit`wrapper`FooEnv`\n- `Monitor``recorder``stat_recorder`reward`video_recorder``Monitor``env.reset``env.step``render`\n\n### log\n\n```python\n# main.py\n\nimport logging\n\n# suppress INFO level logging 'Making new env: ...'\nlogging.getLogger('gym.envs.registration').setLevel(logging.WARNING)\n# suppress INFO level logging 'Starting new video recorder writing to ...'\nlogging.getLogger('gym.monitoring.video_recorder').setLevel(logging.WARNING)\n# suppress INFO level logging 'Creating monitor directory ...'\nlogging.getLogger('gym.wrappers.monitoring').setLevel(logging.WARNING)\n\n```","slug":"tech-gym","published":1,"updated":"2024-08-13T16:03:47.884Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clzvf192m0020eqwoj3zjysjt","content":"<p>Gym<strong></strong><strong>Gym</strong>Gym<strong></strong></p>\n<h2 id=\"Gym\"><a href=\"#Gym\" class=\"headerlink\" title=\"Gym\"></a>Gym</h2><p>Gym</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># main.py</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">import</span> gym</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">choose_action</span><span class=\"params\">(o)</span>:</span></div><div class=\"line\">\t...</div><div class=\"line\"></div><div class=\"line\">env = gym.make(<span class=\"string\">'CartPole-v0'</span>)</div><div class=\"line\">o = env.reset()</div><div class=\"line\"><span class=\"keyword\">while</span> <span class=\"keyword\">True</span>:</div><div class=\"line\">\ta = choose_action(o)</div><div class=\"line\">\to_, r, done, info = env.step(a)</div><div class=\"line\">\to = o_</div><div class=\"line\">\t<span class=\"keyword\">if</span> done:</div><div class=\"line\">\t\t<span class=\"keyword\">break</span></div></pre></td></tr></table></figure>\n<p></p>\n<ul>\n<li><code>env = gym.make(&#39;CartPole-v0&#39;)</code></li>\n<li><code>env.reset()</code></li>\n<li><code>env.step(a)</code></li>\n</ul>\n<hr>\n<p><code>env.reset()</code><code>env.step(a)</code><code>Env</code><code>Env</code></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># gym/core.py</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Env</span><span class=\"params\">(object)</span>:</span></div><div class=\"line\">\t...</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\"># Override in ALL subclasses</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">_step</span><span class=\"params\">(self, action)</span>:</span> <span class=\"keyword\">raise</span> NotImplementedError</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">_reset</span><span class=\"params\">(self)</span>:</span> <span class=\"keyword\">raise</span> NotImplementedError</div><div class=\"line\"></div><div class=\"line\">    ...</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">step</span><span class=\"params\">(self, action)</span>:</span></div><div class=\"line\">        <span class=\"keyword\">return</span> self._step(action)</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">reset</span><span class=\"params\">(self)</span>:</span></div><div class=\"line\">        <span class=\"keyword\">return</span> self._reset()</div><div class=\"line\"></div><div class=\"line\">    ...</div></pre></td></tr></table></figure>\n<p><code>_reset(self)</code><code>_step(self, action)</code><code>CartPoleEnv</code></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># gym/envs/classic_control/CartPole.py</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CartPoleEnv</span><span class=\"params\">(gym.Env)</span>:</span></div><div class=\"line\">\t...</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">_step</span><span class=\"params\">(self, action)</span>:</span></div><div class=\"line\">        ...</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">_reset</span><span class=\"params\">(self)</span>:</span></div><div class=\"line\">        ...</div><div class=\"line\"></div><div class=\"line\">    ...</div></pre></td></tr></table></figure>\n<p><code>env.reset()</code><code>env.step(a)</code><code>_reset(self)</code><code>_step(self, action)</code></p>\n<hr>\n<p><code>gym.make(&#39;CartPole-v0&#39;)</code></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># gym/envs/registration.py</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Have a global registry</span></div><div class=\"line\">registry = EnvRegistry()</div><div class=\"line\"></div><div class=\"line\">...</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">make</span><span class=\"params\">(id)</span>:</span></div><div class=\"line\">    <span class=\"keyword\">return</span> registry.make(id)</div></pre></td></tr></table></figure>\n<p><code>gym.make</code><code>EnvRegistry</code><code>make</code><code>EnvRegistry</code></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># gym/envs/registration.py</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">EnvRegistry</span><span class=\"params\">(object)</span>:</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self)</span>:</span></div><div class=\"line\">    \t<span class=\"comment\"># </span></div><div class=\"line\">    \t<span class=\"comment\"># key:\te.g., 'CartPole-v0'</span></div><div class=\"line\">    \t<span class=\"comment\"># value:EnvSpec</span></div><div class=\"line\">        self.env_specs = &#123;&#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">make</span><span class=\"params\">(self, id)</span>:</span></div><div class=\"line\">        ...</div><div class=\"line\"></div><div class=\"line\">        <span class=\"comment\"># </span></div><div class=\"line\">        spec = self.spec(id)</div><div class=\"line\">        <span class=\"comment\"># </span></div><div class=\"line\">        env = spec.make()</div><div class=\"line\"></div><div class=\"line\">        ...</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">return</span> env</div><div class=\"line\"></div><div class=\"line\">    ...</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">spec</span><span class=\"params\">(self, id)</span>:</span></div><div class=\"line\">        ...</div><div class=\"line\"></div><div class=\"line\">    ...</div></pre></td></tr></table></figure>\n<p><code>EnvRegistry</code><code>make</code><code>EnvSpec</code><code>make</code><code>EnvSpec</code></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># gym/envs/registration.py</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">load</span><span class=\"params\">(name)</span>:</span></div><div class=\"line\">    ...</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># EnvSpecEnv</span></div><div class=\"line\"><span class=\"comment\"># </span></div><div class=\"line\"><span class=\"comment\"># </span></div><div class=\"line\"><span class=\"comment\"># EnvEnvSpec</span></div><div class=\"line\"><span class=\"comment\"># EnvRegistry.make(self, id)specspec.make()</span></div><div class=\"line\"><span class=\"comment\"># EnvSpecEnv</span></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">EnvSpec</span><span class=\"params\">(object)</span>:</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, id, entry_point=None, ...)</span>:</span></div><div class=\"line\">    \tself.id = id</div><div class=\"line\">        ...</div><div class=\"line\">        self._entry_point = entry_point</div><div class=\"line\">        ...</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">make</span><span class=\"params\">(self)</span>:</span></div><div class=\"line\">        ...</div><div class=\"line\"></div><div class=\"line\">        <span class=\"comment\"># </span></div><div class=\"line\">        <span class=\"comment\"># </span></div><div class=\"line\">        <span class=\"comment\"># from self._entry_point import classA</span></div><div class=\"line\">        <span class=\"comment\"># cls = classA</span></div><div class=\"line\">        cls = load(self._entry_point)</div><div class=\"line\">        <span class=\"comment\"># </span></div><div class=\"line\">        env = cls(**self._kwargs)</div><div class=\"line\"></div><div class=\"line\">        ...</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">return</span> env</div><div class=\"line\"></div><div class=\"line\">    ...</div></pre></td></tr></table></figure>\n<p>Gym</p>\n<ul>\n<li><code>gym.make(id)</code><code>EnvRegistry</code><code>EnvSpec</code><code>EnvSpec</code><code>entry_point</code><code>import</code><code>Env</code></li>\n<li><code>env.reset()</code><code>env.step(a)</code><code>_reset(self)</code><code>_step(self, action)</code></li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Gym</p>\n<ul>\n<li><code>Env</code><code>FooEnv</code></li>\n<li><code>FooEnv</code>i.e., <code>FooEnv</code><code>registry.env_specs</code><code>gym.make(id)</code><code>FooEnv</code></li>\n</ul>\n<p><a href=\"https://github.com/openai/gym/tree/master/gym/envs\" target=\"_blank\" rel=\"external\"></a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">gym-foo/</div><div class=\"line\">  README.md</div><div class=\"line\">  setup.py \t\t\t#gym_foopackage</div><div class=\"line\">  gym_foo/ \t\t\t#</div><div class=\"line\">    __init__.py \t#FooEnv</div><div class=\"line\">    envs/</div><div class=\"line\">      __init__.py</div><div class=\"line\">      foo_env.py \t#FooEnv</div></pre></td></tr></table></figure>\n<p><code>FooEnv</code><code>_step(self, action)</code><code>_reset(self)</code></p>\n<p><code>FooEnv</code><strong></strong>Gym<strong>API</strong>APIFooEnv<code>gym-foo/gym_foo/__init__.py</code></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># gym-foo/gym_foo/__init__.py</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">from</span> gym.envs.registration <span class=\"keyword\">import</span> register</div><div class=\"line\"></div><div class=\"line\">register(</div><div class=\"line\">    id=<span class=\"string\">'foo-v0'</span>, \t<span class=\"comment\"># </span></div><div class=\"line\">    entry_point=<span class=\"string\">'gym_foo.envs:FooEnv'</span>, \t<span class=\"comment\"># import</span></div><div class=\"line\">)</div></pre></td></tr></table></figure>\n<p><code>register</code><code>register</code></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># gym/envs/registration.py</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Have a global registry</span></div><div class=\"line\">registry = EnvRegistry()</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># GymAPI</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">register</span><span class=\"params\">(id, **kwargs)</span>:</span></div><div class=\"line\">    <span class=\"keyword\">return</span> registry.register(id, **kwargs)</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">make</span><span class=\"params\">(id)</span>:</span></div><div class=\"line\">    <span class=\"keyword\">return</span> registry.make(id)</div></pre></td></tr></table></figure>\n<p><code>register</code><code>EnvRegistry</code><code>register</code></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># gym/envs/registration.py</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">EnvRegistry</span><span class=\"params\">(object)</span>:</span></div><div class=\"line\">\t...</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">register</span><span class=\"params\">(self, id, **kwargs)</span>:</span></div><div class=\"line\">        ...</div><div class=\"line\">        <span class=\"comment\"># FooEnv</span></div><div class=\"line\">        self.env_specs[id] = EnvSpec(id, **kwargs)</div></pre></td></tr></table></figure>\n<p>API<code>register</code><code>FooEnv</code></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"server-render\"><a href=\"#server-render\" class=\"headerlink\" title=\"server render\"></a>server render</h3><p>sshserverserveri.e., <code>python main.py</code><code>env.render()</code><br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># main.py</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">import</span> gym</div><div class=\"line\"><span class=\"keyword\">from</span> gym <span class=\"keyword\">import</span> wrappers</div><div class=\"line\"></div><div class=\"line\">env = gym.make(<span class=\"string\">'CartPole-v0'</span>)</div><div class=\"line\">env = wrappers.Monitor(env, <span class=\"string\">'video'</span>)</div><div class=\"line\"><span class=\"keyword\">for</span> i_episode <span class=\"keyword\">in</span> range(<span class=\"number\">20</span>):</div><div class=\"line\">    observation = env.reset()</div><div class=\"line\">    <span class=\"keyword\">for</span> t <span class=\"keyword\">in</span> range(<span class=\"number\">100</span>):</div><div class=\"line\">        env.render()</div><div class=\"line\">        action = env.action_space.sample()</div><div class=\"line\">        observation, reward, done, info = env.step(action)</div><div class=\"line\">        <span class=\"keyword\">if</span> done:</div><div class=\"line\">            <span class=\"keyword\">break</span></div></pre></td></tr></table></figure></p>\n<p><code>pyglet.canvas.xlib.NoSuchDisplayException: Cannot connect to &quot;None&quot;</code></p>\n<p><code>env.render()</code><strong></strong>sshserver<strong></strong><code>xvfb-run</code></p>\n<p><code>xvfb-run -a -s &quot;-screen 0 1400x900x24 +extension RANDR&quot; -- python main.py</code></p>\n<p><code>pyglet requires an X server with GLX</code><strong>cuda</strong><code>--no-opengl</code>flag<a href=\"https://gist.github.com/8enmann/931ec2a9dc45fde871d2139a7d1f2d78\" target=\"_blank\" rel=\"external\"></a><a href=\"https://davidsanwald.github.io/2016/11/13/building-tensorflow-with-gpu-support.html\" target=\"_blank\" rel=\"external\"></a></p>\n<h3 id=\"episode\"><a href=\"#episode\" class=\"headerlink\" title=\"episode\"></a>episode</h3><p><code>wrappers.Monitor</code>episodeepisode</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">env = wrappers.Monitor(env, <span class=\"string\">'video'</span>, video_callable=<span class=\"keyword\">lambda</span> episode_id: <span class=\"keyword\">True</span>)</div></pre></td></tr></table></figure>\n<h3 id=\"episodestep\"><a href=\"#episodestep\" class=\"headerlink\" title=\"episodestep\"></a>episodestep</h3><p><code>env._max_episode_steps = xxx</code>env<code>TimeLimit</code></p>\n<h3 id=\"wrapper\"><a href=\"#wrapper\" class=\"headerlink\" title=\"wrapper\"></a>wrapper</h3><ul>\n<li>wrappere.g., <code>Monitor</code><code>Monitor</code><code>Monitor</code><code>TimeLimit</code>double wrapper</li>\n<li><code>FooEnv</code><code>max_episode_steps=xxx</code><code>Env</code><code>TimeLimit</code>wrapper<code>FooEnv</code></li>\n<li><code>Monitor</code><code>recorder</code><code>stat_recorder</code>reward<code>video_recorder</code><code>Monitor</code><code>env.reset</code><code>env.step</code><code>render</code></li>\n</ul>\n<h3 id=\"log\"><a href=\"#log\" class=\"headerlink\" title=\"log\"></a>log</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># main.py</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">import</span> logging</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># suppress INFO level logging 'Making new env: ...'</span></div><div class=\"line\">logging.getLogger(<span class=\"string\">'gym.envs.registration'</span>).setLevel(logging.WARNING)</div><div class=\"line\"><span class=\"comment\"># suppress INFO level logging 'Starting new video recorder writing to ...'</span></div><div class=\"line\">logging.getLogger(<span class=\"string\">'gym.monitoring.video_recorder'</span>).setLevel(logging.WARNING)</div><div class=\"line\"><span class=\"comment\"># suppress INFO level logging 'Creating monitor directory ...'</span></div><div class=\"line\">logging.getLogger(<span class=\"string\">'gym.wrappers.monitoring'</span>).setLevel(logging.WARNING)</div></pre></td></tr></table></figure>","excerpt":"","more":"<p>Gym<strong></strong><strong>Gym</strong>Gym<strong></strong></p>\n<h2 id=\"Gym\"><a href=\"#Gym\" class=\"headerlink\" title=\"Gym\"></a>Gym</h2><p>Gym</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># main.py</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">import</span> gym</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">choose_action</span><span class=\"params\">(o)</span>:</span></div><div class=\"line\">\t...</div><div class=\"line\"></div><div class=\"line\">env = gym.make(<span class=\"string\">'CartPole-v0'</span>)</div><div class=\"line\">o = env.reset()</div><div class=\"line\"><span class=\"keyword\">while</span> <span class=\"keyword\">True</span>:</div><div class=\"line\">\ta = choose_action(o)</div><div class=\"line\">\to_, r, done, info = env.step(a)</div><div class=\"line\">\to = o_</div><div class=\"line\">\t<span class=\"keyword\">if</span> done:</div><div class=\"line\">\t\t<span class=\"keyword\">break</span></div></pre></td></tr></table></figure>\n<p></p>\n<ul>\n<li><code>env = gym.make(&#39;CartPole-v0&#39;)</code></li>\n<li><code>env.reset()</code></li>\n<li><code>env.step(a)</code></li>\n</ul>\n<hr>\n<p><code>env.reset()</code><code>env.step(a)</code><code>Env</code><code>Env</code></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># gym/core.py</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Env</span><span class=\"params\">(object)</span>:</span></div><div class=\"line\">\t...</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\"># Override in ALL subclasses</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">_step</span><span class=\"params\">(self, action)</span>:</span> <span class=\"keyword\">raise</span> NotImplementedError</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">_reset</span><span class=\"params\">(self)</span>:</span> <span class=\"keyword\">raise</span> NotImplementedError</div><div class=\"line\"></div><div class=\"line\">    ...</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">step</span><span class=\"params\">(self, action)</span>:</span></div><div class=\"line\">        <span class=\"keyword\">return</span> self._step(action)</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">reset</span><span class=\"params\">(self)</span>:</span></div><div class=\"line\">        <span class=\"keyword\">return</span> self._reset()</div><div class=\"line\"></div><div class=\"line\">    ...</div></pre></td></tr></table></figure>\n<p><code>_reset(self)</code><code>_step(self, action)</code><code>CartPoleEnv</code></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># gym/envs/classic_control/CartPole.py</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CartPoleEnv</span><span class=\"params\">(gym.Env)</span>:</span></div><div class=\"line\">\t...</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">_step</span><span class=\"params\">(self, action)</span>:</span></div><div class=\"line\">        ...</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">_reset</span><span class=\"params\">(self)</span>:</span></div><div class=\"line\">        ...</div><div class=\"line\"></div><div class=\"line\">    ...</div></pre></td></tr></table></figure>\n<p><code>env.reset()</code><code>env.step(a)</code><code>_reset(self)</code><code>_step(self, action)</code></p>\n<hr>\n<p><code>gym.make(&#39;CartPole-v0&#39;)</code></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># gym/envs/registration.py</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Have a global registry</span></div><div class=\"line\">registry = EnvRegistry()</div><div class=\"line\"></div><div class=\"line\">...</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">make</span><span class=\"params\">(id)</span>:</span></div><div class=\"line\">    <span class=\"keyword\">return</span> registry.make(id)</div></pre></td></tr></table></figure>\n<p><code>gym.make</code><code>EnvRegistry</code><code>make</code><code>EnvRegistry</code></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># gym/envs/registration.py</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">EnvRegistry</span><span class=\"params\">(object)</span>:</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self)</span>:</span></div><div class=\"line\">    \t<span class=\"comment\"># </span></div><div class=\"line\">    \t<span class=\"comment\"># key:\te.g., 'CartPole-v0'</span></div><div class=\"line\">    \t<span class=\"comment\"># value:EnvSpec</span></div><div class=\"line\">        self.env_specs = &#123;&#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">make</span><span class=\"params\">(self, id)</span>:</span></div><div class=\"line\">        ...</div><div class=\"line\"></div><div class=\"line\">        <span class=\"comment\"># </span></div><div class=\"line\">        spec = self.spec(id)</div><div class=\"line\">        <span class=\"comment\"># </span></div><div class=\"line\">        env = spec.make()</div><div class=\"line\"></div><div class=\"line\">        ...</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">return</span> env</div><div class=\"line\"></div><div class=\"line\">    ...</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">spec</span><span class=\"params\">(self, id)</span>:</span></div><div class=\"line\">        ...</div><div class=\"line\"></div><div class=\"line\">    ...</div></pre></td></tr></table></figure>\n<p><code>EnvRegistry</code><code>make</code><code>EnvSpec</code><code>make</code><code>EnvSpec</code></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># gym/envs/registration.py</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">load</span><span class=\"params\">(name)</span>:</span></div><div class=\"line\">    ...</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># EnvSpecEnv</span></div><div class=\"line\"><span class=\"comment\"># </span></div><div class=\"line\"><span class=\"comment\"># </span></div><div class=\"line\"><span class=\"comment\"># EnvEnvSpec</span></div><div class=\"line\"><span class=\"comment\"># EnvRegistry.make(self, id)specspec.make()</span></div><div class=\"line\"><span class=\"comment\"># EnvSpecEnv</span></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">EnvSpec</span><span class=\"params\">(object)</span>:</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, id, entry_point=None, ...)</span>:</span></div><div class=\"line\">    \tself.id = id</div><div class=\"line\">        ...</div><div class=\"line\">        self._entry_point = entry_point</div><div class=\"line\">        ...</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">make</span><span class=\"params\">(self)</span>:</span></div><div class=\"line\">        ...</div><div class=\"line\"></div><div class=\"line\">        <span class=\"comment\"># </span></div><div class=\"line\">        <span class=\"comment\"># </span></div><div class=\"line\">        <span class=\"comment\"># from self._entry_point import classA</span></div><div class=\"line\">        <span class=\"comment\"># cls = classA</span></div><div class=\"line\">        cls = load(self._entry_point)</div><div class=\"line\">        <span class=\"comment\"># </span></div><div class=\"line\">        env = cls(**self._kwargs)</div><div class=\"line\"></div><div class=\"line\">        ...</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">return</span> env</div><div class=\"line\"></div><div class=\"line\">    ...</div></pre></td></tr></table></figure>\n<p>Gym</p>\n<ul>\n<li><code>gym.make(id)</code><code>EnvRegistry</code><code>EnvSpec</code><code>EnvSpec</code><code>entry_point</code><code>import</code><code>Env</code></li>\n<li><code>env.reset()</code><code>env.step(a)</code><code>_reset(self)</code><code>_step(self, action)</code></li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Gym</p>\n<ul>\n<li><code>Env</code><code>FooEnv</code></li>\n<li><code>FooEnv</code>i.e., <code>FooEnv</code><code>registry.env_specs</code><code>gym.make(id)</code><code>FooEnv</code></li>\n</ul>\n<p><a href=\"https://github.com/openai/gym/tree/master/gym/envs\"></a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">gym-foo/</div><div class=\"line\">  README.md</div><div class=\"line\">  setup.py \t\t\t#gym_foopackage</div><div class=\"line\">  gym_foo/ \t\t\t#</div><div class=\"line\">    __init__.py \t#FooEnv</div><div class=\"line\">    envs/</div><div class=\"line\">      __init__.py</div><div class=\"line\">      foo_env.py \t#FooEnv</div></pre></td></tr></table></figure>\n<p><code>FooEnv</code><code>_step(self, action)</code><code>_reset(self)</code></p>\n<p><code>FooEnv</code><strong></strong>Gym<strong>API</strong>APIFooEnv<code>gym-foo/gym_foo/__init__.py</code></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># gym-foo/gym_foo/__init__.py</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">from</span> gym.envs.registration <span class=\"keyword\">import</span> register</div><div class=\"line\"></div><div class=\"line\">register(</div><div class=\"line\">    id=<span class=\"string\">'foo-v0'</span>, \t<span class=\"comment\"># </span></div><div class=\"line\">    entry_point=<span class=\"string\">'gym_foo.envs:FooEnv'</span>, \t<span class=\"comment\"># import</span></div><div class=\"line\">)</div></pre></td></tr></table></figure>\n<p><code>register</code><code>register</code></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># gym/envs/registration.py</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Have a global registry</span></div><div class=\"line\">registry = EnvRegistry()</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># GymAPI</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">register</span><span class=\"params\">(id, **kwargs)</span>:</span></div><div class=\"line\">    <span class=\"keyword\">return</span> registry.register(id, **kwargs)</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">make</span><span class=\"params\">(id)</span>:</span></div><div class=\"line\">    <span class=\"keyword\">return</span> registry.make(id)</div></pre></td></tr></table></figure>\n<p><code>register</code><code>EnvRegistry</code><code>register</code></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># gym/envs/registration.py</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">EnvRegistry</span><span class=\"params\">(object)</span>:</span></div><div class=\"line\">\t...</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">register</span><span class=\"params\">(self, id, **kwargs)</span>:</span></div><div class=\"line\">        ...</div><div class=\"line\">        <span class=\"comment\"># FooEnv</span></div><div class=\"line\">        self.env_specs[id] = EnvSpec(id, **kwargs)</div></pre></td></tr></table></figure>\n<p>API<code>register</code><code>FooEnv</code></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"server-render\"><a href=\"#server-render\" class=\"headerlink\" title=\"server render\"></a>server render</h3><p>sshserverserveri.e., <code>python main.py</code><code>env.render()</code><br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># main.py</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">import</span> gym</div><div class=\"line\"><span class=\"keyword\">from</span> gym <span class=\"keyword\">import</span> wrappers</div><div class=\"line\"></div><div class=\"line\">env = gym.make(<span class=\"string\">'CartPole-v0'</span>)</div><div class=\"line\">env = wrappers.Monitor(env, <span class=\"string\">'video'</span>)</div><div class=\"line\"><span class=\"keyword\">for</span> i_episode <span class=\"keyword\">in</span> range(<span class=\"number\">20</span>):</div><div class=\"line\">    observation = env.reset()</div><div class=\"line\">    <span class=\"keyword\">for</span> t <span class=\"keyword\">in</span> range(<span class=\"number\">100</span>):</div><div class=\"line\">        env.render()</div><div class=\"line\">        action = env.action_space.sample()</div><div class=\"line\">        observation, reward, done, info = env.step(action)</div><div class=\"line\">        <span class=\"keyword\">if</span> done:</div><div class=\"line\">            <span class=\"keyword\">break</span></div></pre></td></tr></table></figure></p>\n<p><code>pyglet.canvas.xlib.NoSuchDisplayException: Cannot connect to &quot;None&quot;</code></p>\n<p><code>env.render()</code><strong></strong>sshserver<strong></strong><code>xvfb-run</code></p>\n<p><code>xvfb-run -a -s &quot;-screen 0 1400x900x24 +extension RANDR&quot; -- python main.py</code></p>\n<p><code>pyglet requires an X server with GLX</code><strong>cuda</strong><code>--no-opengl</code>flag<a href=\"https://gist.github.com/8enmann/931ec2a9dc45fde871d2139a7d1f2d78\"></a><a href=\"https://davidsanwald.github.io/2016/11/13/building-tensorflow-with-gpu-support.html\"></a></p>\n<h3 id=\"episode\"><a href=\"#episode\" class=\"headerlink\" title=\"episode\"></a>episode</h3><p><code>wrappers.Monitor</code>episodeepisode</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">env = wrappers.Monitor(env, <span class=\"string\">'video'</span>, video_callable=<span class=\"keyword\">lambda</span> episode_id: <span class=\"keyword\">True</span>)</div></pre></td></tr></table></figure>\n<h3 id=\"episodestep\"><a href=\"#episodestep\" class=\"headerlink\" title=\"episodestep\"></a>episodestep</h3><p><code>env._max_episode_steps = xxx</code>env<code>TimeLimit</code></p>\n<h3 id=\"wrapper\"><a href=\"#wrapper\" class=\"headerlink\" title=\"wrapper\"></a>wrapper</h3><ul>\n<li>wrappere.g., <code>Monitor</code><code>Monitor</code><code>Monitor</code><code>TimeLimit</code>double wrapper</li>\n<li><code>FooEnv</code><code>max_episode_steps=xxx</code><code>Env</code><code>TimeLimit</code>wrapper<code>FooEnv</code></li>\n<li><code>Monitor</code><code>recorder</code><code>stat_recorder</code>reward<code>video_recorder</code><code>Monitor</code><code>env.reset</code><code>env.step</code><code>render</code></li>\n</ul>\n<h3 id=\"log\"><a href=\"#log\" class=\"headerlink\" title=\"log\"></a>log</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># main.py</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">import</span> logging</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># suppress INFO level logging 'Making new env: ...'</span></div><div class=\"line\">logging.getLogger(<span class=\"string\">'gym.envs.registration'</span>).setLevel(logging.WARNING)</div><div class=\"line\"><span class=\"comment\"># suppress INFO level logging 'Starting new video recorder writing to ...'</span></div><div class=\"line\">logging.getLogger(<span class=\"string\">'gym.monitoring.video_recorder'</span>).setLevel(logging.WARNING)</div><div class=\"line\"><span class=\"comment\"># suppress INFO level logging 'Creating monitor directory ...'</span></div><div class=\"line\">logging.getLogger(<span class=\"string\">'gym.wrappers.monitoring'</span>).setLevel(logging.WARNING)</div></pre></td></tr></table></figure>"},{"title":"UbuntuUSB","date":"2021-12-29T14:08:35.000Z","description":["USBLinux"],"_content":"\nPCUSBUSBLinux\n\nUSBWindows\n\n\n\n1. \n2. `rtl_bt/rtl8761b_fw.bin not found`\n3. `rtl8761b``rtl8761a`\n\n**5.0USB**5.05.0\n\n## \n\nUSBPCPC\n\n`dmesg | grep -i bluetooth`Ubuntu\n\n- Ubuntu 20: `rtl_bt/rtl8761b_fw.bin not found`\n- Ubuntu 18: `rtl8761b``rtl8761a`\n\ngood luck\n\n\n\n## `rtl_bt/rtl8761b_fw.bin not found`\n\n\n\n1. [](https://github.com/Realtek-OpenSource/android_hardware_realtek/tree/rtk1395/bt/rtkbt/Firmware/BT)`rtl8761b_fw``rtl8761b_config`\n2. `/usr/lib/firmware/rtl_bt/`\n3. USB\n\n## `rtl8761b``rtl8761a`\n\n**Ubuntu 20`rtl8761b`workUSB`rtl8761b`**\n\n\n\n1. `uname -r`\n2. [](https://github.com/torvalds/linux/tree/master)`tag`\n3. [](https://discourse.coreelec.org/t/rtl8761b-bluetooth-driver-fix/15286)\n4. [](https://gist.github.com/rometsch/dfd24fb09c85c1ad2f25223dc1481aaa#patch-the-bluetooth-kernel-module)\n5. \n\n## References\n\n- https://linuxreviews.org/Realtek_RTL8761B\n- https://blog.csdn.net/avatar1912/article/details/120851889","source":"_posts/tech-ubuntu-bluetooth.md","raw":"---\ntitle: UbuntuUSB\ndate: 2021-12-29 22:08:35\ntags:\n\t- Ubuntu USB\ncategories:\n\t- \ndescription:\n\t- USBLinux\n---\n\nPCUSBUSBLinux\n\nUSBWindows\n\n\n\n1. \n2. `rtl_bt/rtl8761b_fw.bin not found`\n3. `rtl8761b``rtl8761a`\n\n**5.0USB**5.05.0\n\n## \n\nUSBPCPC\n\n`dmesg | grep -i bluetooth`Ubuntu\n\n- Ubuntu 20: `rtl_bt/rtl8761b_fw.bin not found`\n- Ubuntu 18: `rtl8761b``rtl8761a`\n\ngood luck\n\n\n\n## `rtl_bt/rtl8761b_fw.bin not found`\n\n\n\n1. [](https://github.com/Realtek-OpenSource/android_hardware_realtek/tree/rtk1395/bt/rtkbt/Firmware/BT)`rtl8761b_fw``rtl8761b_config`\n2. `/usr/lib/firmware/rtl_bt/`\n3. USB\n\n## `rtl8761b``rtl8761a`\n\n**Ubuntu 20`rtl8761b`workUSB`rtl8761b`**\n\n\n\n1. `uname -r`\n2. [](https://github.com/torvalds/linux/tree/master)`tag`\n3. [](https://discourse.coreelec.org/t/rtl8761b-bluetooth-driver-fix/15286)\n4. [](https://gist.github.com/rometsch/dfd24fb09c85c1ad2f25223dc1481aaa#patch-the-bluetooth-kernel-module)\n5. \n\n## References\n\n- https://linuxreviews.org/Realtek_RTL8761B\n- https://blog.csdn.net/avatar1912/article/details/120851889","slug":"tech-ubuntu-bluetooth","published":1,"updated":"2024-08-13T16:03:47.884Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clzvf192o0024eqwoyxd6pbvq","content":"<p>PCUSBUSBLinux</p>\n<p>USBWindows</p>\n<p></p>\n<ol>\n<li></li>\n<li><code>rtl_bt/rtl8761b_fw.bin not found</code></li>\n<li><code>rtl8761b</code><code>rtl8761a</code></li>\n</ol>\n<p><strong>5.0USB</strong>5.05.0</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>USBPCPC</p>\n<p><code>dmesg | grep -i bluetooth</code>Ubuntu</p>\n<ul>\n<li>Ubuntu 20: <code>rtl_bt/rtl8761b_fw.bin not found</code></li>\n<li>Ubuntu 18: <code>rtl8761b</code><code>rtl8761a</code></li>\n</ul>\n<p>good luck</p>\n<p></p>\n<h2 id=\"rtl-bt-rtl8761b-fw-bin-not-found\"><a href=\"#rtl-bt-rtl8761b-fw-bin-not-found\" class=\"headerlink\" title=\"rtl_bt/rtl8761b_fw.bin not found\"></a><code>rtl_bt/rtl8761b_fw.bin not found</code></h2><p></p>\n<ol>\n<li><a href=\"https://github.com/Realtek-OpenSource/android_hardware_realtek/tree/rtk1395/bt/rtkbt/Firmware/BT\" target=\"_blank\" rel=\"external\"></a><code>rtl8761b_fw</code><code>rtl8761b_config</code></li>\n<li><code>/usr/lib/firmware/rtl_bt/</code></li>\n<li>USB</li>\n</ol>\n<h2 id=\"rtl8761brtl8761a\"><a href=\"#rtl8761brtl8761a\" class=\"headerlink\" title=\"rtl8761brtl8761a\"></a><code>rtl8761b</code><code>rtl8761a</code></h2><p><strong>Ubuntu 20<code>rtl8761b</code>workUSB<code>rtl8761b</code></strong></p>\n<p></p>\n<ol>\n<li><code>uname -r</code></li>\n<li><a href=\"https://github.com/torvalds/linux/tree/master\" target=\"_blank\" rel=\"external\"></a><code>tag</code></li>\n<li><a href=\"https://discourse.coreelec.org/t/rtl8761b-bluetooth-driver-fix/15286\" target=\"_blank\" rel=\"external\"></a></li>\n<li><a href=\"https://gist.github.com/rometsch/dfd24fb09c85c1ad2f25223dc1481aaa#patch-the-bluetooth-kernel-module\" target=\"_blank\" rel=\"external\"></a></li>\n<li></li>\n</ol>\n<h2 id=\"References\"><a href=\"#References\" class=\"headerlink\" title=\"References\"></a>References</h2><ul>\n<li><a href=\"https://linuxreviews.org/Realtek_RTL8761B\" target=\"_blank\" rel=\"external\">https://linuxreviews.org/Realtek_RTL8761B</a></li>\n<li><a href=\"https://blog.csdn.net/avatar1912/article/details/120851889\" target=\"_blank\" rel=\"external\">https://blog.csdn.net/avatar1912/article/details/120851889</a></li>\n</ul>\n","excerpt":"","more":"<p>PCUSBUSBLinux</p>\n<p>USBWindows</p>\n<p></p>\n<ol>\n<li></li>\n<li><code>rtl_bt/rtl8761b_fw.bin not found</code></li>\n<li><code>rtl8761b</code><code>rtl8761a</code></li>\n</ol>\n<p><strong>5.0USB</strong>5.05.0</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>USBPCPC</p>\n<p><code>dmesg | grep -i bluetooth</code>Ubuntu</p>\n<ul>\n<li>Ubuntu 20: <code>rtl_bt/rtl8761b_fw.bin not found</code></li>\n<li>Ubuntu 18: <code>rtl8761b</code><code>rtl8761a</code></li>\n</ul>\n<p>good luck</p>\n<p></p>\n<h2 id=\"rtl-bt-rtl8761b-fw-bin-not-found\"><a href=\"#rtl-bt-rtl8761b-fw-bin-not-found\" class=\"headerlink\" title=\"rtl_bt/rtl8761b_fw.bin not found\"></a><code>rtl_bt/rtl8761b_fw.bin not found</code></h2><p></p>\n<ol>\n<li><a href=\"https://github.com/Realtek-OpenSource/android_hardware_realtek/tree/rtk1395/bt/rtkbt/Firmware/BT\"></a><code>rtl8761b_fw</code><code>rtl8761b_config</code></li>\n<li><code>/usr/lib/firmware/rtl_bt/</code></li>\n<li>USB</li>\n</ol>\n<h2 id=\"rtl8761brtl8761a\"><a href=\"#rtl8761brtl8761a\" class=\"headerlink\" title=\"rtl8761brtl8761a\"></a><code>rtl8761b</code><code>rtl8761a</code></h2><p><strong>Ubuntu 20<code>rtl8761b</code>workUSB<code>rtl8761b</code></strong></p>\n<p></p>\n<ol>\n<li><code>uname -r</code></li>\n<li><a href=\"https://github.com/torvalds/linux/tree/master\"></a><code>tag</code></li>\n<li><a href=\"https://discourse.coreelec.org/t/rtl8761b-bluetooth-driver-fix/15286\"></a></li>\n<li><a href=\"https://gist.github.com/rometsch/dfd24fb09c85c1ad2f25223dc1481aaa#patch-the-bluetooth-kernel-module\"></a></li>\n<li></li>\n</ol>\n<h2 id=\"References\"><a href=\"#References\" class=\"headerlink\" title=\"References\"></a>References</h2><ul>\n<li><a href=\"https://linuxreviews.org/Realtek_RTL8761B\">https://linuxreviews.org/Realtek_RTL8761B</a></li>\n<li><a href=\"https://blog.csdn.net/avatar1912/article/details/120851889\">https://blog.csdn.net/avatar1912/article/details/120851889</a></li>\n</ul>\n"},{"title":"Ubuntu to Go","date":"2021-12-11T02:11:00.000Z","description":["UbuntuU"],"_content":"\n*Ubuntu to Go*\n\n*Ubuntu to Go**Windows to Go*UU\n\n*Ubuntu**Ubuntu*\n\n\n\n1. *Ubuntu to Go**Ubuntu*\n2. \n\n## \n\n*Ubuntu*UBoot LoaderU\n\n*Ubuntu*BugFeatureBoot LoaderEFIEFIUUEFIBoot LoaderUU*Ubuntu*\n\n\n\n1. UEFI\n2. Boot LoaderEFI\n\n## UEFI\n\n*Ubuntu*FAT32100MBEFI\n\n## Boot LoaderEFI\n\nInstaller\n\n1. EFIUEFI`/dev/sda2``/dev/sdb1`\n```sh\nsudo fdisk -l\n\nDevice         Start       End   Sectors   Size Type\n/dev/sda1       2048    923647    921600   450M Windows recovery environment\n/dev/sda2     923648   1126399    202752    99M EFI System\n/dev/sda3    1126400   1159167     32768    16M Microsoft reserved\n/dev/sda4    1159168 248347899 247188732 117.9G Microsoft basic data\n/dev/sda5  248348672 250066943   1718272   839M Windows recovery environment\n\n...\n\nDevice       Start        End    Sectors   Size Type\n/dev/sdb1     2048     194559     192512    94M EFI System\n/dev/sdb2   194560    8194047    7999488   3.8G Linux swap\n/dev/sdb3  8194048 1953457719 1945263672 927.6G Linux filesystem\n\n```\n2. Boot LoaderUEFI\n```sh\n# EFI\nmkdir windows_epi ubuntu_epi\nsudo mount /dev/sda2 windows_epi\nsudo mount /dev/sdb1 ubuntu_epi\n# \nmkdir ubuntu_epi/EFI\ncp -r windows_epi/EFI/Boot ubuntu_epi/EFI\nmv windows_epi/EFI/ubuntu ubuntu_epi/EFI\nsudo sync; umount windows_epi; umount ubuntu_epi; sync\n```\n\n## \n\n*Ubuntu*UUEFIBootU*Ubuntu*\n\n## References\n\n- [1] [Legacy / UEFI / MBR / GPT](https://zhuanlan.zhihu.com/p/262069479)\n- [2] [EFI / Boot Loader / GRUB](https://blog.csdn.net/u011433762/article/details/49934253)\n- [3] [Boot LoaderU](https://meaningofstuff.blogspot.com/2019/09/linux-ubuntu-1904-full-install-on-usb.html)\n- [4] [WindowsGrub](https://askubuntu.com/questions/429610/uninstall-grub-and-use-windows-bootloader/869888#869888)\n","source":"_posts/tech-ubuntu-to-go.md","raw":"---\ntitle: Ubuntu to Go\ndate: 2021-12-11 10:11:00\ntags:\n\t- Ubuntu to Go\ncategories:\n\t- \ndescription:\n\t- UbuntuU\n---\n\n*Ubuntu to Go*\n\n*Ubuntu to Go**Windows to Go*UU\n\n*Ubuntu**Ubuntu*\n\n\n\n1. *Ubuntu to Go**Ubuntu*\n2. \n\n## \n\n*Ubuntu*UBoot LoaderU\n\n*Ubuntu*BugFeatureBoot LoaderEFIEFIUUEFIBoot LoaderUU*Ubuntu*\n\n\n\n1. UEFI\n2. Boot LoaderEFI\n\n## UEFI\n\n*Ubuntu*FAT32100MBEFI\n\n## Boot LoaderEFI\n\nInstaller\n\n1. EFIUEFI`/dev/sda2``/dev/sdb1`\n```sh\nsudo fdisk -l\n\nDevice         Start       End   Sectors   Size Type\n/dev/sda1       2048    923647    921600   450M Windows recovery environment\n/dev/sda2     923648   1126399    202752    99M EFI System\n/dev/sda3    1126400   1159167     32768    16M Microsoft reserved\n/dev/sda4    1159168 248347899 247188732 117.9G Microsoft basic data\n/dev/sda5  248348672 250066943   1718272   839M Windows recovery environment\n\n...\n\nDevice       Start        End    Sectors   Size Type\n/dev/sdb1     2048     194559     192512    94M EFI System\n/dev/sdb2   194560    8194047    7999488   3.8G Linux swap\n/dev/sdb3  8194048 1953457719 1945263672 927.6G Linux filesystem\n\n```\n2. Boot LoaderUEFI\n```sh\n# EFI\nmkdir windows_epi ubuntu_epi\nsudo mount /dev/sda2 windows_epi\nsudo mount /dev/sdb1 ubuntu_epi\n# \nmkdir ubuntu_epi/EFI\ncp -r windows_epi/EFI/Boot ubuntu_epi/EFI\nmv windows_epi/EFI/ubuntu ubuntu_epi/EFI\nsudo sync; umount windows_epi; umount ubuntu_epi; sync\n```\n\n## \n\n*Ubuntu*UUEFIBootU*Ubuntu*\n\n## References\n\n- [1] [Legacy / UEFI / MBR / GPT](https://zhuanlan.zhihu.com/p/262069479)\n- [2] [EFI / Boot Loader / GRUB](https://blog.csdn.net/u011433762/article/details/49934253)\n- [3] [Boot LoaderU](https://meaningofstuff.blogspot.com/2019/09/linux-ubuntu-1904-full-install-on-usb.html)\n- [4] [WindowsGrub](https://askubuntu.com/questions/429610/uninstall-grub-and-use-windows-bootloader/869888#869888)\n","slug":"tech-ubuntu-to-go","published":1,"updated":"2024-08-13T16:03:47.884Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clzvf192p0026eqwoc9y7tmqf","content":"<p><em>Ubuntu to Go</em></p>\n<p><em>Ubuntu to Go</em><em>Windows to Go</em>UU</p>\n<p><em>Ubuntu</em><em>Ubuntu</em></p>\n<p></p>\n<ol>\n<li><em>Ubuntu to Go</em><em>Ubuntu</em></li>\n<li></li>\n</ol>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><em>Ubuntu</em>UBoot LoaderU</p>\n<p><em>Ubuntu</em>BugFeatureBoot LoaderEFIEFIUUEFIBoot LoaderUU<em>Ubuntu</em></p>\n<p></p>\n<ol>\n<li>UEFI</li>\n<li>Boot LoaderEFI</li>\n</ol>\n<h2 id=\"UEFI\"><a href=\"#UEFI\" class=\"headerlink\" title=\"UEFI\"></a>UEFI</h2><p><em>Ubuntu</em>FAT32100MBEFI</p>\n<h2 id=\"Boot-LoaderEFI\"><a href=\"#Boot-LoaderEFI\" class=\"headerlink\" title=\"Boot LoaderEFI\"></a>Boot LoaderEFI</h2><p>Installer</p>\n<ol>\n<li><p>EFIUEFI<code>/dev/sda2</code><code>/dev/sdb1</code></p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo fdisk <span class=\"_\">-l</span></div><div class=\"line\"></div><div class=\"line\">Device         Start       End   Sectors   Size Type</div><div class=\"line\">/dev/sda1       2048    923647    921600   450M Windows recovery environment</div><div class=\"line\">/dev/sda2     923648   1126399    202752    99M EFI System</div><div class=\"line\">/dev/sda3    1126400   1159167     32768    16M Microsoft reserved</div><div class=\"line\">/dev/sda4    1159168 248347899 247188732 117.9G Microsoft basic data</div><div class=\"line\">/dev/sda5  248348672 250066943   1718272   839M Windows recovery environment</div><div class=\"line\"></div><div class=\"line\">...</div><div class=\"line\"></div><div class=\"line\">Device       Start        End    Sectors   Size Type</div><div class=\"line\">/dev/sdb1     2048     194559     192512    94M EFI System</div><div class=\"line\">/dev/sdb2   194560    8194047    7999488   3.8G Linux swap</div><div class=\"line\">/dev/sdb3  8194048 1953457719 1945263672 927.6G Linux filesystem</div></pre></td></tr></table></figure>\n</li>\n<li><p>Boot LoaderUEFI</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># EFI</span></div><div class=\"line\">mkdir windows_epi ubuntu_epi</div><div class=\"line\">sudo mount /dev/sda2 windows_epi</div><div class=\"line\">sudo mount /dev/sdb1 ubuntu_epi</div><div class=\"line\"><span class=\"comment\"># </span></div><div class=\"line\">mkdir ubuntu_epi/EFI</div><div class=\"line\">cp -r windows_epi/EFI/Boot ubuntu_epi/EFI</div><div class=\"line\">mv windows_epi/EFI/ubuntu ubuntu_epi/EFI</div><div class=\"line\">sudo sync; umount windows_epi; umount ubuntu_epi; sync</div></pre></td></tr></table></figure>\n</li>\n</ol>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><em>Ubuntu</em>UUEFIBootU<em>Ubuntu</em></p>\n<h2 id=\"References\"><a href=\"#References\" class=\"headerlink\" title=\"References\"></a>References</h2><ul>\n<li>[1] <a href=\"https://zhuanlan.zhihu.com/p/262069479\" target=\"_blank\" rel=\"external\">Legacy / UEFI / MBR / GPT</a></li>\n<li>[2] <a href=\"https://blog.csdn.net/u011433762/article/details/49934253\" target=\"_blank\" rel=\"external\">EFI / Boot Loader / GRUB</a></li>\n<li>[3] <a href=\"https://meaningofstuff.blogspot.com/2019/09/linux-ubuntu-1904-full-install-on-usb.html\" target=\"_blank\" rel=\"external\">Boot LoaderU</a></li>\n<li>[4] <a href=\"https://askubuntu.com/questions/429610/uninstall-grub-and-use-windows-bootloader/869888#869888\" target=\"_blank\" rel=\"external\">WindowsGrub</a></li>\n</ul>\n","excerpt":"","more":"<p><em>Ubuntu to Go</em></p>\n<p><em>Ubuntu to Go</em><em>Windows to Go</em>UU</p>\n<p><em>Ubuntu</em><em>Ubuntu</em></p>\n<p></p>\n<ol>\n<li><em>Ubuntu to Go</em><em>Ubuntu</em></li>\n<li></li>\n</ol>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><em>Ubuntu</em>UBoot LoaderU</p>\n<p><em>Ubuntu</em>BugFeatureBoot LoaderEFIEFIUUEFIBoot LoaderUU<em>Ubuntu</em></p>\n<p></p>\n<ol>\n<li>UEFI</li>\n<li>Boot LoaderEFI</li>\n</ol>\n<h2 id=\"UEFI\"><a href=\"#UEFI\" class=\"headerlink\" title=\"UEFI\"></a>UEFI</h2><p><em>Ubuntu</em>FAT32100MBEFI</p>\n<h2 id=\"Boot-LoaderEFI\"><a href=\"#Boot-LoaderEFI\" class=\"headerlink\" title=\"Boot LoaderEFI\"></a>Boot LoaderEFI</h2><p>Installer</p>\n<ol>\n<li><p>EFIUEFI<code>/dev/sda2</code><code>/dev/sdb1</code></p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo fdisk <span class=\"_\">-l</span></div><div class=\"line\"></div><div class=\"line\">Device         Start       End   Sectors   Size Type</div><div class=\"line\">/dev/sda1       2048    923647    921600   450M Windows recovery environment</div><div class=\"line\">/dev/sda2     923648   1126399    202752    99M EFI System</div><div class=\"line\">/dev/sda3    1126400   1159167     32768    16M Microsoft reserved</div><div class=\"line\">/dev/sda4    1159168 248347899 247188732 117.9G Microsoft basic data</div><div class=\"line\">/dev/sda5  248348672 250066943   1718272   839M Windows recovery environment</div><div class=\"line\"></div><div class=\"line\">...</div><div class=\"line\"></div><div class=\"line\">Device       Start        End    Sectors   Size Type</div><div class=\"line\">/dev/sdb1     2048     194559     192512    94M EFI System</div><div class=\"line\">/dev/sdb2   194560    8194047    7999488   3.8G Linux swap</div><div class=\"line\">/dev/sdb3  8194048 1953457719 1945263672 927.6G Linux filesystem</div></pre></td></tr></table></figure>\n</li>\n<li><p>Boot LoaderUEFI</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># EFI</span></div><div class=\"line\">mkdir windows_epi ubuntu_epi</div><div class=\"line\">sudo mount /dev/sda2 windows_epi</div><div class=\"line\">sudo mount /dev/sdb1 ubuntu_epi</div><div class=\"line\"><span class=\"comment\"># </span></div><div class=\"line\">mkdir ubuntu_epi/EFI</div><div class=\"line\">cp -r windows_epi/EFI/Boot ubuntu_epi/EFI</div><div class=\"line\">mv windows_epi/EFI/ubuntu ubuntu_epi/EFI</div><div class=\"line\">sudo sync; umount windows_epi; umount ubuntu_epi; sync</div></pre></td></tr></table></figure>\n</li>\n</ol>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><em>Ubuntu</em>UUEFIBootU<em>Ubuntu</em></p>\n<h2 id=\"References\"><a href=\"#References\" class=\"headerlink\" title=\"References\"></a>References</h2><ul>\n<li>[1] <a href=\"https://zhuanlan.zhihu.com/p/262069479\">Legacy / UEFI / MBR / GPT</a></li>\n<li>[2] <a href=\"https://blog.csdn.net/u011433762/article/details/49934253\">EFI / Boot Loader / GRUB</a></li>\n<li>[3] <a href=\"https://meaningofstuff.blogspot.com/2019/09/linux-ubuntu-1904-full-install-on-usb.html\">Boot LoaderU</a></li>\n<li>[4] <a href=\"https://askubuntu.com/questions/429610/uninstall-grub-and-use-windows-bootloader/869888#869888\">WindowsGrub</a></li>\n</ul>\n"},{"title":"Vim","date":"2018-09-27T03:15:27.000Z","description":["Vim"],"_content":"\nVimUbuntu 16.04PythonC++Vim**Vim**Vim****Vim****\n\n## The ultimate Vim configuration\n\n### \n\n[The ultimate Vim configuration](https://github.com/amix/vimrc)VimPathogenVim[](https://www.zhihu.com/question/24294358)****`git clone`[](https://github.com/amix/vimrc#install-for-your-own-user-only)Vim****\n\n```sh\n.vim_runtime\n\n# default plugins & configurations\n sources_forked\n sources_non_forked\n vimrcs\n    basic.vim # general configurations\n    plugins_config.vim # plugin configurations\n\n# custom plugins & configurations\n my_plugins\n my_configs.vim # may not exist\n\n# installer\n install_awesome_vimrc.sh\n```\n\n********\n\n- \n\t- `sources_forked``sources_non_forked`\n\t- `vimrcs`\n\t\t- `basic.vim`e.g., tab4\n\t\t- `plugins_config.vim`\n- \n\t- `my_plugins`\n\t- `my_configs.vim``my_configs.vim``~/.vimrc``.vim``my_configs.vim`\n- \n\t- `install_awesome_vimrc.sh``~/.vimrc`\n\n### \n\n****\n\n- /\n\t- `,nn`Vim\n\t- `,f`\n\t- `:W`sudo\n\t- `gf`\n- \n\t- `gcc`\n\t- `$123 / $q / $e`/\n\t- `Ctrl+s / Ctrl+x / Ctrl+p`\n\t\t- [](https://github.com/amix/vimrc/issues/340)`~/.bashrc``stty -ixon`\n\t- `+ / _`/e.g., \n\t\t- VimPython[](https://github.com/terryma/vim-expand-region/issues/15)\n\t\t\t1. [vim-textobj-user](https://github.com/kana/vim-textobj-user)[vim-textobj-python](https://github.com/bps/vim-textobj-python)`my_plugins`\n\t\t\t2. `my_configs.vim`\n\n```vim\ncall expand_region#custom_text_objects('python', {\n      \\ 'af' :1,\n      \\ 'if' :1,\n      \\ 'ac' :1,\n      \\ 'ic' :1,\n      \\ })\n```\n\n## \n\n[The ultimate Vim configuration](https://github.com/amix/vimrc)Vim\n\n\n- [SimpylFold](https://github.com/tmhedberg/SimpylFold)\n\t- \n\t- `my_plugins`\n\t- `za / zm / zr`\n- [YouCompleteMe](https://github.com/Valloric/YouCompleteMe)\n\t- /\n\t- [](https://github.com/Valloric/YouCompleteMe#linux-64-bit)`install.py`\n\t- PythonC++flag[](https://github.com/Valloric/YouCompleteMe#c-family-semantic-completion)\n\t\t- \n\t\t- [](https://github.com/Valloric/YouCompleteMe#ycmcompleter-subcommands)`nnoremap <leader>jd :YcmCompleter GoTo<CR>``my_configs.vim``,jd``Ctrl+o`\n\n## \n\nVimmotivationIDE\n\n\n\n1. [The ultimate Vim configuration](https://github.com/amix/vimrc)`fork`Github\n2. `git submodule add xxx`\n\t- `git clone`Git repository`git push`\n3. /`git push`Github\n4. `git clone --recursive`Github\n\t- `--recursive`submodule\n5. `install_awesome_vimrc.sh`Vim\n\n## References\n\n- [Vimcheatsheet](https://devhints.io/vimscript)\n- [Vim](https://vi.stackexchange.com/questions/8856/mapping-ctrl-with-equal-sign)\n- [VimC++](https://www.quora.com/How-can-I-compile-and-execute-a-c++-program-directly-from-Vim-in-Ubuntu)\n- [Git submodule](https://blog.github.com/2016-02-01-working-with-submodules/)","source":"_posts/tech-vimrc.md","raw":"---\ntitle: Vim\ndate: 2018-09-27 11:15:27\ntags:\n\t- Vim\ncategories:\n\t- \ndescription:\n\t- Vim\n---\n\nVimUbuntu 16.04PythonC++Vim**Vim**Vim****Vim****\n\n## The ultimate Vim configuration\n\n### \n\n[The ultimate Vim configuration](https://github.com/amix/vimrc)VimPathogenVim[](https://www.zhihu.com/question/24294358)****`git clone`[](https://github.com/amix/vimrc#install-for-your-own-user-only)Vim****\n\n```sh\n.vim_runtime\n\n# default plugins & configurations\n sources_forked\n sources_non_forked\n vimrcs\n    basic.vim # general configurations\n    plugins_config.vim # plugin configurations\n\n# custom plugins & configurations\n my_plugins\n my_configs.vim # may not exist\n\n# installer\n install_awesome_vimrc.sh\n```\n\n********\n\n- \n\t- `sources_forked``sources_non_forked`\n\t- `vimrcs`\n\t\t- `basic.vim`e.g., tab4\n\t\t- `plugins_config.vim`\n- \n\t- `my_plugins`\n\t- `my_configs.vim``my_configs.vim``~/.vimrc``.vim``my_configs.vim`\n- \n\t- `install_awesome_vimrc.sh``~/.vimrc`\n\n### \n\n****\n\n- /\n\t- `,nn`Vim\n\t- `,f`\n\t- `:W`sudo\n\t- `gf`\n- \n\t- `gcc`\n\t- `$123 / $q / $e`/\n\t- `Ctrl+s / Ctrl+x / Ctrl+p`\n\t\t- [](https://github.com/amix/vimrc/issues/340)`~/.bashrc``stty -ixon`\n\t- `+ / _`/e.g., \n\t\t- VimPython[](https://github.com/terryma/vim-expand-region/issues/15)\n\t\t\t1. [vim-textobj-user](https://github.com/kana/vim-textobj-user)[vim-textobj-python](https://github.com/bps/vim-textobj-python)`my_plugins`\n\t\t\t2. `my_configs.vim`\n\n```vim\ncall expand_region#custom_text_objects('python', {\n      \\ 'af' :1,\n      \\ 'if' :1,\n      \\ 'ac' :1,\n      \\ 'ic' :1,\n      \\ })\n```\n\n## \n\n[The ultimate Vim configuration](https://github.com/amix/vimrc)Vim\n\n\n- [SimpylFold](https://github.com/tmhedberg/SimpylFold)\n\t- \n\t- `my_plugins`\n\t- `za / zm / zr`\n- [YouCompleteMe](https://github.com/Valloric/YouCompleteMe)\n\t- /\n\t- [](https://github.com/Valloric/YouCompleteMe#linux-64-bit)`install.py`\n\t- PythonC++flag[](https://github.com/Valloric/YouCompleteMe#c-family-semantic-completion)\n\t\t- \n\t\t- [](https://github.com/Valloric/YouCompleteMe#ycmcompleter-subcommands)`nnoremap <leader>jd :YcmCompleter GoTo<CR>``my_configs.vim``,jd``Ctrl+o`\n\n## \n\nVimmotivationIDE\n\n\n\n1. [The ultimate Vim configuration](https://github.com/amix/vimrc)`fork`Github\n2. `git submodule add xxx`\n\t- `git clone`Git repository`git push`\n3. /`git push`Github\n4. `git clone --recursive`Github\n\t- `--recursive`submodule\n5. `install_awesome_vimrc.sh`Vim\n\n## References\n\n- [Vimcheatsheet](https://devhints.io/vimscript)\n- [Vim](https://vi.stackexchange.com/questions/8856/mapping-ctrl-with-equal-sign)\n- [VimC++](https://www.quora.com/How-can-I-compile-and-execute-a-c++-program-directly-from-Vim-in-Ubuntu)\n- [Git submodule](https://blog.github.com/2016-02-01-working-with-submodules/)","slug":"tech-vimrc","published":1,"updated":"2024-08-13T16:03:47.884Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clzvf192r002aeqwoyvqy18hr","content":"<p>VimUbuntu 16.04PythonC++Vim<strong>Vim</strong>Vim<strong></strong>Vim<strong></strong></p>\n<h2 id=\"The-ultimate-Vim-configuration\"><a href=\"#The-ultimate-Vim-configuration\" class=\"headerlink\" title=\"The ultimate Vim configuration\"></a>The ultimate Vim configuration</h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><a href=\"https://github.com/amix/vimrc\" target=\"_blank\" rel=\"external\">The ultimate Vim configuration</a>VimPathogenVim<a href=\"https://www.zhihu.com/question/24294358\" target=\"_blank\" rel=\"external\"></a><strong></strong><code>git clone</code><a href=\"https://github.com/amix/vimrc#install-for-your-own-user-only\" target=\"_blank\" rel=\"external\"></a>Vim<strong></strong></p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">.vim_runtime</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># default plugins &amp; configurations</span></div><div class=\"line\"> sources_forked</div><div class=\"line\"> sources_non_forked</div><div class=\"line\"> vimrcs</div><div class=\"line\">    basic.vim <span class=\"comment\"># general configurations</span></div><div class=\"line\">    plugins_config.vim <span class=\"comment\"># plugin configurations</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># custom plugins &amp; configurations</span></div><div class=\"line\"> my_plugins</div><div class=\"line\"> my_configs.vim <span class=\"comment\"># may not exist</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># installer</span></div><div class=\"line\"> install_awesome_vimrc.sh</div></pre></td></tr></table></figure>\n<p><strong></strong><strong></strong></p>\n<ul>\n<li><ul>\n<li><code>sources_forked</code><code>sources_non_forked</code></li>\n<li><code>vimrcs</code><ul>\n<li><code>basic.vim</code>e.g., tab4</li>\n<li><code>plugins_config.vim</code></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><ul>\n<li><code>my_plugins</code></li>\n<li><code>my_configs.vim</code><code>my_configs.vim</code><code>~/.vimrc</code><code>.vim</code><code>my_configs.vim</code></li>\n</ul>\n</li>\n<li><ul>\n<li><code>install_awesome_vimrc.sh</code><code>~/.vimrc</code></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><strong></strong></p>\n<ul>\n<li>/<ul>\n<li><code>,nn</code>Vim</li>\n<li><code>,f</code></li>\n<li><code>:W</code>sudo</li>\n<li><code>gf</code></li>\n</ul>\n</li>\n<li><ul>\n<li><code>gcc</code></li>\n<li><code>$123 / $q / $e</code>/</li>\n<li><code>Ctrl+s / Ctrl+x / Ctrl+p</code><ul>\n<li><a href=\"https://github.com/amix/vimrc/issues/340\" target=\"_blank\" rel=\"external\"></a><code>~/.bashrc</code><code>stty -ixon</code></li>\n</ul>\n</li>\n<li><code>+ / _</code>/e.g., <ul>\n<li>VimPython<a href=\"https://github.com/terryma/vim-expand-region/issues/15\" target=\"_blank\" rel=\"external\"></a><ol>\n<li><a href=\"https://github.com/kana/vim-textobj-user\" target=\"_blank\" rel=\"external\">vim-textobj-user</a><a href=\"https://github.com/bps/vim-textobj-python\" target=\"_blank\" rel=\"external\">vim-textobj-python</a><code>my_plugins</code></li>\n<li><code>my_configs.vim</code></li>\n</ol>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">call</span> expand_region#custom_text_objects(<span class=\"string\">'python'</span>, &#123;</div><div class=\"line\">      \\ <span class=\"string\">'af'</span> :<span class=\"number\">1</span>,</div><div class=\"line\">      \\ <span class=\"string\">'if'</span> :<span class=\"number\">1</span>,</div><div class=\"line\">      \\ <span class=\"string\">'ac'</span> :<span class=\"number\">1</span>,</div><div class=\"line\">      \\ <span class=\"string\">'ic'</span> :<span class=\"number\">1</span>,</div><div class=\"line\">      \\ &#125;)</div></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><a href=\"https://github.com/amix/vimrc\" target=\"_blank\" rel=\"external\">The ultimate Vim configuration</a>Vim</p>\n<ul>\n<li><a href=\"https://github.com/tmhedberg/SimpylFold\" target=\"_blank\" rel=\"external\">SimpylFold</a><ul>\n<li></li>\n<li><code>my_plugins</code></li>\n<li><code>za / zm / zr</code></li>\n</ul>\n</li>\n<li><a href=\"https://github.com/Valloric/YouCompleteMe\" target=\"_blank\" rel=\"external\">YouCompleteMe</a><ul>\n<li>/</li>\n<li><a href=\"https://github.com/Valloric/YouCompleteMe#linux-64-bit\" target=\"_blank\" rel=\"external\"></a><code>install.py</code></li>\n<li>PythonC++flag<a href=\"https://github.com/Valloric/YouCompleteMe#c-family-semantic-completion\" target=\"_blank\" rel=\"external\"></a><ul>\n<li></li>\n<li><a href=\"https://github.com/Valloric/YouCompleteMe#ycmcompleter-subcommands\" target=\"_blank\" rel=\"external\"></a><code>nnoremap &lt;leader&gt;jd :YcmCompleter GoTo&lt;CR&gt;</code><code>my_configs.vim</code><code>,jd</code><code>Ctrl+o</code></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>VimmotivationIDE</p>\n<p></p>\n<ol>\n<li><a href=\"https://github.com/amix/vimrc\" target=\"_blank\" rel=\"external\">The ultimate Vim configuration</a><code>fork</code>Github</li>\n<li><code>git submodule add xxx</code><ul>\n<li><code>git clone</code>Git repository<code>git push</code></li>\n</ul>\n</li>\n<li>/<code>git push</code>Github</li>\n<li><code>git clone --recursive</code>Github<ul>\n<li><code>--recursive</code>submodule</li>\n</ul>\n</li>\n<li><code>install_awesome_vimrc.sh</code>Vim</li>\n</ol>\n<h2 id=\"References\"><a href=\"#References\" class=\"headerlink\" title=\"References\"></a>References</h2><ul>\n<li><a href=\"https://devhints.io/vimscript\" target=\"_blank\" rel=\"external\">Vimcheatsheet</a></li>\n<li><a href=\"https://vi.stackexchange.com/questions/8856/mapping-ctrl-with-equal-sign\" target=\"_blank\" rel=\"external\">Vim</a></li>\n<li><a href=\"https://www.quora.com/How-can-I-compile-and-execute-a-c++-program-directly-from-Vim-in-Ubuntu\" target=\"_blank\" rel=\"external\">VimC++</a></li>\n<li><a href=\"https://blog.github.com/2016-02-01-working-with-submodules/\" target=\"_blank\" rel=\"external\">Git submodule</a></li>\n</ul>\n","excerpt":"","more":"<p>VimUbuntu 16.04PythonC++Vim<strong>Vim</strong>Vim<strong></strong>Vim<strong></strong></p>\n<h2 id=\"The-ultimate-Vim-configuration\"><a href=\"#The-ultimate-Vim-configuration\" class=\"headerlink\" title=\"The ultimate Vim configuration\"></a>The ultimate Vim configuration</h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><a href=\"https://github.com/amix/vimrc\">The ultimate Vim configuration</a>VimPathogenVim<a href=\"https://www.zhihu.com/question/24294358\"></a><strong></strong><code>git clone</code><a href=\"https://github.com/amix/vimrc#install-for-your-own-user-only\"></a>Vim<strong></strong></p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">.vim_runtime</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># default plugins &amp; configurations</span></div><div class=\"line\"> sources_forked</div><div class=\"line\"> sources_non_forked</div><div class=\"line\"> vimrcs</div><div class=\"line\">    basic.vim <span class=\"comment\"># general configurations</span></div><div class=\"line\">    plugins_config.vim <span class=\"comment\"># plugin configurations</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># custom plugins &amp; configurations</span></div><div class=\"line\"> my_plugins</div><div class=\"line\"> my_configs.vim <span class=\"comment\"># may not exist</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># installer</span></div><div class=\"line\"> install_awesome_vimrc.sh</div></pre></td></tr></table></figure>\n<p><strong></strong><strong></strong></p>\n<ul>\n<li><ul>\n<li><code>sources_forked</code><code>sources_non_forked</code></li>\n<li><code>vimrcs</code><ul>\n<li><code>basic.vim</code>e.g., tab4</li>\n<li><code>plugins_config.vim</code></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><ul>\n<li><code>my_plugins</code></li>\n<li><code>my_configs.vim</code><code>my_configs.vim</code><code>~/.vimrc</code><code>.vim</code><code>my_configs.vim</code></li>\n</ul>\n</li>\n<li><ul>\n<li><code>install_awesome_vimrc.sh</code><code>~/.vimrc</code></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><strong></strong></p>\n<ul>\n<li>/<ul>\n<li><code>,nn</code>Vim</li>\n<li><code>,f</code></li>\n<li><code>:W</code>sudo</li>\n<li><code>gf</code></li>\n</ul>\n</li>\n<li><ul>\n<li><code>gcc</code></li>\n<li><code>$123 / $q / $e</code>/</li>\n<li><code>Ctrl+s / Ctrl+x / Ctrl+p</code><ul>\n<li><a href=\"https://github.com/amix/vimrc/issues/340\"></a><code>~/.bashrc</code><code>stty -ixon</code></li>\n</ul>\n</li>\n<li><code>+ / _</code>/e.g., <ul>\n<li>VimPython<a href=\"https://github.com/terryma/vim-expand-region/issues/15\"></a><ol>\n<li><a href=\"https://github.com/kana/vim-textobj-user\">vim-textobj-user</a><a href=\"https://github.com/bps/vim-textobj-python\">vim-textobj-python</a><code>my_plugins</code></li>\n<li><code>my_configs.vim</code></li>\n</ol>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">call</span> expand_region#custom_text_objects(<span class=\"string\">'python'</span>, &#123;</div><div class=\"line\">      \\ <span class=\"string\">'af'</span> :<span class=\"number\">1</span>,</div><div class=\"line\">      \\ <span class=\"string\">'if'</span> :<span class=\"number\">1</span>,</div><div class=\"line\">      \\ <span class=\"string\">'ac'</span> :<span class=\"number\">1</span>,</div><div class=\"line\">      \\ <span class=\"string\">'ic'</span> :<span class=\"number\">1</span>,</div><div class=\"line\">      \\ &#125;)</div></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><a href=\"https://github.com/amix/vimrc\">The ultimate Vim configuration</a>Vim</p>\n<ul>\n<li><a href=\"https://github.com/tmhedberg/SimpylFold\">SimpylFold</a><ul>\n<li></li>\n<li><code>my_plugins</code></li>\n<li><code>za / zm / zr</code></li>\n</ul>\n</li>\n<li><a href=\"https://github.com/Valloric/YouCompleteMe\">YouCompleteMe</a><ul>\n<li>/</li>\n<li><a href=\"https://github.com/Valloric/YouCompleteMe#linux-64-bit\"></a><code>install.py</code></li>\n<li>PythonC++flag<a href=\"https://github.com/Valloric/YouCompleteMe#c-family-semantic-completion\"></a><ul>\n<li></li>\n<li><a href=\"https://github.com/Valloric/YouCompleteMe#ycmcompleter-subcommands\"></a><code>nnoremap &lt;leader&gt;jd :YcmCompleter GoTo&lt;CR&gt;</code><code>my_configs.vim</code><code>,jd</code><code>Ctrl+o</code></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>VimmotivationIDE</p>\n<p></p>\n<ol>\n<li><a href=\"https://github.com/amix/vimrc\">The ultimate Vim configuration</a><code>fork</code>Github</li>\n<li><code>git submodule add xxx</code><ul>\n<li><code>git clone</code>Git repository<code>git push</code></li>\n</ul>\n</li>\n<li>/<code>git push</code>Github</li>\n<li><code>git clone --recursive</code>Github<ul>\n<li><code>--recursive</code>submodule</li>\n</ul>\n</li>\n<li><code>install_awesome_vimrc.sh</code>Vim</li>\n</ol>\n<h2 id=\"References\"><a href=\"#References\" class=\"headerlink\" title=\"References\"></a>References</h2><ul>\n<li><a href=\"https://devhints.io/vimscript\">Vimcheatsheet</a></li>\n<li><a href=\"https://vi.stackexchange.com/questions/8856/mapping-ctrl-with-equal-sign\">Vim</a></li>\n<li><a href=\"https://www.quora.com/How-can-I-compile-and-execute-a-c++-program-directly-from-Vim-in-Ubuntu\">VimC++</a></li>\n<li><a href=\"https://blog.github.com/2016-02-01-working-with-submodules/\">Git submodule</a></li>\n</ul>\n"},{"title":"Win11UE5Carla","date":"2024-08-04T15:47:02.000Z","description":["Win11CarlaUE5"],"_content":"\nCarla[](https://github.com/carla-simulator/carla/tree/ue5-dev)UE5\n\nWin11CarlaUE5[](https://carla.readthedocs.io/en/latest/build_windows_ue5/)\n\n\n  \n- VS2022VS2022VS2022\n- \n- \n\n\n\n---\n\n# VS2022\n\n## `C:\\Carla\\CarlaUE5\\Setup.bat`\n\n- VS2022\n- `C:\\Program Files\\Microsoft Visual Studio\\2022\\Community`VS2022\n\n## \n\n`C:\\Carla\\CarlaUE5\\Setup.bat`VS2022\n\n```bat\nvs_Community.exe --add Microsoft.VisualStudio.Workload.NativeDesktop Microsoft.VisualStudio.Workload.NativeGame Microsoft.VisualStudio.Workload.ManagedDesktop Microsoft.VisualStudio.Component.Windows10SDK.18362  Microsoft.VisualStudio.Component.VC.CMake.Project Microsoft.Net.ComponentGroup.4.8.1.DeveloperTools Microsoft.VisualStudio.Component.VC.Llvm.Clang Microsoft.VisualStudio.Component.VC.Llvm.ClangToolset Microsoft.VisualStudio.ComponentGroup.NativeDesktop.Llvm.Clang --removeProductLang Es-es --addProductLang En-us --installWhileDownloading --passive --wait\n```\n\nCarlaUE5`MSB3073`VS2022\n\n- [](https://blog.csdn.net/weixin_42205218/article/details/107829229)\n- [](https://learn.microsoft.com/zh-cn/visualstudio/install/workload-component-id-vs-professional?view=vs-2022)\n\n---\n\n# \n\n## \n\nCarlaUE5\n\n```\n[33/413] Building C object CMakeFiles\\sqlite3.dir\\_deps\\sqlite3-src\\shell.c.obj\nFAILED: CMakeFiles/sqlite3.dir/_deps/sqlite3-src/shell.c.obj\nC:\\PROGRA~1\\MICROS~4\\2022\\PROFES~1\\VC\\Tools\\MSVC\\1436~1.325\\bin\\Hostx64\\x64\\cl.exe  /nologo -D_CRT_SECURE_NO_WARNINGS -IC:\\Carla\\CarlaUE5\\Build\\_deps\\zlib-src -IC:\\Carla\\CarlaUE5\\Build\\_deps\\zlib-build -IC:\\Carla\\CarlaUE5\\Build\\_deps\\libpng-src -IC:\\Carla\\CarlaUE5\\Build\\_deps\\libpng-build /DWIN32 /D_WINDOWS /O2 /Ob2 /DNDEBUG -std:c11 -MD /wd4005 /showIncludes /FoCMakeFiles\\sqlite3.dir\\_deps\\sqlite3-src\\shell.c.obj /FdCMakeFiles\\sqlite3.dir\\ /FS -c C:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c\nC:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c(1): warning C4819: (936) Unicode \nC:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c(26303): warning C4819: (936) Unicode \nC:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c(26338): error C2001: \nC:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c(26339): error C2143: : ;(const)\nC:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c(26353): error C2065: zBom: \nC:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c(26353): warning C4047: =:intconst char *\nC:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c(26420): error C2065: zBom: \nC:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c(26420): warning C4047: :const char *int\nC:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c(26420): warning C4024: oPutsUtf8:  1 \nC:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c(26433): error C2065: zBom: \nC:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c(26433): warning C4047: :const char *int\nC:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c(26433): warning C4024: oPutsUtf8:  1 \n```\n\n## \n\n[PR](https://github.com/carla-simulator/carla/pull/8033)`CMake/Common.cmake``add_compile_options (/utf-8)`\n\n`C:\\Carla\\CarlaUE5\\Build\\build.ninja``/utf-8`\n\n```\nbuild CMakeFiles\\sqlite3.dir\\_deps\\sqlite3-src\\shell.c.obj: C_COMPILER__sqlite3_unscanned_Release C$:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c || cmake_object_order_depends_target_sqlite3\n  DEFINES = -D_CRT_SECURE_NO_WARNINGS\n  FLAGS = /DWIN32 /D_WINDOWS /O2 /Ob2 /DNDEBUG -std:c11 -MD /utf-8 /wd4005\n  INCLUDES = -IC:\\Carla\\CarlaUE5\\Build\\_deps\\zlib-src -IC:\\Carla\\CarlaUE5\\Build\\_deps\\zlib-build -IC:\\Carla\\CarlaUE5\\Build\\_deps\\libpng-src -IC:\\Carla\\CarlaUE5\\Build\\_deps\\libpng-build\n  OBJECT_DIR = CMakeFiles\\sqlite3.dir\n  OBJECT_FILE_DIR = CMakeFiles\\sqlite3.dir\\_deps\\sqlite3-src\n  TARGET_COMPILE_PDB = CMakeFiles\\sqlite3.dir\\\n  TARGET_PDB = sqlite3.pdb\n```\n\n---\n\n# \n\n## \n\n\n\n## \n\n[](https://blog.csdn.net/weixin_46356818/article/details/121029550)Windows\n\n\n<!-- https://github.com/carla-simulator/carla/pull/8033\n\nC:\\Carla\\CarlaUE5\\Build\\build.ninja\n\nbuild CMakeFiles\\sqlite3.dir\\_deps\\sqlite3-src\\shell.c.obj: C_COMPILER__sqlite3_unscanned_Release C$:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c || cmake_object_order_depends_target_sqlite3\n  DEFINES = -D_CRT_SECURE_NO_WARNINGS\n  FLAGS = /DWIN32 /D_WINDOWS /O2 /Ob2 /DNDEBUG -std:c11 -MD /utf-8 /wd4005\n  INCLUDES = -IC:\\Carla\\CarlaUE5\\Build\\_deps\\zlib-src -IC:\\Carla\\CarlaUE5\\Build\\_deps\\zlib-build -IC:\\Carla\\CarlaUE5\\Build\\_deps\\libpng-src -IC:\\Carla\\CarlaUE5\\Build\\_deps\\libpng-build\n  OBJECT_DIR = CMakeFiles\\sqlite3.dir\n  OBJECT_FILE_DIR = CMakeFiles\\sqlite3.dir\\_deps\\sqlite3-src\n  TARGET_COMPILE_PDB = CMakeFiles\\sqlite3.dir\\\n  TARGET_PDB = sqlite3.pdb\n\n\nbuild CMakeFiles\\sqlite3.dir\\_deps\\sqlite3-src\\shell.c.obj: C_COMPILER__sqlite3_unscanned_Release C$:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c || cmake_object_order_depends_target_sqlite3\n  DEFINES = -D_CRT_SECURE_NO_WARNINGS\n  FLAGS = /DWIN32 /D_WINDOWS /O2 /Ob2 /DNDEBUG -std:c11 -MD /wd4005\n  INCLUDES = -IC:\\Carla\\CarlaUE5\\Build\\_deps\\zlib-src -IC:\\Carla\\CarlaUE5\\Build\\_deps\\zlib-build -IC:\\Carla\\CarlaUE5\\Build\\_deps\\libpng-src -IC:\\Carla\\CarlaUE5\\Build\\_deps\\libpng-build\n  OBJECT_DIR = CMakeFiles\\sqlite3.dir\n  OBJECT_FILE_DIR = CMakeFiles\\sqlite3.dir\\_deps\\sqlite3-src\n  TARGET_COMPILE_PDB = CMakeFiles\\sqlite3.dir\\\n  TARGET_PDB = sqlite3.pdb\n\nhttps://www.cnblogs.com/mechanicoder/p/16894144.html\n\nMSB3073\n\nhttps://learn.microsoft.com/zh-cn/visualstudio/install/workload-component-id-vs-professional?view=vs-2022\n\n@REM echo Installing Visual Studio 2022...\n@REM curl -L -O https://aka.ms/vs/17/release/vs_community.exe || exit /b\n@REM vs_Community.exe --add Microsoft.VisualStudio.Workload.NativeDesktop Microsoft.VisualStudio.Workload.NativeGame Microsoft.VisualStudio.Workload.ManagedDesktop Microsoft.VisualStudio.Component.Windows10SDK.18362  Microsoft.VisualStudio.Component.VC.CMake.Project Microsoft.Net.ComponentGroup.4.8.1.DeveloperTools Microsoft.VisualStudio.Component.VC.Llvm.Clang Microsoft.VisualStudio.Component.VC.Llvm.ClangToolset Microsoft.VisualStudio.ComponentGroup.NativeDesktop.Llvm.Clang --removeProductLang Es-es --addProductLang En-us --installWhileDownloading --passive --wait\n@REM del vs_community.exe\n@REM curl -L -O https://aka.ms/vs/17/release/vs_professional.exe || exit /b\n@REM vs_Professional.exe --add Microsoft.VisualStudio.Workload.NativeDesktop Microsoft.VisualStudio.Workload.NativeGame Microsoft.VisualStudio.Workload.ManagedDesktop Microsoft.VisualStudio.Component.Windows10SDK.18362  Microsoft.VisualStudio.Component.VC.CMake.Project Microsoft.Net.ComponentGroup.4.8.1.DeveloperTools Microsoft.VisualStudio.Component.VC.Llvm.Clang Microsoft.VisualStudio.Component.VC.Llvm.ClangToolset Microsoft.VisualStudio.ComponentGroup.NativeDesktop.Llvm.Clang --removeProductLang Es-es --addProductLang En-us --installWhileDownloading --passive --wait\n@REM del vs_professional.exe\n@REM echo Visual Studion 2022 Installed!!!\n\nC:\\Carla\\CarlaUE5\\Setup.bat\n\nhttps://blog.csdn.net/weixin_46356818/article/details/121029550 -->","source":"_posts/tech-windows-ue5-carla-build.md","raw":"---\ntitle: Win11UE5Carla\ndate: 2024-08-04 23:47:02\ntags:\n\t- CarlaUE5\ncategories:\n\t- \ndescription:\n\t- Win11CarlaUE5\n---\n\nCarla[](https://github.com/carla-simulator/carla/tree/ue5-dev)UE5\n\nWin11CarlaUE5[](https://carla.readthedocs.io/en/latest/build_windows_ue5/)\n\n\n  \n- VS2022VS2022VS2022\n- \n- \n\n\n\n---\n\n# VS2022\n\n## `C:\\Carla\\CarlaUE5\\Setup.bat`\n\n- VS2022\n- `C:\\Program Files\\Microsoft Visual Studio\\2022\\Community`VS2022\n\n## \n\n`C:\\Carla\\CarlaUE5\\Setup.bat`VS2022\n\n```bat\nvs_Community.exe --add Microsoft.VisualStudio.Workload.NativeDesktop Microsoft.VisualStudio.Workload.NativeGame Microsoft.VisualStudio.Workload.ManagedDesktop Microsoft.VisualStudio.Component.Windows10SDK.18362  Microsoft.VisualStudio.Component.VC.CMake.Project Microsoft.Net.ComponentGroup.4.8.1.DeveloperTools Microsoft.VisualStudio.Component.VC.Llvm.Clang Microsoft.VisualStudio.Component.VC.Llvm.ClangToolset Microsoft.VisualStudio.ComponentGroup.NativeDesktop.Llvm.Clang --removeProductLang Es-es --addProductLang En-us --installWhileDownloading --passive --wait\n```\n\nCarlaUE5`MSB3073`VS2022\n\n- [](https://blog.csdn.net/weixin_42205218/article/details/107829229)\n- [](https://learn.microsoft.com/zh-cn/visualstudio/install/workload-component-id-vs-professional?view=vs-2022)\n\n---\n\n# \n\n## \n\nCarlaUE5\n\n```\n[33/413] Building C object CMakeFiles\\sqlite3.dir\\_deps\\sqlite3-src\\shell.c.obj\nFAILED: CMakeFiles/sqlite3.dir/_deps/sqlite3-src/shell.c.obj\nC:\\PROGRA~1\\MICROS~4\\2022\\PROFES~1\\VC\\Tools\\MSVC\\1436~1.325\\bin\\Hostx64\\x64\\cl.exe  /nologo -D_CRT_SECURE_NO_WARNINGS -IC:\\Carla\\CarlaUE5\\Build\\_deps\\zlib-src -IC:\\Carla\\CarlaUE5\\Build\\_deps\\zlib-build -IC:\\Carla\\CarlaUE5\\Build\\_deps\\libpng-src -IC:\\Carla\\CarlaUE5\\Build\\_deps\\libpng-build /DWIN32 /D_WINDOWS /O2 /Ob2 /DNDEBUG -std:c11 -MD /wd4005 /showIncludes /FoCMakeFiles\\sqlite3.dir\\_deps\\sqlite3-src\\shell.c.obj /FdCMakeFiles\\sqlite3.dir\\ /FS -c C:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c\nC:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c(1): warning C4819: (936) Unicode \nC:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c(26303): warning C4819: (936) Unicode \nC:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c(26338): error C2001: \nC:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c(26339): error C2143: : ;(const)\nC:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c(26353): error C2065: zBom: \nC:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c(26353): warning C4047: =:intconst char *\nC:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c(26420): error C2065: zBom: \nC:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c(26420): warning C4047: :const char *int\nC:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c(26420): warning C4024: oPutsUtf8:  1 \nC:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c(26433): error C2065: zBom: \nC:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c(26433): warning C4047: :const char *int\nC:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c(26433): warning C4024: oPutsUtf8:  1 \n```\n\n## \n\n[PR](https://github.com/carla-simulator/carla/pull/8033)`CMake/Common.cmake``add_compile_options (/utf-8)`\n\n`C:\\Carla\\CarlaUE5\\Build\\build.ninja``/utf-8`\n\n```\nbuild CMakeFiles\\sqlite3.dir\\_deps\\sqlite3-src\\shell.c.obj: C_COMPILER__sqlite3_unscanned_Release C$:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c || cmake_object_order_depends_target_sqlite3\n  DEFINES = -D_CRT_SECURE_NO_WARNINGS\n  FLAGS = /DWIN32 /D_WINDOWS /O2 /Ob2 /DNDEBUG -std:c11 -MD /utf-8 /wd4005\n  INCLUDES = -IC:\\Carla\\CarlaUE5\\Build\\_deps\\zlib-src -IC:\\Carla\\CarlaUE5\\Build\\_deps\\zlib-build -IC:\\Carla\\CarlaUE5\\Build\\_deps\\libpng-src -IC:\\Carla\\CarlaUE5\\Build\\_deps\\libpng-build\n  OBJECT_DIR = CMakeFiles\\sqlite3.dir\n  OBJECT_FILE_DIR = CMakeFiles\\sqlite3.dir\\_deps\\sqlite3-src\n  TARGET_COMPILE_PDB = CMakeFiles\\sqlite3.dir\\\n  TARGET_PDB = sqlite3.pdb\n```\n\n---\n\n# \n\n## \n\n\n\n## \n\n[](https://blog.csdn.net/weixin_46356818/article/details/121029550)Windows\n\n\n<!-- https://github.com/carla-simulator/carla/pull/8033\n\nC:\\Carla\\CarlaUE5\\Build\\build.ninja\n\nbuild CMakeFiles\\sqlite3.dir\\_deps\\sqlite3-src\\shell.c.obj: C_COMPILER__sqlite3_unscanned_Release C$:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c || cmake_object_order_depends_target_sqlite3\n  DEFINES = -D_CRT_SECURE_NO_WARNINGS\n  FLAGS = /DWIN32 /D_WINDOWS /O2 /Ob2 /DNDEBUG -std:c11 -MD /utf-8 /wd4005\n  INCLUDES = -IC:\\Carla\\CarlaUE5\\Build\\_deps\\zlib-src -IC:\\Carla\\CarlaUE5\\Build\\_deps\\zlib-build -IC:\\Carla\\CarlaUE5\\Build\\_deps\\libpng-src -IC:\\Carla\\CarlaUE5\\Build\\_deps\\libpng-build\n  OBJECT_DIR = CMakeFiles\\sqlite3.dir\n  OBJECT_FILE_DIR = CMakeFiles\\sqlite3.dir\\_deps\\sqlite3-src\n  TARGET_COMPILE_PDB = CMakeFiles\\sqlite3.dir\\\n  TARGET_PDB = sqlite3.pdb\n\n\nbuild CMakeFiles\\sqlite3.dir\\_deps\\sqlite3-src\\shell.c.obj: C_COMPILER__sqlite3_unscanned_Release C$:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c || cmake_object_order_depends_target_sqlite3\n  DEFINES = -D_CRT_SECURE_NO_WARNINGS\n  FLAGS = /DWIN32 /D_WINDOWS /O2 /Ob2 /DNDEBUG -std:c11 -MD /wd4005\n  INCLUDES = -IC:\\Carla\\CarlaUE5\\Build\\_deps\\zlib-src -IC:\\Carla\\CarlaUE5\\Build\\_deps\\zlib-build -IC:\\Carla\\CarlaUE5\\Build\\_deps\\libpng-src -IC:\\Carla\\CarlaUE5\\Build\\_deps\\libpng-build\n  OBJECT_DIR = CMakeFiles\\sqlite3.dir\n  OBJECT_FILE_DIR = CMakeFiles\\sqlite3.dir\\_deps\\sqlite3-src\n  TARGET_COMPILE_PDB = CMakeFiles\\sqlite3.dir\\\n  TARGET_PDB = sqlite3.pdb\n\nhttps://www.cnblogs.com/mechanicoder/p/16894144.html\n\nMSB3073\n\nhttps://learn.microsoft.com/zh-cn/visualstudio/install/workload-component-id-vs-professional?view=vs-2022\n\n@REM echo Installing Visual Studio 2022...\n@REM curl -L -O https://aka.ms/vs/17/release/vs_community.exe || exit /b\n@REM vs_Community.exe --add Microsoft.VisualStudio.Workload.NativeDesktop Microsoft.VisualStudio.Workload.NativeGame Microsoft.VisualStudio.Workload.ManagedDesktop Microsoft.VisualStudio.Component.Windows10SDK.18362  Microsoft.VisualStudio.Component.VC.CMake.Project Microsoft.Net.ComponentGroup.4.8.1.DeveloperTools Microsoft.VisualStudio.Component.VC.Llvm.Clang Microsoft.VisualStudio.Component.VC.Llvm.ClangToolset Microsoft.VisualStudio.ComponentGroup.NativeDesktop.Llvm.Clang --removeProductLang Es-es --addProductLang En-us --installWhileDownloading --passive --wait\n@REM del vs_community.exe\n@REM curl -L -O https://aka.ms/vs/17/release/vs_professional.exe || exit /b\n@REM vs_Professional.exe --add Microsoft.VisualStudio.Workload.NativeDesktop Microsoft.VisualStudio.Workload.NativeGame Microsoft.VisualStudio.Workload.ManagedDesktop Microsoft.VisualStudio.Component.Windows10SDK.18362  Microsoft.VisualStudio.Component.VC.CMake.Project Microsoft.Net.ComponentGroup.4.8.1.DeveloperTools Microsoft.VisualStudio.Component.VC.Llvm.Clang Microsoft.VisualStudio.Component.VC.Llvm.ClangToolset Microsoft.VisualStudio.ComponentGroup.NativeDesktop.Llvm.Clang --removeProductLang Es-es --addProductLang En-us --installWhileDownloading --passive --wait\n@REM del vs_professional.exe\n@REM echo Visual Studion 2022 Installed!!!\n\nC:\\Carla\\CarlaUE5\\Setup.bat\n\nhttps://blog.csdn.net/weixin_46356818/article/details/121029550 -->","slug":"tech-windows-ue5-carla-build","published":1,"updated":"2024-08-13T16:03:47.884Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clzvf192s002ceqwoh7c2ce4e","content":"<p>Carla<a href=\"https://github.com/carla-simulator/carla/tree/ue5-dev\" target=\"_blank\" rel=\"external\"></a>UE5</p>\n<p>Win11CarlaUE5<a href=\"https://carla.readthedocs.io/en/latest/build_windows_ue5/\" target=\"_blank\" rel=\"external\"></a></p>\n<p></p>\n<ul>\n<li>VS2022VS2022VS2022</li>\n<li></li>\n<li></li>\n</ul>\n<p></p>\n<hr>\n<h1 id=\"VS2022\"><a href=\"#VS2022\" class=\"headerlink\" title=\"VS2022\"></a>VS2022</h1><h2 id=\"C-Carla-CarlaUE5-Setup-bat\"><a href=\"#C-Carla-CarlaUE5-Setup-bat\" class=\"headerlink\" title=\"C:\\Carla\\CarlaUE5\\Setup.bat\"></a><code>C:\\Carla\\CarlaUE5\\Setup.bat</code></h2><ul>\n<li>VS2022</li>\n<li><code>C:\\Program Files\\Microsoft Visual Studio\\2022\\Community</code>VS2022</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><code>C:\\Carla\\CarlaUE5\\Setup.bat</code>VS2022</p>\n<figure class=\"highlight bat\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">vs_Community.exe --add Microsoft.VisualStudio.Workload.NativeDesktop Microsoft.VisualStudio.Workload.NativeGame Microsoft.VisualStudio.Workload.ManagedDesktop Microsoft.VisualStudio.Component.Windows10SDK.<span class=\"number\">18362</span>  Microsoft.VisualStudio.Component.VC.CMake.Project Microsoft.<span class=\"built_in\">Net</span>.ComponentGroup.<span class=\"number\">4</span>.<span class=\"number\">8</span>.<span class=\"number\">1</span>.DeveloperTools Microsoft.VisualStudio.Component.VC.Llvm.Clang Microsoft.VisualStudio.Component.VC.Llvm.ClangToolset Microsoft.VisualStudio.ComponentGroup.NativeDesktop.Llvm.Clang --removeProductLang Es-es --addProductLang En-us --installWhileDownloading --passive --wait</div></pre></td></tr></table></figure>\n<p>CarlaUE5<code>MSB3073</code>VS2022</p>\n<ul>\n<li><a href=\"https://blog.csdn.net/weixin_42205218/article/details/107829229\" target=\"_blank\" rel=\"external\"></a></li>\n<li><a href=\"https://learn.microsoft.com/zh-cn/visualstudio/install/workload-component-id-vs-professional?view=vs-2022\" target=\"_blank\" rel=\"external\"></a></li>\n</ul>\n<hr>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>CarlaUE5</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">[33/413] Building C object CMakeFiles\\sqlite3.dir\\_deps\\sqlite3-src\\shell.c.obj</div><div class=\"line\">FAILED: CMakeFiles/sqlite3.dir/_deps/sqlite3-src/shell.c.obj</div><div class=\"line\">C:\\PROGRA~1\\MICROS~4\\2022\\PROFES~1\\VC\\Tools\\MSVC\\1436~1.325\\bin\\Hostx64\\x64\\cl.exe  /nologo -D_CRT_SECURE_NO_WARNINGS -IC:\\Carla\\CarlaUE5\\Build\\_deps\\zlib-src -IC:\\Carla\\CarlaUE5\\Build\\_deps\\zlib-build -IC:\\Carla\\CarlaUE5\\Build\\_deps\\libpng-src -IC:\\Carla\\CarlaUE5\\Build\\_deps\\libpng-build /DWIN32 /D_WINDOWS /O2 /Ob2 /DNDEBUG -std:c11 -MD /wd4005 /showIncludes /FoCMakeFiles\\sqlite3.dir\\_deps\\sqlite3-src\\shell.c.obj /FdCMakeFiles\\sqlite3.dir\\ /FS -c C:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c</div><div class=\"line\">C:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c(1): warning C4819: (936) Unicode </div><div class=\"line\">C:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c(26303): warning C4819: (936) Unicode </div><div class=\"line\">C:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c(26338): error C2001: </div><div class=\"line\">C:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c(26339): error C2143: : ;(const)</div><div class=\"line\">C:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c(26353): error C2065: zBom: </div><div class=\"line\">C:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c(26353): warning C4047: =:intconst char *</div><div class=\"line\">C:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c(26420): error C2065: zBom: </div><div class=\"line\">C:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c(26420): warning C4047: :const char *int</div><div class=\"line\">C:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c(26420): warning C4024: oPutsUtf8:  1 </div><div class=\"line\">C:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c(26433): error C2065: zBom: </div><div class=\"line\">C:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c(26433): warning C4047: :const char *int</div><div class=\"line\">C:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c(26433): warning C4024: oPutsUtf8:  1 </div></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><a href=\"https://github.com/carla-simulator/carla/pull/8033\" target=\"_blank\" rel=\"external\">PR</a><code>CMake/Common.cmake</code><code>add_compile_options (/utf-8)</code></p>\n<p><code>C:\\Carla\\CarlaUE5\\Build\\build.ninja</code><code>/utf-8</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">build CMakeFiles\\sqlite3.dir\\_deps\\sqlite3-src\\shell.c.obj: C_COMPILER__sqlite3_unscanned_Release C$:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c || cmake_object_order_depends_target_sqlite3</div><div class=\"line\">  DEFINES = -D_CRT_SECURE_NO_WARNINGS</div><div class=\"line\">  FLAGS = /DWIN32 /D_WINDOWS /O2 /Ob2 /DNDEBUG -std:c11 -MD /utf-8 /wd4005</div><div class=\"line\">  INCLUDES = -IC:\\Carla\\CarlaUE5\\Build\\_deps\\zlib-src -IC:\\Carla\\CarlaUE5\\Build\\_deps\\zlib-build -IC:\\Carla\\CarlaUE5\\Build\\_deps\\libpng-src -IC:\\Carla\\CarlaUE5\\Build\\_deps\\libpng-build</div><div class=\"line\">  OBJECT_DIR = CMakeFiles\\sqlite3.dir</div><div class=\"line\">  OBJECT_FILE_DIR = CMakeFiles\\sqlite3.dir\\_deps\\sqlite3-src</div><div class=\"line\">  TARGET_COMPILE_PDB = CMakeFiles\\sqlite3.dir\\</div><div class=\"line\">  TARGET_PDB = sqlite3.pdb</div></pre></td></tr></table></figure>\n<hr>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<h2 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h2><p><a href=\"https://blog.csdn.net/weixin_46356818/article/details/121029550\" target=\"_blank\" rel=\"external\"></a>Windows</p>\n<!-- https://github.com/carla-simulator/carla/pull/8033\n\nC:\\Carla\\CarlaUE5\\Build\\build.ninja\n\nbuild CMakeFiles\\sqlite3.dir\\_deps\\sqlite3-src\\shell.c.obj: C_COMPILER__sqlite3_unscanned_Release C$:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c || cmake_object_order_depends_target_sqlite3\n  DEFINES = -D_CRT_SECURE_NO_WARNINGS\n  FLAGS = /DWIN32 /D_WINDOWS /O2 /Ob2 /DNDEBUG -std:c11 -MD /utf-8 /wd4005\n  INCLUDES = -IC:\\Carla\\CarlaUE5\\Build\\_deps\\zlib-src -IC:\\Carla\\CarlaUE5\\Build\\_deps\\zlib-build -IC:\\Carla\\CarlaUE5\\Build\\_deps\\libpng-src -IC:\\Carla\\CarlaUE5\\Build\\_deps\\libpng-build\n  OBJECT_DIR = CMakeFiles\\sqlite3.dir\n  OBJECT_FILE_DIR = CMakeFiles\\sqlite3.dir\\_deps\\sqlite3-src\n  TARGET_COMPILE_PDB = CMakeFiles\\sqlite3.dir\\\n  TARGET_PDB = sqlite3.pdb\n\n\nbuild CMakeFiles\\sqlite3.dir\\_deps\\sqlite3-src\\shell.c.obj: C_COMPILER__sqlite3_unscanned_Release C$:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c || cmake_object_order_depends_target_sqlite3\n  DEFINES = -D_CRT_SECURE_NO_WARNINGS\n  FLAGS = /DWIN32 /D_WINDOWS /O2 /Ob2 /DNDEBUG -std:c11 -MD /wd4005\n  INCLUDES = -IC:\\Carla\\CarlaUE5\\Build\\_deps\\zlib-src -IC:\\Carla\\CarlaUE5\\Build\\_deps\\zlib-build -IC:\\Carla\\CarlaUE5\\Build\\_deps\\libpng-src -IC:\\Carla\\CarlaUE5\\Build\\_deps\\libpng-build\n  OBJECT_DIR = CMakeFiles\\sqlite3.dir\n  OBJECT_FILE_DIR = CMakeFiles\\sqlite3.dir\\_deps\\sqlite3-src\n  TARGET_COMPILE_PDB = CMakeFiles\\sqlite3.dir\\\n  TARGET_PDB = sqlite3.pdb\n\nhttps://www.cnblogs.com/mechanicoder/p/16894144.html\n\nMSB3073\n\nhttps://learn.microsoft.com/zh-cn/visualstudio/install/workload-component-id-vs-professional?view=vs-2022\n\n@REM echo Installing Visual Studio 2022...\n@REM curl -L -O https://aka.ms/vs/17/release/vs_community.exe || exit /b\n@REM vs_Community.exe --add Microsoft.VisualStudio.Workload.NativeDesktop Microsoft.VisualStudio.Workload.NativeGame Microsoft.VisualStudio.Workload.ManagedDesktop Microsoft.VisualStudio.Component.Windows10SDK.18362  Microsoft.VisualStudio.Component.VC.CMake.Project Microsoft.Net.ComponentGroup.4.8.1.DeveloperTools Microsoft.VisualStudio.Component.VC.Llvm.Clang Microsoft.VisualStudio.Component.VC.Llvm.ClangToolset Microsoft.VisualStudio.ComponentGroup.NativeDesktop.Llvm.Clang --removeProductLang Es-es --addProductLang En-us --installWhileDownloading --passive --wait\n@REM del vs_community.exe\n@REM curl -L -O https://aka.ms/vs/17/release/vs_professional.exe || exit /b\n@REM vs_Professional.exe --add Microsoft.VisualStudio.Workload.NativeDesktop Microsoft.VisualStudio.Workload.NativeGame Microsoft.VisualStudio.Workload.ManagedDesktop Microsoft.VisualStudio.Component.Windows10SDK.18362  Microsoft.VisualStudio.Component.VC.CMake.Project Microsoft.Net.ComponentGroup.4.8.1.DeveloperTools Microsoft.VisualStudio.Component.VC.Llvm.Clang Microsoft.VisualStudio.Component.VC.Llvm.ClangToolset Microsoft.VisualStudio.ComponentGroup.NativeDesktop.Llvm.Clang --removeProductLang Es-es --addProductLang En-us --installWhileDownloading --passive --wait\n@REM del vs_professional.exe\n@REM echo Visual Studion 2022 Installed!!!\n\nC:\\Carla\\CarlaUE5\\Setup.bat\n\nhttps://blog.csdn.net/weixin_46356818/article/details/121029550 -->","excerpt":"","more":"<p>Carla<a href=\"https://github.com/carla-simulator/carla/tree/ue5-dev\"></a>UE5</p>\n<p>Win11CarlaUE5<a href=\"https://carla.readthedocs.io/en/latest/build_windows_ue5/\"></a></p>\n<p></p>\n<ul>\n<li>VS2022VS2022VS2022</li>\n<li></li>\n<li></li>\n</ul>\n<p></p>\n<hr>\n<h1 id=\"VS2022\"><a href=\"#VS2022\" class=\"headerlink\" title=\"VS2022\"></a>VS2022</h1><h2 id=\"C-Carla-CarlaUE5-Setup-bat\"><a href=\"#C-Carla-CarlaUE5-Setup-bat\" class=\"headerlink\" title=\"C:\\Carla\\CarlaUE5\\Setup.bat\"></a><code>C:\\Carla\\CarlaUE5\\Setup.bat</code></h2><ul>\n<li>VS2022</li>\n<li><code>C:\\Program Files\\Microsoft Visual Studio\\2022\\Community</code>VS2022</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><code>C:\\Carla\\CarlaUE5\\Setup.bat</code>VS2022</p>\n<figure class=\"highlight bat\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">vs_Community.exe --add Microsoft.VisualStudio.Workload.NativeDesktop Microsoft.VisualStudio.Workload.NativeGame Microsoft.VisualStudio.Workload.ManagedDesktop Microsoft.VisualStudio.Component.Windows10SDK.<span class=\"number\">18362</span>  Microsoft.VisualStudio.Component.VC.CMake.Project Microsoft.<span class=\"built_in\">Net</span>.ComponentGroup.<span class=\"number\">4</span>.<span class=\"number\">8</span>.<span class=\"number\">1</span>.DeveloperTools Microsoft.VisualStudio.Component.VC.Llvm.Clang Microsoft.VisualStudio.Component.VC.Llvm.ClangToolset Microsoft.VisualStudio.ComponentGroup.NativeDesktop.Llvm.Clang --removeProductLang Es-es --addProductLang En-us --installWhileDownloading --passive --wait</div></pre></td></tr></table></figure>\n<p>CarlaUE5<code>MSB3073</code>VS2022</p>\n<ul>\n<li><a href=\"https://blog.csdn.net/weixin_42205218/article/details/107829229\"></a></li>\n<li><a href=\"https://learn.microsoft.com/zh-cn/visualstudio/install/workload-component-id-vs-professional?view=vs-2022\"></a></li>\n</ul>\n<hr>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>CarlaUE5</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">[33/413] Building C object CMakeFiles\\sqlite3.dir\\_deps\\sqlite3-src\\shell.c.obj</div><div class=\"line\">FAILED: CMakeFiles/sqlite3.dir/_deps/sqlite3-src/shell.c.obj</div><div class=\"line\">C:\\PROGRA~1\\MICROS~4\\2022\\PROFES~1\\VC\\Tools\\MSVC\\1436~1.325\\bin\\Hostx64\\x64\\cl.exe  /nologo -D_CRT_SECURE_NO_WARNINGS -IC:\\Carla\\CarlaUE5\\Build\\_deps\\zlib-src -IC:\\Carla\\CarlaUE5\\Build\\_deps\\zlib-build -IC:\\Carla\\CarlaUE5\\Build\\_deps\\libpng-src -IC:\\Carla\\CarlaUE5\\Build\\_deps\\libpng-build /DWIN32 /D_WINDOWS /O2 /Ob2 /DNDEBUG -std:c11 -MD /wd4005 /showIncludes /FoCMakeFiles\\sqlite3.dir\\_deps\\sqlite3-src\\shell.c.obj /FdCMakeFiles\\sqlite3.dir\\ /FS -c C:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c</div><div class=\"line\">C:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c(1): warning C4819: (936) Unicode </div><div class=\"line\">C:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c(26303): warning C4819: (936) Unicode </div><div class=\"line\">C:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c(26338): error C2001: </div><div class=\"line\">C:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c(26339): error C2143: : ;(const)</div><div class=\"line\">C:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c(26353): error C2065: zBom: </div><div class=\"line\">C:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c(26353): warning C4047: =:intconst char *</div><div class=\"line\">C:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c(26420): error C2065: zBom: </div><div class=\"line\">C:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c(26420): warning C4047: :const char *int</div><div class=\"line\">C:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c(26420): warning C4024: oPutsUtf8:  1 </div><div class=\"line\">C:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c(26433): error C2065: zBom: </div><div class=\"line\">C:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c(26433): warning C4047: :const char *int</div><div class=\"line\">C:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c(26433): warning C4024: oPutsUtf8:  1 </div></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><a href=\"https://github.com/carla-simulator/carla/pull/8033\">PR</a><code>CMake/Common.cmake</code><code>add_compile_options (/utf-8)</code></p>\n<p><code>C:\\Carla\\CarlaUE5\\Build\\build.ninja</code><code>/utf-8</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">build CMakeFiles\\sqlite3.dir\\_deps\\sqlite3-src\\shell.c.obj: C_COMPILER__sqlite3_unscanned_Release C$:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c || cmake_object_order_depends_target_sqlite3</div><div class=\"line\">  DEFINES = -D_CRT_SECURE_NO_WARNINGS</div><div class=\"line\">  FLAGS = /DWIN32 /D_WINDOWS /O2 /Ob2 /DNDEBUG -std:c11 -MD /utf-8 /wd4005</div><div class=\"line\">  INCLUDES = -IC:\\Carla\\CarlaUE5\\Build\\_deps\\zlib-src -IC:\\Carla\\CarlaUE5\\Build\\_deps\\zlib-build -IC:\\Carla\\CarlaUE5\\Build\\_deps\\libpng-src -IC:\\Carla\\CarlaUE5\\Build\\_deps\\libpng-build</div><div class=\"line\">  OBJECT_DIR = CMakeFiles\\sqlite3.dir</div><div class=\"line\">  OBJECT_FILE_DIR = CMakeFiles\\sqlite3.dir\\_deps\\sqlite3-src</div><div class=\"line\">  TARGET_COMPILE_PDB = CMakeFiles\\sqlite3.dir\\</div><div class=\"line\">  TARGET_PDB = sqlite3.pdb</div></pre></td></tr></table></figure>\n<hr>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h2><p></p>\n<h2 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h2><p><a href=\"https://blog.csdn.net/weixin_46356818/article/details/121029550\"></a>Windows</p>\n<!-- https://github.com/carla-simulator/carla/pull/8033\n\nC:\\Carla\\CarlaUE5\\Build\\build.ninja\n\nbuild CMakeFiles\\sqlite3.dir\\_deps\\sqlite3-src\\shell.c.obj: C_COMPILER__sqlite3_unscanned_Release C$:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c || cmake_object_order_depends_target_sqlite3\n  DEFINES = -D_CRT_SECURE_NO_WARNINGS\n  FLAGS = /DWIN32 /D_WINDOWS /O2 /Ob2 /DNDEBUG -std:c11 -MD /utf-8 /wd4005\n  INCLUDES = -IC:\\Carla\\CarlaUE5\\Build\\_deps\\zlib-src -IC:\\Carla\\CarlaUE5\\Build\\_deps\\zlib-build -IC:\\Carla\\CarlaUE5\\Build\\_deps\\libpng-src -IC:\\Carla\\CarlaUE5\\Build\\_deps\\libpng-build\n  OBJECT_DIR = CMakeFiles\\sqlite3.dir\n  OBJECT_FILE_DIR = CMakeFiles\\sqlite3.dir\\_deps\\sqlite3-src\n  TARGET_COMPILE_PDB = CMakeFiles\\sqlite3.dir\\\n  TARGET_PDB = sqlite3.pdb\n\n\nbuild CMakeFiles\\sqlite3.dir\\_deps\\sqlite3-src\\shell.c.obj: C_COMPILER__sqlite3_unscanned_Release C$:\\Carla\\CarlaUE5\\Build\\_deps\\sqlite3-src\\shell.c || cmake_object_order_depends_target_sqlite3\n  DEFINES = -D_CRT_SECURE_NO_WARNINGS\n  FLAGS = /DWIN32 /D_WINDOWS /O2 /Ob2 /DNDEBUG -std:c11 -MD /wd4005\n  INCLUDES = -IC:\\Carla\\CarlaUE5\\Build\\_deps\\zlib-src -IC:\\Carla\\CarlaUE5\\Build\\_deps\\zlib-build -IC:\\Carla\\CarlaUE5\\Build\\_deps\\libpng-src -IC:\\Carla\\CarlaUE5\\Build\\_deps\\libpng-build\n  OBJECT_DIR = CMakeFiles\\sqlite3.dir\n  OBJECT_FILE_DIR = CMakeFiles\\sqlite3.dir\\_deps\\sqlite3-src\n  TARGET_COMPILE_PDB = CMakeFiles\\sqlite3.dir\\\n  TARGET_PDB = sqlite3.pdb\n\nhttps://www.cnblogs.com/mechanicoder/p/16894144.html\n\nMSB3073\n\nhttps://learn.microsoft.com/zh-cn/visualstudio/install/workload-component-id-vs-professional?view=vs-2022\n\n@REM echo Installing Visual Studio 2022...\n@REM curl -L -O https://aka.ms/vs/17/release/vs_community.exe || exit /b\n@REM vs_Community.exe --add Microsoft.VisualStudio.Workload.NativeDesktop Microsoft.VisualStudio.Workload.NativeGame Microsoft.VisualStudio.Workload.ManagedDesktop Microsoft.VisualStudio.Component.Windows10SDK.18362  Microsoft.VisualStudio.Component.VC.CMake.Project Microsoft.Net.ComponentGroup.4.8.1.DeveloperTools Microsoft.VisualStudio.Component.VC.Llvm.Clang Microsoft.VisualStudio.Component.VC.Llvm.ClangToolset Microsoft.VisualStudio.ComponentGroup.NativeDesktop.Llvm.Clang --removeProductLang Es-es --addProductLang En-us --installWhileDownloading --passive --wait\n@REM del vs_community.exe\n@REM curl -L -O https://aka.ms/vs/17/release/vs_professional.exe || exit /b\n@REM vs_Professional.exe --add Microsoft.VisualStudio.Workload.NativeDesktop Microsoft.VisualStudio.Workload.NativeGame Microsoft.VisualStudio.Workload.ManagedDesktop Microsoft.VisualStudio.Component.Windows10SDK.18362  Microsoft.VisualStudio.Component.VC.CMake.Project Microsoft.Net.ComponentGroup.4.8.1.DeveloperTools Microsoft.VisualStudio.Component.VC.Llvm.Clang Microsoft.VisualStudio.Component.VC.Llvm.ClangToolset Microsoft.VisualStudio.ComponentGroup.NativeDesktop.Llvm.Clang --removeProductLang Es-es --addProductLang En-us --installWhileDownloading --passive --wait\n@REM del vs_professional.exe\n@REM echo Visual Studion 2022 Installed!!!\n\nC:\\Carla\\CarlaUE5\\Setup.bat\n\nhttps://blog.csdn.net/weixin_46356818/article/details/121029550 -->"}],"PostAsset":[{"_id":"source/_posts/note-learning-how-to-learn/learning_how_to_learn.png","slug":"learning_how_to_learn.png","post":"clzvf191z000veqwodbuu30tr","modified":1,"renderable":0},{"_id":"source/_posts/note-reinforcement-learning/lec5_Model_Free_Control.png","slug":"lec5_Model_Free_Control.png","post":"clzvf19230011eqwod5y0jaoq","modified":1,"renderable":0},{"_id":"source/_posts/summary-derivative/cnn2.png","slug":"cnn2.png","post":"clzvf192h001qeqwoz7se07e4","modified":1,"renderable":0},{"_id":"source/_posts/note-linear-algebra/linear_algebra.png","slug":"linear_algebra.png","post":"clzvf1921000yeqwod4s8qyy0","modified":1,"renderable":0},{"_id":"source/_posts/summary-rl-drl/ppo_objective.png","post":"clzvf192k001xeqwom1gfasnd","slug":"ppo_objective.png","modified":1,"renderable":1},{"_id":"source/_posts/paper-prioritized-experience-replay/env.png","post":"clzvf1929001aeqwoerh2iq55","slug":"env.png","modified":1,"renderable":1},{"_id":"source/_posts/paper-prioritized-experience-replay/fig.png","post":"clzvf1929001aeqwoerh2iq55","slug":"fig.png","modified":1,"renderable":1},{"_id":"source/_posts/paper-orca/opt.png","post":"clzvf19270016eqwolnapvyjd","slug":"opt.png","modified":1,"renderable":1},{"_id":"source/_posts/paper-orca/orca_app.png","post":"clzvf19270016eqwolnapvyjd","slug":"orca_app.png","modified":1,"renderable":1},{"_id":"source/_posts/paper-orca/orca_sol.png","post":"clzvf19270016eqwolnapvyjd","slug":"orca_sol.png","modified":1,"renderable":1},{"_id":"source/_posts/paper-orca/time_interval.png","post":"clzvf19270016eqwolnapvyjd","slug":"time_interval.png","modified":1,"renderable":1},{"_id":"source/_posts/source-carlaue5-architecture/carla.png","post":"clzvf192e001keqwonw4xqcj0","slug":"carla.png","modified":1,"renderable":1},{"_id":"source/_posts/source-carlaue5-architecture/client.png","slug":"client.png","post":"clzvf192e001keqwonw4xqcj0","modified":1,"renderable":0},{"_id":"source/_posts/source-carlaue5-architecture/pythonapi.png","post":"clzvf192e001keqwonw4xqcj0","slug":"pythonapi.png","modified":1,"renderable":1},{"_id":"source/_posts/source-carlaue5-architecture/server.png","slug":"server.png","post":"clzvf192e001keqwonw4xqcj0","modified":1,"renderable":0},{"_id":"source/_posts/note-essence-of-linear-algrbra/combination.png","post":"clzvf191x000teqwor5v4pmk4","slug":"combination.png","modified":1,"renderable":1},{"_id":"source/_posts/note-essence-of-linear-algrbra/det.png","post":"clzvf191x000teqwor5v4pmk4","slug":"det.png","modified":1,"renderable":1},{"_id":"source/_posts/note-essence-of-linear-algrbra/dot_product_order.png","post":"clzvf191x000teqwor5v4pmk4","slug":"dot_product_order.png","modified":1,"renderable":1},{"_id":"source/_posts/note-essence-of-linear-algrbra/dot_product_projection.png","post":"clzvf191x000teqwor5v4pmk4","slug":"dot_product_projection.png","modified":1,"renderable":1},{"_id":"source/_posts/note-essence-of-linear-algrbra/representation.png","post":"clzvf191x000teqwor5v4pmk4","slug":"representation.png","modified":1,"renderable":1},{"_id":"source/_posts/note-essence-of-linear-algrbra/transformation.png","post":"clzvf191x000teqwor5v4pmk4","slug":"transformation.png","modified":1,"renderable":1},{"_id":"source/_posts/paper-rvo/five_agents.gif","slug":"five_agents.gif","post":"clzvf192b001deqwo96q5li2c","modified":1,"renderable":0},{"_id":"source/_posts/paper-rvo/left_right.png","post":"clzvf192b001deqwo96q5li2c","slug":"left_right.png","modified":1,"renderable":1},{"_id":"source/_posts/paper-rvo/oscillation.png","post":"clzvf192b001deqwo96q5li2c","slug":"oscillation.png","modified":1,"renderable":1},{"_id":"source/_posts/paper-rvo/prob_disc.png","post":"clzvf192b001deqwo96q5li2c","slug":"prob_disc.png","modified":1,"renderable":1},{"_id":"source/_posts/paper-rvo/prob_sol.png","post":"clzvf192b001deqwo96q5li2c","slug":"prob_sol.png","modified":1,"renderable":1},{"_id":"source/_posts/paper-rvo/rvo.png","post":"clzvf192b001deqwo96q5li2c","slug":"rvo.png","modified":1,"renderable":1},{"_id":"source/_posts/paper-rvo/vo.png","post":"clzvf192b001deqwo96q5li2c","slug":"vo.png","modified":1,"renderable":1},{"_id":"source/_posts/summary-derivative/bp1.png","post":"clzvf192h001qeqwoz7se07e4","slug":"bp1.png","modified":1,"renderable":1},{"_id":"source/_posts/summary-derivative/bp2.png","post":"clzvf192h001qeqwoz7se07e4","slug":"bp2.png","modified":1,"renderable":1},{"_id":"source/_posts/summary-derivative/bp3.png","post":"clzvf192h001qeqwoz7se07e4","slug":"bp3.png","modified":1,"renderable":1},{"_id":"source/_posts/summary-derivative/cnn1.png","post":"clzvf192h001qeqwoz7se07e4","slug":"cnn1.png","modified":1,"renderable":1},{"_id":"source/_posts/summary-derivative/rnn.png","post":"clzvf192h001qeqwoz7se07e4","slug":"rnn.png","modified":1,"renderable":1},{"_id":"source/_posts/summary-derivative/softmax.png","post":"clzvf192h001qeqwoz7se07e4","slug":"softmax.png","modified":1,"renderable":1},{"_id":"source/_posts/summary-gps/1.png","post":"clzvf192j001ueqwo9b0ueoan","slug":"1.png","modified":1,"renderable":1},{"_id":"source/_posts/summary-gps/2.png","post":"clzvf192j001ueqwo9b0ueoan","slug":"2.png","modified":1,"renderable":1},{"_id":"source/_posts/summary-gps/3.png","post":"clzvf192j001ueqwo9b0ueoan","slug":"3.png","modified":1,"renderable":1},{"_id":"source/_posts/summary-gps/3_1.png","post":"clzvf192j001ueqwo9b0ueoan","slug":"3_1.png","modified":1,"renderable":1},{"_id":"source/_posts/summary-gps/3_2.png","post":"clzvf192j001ueqwo9b0ueoan","slug":"3_2.png","modified":1,"renderable":1},{"_id":"source/_posts/summary-gps/4.png","post":"clzvf192j001ueqwo9b0ueoan","slug":"4.png","modified":1,"renderable":1},{"_id":"source/_posts/summary-gps/lqr.png","post":"clzvf192j001ueqwo9b0ueoan","slug":"lqr.png","modified":1,"renderable":1},{"_id":"source/_posts/note-reinforcement-learning/lec1_Intro_to_RL.png","post":"clzvf19230011eqwod5y0jaoq","slug":"lec1_Intro_to_RL.png","modified":1,"renderable":1},{"_id":"source/_posts/note-reinforcement-learning/lec2_MDP.png","post":"clzvf19230011eqwod5y0jaoq","slug":"lec2_MDP.png","modified":1,"renderable":1},{"_id":"source/_posts/note-reinforcement-learning/lec3_Planning_by_DP.png","post":"clzvf19230011eqwod5y0jaoq","slug":"lec3_Planning_by_DP.png","modified":1,"renderable":1},{"_id":"source/_posts/note-reinforcement-learning/lec4_Model_Free_Prediction.png","post":"clzvf19230011eqwod5y0jaoq","slug":"lec4_Model_Free_Prediction.png","modified":1,"renderable":1},{"_id":"source/_posts/note-reinforcement-learning/lec6_Value_Function_Approximation.png","post":"clzvf19230011eqwod5y0jaoq","slug":"lec6_Value_Function_Approximation.png","modified":1,"renderable":1},{"_id":"source/_posts/note-reinforcement-learning/lec7_Policy_Gradient.png","post":"clzvf19230011eqwod5y0jaoq","slug":"lec7_Policy_Gradient.png","modified":1,"renderable":1},{"_id":"source/_posts/note-reinforcement-learning/lec8_Integrating_Learning_and_Planning.png","post":"clzvf19230011eqwod5y0jaoq","slug":"lec8_Integrating_Learning_and_Planning.png","modified":1,"renderable":1},{"_id":"source/_posts/note-reinforcement-learning/lec9_Exploration_and_Exploitation.png","post":"clzvf19230011eqwod5y0jaoq","slug":"lec9_Exploration_and_Exploitation.png","modified":1,"renderable":1}],"PostCategory":[{"post_id":"clzvf190j0000eqwo4x5rnktz","category_id":"clzvf190v0003eqwovgfzelqr","_id":"clzvf191g000ceqwocrap6xw4"},{"post_id":"clzvf191c000beqwo8ml7xkus","category_id":"clzvf19170008eqwo4qjdk8wq","_id":"clzvf191o000ieqwozrgvkmwk"},{"post_id":"clzvf190s0002eqwoq82gsteh","category_id":"clzvf19170008eqwo4qjdk8wq","_id":"clzvf191r000meqwo648o0qh6"},{"post_id":"clzvf190z0005eqwoib78amfq","category_id":"clzvf19170008eqwo4qjdk8wq","_id":"clzvf191v000qeqwoa201hjh3"},{"post_id":"clzvf19120006eqwoa5tsl4g7","category_id":"clzvf19170008eqwo4qjdk8wq","_id":"clzvf1920000weqwobnf00q8z"},{"post_id":"clzvf19160007eqwo6za4exy6","category_id":"clzvf19170008eqwo4qjdk8wq","_id":"clzvf19240012eqwo5bbptyqw"},{"post_id":"clzvf191g000deqwobf58k69b","category_id":"clzvf1920000xeqwof1lqngvg","_id":"clzvf19280018eqwomy80hq9z"},{"post_id":"clzvf19250014eqwofyyfgerk","category_id":"clzvf1920000xeqwof1lqngvg","_id":"clzvf192b001ceqwo3g9s9b4w"},{"post_id":"clzvf191n000geqwo1a4ji40i","category_id":"clzvf19240013eqwoestr1vom","_id":"clzvf192c001feqwoxeze0uty"},{"post_id":"clzvf19270016eqwolnapvyjd","category_id":"clzvf1920000xeqwof1lqngvg","_id":"clzvf192e001ieqwooqa0um97"},{"post_id":"clzvf1929001aeqwoerh2iq55","category_id":"clzvf1920000xeqwof1lqngvg","_id":"clzvf192g001meqwoicpssai4"},{"post_id":"clzvf191p000jeqwozxlcc8ad","category_id":"clzvf19240013eqwoestr1vom","_id":"clzvf192h001peqwoedvzsd29"},{"post_id":"clzvf192b001deqwo96q5li2c","category_id":"clzvf1920000xeqwof1lqngvg","_id":"clzvf192j001seqwof7gxuq69"},{"post_id":"clzvf192d001heqwo26yc4qn3","category_id":"clzvf1920000xeqwof1lqngvg","_id":"clzvf192k001weqwor29libzn"},{"post_id":"clzvf191r000neqwodwng1z1c","category_id":"clzvf19240013eqwoestr1vom","_id":"clzvf192m001zeqwo4kei9nf9"},{"post_id":"clzvf191t000peqwoo01uu11x","category_id":"clzvf192g001neqwopkn8vv7k","_id":"clzvf192o0023eqwo0viitva7"},{"post_id":"clzvf191x000teqwor5v4pmk4","category_id":"clzvf192j001veqwob3q8wppv","_id":"clzvf192q0027eqwot8iwajif"},{"post_id":"clzvf191z000veqwodbuu30tr","category_id":"clzvf192j001veqwob3q8wppv","_id":"clzvf192t002deqwon9ljt691"},{"post_id":"clzvf1921000yeqwod4s8qyy0","category_id":"clzvf192j001veqwob3q8wppv","_id":"clzvf192v002geqwo4b0p4qq5"},{"post_id":"clzvf19230011eqwod5y0jaoq","category_id":"clzvf192j001veqwob3q8wppv","_id":"clzvf192w002keqwode5g8s5d"},{"post_id":"clzvf192e001keqwonw4xqcj0","category_id":"clzvf192v002ieqwoeg8wgjhp","_id":"clzvf192y002oeqwoam8m2bby"},{"post_id":"clzvf192g001oeqwojmkhperx","category_id":"clzvf192v002ieqwoeg8wgjhp","_id":"clzvf192z002seqwo4bhp8rfe"},{"post_id":"clzvf192h001qeqwoz7se07e4","category_id":"clzvf192y002peqwo8cf339nl","_id":"clzvf1931002veqwosbl859vc"},{"post_id":"clzvf192j001ueqwo9b0ueoan","category_id":"clzvf192y002peqwo8cf339nl","_id":"clzvf1936002zeqwool9w1c6e"},{"post_id":"clzvf192k001xeqwom1gfasnd","category_id":"clzvf192y002peqwo8cf339nl","_id":"clzvf19370034eqwoshn1f4sf"},{"post_id":"clzvf192m0020eqwoj3zjysjt","category_id":"clzvf19360030eqwozsf9bhwy","_id":"clzvf193a0038eqwogk5olpmr"},{"post_id":"clzvf192o0024eqwoyxd6pbvq","category_id":"clzvf19360030eqwozsf9bhwy","_id":"clzvf193c003beqwon4wr6xma"},{"post_id":"clzvf192p0026eqwoc9y7tmqf","category_id":"clzvf19360030eqwozsf9bhwy","_id":"clzvf193d003eeqwo00mghw51"},{"post_id":"clzvf192r002aeqwoyvqy18hr","category_id":"clzvf19360030eqwozsf9bhwy","_id":"clzvf193h003jeqwo0v495fav"},{"post_id":"clzvf192s002ceqwoh7c2ce4e","category_id":"clzvf19360030eqwozsf9bhwy","_id":"clzvf193i003meqwo56i0a327"}],"PostTag":[{"post_id":"clzvf190j0000eqwo4x5rnktz","tag_id":"clzvf190y0004eqwo3hzcpv0f","_id":"clzvf191b000aeqwomkbvubqn"},{"post_id":"clzvf190s0002eqwoq82gsteh","tag_id":"clzvf19170009eqwojmy9yrwy","_id":"clzvf191o000heqwo49ljseb2"},{"post_id":"clzvf190z0005eqwoib78amfq","tag_id":"clzvf191i000feqwoxed8qs8d","_id":"clzvf191t000oeqwoku6ljjz7"},{"post_id":"clzvf19120006eqwoa5tsl4g7","tag_id":"clzvf191r000leqwo0iav9bp3","_id":"clzvf191y000ueqwojbkpqtw9"},{"post_id":"clzvf19160007eqwo6za4exy6","tag_id":"clzvf191w000seqwocq8qbldc","_id":"clzvf19230010eqwoz626bfd5"},{"post_id":"clzvf191c000beqwo8ml7xkus","tag_id":"clzvf1922000zeqwo0xg0zkqp","_id":"clzvf19270017eqwoh5fsd8ic"},{"post_id":"clzvf191g000deqwobf58k69b","tag_id":"clzvf19260015eqwol19s7ixw","_id":"clzvf192c001eeqwo5hha0885"},{"post_id":"clzvf191n000geqwo1a4ji40i","tag_id":"clzvf192a001beqwoqrcifcr4","_id":"clzvf192f001leqwo62emst1r"},{"post_id":"clzvf191p000jeqwozxlcc8ad","tag_id":"clzvf192e001jeqwovchhz56m","_id":"clzvf192j001teqwoklj1jciz"},{"post_id":"clzvf191r000neqwodwng1z1c","tag_id":"clzvf192i001reqwobabpezm4","_id":"clzvf192n0021eqwok2mmsj83"},{"post_id":"clzvf191t000peqwoo01uu11x","tag_id":"clzvf192l001yeqwo1p05w96p","_id":"clzvf192q0029eqwo60tenhjb"},{"post_id":"clzvf191x000teqwor5v4pmk4","tag_id":"clzvf192p0025eqwoohkudkzo","_id":"clzvf192u002feqwolax4jlhw"},{"post_id":"clzvf191z000veqwodbuu30tr","tag_id":"clzvf192s002beqwoqa5j42oc","_id":"clzvf192v002jeqworgfjiay2"},{"post_id":"clzvf1921000yeqwod4s8qyy0","tag_id":"clzvf192v002heqwo7yucbz8x","_id":"clzvf192x002neqwosbb5nspt"},{"post_id":"clzvf19230011eqwod5y0jaoq","tag_id":"clzvf192w002leqwoz4ue4kz8","_id":"clzvf192y002reqwoti3msq6f"},{"post_id":"clzvf19250014eqwofyyfgerk","tag_id":"clzvf192y002qeqwovd61ut61","_id":"clzvf1935002yeqwo6akjsnvy"},{"post_id":"clzvf19250014eqwofyyfgerk","tag_id":"clzvf1930002ueqwohqv6okov","_id":"clzvf19360031eqwo68f3v2no"},{"post_id":"clzvf19270016eqwolnapvyjd","tag_id":"clzvf1932002xeqwo50qhe9b7","_id":"clzvf19370033eqwoo6pmu97o"},{"post_id":"clzvf1929001aeqwoerh2iq55","tag_id":"clzvf19370032eqwo341lnabw","_id":"clzvf193a0037eqwozkog3d9u"},{"post_id":"clzvf192b001deqwo96q5li2c","tag_id":"clzvf19390036eqwohuovphlp","_id":"clzvf193f003feqwoi4cup7jy"},{"post_id":"clzvf192b001deqwo96q5li2c","tag_id":"clzvf193b003aeqwoi1yfkvb2","_id":"clzvf193g003heqwolo4pg8j4"},{"post_id":"clzvf192d001heqwo26yc4qn3","tag_id":"clzvf193d003deqwozlckfnuu","_id":"clzvf193h003keqwoaj54ydj9"},{"post_id":"clzvf192e001keqwonw4xqcj0","tag_id":"clzvf193h003ieqwo8310wvxy","_id":"clzvf193i003neqwo18srihuu"},{"post_id":"clzvf192g001oeqwojmkhperx","tag_id":"clzvf193i003leqwoh6c6792i","_id":"clzvf193j003peqwoqyab9puu"},{"post_id":"clzvf192h001qeqwoz7se07e4","tag_id":"clzvf193i003oeqwojrkq360i","_id":"clzvf193m003weqwowfyepuu2"},{"post_id":"clzvf192h001qeqwoz7se07e4","tag_id":"clzvf193j003qeqwock4y4qqo","_id":"clzvf193m003xeqwoskzqju79"},{"post_id":"clzvf192h001qeqwoz7se07e4","tag_id":"clzvf193k003reqwosh6xbv1o","_id":"clzvf193n003zeqwovml7xl3o"},{"post_id":"clzvf192h001qeqwoz7se07e4","tag_id":"clzvf193l003seqwoh0l4chsc","_id":"clzvf193n0040eqwo7pbnb2ik"},{"post_id":"clzvf192h001qeqwoz7se07e4","tag_id":"clzvf193l003teqwo1tzbount","_id":"clzvf193o0042eqwouhoo1t9h"},{"post_id":"clzvf192h001qeqwoz7se07e4","tag_id":"clzvf193m003ueqwojs9t7yyq","_id":"clzvf193o0043eqworf62srte"},{"post_id":"clzvf192j001ueqwo9b0ueoan","tag_id":"clzvf193m003veqwo7zezf8ik","_id":"clzvf193p0045eqwoz8snphr6"},{"post_id":"clzvf192j001ueqwo9b0ueoan","tag_id":"clzvf193n003yeqwo9m4atl8q","_id":"clzvf193p0046eqwoxja4xcjx"},{"post_id":"clzvf192k001xeqwom1gfasnd","tag_id":"clzvf192w002leqwoz4ue4kz8","_id":"clzvf193r004eeqworxnqlsdb"},{"post_id":"clzvf192k001xeqwom1gfasnd","tag_id":"clzvf193o0044eqwoy0qvc8py","_id":"clzvf193r004feqwose8y30mu"},{"post_id":"clzvf192k001xeqwom1gfasnd","tag_id":"clzvf193p0047eqwols1kxano","_id":"clzvf193s004heqwott9934mm"},{"post_id":"clzvf192k001xeqwom1gfasnd","tag_id":"clzvf193p0048eqwowaz1rdqd","_id":"clzvf193s004ieqwol6ujpu72"},{"post_id":"clzvf192k001xeqwom1gfasnd","tag_id":"clzvf193p0049eqwo6d96hdny","_id":"clzvf193t004keqwo2xdzeb4y"},{"post_id":"clzvf192k001xeqwom1gfasnd","tag_id":"clzvf193q004aeqwocc911760","_id":"clzvf193t004leqwokpf5v99f"},{"post_id":"clzvf192k001xeqwom1gfasnd","tag_id":"clzvf193q004beqwofyjhcrm8","_id":"clzvf193u004neqwovflymqiq"},{"post_id":"clzvf192k001xeqwom1gfasnd","tag_id":"clzvf193q004ceqwo3gs7m1mj","_id":"clzvf193u004oeqwo2x90solv"},{"post_id":"clzvf192m0020eqwoj3zjysjt","tag_id":"clzvf193r004deqwo3x9sm2a6","_id":"clzvf193u004peqwoedl0fix5"},{"post_id":"clzvf192o0024eqwoyxd6pbvq","tag_id":"clzvf193s004geqwo8lw3cfdi","_id":"clzvf193v004reqwoc6l6x6eu"},{"post_id":"clzvf192p0026eqwoc9y7tmqf","tag_id":"clzvf193s004jeqwo9h047zf0","_id":"clzvf193v004seqwoeyo3rcyv"},{"post_id":"clzvf192r002aeqwoyvqy18hr","tag_id":"clzvf193u004meqwoyumof0d9","_id":"clzvf193v004teqwo2mbh8yks"},{"post_id":"clzvf192s002ceqwoh7c2ce4e","tag_id":"clzvf193h003ieqwo8310wvxy","_id":"clzvf193v004ueqwoqli6g2x7"}],"Tag":[{"name":"caffe","_id":"clzvf190y0004eqwo3hzcpv0f"},{"name":"caffe","_id":"clzvf19170009eqwojmy9yrwy"},{"name":"rnn","_id":"clzvf191i000feqwoxed8qs8d"},{"name":"s2vt data","_id":"clzvf191r000leqwo0iav9bp3"},{"name":"lstm","_id":"clzvf191w000seqwocq8qbldc"},{"name":"s2vt_captioner","_id":"clzvf1922000zeqwo0xg0zkqp"},{"name":"AlexNet","_id":"clzvf19260015eqwol19s7ixw"},{"name":"","_id":"clzvf192a001beqwoqrcifcr4"},{"name":"","_id":"clzvf192e001jeqwovchhz56m"},{"name":"","_id":"clzvf192i001reqwobabpezm4"},{"name":"A Tour of C++","_id":"clzvf192l001yeqwo1p05w96p"},{"name":"","_id":"clzvf192p0025eqwoohkudkzo"},{"name":"","_id":"clzvf192s002beqwoqa5j42oc"},{"name":"","_id":"clzvf192v002heqwo7yucbz8x"},{"name":"","_id":"clzvf192w002leqwoz4ue4kz8"},{"name":"K-FAC","_id":"clzvf192y002qeqwovd61ut61"},{"name":"ACKTR","_id":"clzvf1930002ueqwohqv6okov"},{"name":"ORCA","_id":"clzvf1932002xeqwo50qhe9b7"},{"name":"Prioritized Experience Replay","_id":"clzvf19370032eqwo341lnabw"},{"name":"VO(Velocity Obstacle)","_id":"clzvf19390036eqwohuovphlp"},{"name":"RVO(Reciprocal Velocity Obstacle)","_id":"clzvf193b003aeqwoi1yfkvb2"},{"name":"rcnn","_id":"clzvf193d003deqwozlckfnuu"},{"name":"CarlaUE5","_id":"clzvf193h003ieqwo8310wvxy"},{"name":"pytorch-ppo","_id":"clzvf193i003leqwoh6c6792i"},{"name":"derivative","_id":"clzvf193i003oeqwojrkq360i"},{"name":"softmax","_id":"clzvf193j003qeqwock4y4qqo"},{"name":"backpropagation","_id":"clzvf193k003reqwosh6xbv1o"},{"name":"cnn","_id":"clzvf193l003seqwoh0l4chsc"},{"name":"bptt","_id":"clzvf193l003teqwo1tzbount"},{"name":"max pooling","_id":"clzvf193m003ueqwojs9t7yyq"},{"name":"Guided Policy Search","_id":"clzvf193m003veqwo7zezf8ik"},{"name":"GPS","_id":"clzvf193n003yeqwo9m4atl8q"},{"name":"","_id":"clzvf193o0044eqwoy0qvc8py"},{"name":"GAE","_id":"clzvf193p0047eqwols1kxano"},{"name":"A3C","_id":"clzvf193p0048eqwowaz1rdqd"},{"name":"DPG","_id":"clzvf193p0049eqwo6d96hdny"},{"name":"DDPG","_id":"clzvf193q004aeqwocc911760"},{"name":"TRPO","_id":"clzvf193q004beqwofyjhcrm8"},{"name":"PPO","_id":"clzvf193q004ceqwo3gs7m1mj"},{"name":"Gym","_id":"clzvf193r004deqwo3x9sm2a6"},{"name":"Ubuntu USB","_id":"clzvf193s004geqwo8lw3cfdi"},{"name":"Ubuntu to Go","_id":"clzvf193s004jeqwo9h047zf0"},{"name":"Vim","_id":"clzvf193u004meqwoyumof0d9"}]}}